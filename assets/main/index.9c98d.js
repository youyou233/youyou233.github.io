window.__require=function e(t,n,i){function a(r,l){if(!n[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var c="function"==typeof __require&&__require;if(!l&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){return a(t[r][1][e]||e)},d,d.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<i.length;r++)a(i[r]);return a}({ATAndroidBannerJS:[function(e,t){"use strict";cc._RF.push(t,"1601dHGUOtDP4O03i9FH1W9","ATAndroidBannerJS");var n="com/anythink/cocosjs/ATBannerJSBridge",i=i||{loadBanner:function(e,t){cc.log("Android-loadBanner:"+t),jsb.reflection.callStaticMethod(n,"load","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},setAdListener:function(e){cc.log("Android-setAdListener"),jsb.reflection.callStaticMethod(n,"setAdListener","(Ljava/lang/String;)V",e)},hasAdReady:function(e){return cc.log("Android-hasAdReady"),jsb.reflection.callStaticMethod(n,"isAdReady","(Ljava/lang/String;)Z",e)},checkAdStatus:function(e){return cc.log("Android-checkAdStatus:"+e),jsb.reflection.callStaticMethod(n,"checkAdStatus","(Ljava/lang/String;)Ljava/lang/String;",e)},showAdInPosition:function(e,t){cc.log("Android-showAdInPosistion"),jsb.reflection.callStaticMethod(n,"showWithPosition","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,t,"")},showAdInPositionAndScenario:function(e,t,i){cc.log("Android-showAdInPositionAndScenario"),jsb.reflection.callStaticMethod(n,"showWithPosition","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,t,i)},showAdInRectangle:function(e,t){cc.log("Android-showAdInRectangle"),jsb.reflection.callStaticMethod(n,"showWithRect","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,t,"")},showAdInRectangleAndScenario:function(e,t,i){cc.log("Android-showAdInRectangleAndScenario"),jsb.reflection.callStaticMethod(n,"showWithRect","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,t,i)},removeAd:function(e){cc.log("Android-removeAd"),jsb.reflection.callStaticMethod(n,"remove","(Ljava/lang/String;)V",e)},reShowAd:function(e){cc.log("Android-reShowAd"),jsb.reflection.callStaticMethod(n,"reshow","(Ljava/lang/String;)V",e)},hideAd:function(e){cc.log("Android-hideAd"),jsb.reflection.callStaticMethod(n,"hide","(Ljava/lang/String;)V",e)}};t.exports=i,cc._RF.pop()},{}],ATAndroidInterstitialAutoAdJS:[function(e,t){"use strict";cc._RF.push(t,"ddbc5cC60hGEKOKjKHGn/aQ","ATAndroidInterstitialAutoAdJS");var n="com/anythink/cocosjs/ATInterstitialAutoAdJSBridge",i=i||{setAdListener:function(e){cc.log("Android-setAdListener"),jsb.reflection.callStaticMethod(n,"setAdListener","(Ljava/lang/String;)V",e)},addPlacementIds:function(e){cc.log("Android-addPlacementIds"),jsb.reflection.callStaticMethod(n,"addPlacementIds","(Ljava/lang/String;)V",e)},removePlacementId:function(e){cc.log("Android-removePlacementId"),jsb.reflection.callStaticMethod(n,"removePlacementId","(Ljava/lang/String;)V",e)},setAdExtraData:function(e,t){cc.log("Android-setAdExtraData"),jsb.reflection.callStaticMethod(n,"setAdExtraData","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},hasAdReady:function(e){return cc.log("Android-hasAdReady"),jsb.reflection.callStaticMethod(n,"isAdReady","(Ljava/lang/String;)Z",e)},checkAdStatus:function(e){return cc.log("Android-checkAdStatus:"+e),jsb.reflection.callStaticMethod(n,"checkAdStatus","(Ljava/lang/String;)Ljava/lang/String;",e)},showAd:function(e){cc.log("Android-ivautoad_showAd:"+e),jsb.reflection.callStaticMethod(n,"show","(Ljava/lang/String;)V",e)},showAdInScenario:function(e,t){cc.log("Android-ivautoad_showAdInScenario:"+e+"---"+t),jsb.reflection.callStaticMethod(n,"show","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},entryAdScenario:function(e,t){cc.log("Android-entryAdScenario:"+e+"---"+t),jsb.reflection.callStaticMethod(n,"entryAdScenario","(Ljava/lang/String;Ljava/lang/String;)V",e,t)}};t.exports=i,cc._RF.pop()},{}],ATAndroidInterstitialJS:[function(e,t){"use strict";cc._RF.push(t,"939b6CvOFxG/p88fr/Q5IRa","ATAndroidInterstitialJS");var n="com/anythink/cocosjs/ATInterstitialJSBridge",i=i||{loadInterstitial:function(e,t){cc.log("Android-loadInterstitial"),jsb.reflection.callStaticMethod(n,"load","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},setAdListener:function(e){cc.log("Android-setAdListener"),jsb.reflection.callStaticMethod(n,"setAdListener","(Ljava/lang/String;)V",e)},hasAdReady:function(e){return cc.log("Android-hasAdReady"),jsb.reflection.callStaticMethod(n,"isAdReady","(Ljava/lang/String;)Z",e)},checkAdStatus:function(e){return cc.log("Android-checkAdStatus:"+e),jsb.reflection.callStaticMethod(n,"checkAdStatus","(Ljava/lang/String;)Ljava/lang/String;",e)},showAd:function(e){cc.log("Android-showAd:"+e),jsb.reflection.callStaticMethod(n,"show","(Ljava/lang/String;)V",e)},showAdInScenario:function(e,t){cc.log("Android-showAdInScenario:"+e+"---"+t),jsb.reflection.callStaticMethod(n,"show","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},entryAdScenario:function(e,t){cc.log("Android-entryAdScenario:"+e+"---"+t),jsb.reflection.callStaticMethod(n,"entryAdScenario","(Ljava/lang/String;Ljava/lang/String;)V",e,t)}};t.exports=i,cc._RF.pop()},{}],ATAndroidJS:[function(e,t){"use strict";cc._RF.push(t,"35d37K1AE5CsIoVCgwHWa28","ATAndroidJS");var n="com/anythink/cocosjs/ATJSBridge",i=i||{printJsLog:function(e){null!=e&&null!=e&&jsb.reflection.callStaticMethod("android/util/Log","i","(Ljava/lang/String;Ljava/lang/String;)I","AT-Cocos-JS",e)},initSDK:function(e,t){jsb.reflection.callStaticMethod(n,"initSDK","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},initCustomMap:function(e){jsb.reflection.callStaticMethod(n,"initCustomMap","(Ljava/lang/String;)V",e)},setPlacementCustomMap:function(e,t){jsb.reflection.callStaticMethod(n,"setPlacementCustomMap","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},setGDPRLevel:function(e){jsb.reflection.callStaticMethod(n,"setGDPRLevel","(I)V",e)},getGDPRLevel:function(){return jsb.reflection.callStaticMethod(n,"getGDPRLevel","()I")},getUserLocation:function(e){jsb.reflection.callStaticMethod(n,"getUserLocation","(Ljava/lang/String;)V",e)},showGDPRAuth:function(){jsb.reflection.callStaticMethod(n,"showGDPRAuth","()V")},setLogDebug:function(e){jsb.reflection.callStaticMethod(n,"setLogDebug","(Z)V",e)},deniedUploadDeviceInfo:function(e){jsb.reflection.callStaticMethod(n,"deniedUploadDeviceInfo","(Ljava/lang/String;)V",e)}};t.exports=i,cc._RF.pop()},{}],ATAndroidNativeJS:[function(e,t){"use strict";cc._RF.push(t,"f8c38OsjCVMeLVcdba0pKfZ","ATAndroidNativeJS");var n="com/anythink/cocosjs/ATNativeJSBridge",i=i||{loadNative:function(e,t){cc.log("Android-loadNative"),jsb.reflection.callStaticMethod(n,"load","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},setAdListener:function(e){cc.log("Android-setAdListener"),jsb.reflection.callStaticMethod(n,"setAdListener","(Ljava/lang/String;)V",e)},hasAdReady:function(e){return cc.log("Android-hasAdReady"),jsb.reflection.callStaticMethod(n,"isAdReady","(Ljava/lang/String;)Z",e)},checkAdStatus:function(e){return cc.log("Android-checkAdStatus:"+e),jsb.reflection.callStaticMethod(n,"checkAdStatus","(Ljava/lang/String;)Ljava/lang/String;",e)},showAd:function(e,t){cc.log("Android-showAd"),jsb.reflection.callStaticMethod(n,"show","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,t,"")},showAdInScenario:function(e,t,i){cc.log("Android-showAdInScenario"),jsb.reflection.callStaticMethod(n,"show","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,t,i)},removeAd:function(e){cc.log("Android-removeAd"),jsb.reflection.callStaticMethod(n,"remove","(Ljava/lang/String;)V",e)},entryAdScenario:function(e,t){cc.log("Android-entryAdScenario:"+e+"---"+t),jsb.reflection.callStaticMethod(n,"entryAdScenario","(Ljava/lang/String;Ljava/lang/String;)V",e,t)}};t.exports=i,cc._RF.pop()},{}],ATAndroidRewardedVideoAutoAdJS:[function(e,t){"use strict";cc._RF.push(t,"5bcadblhaxBHZMintnIBYjl","ATAndroidRewardedVideoAutoAdJS");var n="com/anythink/cocosjs/ATRewardedVideoAutoAdJSBridge",i=i||{setAdListener:function(e){cc.log("Android-setAdListener"),jsb.reflection.callStaticMethod(n,"setAdListener","(Ljava/lang/String;)V",e)},addPlacementIds:function(e){cc.log("Android-addPlacementIds"),jsb.reflection.callStaticMethod(n,"addPlacementIds","(Ljava/lang/String;)V",e)},removePlacementId:function(e){cc.log("Android-removePlacementId"),jsb.reflection.callStaticMethod(n,"removePlacementId","(Ljava/lang/String;)V",e)},setAdExtraData:function(e,t){cc.log("Android-setAdExtraData"),jsb.reflection.callStaticMethod(n,"setAdExtraData","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},hasAdReady:function(e){return cc.log("Android-hasAdReady"),jsb.reflection.callStaticMethod(n,"isAdReady","(Ljava/lang/String;)Z",e)},checkAdStatus:function(e){return cc.log("Android-checkAdStatus:"+e),jsb.reflection.callStaticMethod(n,"checkAdStatus","(Ljava/lang/String;)Ljava/lang/String;",e)},showAd:function(e){cc.log("Android-rvautoad_showAd:"+e),jsb.reflection.callStaticMethod(n,"show","(Ljava/lang/String;)V",e)},showAdInScenario:function(e,t){cc.log("Android-rvautoad_showAdInScenario:"+e+"---"+t),jsb.reflection.callStaticMethod(n,"show","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},entryAdScenario:function(e,t){cc.log("Android-entryAdScenario:"+e+"---"+t),jsb.reflection.callStaticMethod(n,"entryAdScenario","(Ljava/lang/String;Ljava/lang/String;)V",e,t)}};t.exports=i,cc._RF.pop()},{}],ATAndroidRewardedVideoJS:[function(e,t){"use strict";cc._RF.push(t,"9f507NHb21OJpByfawZnBZy","ATAndroidRewardedVideoJS");var n="com/anythink/cocosjs/ATRewardedVideoJSBridge",i=i||{loadRewardedVideo:function(e,t){cc.log("Android-loadRewardedVideo"),jsb.reflection.callStaticMethod(n,"load","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},setAdListener:function(e){cc.log("Android-setAdListener"),jsb.reflection.callStaticMethod(n,"setAdListener","(Ljava/lang/String;)V",e)},hasAdReady:function(e){return cc.log("Android-hasAdReady"),jsb.reflection.callStaticMethod(n,"isAdReady","(Ljava/lang/String;)Z",e)},checkAdStatus:function(e){return cc.log("Android-checkAdStatus:"+e),jsb.reflection.callStaticMethod(n,"checkAdStatus","(Ljava/lang/String;)Ljava/lang/String;",e)},showAd:function(e){cc.log("Android-rv_showAd:"+e),jsb.reflection.callStaticMethod(n,"show","(Ljava/lang/String;)V",e)},showAdInScenario:function(e,t){cc.log("Android-rv_showAdInScenario:"+e+"---"+t),jsb.reflection.callStaticMethod(n,"show","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},entryAdScenario:function(e,t){cc.log("Android-entryAdScenario:"+e+"---"+t),jsb.reflection.callStaticMethod(n,"entryAdScenario","(Ljava/lang/String;Ljava/lang/String;)V",e,t)}};t.exports=i,cc._RF.pop()},{}],ATBannerJSSDK:[function(e,t){"use strict";cc._RF.push(t,"8688ava9fVBa6NYvcWIlOKK","ATBannerJSSDK");var n=e("./Android/ATAndroidBannerJS"),i=e("./iOS/ATiOSBannerJS"),a=cc.sys.os===cc.sys.OS_IOS?i:cc.sys.os===cc.sys.OS_ANDROID?n:void 0,o=o||{kATBannerAdLoadingExtraBannerAdSizeStruct:"banner_ad_size_struct",kATBannerAdShowingPositionTop:"top",kATBannerAdShowingPositionBottom:"bottom",kATBannerAdInlineAdaptiveWidth:"inline_adaptive_width",kATBannerAdInlineAdaptiveOrientation:"inline_adaptive_orientation",kATBannerAdInlineAdaptiveOrientationCurrent:0,kATBannerAdInlineAdaptiveOrientationPortrait:1,kATBannerAdInlineAdaptiveOrientationLandscape:2,kATBannerAdAdaptiveWidth:"adaptive_width",kATBannerAdAdaptiveOrientation:"adaptive_orientation",kATBannerAdAdaptiveOrientationCurrent:0,kATBannerAdAdaptiveOrientationPortrait:1,kATBannerAdAdaptiveOrientationLandscape:2,ATBannerListener:{developerCallback:null,onBannerAdLoaded:function(e){null!=this.developerCallback&&null!=this.developerCallback.onBannerAdLoaded&&null!=this.developerCallback.onBannerAdLoaded&&this.developerCallback.onBannerAdLoaded(e)},onBannerAdLoadFail:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onBannerAdLoadFail&&null!=this.developerCallback.onBannerAdLoadFail&&this.developerCallback.onBannerAdLoadFail(e,t)},onBannerAdShow:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onBannerAdShow&&null!=this.developerCallback.onBannerAdShow&&this.developerCallback.onBannerAdShow(e,t)},onBannerAdClick:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onBannerAdClick&&null!=this.developerCallback.onBannerAdClick&&this.developerCallback.onBannerAdClick(e,t)},onBannerAdAutoRefresh:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onBannerAdAutoRefresh&&null!=this.developerCallback.onBannerAdAutoRefresh&&this.developerCallback.onBannerAdAutoRefresh(e,t)},onBannerAdAutoRefreshFail:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onBannerAdAutoRefreshFail&&null!=this.developerCallback.onBannerAdAutoRefreshFail&&this.developerCallback.onBannerAdAutoRefreshFail(e,t)},onBannerAdCloseButtonTapped:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onBannerAdCloseButtonTapped&&null!=this.developerCallback.onBannerAdCloseButtonTapped&&this.developerCallback.onBannerAdCloseButtonTapped(e,t)},onAdSourceBiddingAttempt:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingAttempt&&null!=this.developerCallback.onAdSourceBiddingAttempt&&this.developerCallback.onAdSourceBiddingAttempt(e,t)},onAdSourceBiddingFilled:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingFilled&&null!=this.developerCallback.onAdSourceBiddingFilled&&this.developerCallback.onAdSourceBiddingFilled(e,t)},onAdSourceBiddingFail:function(e,t,n){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingFail&&null!=this.developerCallback.onAdSourceBiddingFail&&this.developerCallback.onAdSourceBiddingFail(e,t,n)},onAdSourceAttemp:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceAttemp&&null!=this.developerCallback.onAdSourceAttemp&&this.developerCallback.onAdSourceAttemp(e,t)},onAdSourceLoadFilled:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceLoadFilled&&null!=this.developerCallback.onAdSourceLoadFilled&&this.developerCallback.onAdSourceLoadFilled(e,t)},onAdSourceLoadFail:function(e,t,n){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceLoadFail&&null!=this.developerCallback.onAdSourceLoadFail&&this.developerCallback.onAdSourceLoadFail(e,t,n)}},loadBanner:function(e,t){if(void 0===t&&(t={}),null!=a&&null!=a){if(t.hasOwnProperty(o.kATBannerAdLoadingExtraBannerAdSizeStruct)){var n=t[o.kATBannerAdLoadingExtraBannerAdSizeStruct];t.width=n.width,t.height=n.height}a.loadBanner(e,JSON.stringify(t))}else cc.log("You must run on Android or iOS.")},setAdListener:function(e){var t={};t[r]="ATBannerJSSDK.ATBannerListener.onBannerAdLoaded",t[l]="ATBannerJSSDK.ATBannerListener.onBannerAdLoadFail",t[s]="ATBannerJSSDK.ATBannerListener.onBannerAdCloseButtonTapped",t[c]="ATBannerJSSDK.ATBannerListener.onBannerAdClick",t[d]="ATBannerJSSDK.ATBannerListener.onBannerAdShow",t[u]="ATBannerJSSDK.ATBannerListener.onBannerAdAutoRefresh",t[h]="ATBannerJSSDK.ATBannerListener.onBannerAdAutoRefreshFail",t[p]="ATBannerJSSDK.ATBannerListener.onAdSourceBiddingAttempt",t[f]="ATBannerJSSDK.ATBannerListener.onAdSourceBiddingFilled",t[m]="ATBannerJSSDK.ATBannerListener.onAdSourceBiddingFail",t[g]="ATBannerJSSDK.ATBannerListener.onAdSourceAttemp",t[_]="ATBannerJSSDK.ATBannerListener.onAdSourceLoadFilled",t[v]="ATBannerJSSDK.ATBannerListener.onAdSourceLoadFail",null!=a&&null!=a?a.setAdListener(JSON.stringify(t)):cc.log("You must run on Android or iOS."),this.ATBannerListener.developerCallback=e},hasAdReady:function(e){return null!=a&&null!=a?a.hasAdReady(e):(cc.log("You must run on Android or iOS."),!1)},checkAdStatus:function(e){return null!=a&&null!=a?a.checkAdStatus(e):(cc.log("You must run on Android or iOS."),"")},showAdInPosition:function(e,t){null!=a&&null!=a?a.showAdInPosition(e,t):cc.log("You must run on Android or iOS.")},showAdInPositionAndScenario:function(e,t,n){null!=a&&null!=a?a.showAdInPosition(e,t,n):cc.log("You must run on Android or iOS.")},showAdInRectangle:function(e,t){null!=a&&null!=a?a.showAdInRectangle(e,JSON.stringify(t)):cc.log("You must run on Android or iOS.")},showAdInRectangleAndScenario:function(e,t,n){null!=a&&null!=a?a.showAdInRectangle(e,JSON.stringify(t),n):cc.log("You must run on Android or iOS.")},removeAd:function(e){null!=a&&null!=a?a.removeAd(e):cc.log("You must run on Android or iOS.")},reShowAd:function(e){null!=a&&null!=a?a.reShowAd(e):cc.log("You must run on Android or iOS.")},hideAd:function(e){null!=a&&null!=a?a.hideAd(e):cc.log("You must run on Android or iOS.")},createLoadAdSize:function(e,t){var n={};return n.width=e,n.height=t,n},createShowAdRect:function(e,t,n,i){var a={};return a.x=e,a.y=t,a.width=n,a.height=i,a}},r="BannerLoaded",l="BannerLoadFail",s="BannerCloseButtonTapped",c="BannerClick",d="BannerShow",u="BannerRefresh",h="BannerRefreshFail",p="BannerBiddingAttempt",f="BannerBiddingFilled",m="BannerBiddingFail",g="BannerAttemp",_="BannerLoadFilled",v="BannerLoadFail";window.ATBannerJSSDK=o,cc._RF.pop()},{"./Android/ATAndroidBannerJS":"ATAndroidBannerJS","./iOS/ATiOSBannerJS":"ATiOSBannerJS"}],ATInterstitialAutoAdJSSDK:[function(e,t){"use strict";cc._RF.push(t,"e40a97NZ1lFcbnLJBj+IEbN","ATInterstitialAutoAdJSSDK");var n=e("./Android/ATAndroidInterstitialAutoAdJS"),i=e("./iOS/ATiOSInterstitialAutoAdJS"),a=cc.sys.os===cc.sys.OS_IOS?i:cc.sys.os===cc.sys.OS_ANDROID?n:void 0,o=o||{UseInterstitialAsInterstitial:"UseInterstitialAsInterstitial",ATInterstitialListener:{developerCallback:null,onInterstitialAdLoaded:function(e){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdLoaded&&null!=this.developerCallback.onInterstitialAdLoaded&&this.developerCallback.onInterstitialAdLoaded(e)},onInterstitialAdLoadFail:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdLoadFail&&null!=this.developerCallback.onInterstitialAdLoadFail&&this.developerCallback.onInterstitialAdLoadFail(e,t)},onInterstitialAdShow:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdShow&&null!=this.developerCallback.onInterstitialAdShow&&this.developerCallback.onInterstitialAdShow(e,t)},onInterstitialAdStartPlayingVideo:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdStartPlayingVideo&&null!=this.developerCallback.onInterstitialAdStartPlayingVideo&&this.developerCallback.onInterstitialAdStartPlayingVideo(e,t)},onInterstitialAdEndPlayingVideo:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdEndPlayingVideo&&null!=this.developerCallback.onInterstitialAdEndPlayingVideo&&this.developerCallback.onInterstitialAdEndPlayingVideo(e,t)},onInterstitialAdFailedToPlayVideo:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdFailedToPlayVideo&&null!=this.developerCallback.onInterstitialAdFailedToPlayVideo&&this.developerCallback.onInterstitialAdFailedToPlayVideo(e,t)},onInterstitialAdFailedToShow:function(e){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdFailedToShow&&null!=this.developerCallback.onInterstitialAdFailedToShow&&this.developerCallback.onInterstitialAdFailedToShow(e)},onInterstitialAdClose:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdClose&&null!=this.developerCallback.onInterstitialAdClose&&this.developerCallback.onInterstitialAdClose(e,t)},onInterstitialAdClick:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdClick&&null!=this.developerCallback.onInterstitialAdClick&&this.developerCallback.onInterstitialAdClick(e,t)}},setAdExtraData:function(e,t){void 0===t&&(t={}),null!=a&&null!=a?a.setAdExtraData(e,JSON.stringify(t)):cc.log("You must run on Android or iOS.")},addPlacementIds:function(e){null!=a&&null!=a?a.addPlacementIds(JSON.stringify(e)):cc.log("You must run on Android or iOS.")},removePlacementId:function(e){null!=a&&null!=a?a.removePlacementId(JSON.stringify(e)):cc.log("You must run on Android or iOS.")},setAdListener:function(e){var t={};t[r]="ATInterstitialAutoAdJSSDK.ATInterstitialListener.onInterstitialAdLoaded",t[l]="ATInterstitialAutoAdJSSDK.ATInterstitialListener.onInterstitialAdLoadFail",t[s]="ATInterstitialAutoAdJSSDK.ATInterstitialListener.onInterstitialAdStartPlayingVideo",t[c]="ATInterstitialAutoAdJSSDK.ATInterstitialListener.onInterstitialAdEndPlayingVideo",t[d]="ATInterstitialAutoAdJSSDK.ATInterstitialListener.onInterstitialAdFailedToPlayVideo",t[u]="ATInterstitialAutoAdJSSDK.ATInterstitialListener.onInterstitialAdClose",t[h]="ATInterstitialAutoAdJSSDK.ATInterstitialListener.onInterstitialAdClick",t[p]="ATInterstitialAutoAdJSSDK.ATInterstitialListener.onInterstitialAdShow",null!=a&&null!=a?a.setAdListener(JSON.stringify(t)):cc.log("You must run on Android or iOS."),this.ATInterstitialListener.developerCallback=e},hasAdReady:function(e){return null!=a&&null!=a?a.hasAdReady(e):(cc.log("You must run on Android or iOS."),!1)},checkAdStatus:function(e){return null!=a&&null!=a?a.checkAdStatus(e):(cc.log("You must run on Android or iOS."),"")},showAd:function(e){null!=a&&null!=a?a.showAd(e):cc.log("You must run on Android or iOS.")},showAdInScenario:function(e,t){void 0===t&&(t=""),null!=a&&null!=a?a.showAdInScenario(e,t):cc.log("You must run on Android or iOS.")},entryAdScenario:function(e,t){void 0===t&&(t=""),null!=a&&null!=a?a.entryAdScenario(e,t):cc.log("You must run on Android or iOS.")}},r="InterstitialAutoAdLoaded",l="InterstitialAutoAdLoadFail",s="InterstitialAutoAdPlayStart",c="InterstitialAutoAdPlayEnd",d="InterstitialAutoAdPlayFail",u="InterstitialAutoAdClose",h="InterstitialAutoAdClick",p="InterstitialAutoAdAdShow";window.ATInterstitialAutoAdJSSDK=o,cc._RF.pop()},{"./Android/ATAndroidInterstitialAutoAdJS":"ATAndroidInterstitialAutoAdJS","./iOS/ATiOSInterstitialAutoAdJS":"ATiOSInterstitialAutoAdJS"}],ATInterstitialJSSDK:[function(e,t){"use strict";cc._RF.push(t,"35df6WiU59G0KqBpEh7AYYe","ATInterstitialJSSDK");var n=e("./iOS/ATiOSInterstitialJS"),i=e("./Android/ATAndroidInterstitialJS"),a=cc.sys.os===cc.sys.OS_IOS?n:cc.sys.os===cc.sys.OS_ANDROID?i:void 0,o=o||{UseInterstitialAsInterstitial:"UseInterstitialAsInterstitial",ATInterstitialListener:{developerCallback:null,onInterstitialAdLoaded:function(e){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdLoaded&&null!=this.developerCallback.onInterstitialAdLoaded&&this.developerCallback.onInterstitialAdLoaded(e)},onInterstitialAdLoadFail:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdLoadFail&&null!=this.developerCallback.onInterstitialAdLoadFail&&this.developerCallback.onInterstitialAdLoadFail(e,t)},onInterstitialAdShow:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdShow&&null!=this.developerCallback.onInterstitialAdShow&&this.developerCallback.onInterstitialAdShow(e,t)},onInterstitialAdStartPlayingVideo:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdStartPlayingVideo&&null!=this.developerCallback.onInterstitialAdStartPlayingVideo&&this.developerCallback.onInterstitialAdStartPlayingVideo(e,t)},onInterstitialAdEndPlayingVideo:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdEndPlayingVideo&&null!=this.developerCallback.onInterstitialAdEndPlayingVideo&&this.developerCallback.onInterstitialAdEndPlayingVideo(e,t)},onInterstitialAdFailedToPlayVideo:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdFailedToPlayVideo&&null!=this.developerCallback.onInterstitialAdFailedToPlayVideo&&this.developerCallback.onInterstitialAdFailedToPlayVideo(e,t)},onInterstitialAdFailedToShow:function(e){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdFailedToShow&&null!=this.developerCallback.onInterstitialAdFailedToShow&&this.developerCallback.onInterstitialAdFailedToShow(e)},onInterstitialAdClose:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdClose&&null!=this.developerCallback.onInterstitialAdClose&&this.developerCallback.onInterstitialAdClose(e,t)},onInterstitialAdClick:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onInterstitialAdClick&&null!=this.developerCallback.onInterstitialAdClick&&this.developerCallback.onInterstitialAdClick(e,t)},onAdSourceBiddingAttempt:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingAttempt&&null!=this.developerCallback.onAdSourceBiddingAttempt&&this.developerCallback.onAdSourceBiddingAttempt(e,t)},onAdSourceBiddingFilled:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingFilled&&null!=this.developerCallback.onAdSourceBiddingFilled&&this.developerCallback.onAdSourceBiddingFilled(e,t)},onAdSourceBiddingFail:function(e,t,n){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingFail&&null!=this.developerCallback.onAdSourceBiddingFail&&this.developerCallback.onAdSourceBiddingFail(e,t,n)},onAdSourceAttemp:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceAttemp&&null!=this.developerCallback.onAdSourceAttemp&&this.developerCallback.onAdSourceAttemp(e,t)},onAdSourceLoadFilled:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceLoadFilled&&null!=this.developerCallback.onAdSourceLoadFilled&&this.developerCallback.onAdSourceLoadFilled(e,t)},onAdSourceLoadFail:function(e,t,n){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceLoadFail&&null!=this.developerCallback.onAdSourceLoadFail&&this.developerCallback.onAdSourceLoadFail(e,t,n)}},loadInterstitial:function(e,t){void 0===t&&(t={}),null!=a&&null!=a?a.loadInterstitial(e,JSON.stringify(t)):cc.log("You must run on Android or iOS.")},setAdListener:function(e){var t={};t[r]="ATInterstitialJSSDK.ATInterstitialListener.onInterstitialAdLoaded",t[l]="ATInterstitialJSSDK.ATInterstitialListener.onInterstitialAdLoadFail",t[s]="ATInterstitialJSSDK.ATInterstitialListener.onInterstitialAdStartPlayingVideo",t[c]="ATInterstitialJSSDK.ATInterstitialListener.onInterstitialAdEndPlayingVideo",t[d]="ATInterstitialJSSDK.ATInterstitialListener.onInterstitialAdFailedToPlayVideo",t[u]="ATInterstitialJSSDK.ATInterstitialListener.onInterstitialAdClose",t[h]="ATInterstitialJSSDK.ATInterstitialListener.onInterstitialAdClick",t[p]="ATInterstitialJSSDK.ATInterstitialListener.onInterstitialAdShow",t[f]="ATInterstitialJSSDK.ATInterstitialListener.onInterstitialAdFailedToShow",t[m]="ATInterstitialJSSDK.ATInterstitialListener.onAdSourceBiddingAttempt",t[g]="ATInterstitialJSSDK.ATInterstitialListener.onAdSourceBiddingFilled",t[_]="ATInterstitialJSSDK.ATInterstitialListener.onAdSourceBiddingFail",t[v]="ATInterstitialJSSDK.ATInterstitialListener.onAdSourceAttemp",t[y]="ATInterstitialJSSDK.ATInterstitialListener.onAdSourceLoadFilled",t[b]="ATInterstitialJSSDK.ATInterstitialListener.onAdSourceLoadFail",null!=a&&null!=a?a.setAdListener(JSON.stringify(t)):cc.log("You must run on Android or iOS."),this.ATInterstitialListener.developerCallback=e},hasAdReady:function(e){return null!=a&&null!=a?a.hasAdReady(e):(cc.log("You must run on Android or iOS."),!1)},checkAdStatus:function(e){return null!=a&&null!=a?a.checkAdStatus(e):(cc.log("You must run on Android or iOS."),"")},showAd:function(e){null!=a&&null!=a?a.showAd(e):cc.log("You must run on Android or iOS.")},showAdInScenario:function(e,t){void 0===t&&(t=""),null!=a&&null!=a?a.showAdInScenario(e,t):cc.log("You must run on Android or iOS.")},entryAdScenario:function(e,t){void 0===t&&(t=""),null!=a&&null!=a?a.entryAdScenario(e,t):cc.log("You must run on Android or iOS.")}},r="InterstitialLoaded",l="InterstitialLoadFail",s="InterstitialPlayStart",c="InterstitialPlayEnd",d="InterstitialPlayFail",u="InterstitialClose",h="InterstitialClick",p="InterstitialAdShow",f="InterstitialAdShowFail",m="InterstitialBiddingAttempt",g="InterstitialBiddingFilled",_="InterstitialBiddingFail",v="InterstitialAttemp",y="InterstitialLoadFilled",b="InterstitialLoadFail";window.ATInterstitialJSSDK=o,cc._RF.pop()},{"./Android/ATAndroidInterstitialJS":"ATAndroidInterstitialJS","./iOS/ATiOSInterstitialJS":"ATiOSInterstitialJS"}],ATJSSDK:[function(e,t){"use strict";cc._RF.push(t,"7d9e1MHHsZK5YtElOGr/T17","ATJSSDK");var n=e("./Android/ATAndroidJS"),i=e("./iOS/ATiOSJS"),a=!1,o=cc.sys.os===cc.sys.OS_IOS?i:cc.sys.os===cc.sys.OS_ANDROID?n:void 0,r=r||{kATUserLocationUnknown:0,kATUserLocationInEU:1,kATUserLocationOutOfEU:2,PERSONALIZED:0,NONPERSONALIZED:1,UNKNOWN:2,OS_VERSION_NAME:"os_vn",OS_VERSION_CODE:"os_vc",APP_PACKAGE_NAME:"package_name",APP_VERSION_NAME:"app_vn",APP_VERSION_CODE:"app_vc",BRAND:"brand",MODEL:"model",DEVICE_SCREEN_SIZE:"screen",MNC:"mnc",MCC:"mcc",LANGUAGE:"language",TIMEZONE:"timezone",USER_AGENT:"ua",ORIENTATION:"orient",NETWORK_TYPE:"network_type",INSTALLER:"it_src",ANDROID_ID:"android_id",GAID:"gaid",MAC:"mac",IMEI:"imei",OAID:"oaid",IDFA:"idfa",IDFV:"idfv",ATSDKListener:{userLocationCallback:null,getUserLocationCallback:function(e){null!=this.userLocationCallback&&null!=this.userLocationCallback&&this.userLocationCallback(e)}},initSDK:function(e,t){null!=o&&null!=o?o.initSDK(e,t):cc.log("You must run on Android or iOS.")},initCustomMap:function(e){null!=o&&null!=o?null!=e&&null!=e&&o.initCustomMap(JSON.stringify(e)):cc.log("You must run on Android or iOS.")},setPlacementCustomMap:function(e,t){null!=o&&null!=o?null!=t&&null!=t&&o.setPlacementCustomMap(e,JSON.stringify(t)):cc.log("You must run on Android or iOS.")},setGDPRLevel:function(e){null!=o&&null!=o?o.setGDPRLevel(e):cc.log("You must run on Android or iOS.")},getGDPRLevel:function(){return null!=o&&null!=o?o.getGDPRLevel():(cc.log("You must run on Android or iOS."),this.UNKNOWN)},getUserLocation:function(e){this.ATSDKListener.userLocationCallback=e,null!=o&&null!=o?o.getUserLocation(l):cc.log("You must run on Android or iOS.")},showGDPRAuth:function(){null!=o&&null!=o?o.showGDPRAuth():cc.log("You must run on Android or iOS.")},setLogDebug:function(e){a=e,null!=o&&null!=o?o.setLogDebug(e):cc.log("You must run on Android or iOS.")},printLog:function(e){null!=e&&null!=e&&a&&null!=o&&(null!=o&&null!=o?o.printJsLog(e):cc.log("You must run on Android or iOS."))},deniedUploadDeviceInfo:function(e){if(null!=o&&null!=o){if(null!=e){for(var t=e.length,n="",i=0;i<t;i++){var a=e[i];n=0==i?a:n+","+a}cc.log("test__"+n),o.deniedUploadDeviceInfo(n)}}else cc.log("You must run on Android or iOS.")}},l="ATJSSDK.ATSDKListener.getUserLocationCallback";window.ATJSSDK=r,cc._RF.pop()},{"./Android/ATAndroidJS":"ATAndroidJS","./iOS/ATiOSJS":"ATiOSJS"}],ATNativeJSSDK:[function(e,t){"use strict";cc._RF.push(t,"8fc07ZnP8hDF4lMogF81V+D","ATNativeJSSDK");var n=e("./Android/ATAndroidNativeJS"),i=e("./iOS/ATiOSNativeJS"),a=cc.sys.os===cc.sys.OS_IOS?i:cc.sys.os===cc.sys.OS_ANDROID?n:void 0,o=o||{ATNativeListener:{developerCallback:null,onNativeAdLoaded:function(e){null!=this.developerCallback&&null!=this.developerCallback.onNativeAdLoaded&&null!=this.developerCallback.onNativeAdLoaded&&this.developerCallback.onNativeAdLoaded(e)},onNativeAdLoadFail:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onNativeAdLoadFail&&null!=this.developerCallback.onNativeAdLoadFail&&this.developerCallback.onNativeAdLoadFail(e,t)},onNativeAdShow:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onNativeAdShow&&null!=this.developerCallback.onNativeAdShow&&this.developerCallback.onNativeAdShow(e,t)},onNativeAdClick:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onNativeAdClick&&null!=this.developerCallback.onNativeAdClick&&this.developerCallback.onNativeAdClick(e,t)},onNativeAdVideoStart:function(e){null!=this.developerCallback&&null!=this.developerCallback.onNativeAdVideoStart&&null!=this.developerCallback.onNativeAdVideoStart&&this.developerCallback.onNativeAdVideoStart(e)},onNativeAdVideoEnd:function(e){null!=this.developerCallback&&null!=this.developerCallback.onNativeAdVideoEnd&&null!=this.developerCallback.onNativeAdVideoEnd&&this.developerCallback.onNativeAdVideoEnd(e)},onNativeAdCloseButtonTapped:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onNativeAdCloseButtonTapped&&null!=this.developerCallback.onNativeAdCloseButtonTapped&&this.developerCallback.onNativeAdCloseButtonTapped(e,t)},onAdSourceBiddingAttempt:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingAttempt&&null!=this.developerCallback.onAdSourceBiddingAttempt&&this.developerCallback.onAdSourceBiddingAttempt(e,t)},onAdSourceBiddingFilled:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingFilled&&null!=this.developerCallback.onAdSourceBiddingFilled&&this.developerCallback.onAdSourceBiddingFilled(e,t)},onAdSourceBiddingFail:function(e,t,n){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingFail&&null!=this.developerCallback.onAdSourceBiddingFail&&this.developerCallback.onAdSourceBiddingFail(e,t,n)},onAdSourceAttemp:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceAttemp&&null!=this.developerCallback.onAdSourceAttemp&&this.developerCallback.onAdSourceAttemp(e,t)},onAdSourceLoadFilled:function(e,t){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceLoadFilled&&null!=this.developerCallback.onAdSourceLoadFilled&&this.developerCallback.onAdSourceLoadFilled(e,t)},onAdSourceLoadFail:function(e,t,n){null!=this.developerCallback&&null!=this.developerCallback.onAdSourceLoadFail&&null!=this.developerCallback.onAdSourceLoadFail&&this.developerCallback.onAdSourceLoadFail(e,t,n)}},loadNative:function(e,t){void 0===t&&(t={}),null!=a&&null!=a?a.loadNative(e,JSON.stringify(t)):cc.log("You must run on Android or iOS.")},setAdListener:function(e){var t={};t[r]="ATNativeJSSDK.ATNativeListener.onNativeAdLoaded",t[l]="ATNativeJSSDK.ATNativeListener.onNativeAdLoadFail",t[s]="ATNativeJSSDK.ATNativeListener.onNativeAdCloseButtonTapped",t[c]="ATNativeJSSDK.ATNativeListener.onNativeAdClick",t[d]="ATNativeJSSDK.ATNativeListener.onNativeAdShow",t[u]="ATNativeJSSDK.ATNativeListener.onNativeAdVideoStart",t[h]="ATNativeJSSDK.ATNativeListener.onNativeAdVideoEnd",t[p]="ATNativeJSSDK.ATNativeListener.onAdSourceBiddingAttempt",t[f]="ATNativeJSSDK.ATNativeListener.onAdSourceBiddingFilled",t[m]="ATNativeJSSDK.ATNativeListener.onAdSourceBiddingFail",t[g]="ATNativeJSSDK.ATNativeListener.onAdSourceAttemp",t[_]="ATNativeJSSDK.ATNativeListener.onAdSourceLoadFilled",t[v]="ATNativeJSSDK.ATNativeListener.onAdSourceLoadFail",null!=a&&null!=a?a.setAdListener(JSON.stringify(t)):cc.log("You must run on Android or iOS."),this.ATNativeListener.developerCallback=e},hasAdReady:function(e){return null!=a&&null!=a?a.hasAdReady(e):(cc.log("You must run on Android or iOS."),!1)},checkAdStatus:function(e){return null!=a&&null!=a?a.checkAdStatus(e):(cc.log("You must run on Android or iOS."),"")},showAd:function(e,t){null!=a&&null!=a?a.showAd(e,JSON.stringify(t.getAdViewProperty())):cc.log("You must run on Android or iOS.")},showAdInScenario:function(e,t,n){void 0===n&&(n=""),null!=a&&null!=a?a.showAdInScenario(e,JSON.stringify(t.getAdViewProperty()),n):cc.log("You must run on Android or iOS.")},entryAdScenario:function(e,t){void 0===t&&(t=""),null!=a&&null!=a?a.entryAdScenario(e,t):cc.log("You must run on Android or iOS.")},removeAd:function(e){null!=a&&null!=a?a.removeAd(e):cc.log("You must run on Android or iOS.")},createLoadAdSize:function(e,t){var n={};return n.width=e,n.height=t,n},AdViewProperty:cc.Class({parent:null,appIcon:null,mainImage:null,title:null,desc:null,adLogo:null,cta:null,rating:null,dislike:null,elements:null,createItemViewProperty:function(e,t,n,i,a,o,r,l){void 0===l&&(l=!1);var s={};return s.x=e,s.y=t,s.width=n,s.height=i,s.backgroundColor=a,s.textColor=o,s.textSize=r,s.isCustomClick=l,s},getAdViewProperty:function(){var e={};return null!=this.parent&&(e.parent=this.parent),null!=this.appIcon&&(e.icon=this.appIcon),null!=this.mainImage&&(e.mainImage=this.mainImage),null!=this.title&&(e.title=this.title),null!=this.desc&&(e.desc=this.desc),null!=this.adLogo&&(e.adLogo=this.adLogo),null!=this.cta&&(e.cta=this.cta),null!=this.rating&&(e.rating=this.rating),null!=this.dislike&&(e.dislike=this.dislike),null!=this.elements&&(e.elements=this.elements),e}})},r="NativeLoaded",l="NativeLoadFail",s="NativeCloseButtonTapped",c="NativeClick",d="NativeShow",u="NativeVideoStart",h="NativeVideoEnd",p="NativeBiddingAttempt",f="NativeBiddingFilled",m="NativeBiddingFail",g="NativeAttemp",_="NativeLoadFilled",v="NativeLoadFail";window.ATNativeJSSDK=o,cc._RF.pop()},{"./Android/ATAndroidNativeJS":"ATAndroidNativeJS","./iOS/ATiOSNativeJS":"ATiOSNativeJS"}],ATRewardedVideoAutoAdJSSDK:[function(e,t){"use strict";cc._RF.push(t,"0b81dMTtYhN4r7DkFgbwrbA","ATRewardedVideoAutoAdJSSDK");var n=e("./Android/ATAndroidRewardedVideoAutoAdJS"),i=e("./iOS/ATiOSRewardedVideoAutoAdJS"),a=cc.sys.os===cc.sys.OS_IOS?i:cc.sys.os===cc.sys.OS_ANDROID?n:void 0,o=o||{userIdKey:"userID",userDataKey:"media_ext",ATRewardedVideoListener:{developerCallback:null,onRewardedVideoAdLoaded:function(e){ATJSSDK.printLog("ATRewardedVideoAutoAdSDK.ATRewardedVideoListener.onRewardedVideoAdLoaded("+e+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdLoaded&&null!=this.developerCallback.onRewardedVideoAdLoaded&&this.developerCallback.onRewardedVideoAdLoaded(e)},onRewardedVideoAdFailed:function(e,t){ATJSSDK.printLog("ATRewardedVideoAutoAdSDK.ATRewardedVideoListener.onRewardedVideoAdFailed("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdFailed&&null!=this.developerCallback.onRewardedVideoAdFailed&&this.developerCallback.onRewardedVideoAdFailed(e,t)},onRewardedVideoAdPlayStart:function(e,t){ATJSSDK.printLog("ATRewardedVideoAutoAdSDK.ATRewardedVideoListener.onRewardedVideoAdPlayStart("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdPlayStart&&null!=this.developerCallback.onRewardedVideoAdPlayStart&&this.developerCallback.onRewardedVideoAdPlayStart(e,t)},onRewardedVideoAdPlayEnd:function(e,t){ATJSSDK.printLog("ATRewardedVideoAutoAdSDK.ATRewardedVideoListener.onRewardedVideoAdPlayEnd("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdPlayEnd&&null!=this.developerCallback.onRewardedVideoAdPlayEnd&&this.developerCallback.onRewardedVideoAdPlayEnd(e,t)},onRewardedVideoAdPlayFailed:function(e,t,n){ATJSSDK.printLog("ATRewardedVideoAutoAdSDK.ATRewardedVideoListener.onRewardedVideoAdPlayFailed("+e+", "+t+", "+n+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdPlayFailed&&null!=this.developerCallback.onRewardedVideoAdPlayFailed&&this.developerCallback.onRewardedVideoAdPlayFailed(e,t,n)},onRewardedVideoAdClosed:function(e,t){ATJSSDK.printLog("ATRewardedVideoAutoAdSDK.ATRewardedVideoListener.onRewardedVideoAdClosed("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdClosed&&null!=this.developerCallback.onRewardedVideoAdClosed&&this.developerCallback.onRewardedVideoAdClosed(e,t)},onRewardedVideoAdPlayClicked:function(e,t){ATJSSDK.printLog("ATRewardedVideoAutoAdSDK.ATRewardedVideoListener.onRewardedVideoAdPlayClicked("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdPlayClicked&&null!=this.developerCallback.onRewardedVideoAdPlayClicked&&this.developerCallback.onRewardedVideoAdPlayClicked(e,t)},onReward:function(e,t){ATJSSDK.printLog("ATRewardedVideoAutoAdSDK.ATRewardedVideoListener.onReward("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onReward&&null!=this.developerCallback.onReward&&this.developerCallback.onReward(e,t)},onRewardedVideoAdAgainPlayStart:function(e,t){ATJSSDK.printLog("ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayStart("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdAgainPlayStart&&null!=this.developerCallback.onRewardedVideoAdAgainPlayStart&&this.developerCallback.onRewardedVideoAdAgainPlayStart(e,t)},onRewardedVideoAdAgainPlayEnd:function(e,t){ATJSSDK.printLog("ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayEnd("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdAgainPlayEnd&&null!=this.developerCallback.onRewardedVideoAdAgainPlayEnd&&this.developerCallback.onRewardedVideoAdAgainPlayEnd(e,t)},onRewardedVideoAdAgainPlayFailed:function(e,t,n){ATJSSDK.printLog("ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayFailed("+e+", "+t+", "+n+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdAgainPlayFailed&&null!=this.developerCallback.onRewardedVideoAdAgainPlayFailed&&this.developerCallback.onRewardedVideoAdAgainPlayFailed(e,t,n)},onRewardedVideoAdAgainPlayClicked:function(e,t){ATJSSDK.printLog("ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayClicked("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdAgainPlayClicked&&null!=this.developerCallback.onRewardedVideoAdAgainPlayClicked&&this.developerCallback.onRewardedVideoAdAgainPlayClicked(e,t)},onAgainReward:function(e,t){ATJSSDK.printLog("ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onAgainReward("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onAgainReward&&null!=this.developerCallback.onAgainReward&&this.developerCallback.onAgainReward(e,t)}},setAdExtraData:function(e,t){void 0===t&&(t={}),null!=a&&null!=a?a.setAdExtraData(e,JSON.stringify(t)):cc.log("You must run on Android or iOS.")},addPlacementIds:function(e){null!=a&&null!=a?a.addPlacementIds(JSON.stringify(e)):cc.log("You must run on Android or iOS.")},removePlacementId:function(e){null!=a&&null!=a?a.removePlacementId(JSON.stringify(e)):cc.log("You must run on Android or iOS.")},setAdListener:function(e){var t={};t[r]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdLoaded",t[l]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdFailed",t[s]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayStart",t[c]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayEnd",t[d]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayFailed",t[u]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdClosed",t[h]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayClicked",t[p]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onReward",t[f]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayStart",t[m]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayEnd",t[g]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayFailed",t[_]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayClicked",t[v]="ATRewardedVideoAutoAdJSSDK.ATRewardedVideoListener.onAgainReward",null!=a&&null!=a?(a.setAdListener(JSON.stringify(t)),a.set):cc.log("You must run on Android or iOS."),this.ATRewardedVideoListener.developerCallback=e},hasAdReady:function(e){return null!=a&&null!=a?a.hasAdReady(e):(cc.log("You must run on Android or iOS."),!1)},checkAdStatus:function(e){return null!=a&&null!=a?a.checkAdStatus(e):(cc.log("You must run on Android or iOS."),"")},showAd:function(e){null!=a&&null!=a?a.showAd(e):cc.log("You must run on Android or iOS.")},showAdInScenario:function(e,t){void 0===t&&(t=""),null!=a&&null!=a?a.showAdInScenario(e,t):cc.log("You must run on Android or iOS.")},entryAdScenario:function(e,t){void 0===t&&(t=""),null!=a&&null!=a?a.entryAdScenario(e,t):cc.log("You must run on Android or iOS.")}},r="RewardedVideoAutoAdLoaded",l="RewardedVideoAutoAdLoadFail",s="RewardedVideoAutoAdPlayStart",c="RewardedVideoAutoAdPlayEnd",d="RewardedVideoAutoAdPlayFail",u="RewardedVideoAutoAdClose",h="RewardedVideoAutoAdClick",p="RewardedVideoAutoAdReward",f="RewardedVideoAutoAdAgainPlayStart",m="RewardedVideoAutoAdAgainPlayEnd",g="RewardedVideoAutoAdAgainPlayFail",_="RewardedVideoAutoAdAgainClick",v="RewardedVideoAutoAdAgainReward";window.ATRewardedVideoAutoAdJSSDK=o,cc._RF.pop()},{"./Android/ATAndroidRewardedVideoAutoAdJS":"ATAndroidRewardedVideoAutoAdJS","./iOS/ATiOSRewardedVideoAutoAdJS":"ATiOSRewardedVideoAutoAdJS"}],ATRewardedVideoJSSDK:[function(e,t){"use strict";cc._RF.push(t,"a83c8dDHj9NTZXfv7l6EKTA","ATRewardedVideoJSSDK");var n=e("./Android/ATAndroidRewardedVideoJS"),i=e("./iOS/ATiOSRewardedVideoJS"),a=cc.sys.os===cc.sys.OS_IOS?i:cc.sys.os===cc.sys.OS_ANDROID?n:void 0,o=o||{userIdKey:"userID",userDataKey:"media_ext",ATRewardedVideoListener:{developerCallback:null,onRewardedVideoAdLoaded:function(e){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdLoaded("+e+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdLoaded&&null!=this.developerCallback.onRewardedVideoAdLoaded&&this.developerCallback.onRewardedVideoAdLoaded(e)},onRewardedVideoAdFailed:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdFailed("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdFailed&&null!=this.developerCallback.onRewardedVideoAdFailed&&this.developerCallback.onRewardedVideoAdFailed(e,t)},onRewardedVideoAdPlayStart:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayStart("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdPlayStart&&null!=this.developerCallback.onRewardedVideoAdPlayStart&&this.developerCallback.onRewardedVideoAdPlayStart(e,t)},onRewardedVideoAdPlayEnd:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayEnd("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdPlayEnd&&null!=this.developerCallback.onRewardedVideoAdPlayEnd&&this.developerCallback.onRewardedVideoAdPlayEnd(e,t)},onRewardedVideoAdPlayFailed:function(e,t,n){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayFailed("+e+", "+t+", "+n+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdPlayFailed&&null!=this.developerCallback.onRewardedVideoAdPlayFailed&&this.developerCallback.onRewardedVideoAdPlayFailed(e,t,n)},onRewardedVideoAdClosed:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdClosed("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdClosed&&null!=this.developerCallback.onRewardedVideoAdClosed&&this.developerCallback.onRewardedVideoAdClosed(e,t)},onRewardedVideoAdPlayClicked:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayClicked("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdPlayClicked&&null!=this.developerCallback.onRewardedVideoAdPlayClicked&&this.developerCallback.onRewardedVideoAdPlayClicked(e,t)},onReward:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onReward("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onReward&&null!=this.developerCallback.onReward&&this.developerCallback.onReward(e,t)},onAdSourceBiddingAttempt:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceBiddingAttempt("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingAttempt&&null!=this.developerCallback.onAdSourceBiddingAttempt&&this.developerCallback.onAdSourceBiddingAttempt(e,t)},onAdSourceBiddingFilled:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceBiddingFilled("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingFilled&&null!=this.developerCallback.onAdSourceBiddingFilled&&this.developerCallback.onAdSourceBiddingFilled(e,t)},onAdSourceBiddingFail:function(e,t,n){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceBiddingFail("+e+", "+t+", "+n+")"),null!=this.developerCallback&&null!=this.developerCallback.onAdSourceBiddingFail&&null!=this.developerCallback.onAdSourceBiddingFail&&this.developerCallback.onAdSourceBiddingFail(e,t,n)},onAdSourceAttemp:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceAttemp("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onAdSourceAttemp&&null!=this.developerCallback.onAdSourceAttemp&&this.developerCallback.onAdSourceAttemp(e,t)},onAdSourceLoadFilled:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceLoadFilled("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onAdSourceLoadFilled&&null!=this.developerCallback.onAdSourceLoadFilled&&this.developerCallback.onAdSourceLoadFilled(e,t)},onAdSourceLoadFail:function(e,t,n){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceLoadFail("+e+", "+t+", "+n+")"),null!=this.developerCallback&&null!=this.developerCallback.onAdSourceLoadFail&&null!=this.developerCallback.onAdSourceLoadFail&&this.developerCallback.onAdSourceLoadFail(e,t,n)},onRewardedVideoAdAgainPlayStart:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayStart("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdAgainPlayStart&&null!=this.developerCallback.onRewardedVideoAdAgainPlayStart&&this.developerCallback.onRewardedVideoAdAgainPlayStart(e,t)},onRewardedVideoAdAgainPlayEnd:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayEnd("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdAgainPlayEnd&&null!=this.developerCallback.onRewardedVideoAdAgainPlayEnd&&this.developerCallback.onRewardedVideoAdAgainPlayEnd(e,t)},onRewardedVideoAdAgainPlayFailed:function(e,t,n){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayFailed("+e+", "+t+", "+n+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdAgainPlayFailed&&null!=this.developerCallback.onRewardedVideoAdAgainPlayFailed&&this.developerCallback.onRewardedVideoAdAgainPlayFailed(e,t,n)},onRewardedVideoAdAgainPlayClicked:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayClicked("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onRewardedVideoAdAgainPlayClicked&&null!=this.developerCallback.onRewardedVideoAdAgainPlayClicked&&this.developerCallback.onRewardedVideoAdAgainPlayClicked(e,t)},onAgainReward:function(e,t){ATJSSDK.printLog("ATRewardedVideoJSSDK.ATRewardedVideoListener.onAgainReward("+e+", "+t+")"),null!=this.developerCallback&&null!=this.developerCallback.onAgainReward&&null!=this.developerCallback.onAgainReward&&this.developerCallback.onAgainReward(e,t)}},loadRewardedVideo:function(e,t){void 0===t&&(t={}),null!=a&&null!=a?a.loadRewardedVideo(e,JSON.stringify(t)):cc.log("You must run on Android or iOS.")},setAdListener:function(e){var t={};t[r]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdLoaded",t[l]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdFailed",t[s]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayStart",t[c]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayEnd",t[d]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayFailed",t[u]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdClosed",t[h]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdPlayClicked",t[p]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onReward",t[f]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceBiddingAttempt",t[m]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceBiddingFilled",t[g]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceBiddingFail",t[_]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceAttemp",t[v]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceLoadFilled",t[y]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onAdSourceLoadFail",t[b]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayStart",t[w]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayEnd",t[C]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayFailed",t[S]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onRewardedVideoAdAgainPlayClicked",t[L]="ATRewardedVideoJSSDK.ATRewardedVideoListener.onAgainReward",null!=a&&null!=a?(a.setAdListener(JSON.stringify(t)),a.set):cc.log("You must run on Android or iOS."),this.ATRewardedVideoListener.developerCallback=e},hasAdReady:function(e){return null!=a&&null!=a?a.hasAdReady(e):(cc.log("You must run on Android or iOS."),!1)},checkAdStatus:function(e){return null!=a&&null!=a?a.checkAdStatus(e):(cc.log("You must run on Android or iOS."),"")},showAd:function(e){null!=a&&null!=a?a.showAd(e):cc.log("You must run on Android or iOS.")},showAdInScenario:function(e,t){void 0===t&&(t=""),null!=a&&null!=a?a.showAdInScenario(e,t):cc.log("You must run on Android or iOS.")},entryAdScenario:function(e,t){void 0===t&&(t=""),null!=a&&null!=a?a.entryAdScenario(e,t):cc.log("You must run on Android or iOS.")}},r="RewardedVideoLoaded",l="RewardedVideoLoadFail",s="RewardedVideoPlayStart",c="RewardedVideoPlayEnd",d="RewardedVideoPlayFail",u="RewardedVideoClose",h="RewardedVideoClick",p="RewardedVideoReward",f="RewardedVideoBiddingAttempt",m="RewardedVideoBiddingFilled",g="RewardedVideoBiddingFail",_="RewardedVideoAttemp",v="RewardedVideoLoadFilled",y="RewardedVideoLoadFail",b="RewardedVideoAgainPlayStart",w="RewardedVideoAgainPlayEnd",C="RewardedVideoAgainPlayFail",S="RewardedVideoAgainClick",L="RewardedVideoAgainReward";window.ATRewardedVideoJSSDK=o,cc._RF.pop()},{"./Android/ATAndroidRewardedVideoJS":"ATAndroidRewardedVideoJS","./iOS/ATiOSRewardedVideoJS":"ATiOSRewardedVideoJS"}],ATiOSBannerJS:[function(e,t){"use strict";cc._RF.push(t,"01322hTuqdDPaC1pzCAkzKE","ATiOSBannerJS");var n=e("ATiOSJS"),i=i||{loadBanner:function(e,t){n.printJsLog("ATiOSBannerJS::loadBanner("+e+", "+t+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","loadBannerWithPlacementID:extra:",e,t)},setAdListener:function(e){n.printJsLog("ATiOSBannerJS::setAdListener("+e+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","setDelegates:",e)},hasAdReady:function(e){return n.printJsLog("ATiOSBannerJS::hasAdReady("+e+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","bannerReadyForPlacementID:",e)},checkAdStatus:function(e){return n.printJsLog("ATiOSBannerJS::checkAdStatus("+e+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","bannerCheckAdStatusForPlacementID:",e)},showAdInPosition:function(e,t){n.printJsLog("ATiOSBannerJS::showAdInPosition("+e+", "+t+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","showBannerWithPlacementID:scene:position:",e,null,t)},showAdInPositionAndScenario:function(e,t,i){n.printJsLog("ATiOSBannerJS::showAdInPositionAndScenario("+e+", "+t+", "+i+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","showBannerWithPlacementID:scene:position:",e,i,t)},showAdInRectangle:function(e,t){n.printJsLog("ATiOSBannerJS::showAdInRectangle("+e+", "+t+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","showBannerWithPlacementID:scene:rect:",e,null,t)},showAdInRectangleAndScenario:function(e,t,i){n.printJsLog("ATiOSBannerJS::showAdInRectangleAndScenario("+e+", "+t+", "+i+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","showBannerWithPlacementID:scene:rect:",e,i,t)},removeAd:function(e){n.printJsLog("ATiOSBannerJS::removeAd("+e+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","removeAd:",e)},reShowAd:function(e){n.printJsLog("ATiOSBannerJS::reShowAd("+e+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","reShowAd:",e)},hideAd:function(e){n.printJsLog("ATiOSBannerJS::hideAd("+e+")"),jsb.reflection.callStaticMethod("ATBannerAdWrapper","hideAd:",e)}};t.exports=i,cc._RF.pop()},{ATiOSJS:"ATiOSJS"}],ATiOSInterstitialAutoAdJS:[function(e,t){"use strict";cc._RF.push(t,"0afb9gGEOtLUY/wyZlgJICa","ATiOSInterstitialAutoAdJS");var n=e("ATiOSJS"),i="ATInterstitialAutoAdWrapper",a=a||{setAdListener:function(e){n.printJsLog("ATiOSInterstitialAutoAdJS::setAdListener("+e+")"),jsb.reflection.callStaticMethod(i,"setDelegates:",e)},setAdExtraData:function(e,t){n.printJsLog("ATiOSInterstitialAutoAdJS::setAdExtraData("+e+", "+t+")"),jsb.reflection.callStaticMethod(i,"setAutoLocalExtra:customDataJSONString:",e,t)},addPlacementIds:function(e){n.printJsLog("ATiOSInterstitialAutoAdJS::addPlacementIds("+e+")"),jsb.reflection.callStaticMethod(i,"addAutoLoadAdPlacementID:",e)},removePlacementId:function(e){n.printJsLog("ATiOSInterstitialAutoAdJS::removePlacementId("+e+")"),jsb.reflection.callStaticMethod(i,"removeAutoLoadAdPlacementID:",e)},hasAdReady:function(e){return n.printJsLog("ATiOSInterstitialAutoAdJS::hasAdReady("+e+")"),jsb.reflection.callStaticMethod(i,"autoLoadInterstitialAdReadyForPlacementID:",e)},checkAdStatus:function(e){return n.printJsLog("ATiOSInterstitialAutoAdJS::hasAdReady("+e+")"),jsb.reflection.callStaticMethod(i,"checkAutoAdStatus:",e)},entryAdScenario:function(e,t){n.printJsLog("ATiOSInterstitialAutoAdJS::entryAdScenario("+e+", "+t+")"),jsb.reflection.callStaticMethod(i,"entryAutoAdScenarioWithPlacementID:scenarioID:",e,t)},showAd:function(e){n.printJsLog("ATiOSInterstitialAutoAdJS::showAd("+e+")"),jsb.reflection.callStaticMethod(i,"showAutoInterstitialAdWithPlacementID:scenarioID:",e,null)},showAdInScenario:function(e,t){n.printJsLog("ATiOSInterstitialAutoAdJS::showAdInScenario("+e+", "+t+")"),jsb.reflection.callStaticMethod(i,"showAutoInterstitialAdWithPlacementID:scenarioID:",e,t)}};t.exports=a,cc._RF.pop()},{ATiOSJS:"ATiOSJS"}],ATiOSInterstitialJS:[function(e,t){"use strict";cc._RF.push(t,"5ada7wfwB1EB7sRfJA6S1Fd","ATiOSInterstitialJS");var n=e("ATiOSJS"),i="ATInterstitialAdWrapper",a=a||{loadInterstitial:function(e,t){n.printJsLog("ATiOSInterstitialJS::loadInterstitial("+e+", "+t+")"),jsb.reflection.callStaticMethod(i,"loadInterstitialWithPlacementID:extra:",e,t)},setAdListener:function(e){n.printJsLog("ATiOSInterstitialJS::setAdListener("+e+")"),jsb.reflection.callStaticMethod(i,"setDelegates:",e)},hasAdReady:function(e){return n.printJsLog("ATiOSInterstitialJS::hasAdReady("+e+")"),jsb.reflection.callStaticMethod(i,"interstitialReadyForPlacementID:",e)},checkAdStatus:function(e){return n.printJsLog("ATiOSInterstitialJS::checkAdStatus("+e+")"),jsb.reflection.callStaticMethod(i,"checkAdStatus:",e)},setUserData:function(){cc.log("Android-setUserData")},showAd:function(e){return n.printJsLog("ATiOSInterstitialJS::showAd("+e+")"),jsb.reflection.callStaticMethod(i,"showInterstitialWithPlacementID:scene:",e,null)},showAdInScenario:function(e,t){return n.printJsLog("ATiOSInterstitialJS::showAd("+e+", "+t+")"),jsb.reflection.callStaticMethod(i,"showInterstitialWithPlacementID:scene:",e,t)},entryAdScenario:function(e,t){return n.printJsLog("ATiOSInterstitialJS::entryAdScenario("+e+", "+t+")"),jsb.reflection.callStaticMethod(i,"entryAdScenarioWithPlacementID:scene:",e,t)}};t.exports=a,cc._RF.pop()},{ATiOSJS:"ATiOSJS"}],ATiOSJS:[function(e,t){"use strict";cc._RF.push(t,"1d42bX/20hCNpl6WRKQKvEV","ATiOSJS");var n=n||{initSDK:function(e,t){this.printJsLog("ATiOSJS::initSDK("+e+","+t+")"),jsb.reflection.callStaticMethod("ATSDKManager","startWithAppID:appKey:",e,t)},initCustomMap:function(e){this.printJsLog("ATiOSJS::initCustomMap("+e+")"),jsb.reflection.callStaticMethod("ATSDKManager","setCustomData:",e)},setPlacementCustomMap:function(e,t){this.printJsLog("ATiOSJS::setPlacementCustomMap("+e+", "+t+")"),jsb.reflection.callStaticMethod("ATSDKManager","setCustomData:forPlacementID:",t,e)},setGDPRLevel:function(e){this.printJsLog("ATiOSJS::setGDPRLevel("+e+")"),jsb.reflection.callStaticMethod("ATSDKManager","setDataConsent:",e)},getGDPRLevel:function(){return this.printJsLog("ATiOSJS::getGDPRLevel()"),jsb.reflection.callStaticMethod("ATSDKManager","dataConsent")},getUserLocation:function(e){this.printJsLog("ATiOSJS::getUserLocation("+e+")"),jsb.reflection.callStaticMethod("ATSDKManager","getUserLocationWithCallback:",e)},showGDPRAuth:function(){this.printJsLog("ATiOSJS::showGDPRAuth()"),jsb.reflection.callStaticMethod("ATSDKManager","presentDataConsentDialog")},setLogDebug:function(e){this.printJsLog("ATiOSJS::setLogDebug("+e+")"),jsb.reflection.callStaticMethod("ATSDKManager","setDebugLog:",e)},printJsLog:function(e){null!=e&&null!=e&&jsb.reflection.callStaticMethod("ATJSBridge","log:",e)},deniedUploadDeviceInfo:function(e){this.printJsLog("ATiOSJS::deniedUploadDeviceInfo("+e+")"),jsb.reflection.callStaticMethod("ATSDKManager","deniedUploadDeviceInfo:",e)}};t.exports=n,cc._RF.pop()},{}],ATiOSNativeJS:[function(e,t){"use strict";cc._RF.push(t,"eef15Xv0jtOOaWHtSkRZdd6","ATiOSNativeJS");var n=e("ATiOSJS"),i=i||{loadNative:function(e,t){n.printJsLog("ATiOSBannerJS::loadNative("+e+", "+t+")"),jsb.reflection.callStaticMethod("ATNativeAdWrapper","loadNativeWithPlacementID:extra:",e,t)},setAdListener:function(e){n.printJsLog("ATiOSNativeJS::setAdListener("+e+")"),jsb.reflection.callStaticMethod("ATNativeAdWrapper","setDelegates:",e)},hasAdReady:function(e){return n.printJsLog("ATiOSNativeJS::hasAdReady("+e+")"),jsb.reflection.callStaticMethod("ATNativeAdWrapper","nativeReadyForPlacementID:",e)},checkAdStatus:function(e){return n.printJsLog("ATiOSNativeJS::checkAdStatus("+e+")"),jsb.reflection.callStaticMethod("ATNativeAdWrapper","nativeCheckAdStatusForPlacementID:",e)},showAd:function(e,t){n.printJsLog("ATiOSNativeJS::showAd("+e+", "+t+")"),jsb.reflection.callStaticMethod("ATNativeAdWrapper","showNativeWithPlacementID:scene:metrics:",e,null,t)},showAdInScenario:function(e,t,i){n.printJsLog("ATiOSNativeJS::showAdInScenario("+e+", "+t+", "+i+")"),jsb.reflection.callStaticMethod("ATNativeAdWrapper","showNativeWithPlacementID:scene:metrics:",e,i,t)},removeAd:function(e){n.printJsLog("ATiOSNativeJS::removeAd("+e+")"),jsb.reflection.callStaticMethod("ATNativeAdWrapper","removeNativeWithPlacementID:",e)},entryAdScenario:function(e,t){return n.printJsLog("ATiOSInterstitialJS::entryAdScenario("+e+", "+t+")"),jsb.reflection.callStaticMethod("ATNativeAdWrapper","entryAdScenarioWithPlacementID:scene:",e,t)}};t.exports=i,cc._RF.pop()},{ATiOSJS:"ATiOSJS"}],ATiOSRewardedVideoAutoAdJS:[function(e,t){"use strict";cc._RF.push(t,"33a4d7vlQZBvqbNaXA5okjG","ATiOSRewardedVideoAutoAdJS");var n=e("ATiOSJS"),i="ATRewardedVideoAutoAdWrapper",a=a||{setAdListener:function(e){n.printJsLog("ATiOSRewardedVideoAutoAdJS::setAdListener("+e+")"),jsb.reflection.callStaticMethod(i,"setDelegates:",e)},setAdExtraData:function(e,t){n.printJsLog("ATiOSRewardedVideoAutoAdJS::setAdExtraData("+e+", "+t+")"),jsb.reflection.callStaticMethod(i,"setAutoLocalExtra:customDataJSONString:",e,t)},addPlacementIds:function(e){n.printJsLog("ATiOSRewardedVideoAutoAdJS::addPlacementIds("+e+")"),jsb.reflection.callStaticMethod(i,"addAutoLoadAdPlacementID:",e)},removePlacementId:function(e){n.printJsLog("ATiOSRewardedVideoAutoAdJS::removePlacementId("+e+")"),jsb.reflection.callStaticMethod(i,"removeAutoLoadAdPlacementID:",e)},hasAdReady:function(e){return n.printJsLog("ATiOSRewardedVideoAutoAdJS::hasAdReady("+e+")"),jsb.reflection.callStaticMethod(i,"autoLoadRewardedVideoReadyForPlacementID:",e)},checkAdStatus:function(e){return n.printJsLog("ATiOSRewardedVideoAutoAdJS::hasAdReady("+e+")"),jsb.reflection.callStaticMethod(i,"checkAutoAdStatus:",e)},entryAdScenario:function(e,t){n.printJsLog("ATiOSInterstitialAutoAdJS::entryAdScenario("+e+", "+t+")"),jsb.reflection.callStaticMethod(i,"entryAutoAdScenarioWithPlacementID:scenarioID:",e,t)},showAd:function(e){n.printJsLog("ATiOSRewardedVideoAutoAdJS::showAd("+e+")"),jsb.reflection.callStaticMethod(i,"showAutoRewardedVideoWithPlacementID:scenarioID:",e,null)},showAdInScenario:function(e,t){n.printJsLog("ATiOSRewardedVideoAutoAdJS::showAdInScenario("+e+", "+t+")"),jsb.reflection.callStaticMethod(i,"showAutoRewardedVideoWithPlacementID:scenarioID:",e,t)}};t.exports=a,cc._RF.pop()},{ATiOSJS:"ATiOSJS"}],ATiOSRewardedVideoJS:[function(e,t){"use strict";cc._RF.push(t,"5cfa8HGEt9O5qgehOqNth3o","ATiOSRewardedVideoJS");var n=e("ATiOSJS"),i=i||{loadRewardedVideo:function(e,t){n.printJsLog("ATiOSRewardedVideoJS::loadRewardedVideo("+e+", "+t+")"),jsb.reflection.callStaticMethod("ATRewardedVideoWrapper","loadRewardedVideoWithPlacementID:extra:",e,t)},setAdListener:function(e){n.printJsLog("ATiOSRewardedVideoJS::setAdListener("+e+")"),jsb.reflection.callStaticMethod("ATRewardedVideoWrapper","setDelegates:",e)},hasAdReady:function(e){return n.printJsLog("ATiOSRewardedVideoJS::hasAdReady("+e+")"),jsb.reflection.callStaticMethod("ATRewardedVideoWrapper","rewardedVideoReadyForPlacementID:",e)},checkAdStatus:function(e){return n.printJsLog("ATiOSRewardedVideoJS::checkAdStatus("+e+")"),jsb.reflection.callStaticMethod("ATRewardedVideoWrapper","checkAdStatus:",e)},setUserData:function(){cc.log("Android-setUserData")},showAd:function(e){return n.printJsLog("ATiOSRewardedVideoJS::showAd("+e+")"),jsb.reflection.callStaticMethod("ATRewardedVideoWrapper","showRewardedVideoWithPlacementID:scene:",e,null)},showAdInScenario:function(e,t){return n.printJsLog("ATiOSRewardedVideoJS::showAdInScenario("+e+", "+t+")"),jsb.reflection.callStaticMethod("ATRewardedVideoWrapper","showRewardedVideoWithPlacementID:scene:",e,t)},entryAdScenario:function(e,t){return n.printJsLog("ATiOSInterstitialJS::entryAdScenario("+e+", "+t+")"),jsb.reflection.callStaticMethod("ATRewardedVideoWrapper","entryAdScenarioWithPlacementID:scene:",e,t)}};t.exports=i,cc._RF.pop()},{ATiOSJS:"ATiOSJS"}],achievement_data:[function(e,t,n){"use strict";cc._RF.push(t,"96eccNKPSxCYJhRHg70Ajfu","achievement_data"),Object.defineProperty(n,"__esModule",{value:!0}),n.AchievementType=void 0,function(e){e[e.killMonster=1]="killMonster",e[e.earnMoney=2]="earnMoney"}(n.AchievementType||(n.AchievementType={})),cc._RF.pop()},{}],action_manager:[function(e,t,n){"use strict";cc._RF.push(t,"80974bWdxpK64NHQJG2V9i2","action_manager"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../utils/utils"),a=e("./resources_manager"),o=function(){function e(){this.screenWidth=cc.view.getFrameSize().width,this.screenHeight=cc.view.getFrameSize().height}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.showDialog=function(e,t,n){if(!e.active){e.stopAllActions(),e.active=!0,e.x=n?-this.screenWidth:this.screenWidth;var i=cc.sequence(cc.moveTo(.3,0,0).easing(cc.easeInOut(3)),cc.callFunc(function(){}));e.runAction(i),t&&(t.stopAllActions(),t.opacity=0,(new cc.Tween).target(t).to(.3,{opacity:210},cc.easeIn(3)).start())}},e.prototype.hideDialog=function(e,t){e.stopAllActions(),t.stopAllActions(),t&&(new cc.Tween).target(t).to(.2,{opacity:210},cc.easeIn(1)).start();var n=cc.sequence(cc.moveTo(.2,this.screenWidth,0).easing(cc.easeIn(1)),cc.callFunc(function(){e.active=!1}));e.runAction(n)},e.prototype.fadeShowDialog=function(e,t){if(!e.active){e.stopAllActions(),e.opacity=0,e.active=!0,cc.tween();var n=cc.sequence(cc.fadeIn(t||.2),cc.callFunc(function(){}));e.runAction(n)}},e.prototype.fadeHideDialog=function(e,t){if(void 0===t&&(t=.2),e.active){e.stopAllActions();var n=cc.sequence(cc.fadeOut(t),cc.callFunc(function(){e.active=!1}));e.runAction(n)}},e.prototype.popOut=function(e,t){if(!e.active){e.stopAllActions(),e.active=!0,e.opacity=255,e.scale=.5;var n=cc.sequence(cc.scaleTo(.2,1).easing(cc.easeElasticOut(1)),cc.callFunc(function(){}));e.runAction(n),t&&(t.stopAllActions(),t.opacity=0,(new cc.Tween).target(t).to(.2,{opacity:210},cc.easeIn(1)).start())}},e.prototype.playAnimation=function(e,t){var n=t.getComponent(cc.Animation);n.getClips().some(function(t){return t.name==e})?n.play(e):a.default.instance.getAnimation(e,!1).then(function(t){n.addClip(t),n.play(e)})},e.prototype.playNpcAnimation=function(e,t,n){var o=n.getComponent(cc.Animation),r=o.getClips(),l="char_"+i.Utils.getNumberOn3Str(e)+"_"+["walk","attack","defeat","hit","idle"][t];r.some(function(e){return e.name==l})?o.play(l):a.default.instance.getNpcAnima(e,t).then(function(e){o.addClip(e),o.play(l)})},e._instance=null,e}();n.default=o,cc._RF.pop()},{"../utils/utils":"utils","./resources_manager":"resources_manager"}],ad_manager:[function(e,t,n){"use strict";cc._RF.push(t,"cbe37Qi9gRLYo1tqAOeyimF","ad_manager"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../manager/dynamic_data_manager"),a=e("./language_manager"),o=e("./sdk_mananger"),r=e("./ui_manager"),l=function(){function e(){this.adType=0,this.cb=null,this.data={}}return e.getInatance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.initAd=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","topOnInit","()V")},e.prototype.isHaveAndroidAd=function(){return!o.default.getInatance().across&&(!o.default.getInatance().android||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","haveAd","()Z"))},e.prototype.showAndroidAd=function(e){i.default.instance.config.adFree?e(!0):this.isHaveAndroidAd()?(this.cb=e,o.default.getInatance().android?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showAd","()V"):o.default.getInatance().ios):r.default.instance.LoadTipsByStr(a.default.GetText("\u5f53\u524d\u6ca1\u6709\u5e7f\u544a"))},e.prototype.adCallback=function(e){var t=this;Date.now(),setTimeout(function(){"ok"==e?t.cb(!0):r.default.instance.LoadTipsByStr(a.default.GetText("\u672a\u89c2\u770b\u5b8c\u5e7f\u544a")),console.log("\u5e7f\u544a\u56de\u8c03"+JSON.stringify(t.data))},1e3)},e.prototype.isSameDay=function(e,t){return Math.floor(new Date(new Date(+e).toLocaleDateString()).getTime()/1e3)==Math.floor(new Date(new Date(+t).toLocaleDateString()).getTime()/1e3)},e.prototype.askBack=function(){},e._instance=null,e}();n.default=l,cc.adManager=l.getInatance(),cc._RF.pop()},{"../manager/dynamic_data_manager":"dynamic_data_manager","./language_manager":"language_manager","./sdk_mananger":"sdk_mananger","./ui_manager":"ui_manager"}],adventure_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"0e2cajwtrVKFIz5jPYTaY6J","adventure_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeMenu=null,this.nodePageList=[],this.nodeShopBackground=null,this.nodeSubMenu=null,this.nodeCharList=[],this.nodeAdvContainer=null,this.nodeContainer=null,this.btnAct=null,this.btnMain=null,this.btnRefresh=null,this.btnMain=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnMain=null,this.labLanList=[],this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v,y;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodeShopBackground=cc.find("content/nodePageList1/nodeShopBackground",e),this.nodeSubMenu=cc.find("content/nodePageList1/nodeSubMenu",e),this.nodeCharList[0]=cc.find("content/nodePageList0/bar/nodeCharList0",e),this.nodeCharList[1]=cc.find("content/nodePageList0/bar/nodeCharList1",e),this.nodeCharList[2]=cc.find("content/nodePageList0/bar/nodeCharList2",e),this.nodeCharList[3]=cc.find("content/nodePageList0/bar/nodeCharList3",e),this.nodeCharList[4]=cc.find("content/nodePageList0/bar/nodeCharList4",e),this.nodeAdvContainer=cc.find("content/nodePageList0/svMain/view/nodeAdvContainer",e),this.nodeContainer=cc.find("content/nodePageList1/scrollview/view/nodeContainer",e),this.btnAct=null===(t=cc.find("content/nodeMenu/btnAct",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnMain=null===(n=cc.find("content/nodeMenu/btnMain",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnRefresh=null===(i=cc.find("content/nodePageList0/btnRefresh",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnMain=null===(a=cc.find("content/nodePageList1/nodeSubMenu/btnMain",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnHome=null===(o=cc.find("content/nodePageList1/nodeSubMenu/btnHome",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnHome=null===(r=cc.find("content/nodePageList1/nodeSubMenu/btnHome",e))||void 0===r?void 0:r.getComponent(cc.Button),this.btnMain=null===(l=cc.find("content/nodePageList1/nodeSubMenu/btnMain",e))||void 0===l?void 0:l.getComponent(cc.Button),this.btnMain=null===(s=cc.find("content/nodePageList1/nodeSubMenu/btnMain",e))||void 0===s?void 0:s.getComponent(cc.Button),this.labLanList[0]=null===(c=cc.find("content/nodePageList0/btnRefresh/labLanList0",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[1]=null===(d=cc.find("content/nodePageList0/btnRefresh/labLanList1",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[2]=null===(u=cc.find("content/nodePageList1/labLanList2",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[3]=null===(h=cc.find("content/nodePageList1/labLanList3",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labLanList[4]=null===(p=cc.find("content/nodePageList1/labLanList4",e))||void 0===p?void 0:p.getComponent(cc.Label),this.labLanList[5]=null===(f=cc.find("content/nodePageList1/labLanList5",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labLanList[6]=null===(m=cc.find("content/nodePageList1/labLanList6",e))||void 0===m?void 0:m.getComponent(cc.Label),this.labLanList[7]=null===(g=cc.find("content/labLanList7",e))||void 0===g?void 0:g.getComponent(cc.Label),this.labLanList[8]=null===(_=cc.find("content/labLanList8",e))||void 0===_?void 0:_.getComponent(cc.Label),this.labLanList[9]=null===(v=cc.find("content/labLanList9",e))||void 0===v?void 0:v.getComponent(cc.Label),this.svMain=null===(y=cc.find("content/nodePageList0/svMain",e))||void 0===y?void 0:y.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeMenu=null,this.nodePageList=[],this.nodeShopBackground=null,this.nodeSubMenu=null,this.nodeCharList=[],this.nodeAdvContainer=null,this.nodeContainer=null,this.btnAct=null,this.btnMain=null,this.btnRefresh=null,this.btnMain=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnMain=null,this.labLanList=[],this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],adventure_ui:[function(e,t,n){"use strict";cc._RF.push(t,"7d2f4Yz2dZKN6liYpDUau8b","adventure_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_adventure"),l=e("../item/item_shop"),s=e("../manager/action_manager"),c=e("../manager/ad_manager"),d=e("../manager/audio_manager"),u=e("../manager/dynamic_data_manager"),h=e("../manager/language_manager"),p=e("../manager/pool_manager"),f=e("../manager/quest_manager"),m=e("../manager/record_manager"),g=e("../manager/resources_manager"),_=e("../manager/shop_manager"),v=e("../manager/storage_manager"),y=e("../manager/ui_manager"),b=e("../ui_view/panel/adventure_ui_view"),w=e("../utils/enum"),C=e("../utils/utils"),S=cc._decorator,L=S.ccclass,A=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new b.default,t._page=null,t._shopType=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u4e0b\u6708\u5237\u65b0","\u7acb\u5373\u5237\u65b0","\u79cd\u5b50","\u6750\u6599","\u6389\u843d","\u86cb","\u6b66\u5668","\u5192\u9669\u8005\u516c\u4f1a","\u62db\u52df","\u5151\u6362"];e.forEach(function(e,n){e.string=h.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeMenu.children.forEach(function(t,n){t.on("click",function(){e.onClickPageBtn(n)},e)}),this._view.nodeSubMenu.children.forEach(function(t,n){t.on("click",function(){d.default.instance.playAudio("switch"),e.onChooseShopType(n)},e)}),this._view.btnRefresh.node.on("click",this.onClickRefresh,this)},t.prototype.showUI=function(){s.default.instance.popOut(this._view.content,this._view.nodeMask),this._shopType=0,m.default.instance.onOpenPage(w.PageType.adventure),this.onClickPageBtn(0),this.refreshShopItem(),this.refreshBarChar()},t.prototype.refreshBarChar=function(){this._view.nodeCharList.forEach(function(e,t){var n=u.default.instance.achievementData.charList[t];e.getComponent(cc.Sprite).spriteFrame=n?g.default.instance.getSprite(w.ResType.main,"char-char_"+n):null})},t.prototype.refreshShopItem=function(){var e=_.ShopMgr.instance.getAdvRandom6ItemList();this._view.nodeShopBackground.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(w.ResType.main,C.Utils.getItemSpName(e[n]))})},t.prototype.hideUI=function(){d.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onClickPageBtn=function(e){switch(d.default.instance.playAudio("switch"),this._page=e,this._view.nodePageList.forEach(function(t,n){t.active=n==e}),this._view.nodeMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(w.ResType.main,n==e?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")}),e){case 0:this.refreshFriendPage();break;case 1:this.refreshSalePage()}},t.prototype.refreshFriendPage=function(){p.default.instance.removeObjByContainer(this._view.nodeAdvContainer);for(var e=0;e<u.default.instance.achievementData.charList.length;e++)p.default.instance.createObjectByName("itemAdventure",this._view.nodeAdvContainer).getComponent(r.default).init(u.default.instance.achievementData.charList[e])},t.prototype.onChooseShopType=function(e){this._shopType=e,this.refreshSalePage()},t.prototype.refreshSalePage=function(){var e=this;p.default.instance.removeObjByContainer(this._view.nodeContainer);var t=_.ShopMgr.instance.getAdvShopList(this._shopType,0);this._view.nodeSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(w.ResType.main,n==e._shopType?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")});for(var n=0;n<t.length;n++)p.default.instance.createObjectByName("itemShop",this._view.nodeContainer).getComponent(l.default).init(n,t[n])},t.prototype.onClickRefresh=function(){d.default.instance.playAudio("click"),u.default.instance.config.refreshTimes>0?(u.default.instance.config.refreshTimes--,u.default.instance.achievementData.charList=f.default.instance.refreshFriendList(5),this.refreshFriendPage(),this.refreshBarChar(),v.default.instance.saveConfig()):y.default.instance.LoadMessageBox(h.default.GetText("\u5237\u65b0\u6b21\u6570\u4e0d\u8db3"),h.default.GetText("\u5237\u65b0\u4e0d\u8db3\u63d0\u793a"),function(e){e&&c.default.getInatance().showAndroidAd(function(){y.default.instance.LoadTipsByStr(h.default.GetText("\u5e7f\u544a\u589e\u52a0\u5237\u65b0")),u.default.instance.config.refreshTimes+=10})})},t.instance=null,n=o([L],t)}(cc.Component));n.default=A,cc._RF.pop()},{"../item/item_adventure":"item_adventure","../item/item_shop":"item_shop","../manager/action_manager":"action_manager","../manager/ad_manager":"ad_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/quest_manager":"quest_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../manager/shop_manager":"shop_manager","../manager/storage_manager":"storage_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/adventure_ui_view":"adventure_ui_view","../utils/enum":"enum","../utils/utils":"utils"}],alchemy_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"d5daaAz/LVBZK7Qsq+CmbFh","alchemy_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodeChooseList=[],this.nodeTranslateContainer=null,this.btnAddFertList=[],this.btnAdd=null,this.btnAdd=null,this.btnAdd=null,this.btnAdd=null,this.btnField=null,this.btnChange=null,this.labLanList=[],this.labAllField=null,this.labAddFertList=[],this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v,y,b,w,C,S,L,A;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodeChooseList[0]=cc.find("content/nodePageList0/nodeChooseList0",e),this.nodeChooseList[1]=cc.find("content/nodePageList0/nodeChooseList1",e),this.nodeChooseList[2]=cc.find("content/nodePageList0/nodeChooseList2",e),this.nodeChooseList[3]=cc.find("content/nodePageList0/nodeChooseList3",e),this.nodeTranslateContainer=cc.find("content/nodePageList1/svMain/view/nodeTranslateContainer",e),this.btnAddFertList[0]=null===(t=cc.find("content/nodePageList0/btnAddFertList0",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnAddFertList[1]=null===(n=cc.find("content/nodePageList0/btnAddFertList1",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnAddFertList[2]=null===(i=cc.find("content/nodePageList0/btnAddFertList2",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnAddFertList[3]=null===(a=cc.find("content/nodePageList0/btnAddFertList3",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnAdd=null===(o=cc.find("content/nodePageList0/nodeChooseList0/btnAdd",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnAdd=null===(r=cc.find("content/nodePageList0/nodeChooseList1/btnAdd",e))||void 0===r?void 0:r.getComponent(cc.Button),this.btnAdd=null===(l=cc.find("content/nodePageList0/nodeChooseList2/btnAdd",e))||void 0===l?void 0:l.getComponent(cc.Button),this.btnAdd=null===(s=cc.find("content/nodePageList0/nodeChooseList3/btnAdd",e))||void 0===s?void 0:s.getComponent(cc.Button),this.btnField=null===(c=cc.find("content/nodeMenu/btnField",e))||void 0===c?void 0:c.getComponent(cc.Button),this.btnChange=null===(d=cc.find("content/nodeMenu/btnChange",e))||void 0===d?void 0:d.getComponent(cc.Button),this.labLanList[0]=null===(u=cc.find("content/labLanList0",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[8]=null===(h=cc.find("content/nodePageList0/labLanList8",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labAllField=null===(p=cc.find("content/nodePageList0/labAllField",e))||void 0===p?void 0:p.getComponent(cc.Label),this.labAddFertList[0]=null===(f=cc.find("content/nodePageList0/labAddFertList0",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labAddFertList[1]=null===(m=cc.find("content/nodePageList0/labAddFertList1",e))||void 0===m?void 0:m.getComponent(cc.Label),this.labAddFertList[2]=null===(g=cc.find("content/nodePageList0/labAddFertList2",e))||void 0===g?void 0:g.getComponent(cc.Label),this.labAddFertList[3]=null===(_=cc.find("content/nodePageList0/labAddFertList3",e))||void 0===_?void 0:_.getComponent(cc.Label),this.labLanList[1]=null===(v=cc.find("content/nodePageList0/nodeChooseList0/btnAdd/labLanList1",e))||void 0===v?void 0:v.getComponent(cc.Label),this.labLanList[2]=null===(y=cc.find("content/nodePageList0/nodeChooseList1/btnAdd/labLanList2",e))||void 0===y?void 0:y.getComponent(cc.Label),this.labLanList[3]=null===(b=cc.find("content/nodePageList0/nodeChooseList2/btnAdd/labLanList3",e))||void 0===b?void 0:b.getComponent(cc.Label),this.labLanList[4]=null===(w=cc.find("content/nodePageList0/nodeChooseList3/btnAdd/labLanList4",e))||void 0===w?void 0:w.getComponent(cc.Label),this.labLanList[5]=null===(C=cc.find("content/nodePageList1/labLanList5",e))||void 0===C?void 0:C.getComponent(cc.Label),this.labLanList[6]=null===(S=cc.find("content/nodeMenu/btnField/labLanList6",e))||void 0===S?void 0:S.getComponent(cc.Label),this.labLanList[7]=null===(L=cc.find("content/nodeMenu/btnChange/labLanList7",e))||void 0===L?void 0:L.getComponent(cc.Label),this.svMain=null===(A=cc.find("content/nodePageList1/svMain",e))||void 0===A?void 0:A.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodeChooseList=[],this.nodeTranslateContainer=null,this.btnAddFertList=[],this.btnAdd=null,this.btnAdd=null,this.btnAdd=null,this.btnAdd=null,this.btnField=null,this.btnChange=null,this.labLanList=[],this.labAllField=null,this.labAddFertList=[],this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],alchemy_ui:[function(e,t,n){"use strict";cc._RF.push(t,"89dd1ASIk5Gtb/t+j+x4G9u","alchemy_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_choose"),l=e("../item/item_translate"),s=e("../manager/action_manager"),c=e("../manager/audio_manager"),d=e("../manager/dynamic_data_manager"),u=e("../manager/effect_manager"),h=e("../manager/field_manager"),p=e("../manager/language_manager"),f=e("../manager/pool_manager"),m=e("../manager/resources_manager"),g=e("../manager/ui_manager"),_=e("../manager/workshop_manager"),v=e("../ui_view/panel/alchemy_ui_view"),y=e("../utils/config"),b=e("../utils/enum"),w=e("../utils/utils"),C=e("./amount_choose_ui"),S=cc._decorator,L=S.ccclass,A=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new v.default,t._chooseAmountList=[[],[],[],[]],t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u9b54\u6cd5\u5c0f\u5c4b","\u9b54\u6cd5\u5206\u7c7b1","\u9b54\u6cd5\u5206\u7c7b2","\u9b54\u6cd5\u5206\u7c7b3","\u9b54\u6cd5\u5206\u7c7b4","\u9b54\u6cd5\u5c0f\u5c4b\u63cf\u8ff02","\u571f\u58e4\u6539\u826f","\u7269\u54c1\u7cbe\u70bc","\u9b54\u6cd5\u5c0f\u5c4b\u63cf\u8ff01"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.btnField.node.on("click",this.onClickFieldBtn,this),this._view.btnChange.node.on("click",this.onClickChangeBtn,this),this._view.btnAddFertList.forEach(function(t,n){t.node.on("click",function(){e.onClickCertainAdd(n)},e)}),this._view.nodeChooseList.forEach(function(t,n){t.getChildByName("btnAdd").on("click",function(){e.onClickAddItem(n)},e)})},t.prototype.showUI=function(){s.default.instance.popOut(this._view.content,this._view.nodeMask),this.onClickFieldBtn()},t.prototype.hideUI=function(){c.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onClickFieldBtn=function(){var e=this;this._view.nodePageList[0].active=!0,this._view.nodePageList[1].active=!1,this._view.btnField.node.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,"ui-UI_Flat_Slot_02_Available"),this._view.btnChange.node.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,"ui-UI_Flat_Slot_01_Selected");var t=d.default.instance.allFieldData,n=[0,0,0,0,0];t.list.forEach(function(e,t){n[0]+=e.maxNum,n[1]+=e.quality,n[2]+=e.saveWater,n[3]+=h.FieldMgr.instance.getBugChance(t),n[4]+=100*h.FieldMgr.instance.getGrowSpd(t)}),this._view.labAllField.string=p.default.GetText("\u519c\u7530\u603b\u9762\u79ef")+":"+n[0]+"m\xb2";for(var i=0;i<this._chooseAmountList.length;i++){for(var a=this._chooseAmountList[i],o=this._view.nodeChooseList[i].children.length-1;o>=0;o--)"btnAdd"==(l=this._view.nodeChooseList[i].children[o]).name||f.default.instance.removeObject(l);for(o=0;o<a.length;o++){var l;(l=f.default.instance.createObjectByName("itemChoose",this._view.nodeChooseList[i])).y=0,l.getComponent(r.default).initByItemAmont(i,a[o],this.onRemoveItem.bind(this))}}this._view.nodeChooseList.forEach(function(t,n){t.getChildByName("btnAdd").active=e._chooseAmountList[n].length<4,t.getChildByName("btnAdd").zIndex=2}),this._view.labAddFertList[0].string=p.default.GetText("\u5e73\u5747\u54c1\u8d28")+"\uff1a"+(n[1]/t.list.length).toFixed(0)+"%",this._view.labAddFertList[1].string=p.default.GetText("\u5e73\u5747\u4fdd\u6e7f")+"\uff1a"+(n[2]/t.list.length).toFixed(0)+"%",this._view.labAddFertList[2].string=p.default.GetText("\u5e73\u5747\u866b\u5bb3")+"\uff1a"+(n[3]/t.list.length).toFixed(0)+"%",this._view.labAddFertList[3].string=p.default.GetText("\u5e73\u5747\u751f\u957f\u901f\u5ea6")+"\uff1a"+(n[4]/t.list.length).toFixed(0)+"%",this._view.btnAddFertList.forEach(function(t,n){var i=_.WorkshopMgr.instance.getFerAdd(n,e._chooseAmountList[n]);t.node.getChildByName("label").getComponent(cc.Label).string="  "+i.toFixed(0)+"\n"+p.default.GetText("\u65bd\u6cd5")})},t.prototype.onClickChangeBtn=function(){var e=this;this._view.nodePageList[0].active=!1,this._view.nodePageList[1].active=!0,this._view.btnField.node.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,"ui-UI_Flat_Slot_01_Selected"),this._view.btnChange.node.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,"ui-UI_Flat_Slot_02_Available"),f.default.instance.removeObjByContainer(this._view.nodeTranslateContainer),[501,503,505,506,507,508].forEach(function(t){var n=d.default.instance.findItem(t);n[0]&&n[0].num>=3&&f.default.instance.createObjectByName("itemTranslate",e._view.nodeTranslateContainer).getComponent(l.default).init(t,1)}),[853,856,857,858,860].forEach(function(t){for(var n=1;n<5;n++){var i=d.default.instance.findItem(t,n);i[0]&&i[0].num>=3&&f.default.instance.createObjectByName("itemTranslate",e._view.nodeTranslateContainer).getComponent(l.default).init(t,n)}})},t.prototype.onClickCertainAdd=function(e){this._chooseAmountList[e].length>0?(_.WorkshopMgr.instance.onFertAll(e,this._chooseAmountList[e]),this._chooseAmountList[e]=[],u.default.instance.createPartical("love",w.Utils.getNodeUsePos(this._view.btnAddFertList[e].node)),this.onClickFieldBtn()):g.default.instance.LoadTipsByStr(p.default.GetText("\u8bf7\u9009\u62e9\u6539\u826f\u6750\u6599")+"\uff01")},t.prototype.onClickAddItem=function(e){g.default.instance.openUI(C.default,{name:y.Config.uiName.amountChooseUI,param:[{scene:e+6,cb:this.onChooseAddItem.bind(this)}]})},t.prototype.onChooseAddItem=function(e,t){var n=this._chooseAmountList[e-6],i=n.findIndex(function(e){return e.id==t.id&&e.quality==t.quality});-1==i?this._chooseAmountList[e-6].push(t):n[i]=t,this.onClickFieldBtn()},t.prototype.onRemoveItem=function(e,t){var n=this._chooseAmountList[e].findIndex(function(e){return e==t});-1!=n&&this._chooseAmountList[e].splice(n,1),this.onClickFieldBtn()},t.instance=null,n=o([L],t)}(cc.Component));n.default=A,cc._RF.pop()},{"../item/item_choose":"item_choose","../item/item_translate":"item_translate","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/field_manager":"field_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../manager/workshop_manager":"workshop_manager","../ui_view/panel/alchemy_ui_view":"alchemy_ui_view","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils","./amount_choose_ui":"amount_choose_ui"}],all_buff_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"0740f7MaQ1Ck6/aiNrpN5Yn","all_buff_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.labLanList=[],this.svMain=null}return e.prototype.initView=function(e){var t,n;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.labLanList[0]=null===(t=cc.find("content/labLanList0",e))||void 0===t?void 0:t.getComponent(cc.Label),this.svMain=null===(n=cc.find("content/svMain",e))||void 0===n?void 0:n.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.labLanList=[],this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],all_buff_ui:[function(e,t,n){"use strict";cc._RF.push(t,"2ecddlIUndNrrLlwcZtyJIi","all_buff_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/pool_manager"),h=e("../manager/resources_manager"),p=e("../ui_view/panel/all_buff_ui_view"),f=e("../utils/enum"),m=cc._decorator,g=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new p.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u589e\u76ca\u4e00\u89c8"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this)},t.prototype.showUI=function(){r.default.instance.popOut(this._view.content,this._view.nodeMask),this.refreshList()},t.prototype.refreshList=function(){for(var e in u.default.instance.removeObjByContainer(this._view.nodeContainer),s.default.instance.allSaleData.saleBuff){var t=c.default.instance.getDataByName("holiday")[e],n=u.default.instance.createObjectByName("itemAllBuff",this._view.nodeContainer);n.getChildByName("labName").getComponent(cc.Label).string=d.default.GetText("holiday_name_"+e);var i=d.default.GetText("holiday_dec_"+e);i+=+e<310&&+e>300?s.default.instance.allSaleData.saleBuff[+e]:"("+s.default.instance.allSaleData.saleBuff[+e]+d.default.GetText("\u5929")+")",n.getChildByName("labDec").getComponent(cc.Label).string=i,n.getChildByName("sprMain").getComponent(cc.Sprite).spriteFrame=h.default.instance.getSprite(f.ResType.main,t.sp)}},t.prototype.hideUI=function(){l.default.instance.playAudio("paper2"),this._view.content.active=!1},t.instance=null,n=o([g],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../ui_view/panel/all_buff_ui_view":"all_buff_ui_view","../utils/enum":"enum"}],all_shop_data:[function(e,t,n){"use strict";cc._RF.push(t,"39935oTDrNDzrq3ahq9UZbm","all_shop_data"),Object.defineProperty(n,"__esModule",{value:!0}),n.CurrencyType=void 0,function(e){e[e.money=1]="money",e[e.point=2]="point"}(n.CurrencyType||(n.CurrencyType={})),cc._RF.pop()},{}],amount_choose_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"80eb3p+0JlMLqnYXtVJlwJp","amount_choose_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.btnMain=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnOrder=null,this.labOrder=null,this.labLanList=[],this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeSubMenu=cc.find("content/nodeSubMenu",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.btnMain=null===(t=cc.find("content/nodeSubMenu/btnMain",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnHome=null===(n=cc.find("content/nodeSubMenu/btnHome",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnHome=null===(i=cc.find("content/nodeSubMenu/btnHome",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnMain=null===(a=cc.find("content/nodeSubMenu/btnMain",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnOrder=null===(o=cc.find("content/btnOrder",e))||void 0===o?void 0:o.getComponent(cc.Button),this.labOrder=null===(r=cc.find("content/btnOrder/labOrder",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[0]=null===(l=cc.find("content/labLanList0",e))||void 0===l?void 0:l.getComponent(cc.Label),this.svMain=null===(s=cc.find("content/svMain",e))||void 0===s?void 0:s.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.btnMain=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnOrder=null,this.labOrder=null,this.labLanList=[],this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],amount_choose_ui:[function(e,t,n){"use strict";cc._RF.push(t,"f10c4PpvQFDw5dTE9JW4m0T","amount_choose_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l=e("../item/item_amount_choose"),s=e("../manager/action_manager"),c=e("../manager/audio_manager"),d=e("../manager/dynamic_data_manager"),u=e("../manager/json_manager"),h=e("../manager/language_manager"),p=e("../manager/pool_manager"),f=e("../manager/resources_manager"),m=e("../manager/sale_manager"),g=e("../manager/shop_manager"),_=e("../ui_view/panel/amount_choose_ui_view"),v=e("../utils/enum"),y=e("../utils/game_config"),b=cc._decorator,w=b.ccclass;b.property,function(e){e[e.saleChoose=1]="saleChoose",e[e.eggChoose=2]="eggChoose",e[e.grassChoose=3]="grassChoose",e[e.farmMatch=4]="farmMatch"}(r||(r={}));var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new _.default,t.subType=0,t.filterType=[],t._orderType=v.OrderType.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u7269\u54c1\u9009\u62e9"];e.forEach(function(e,n){e.string=h.default.GetText(t[n])});var n=["\u6599\u7406","\u4f5c\u7269","\u6750\u6599","\u5168\u90e8"];this._view.nodeSubMenu.children.forEach(function(e,t){e.getChildByName("label").getComponent(cc.Label).string=h.default.GetText(n[t])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeSubMenu.children.forEach(function(t,n){t.on("click",function(){c.default.instance.playAudio("switch"),e.onChooseType(n)},e)}),this._view.btnOrder.node.on("click",this.onClickOrder,this)},t.prototype.showUI=function(e){switch(this.param=e,s.default.instance.popOut(this._view.content,this._view.nodeMask),this._view.nodeSubMenu.active=!0,e.scene){case r.eggChoose:case r.grassChoose:case 6:case 7:case 8:case 9:this._view.nodeSubMenu.active=!1}this.onChooseType(0)},t.prototype.refreshList=function(){var e=this;p.default.instance.removeObjByContainer(this._view.nodeContainer),this._view.labOrder.string=y.GameConfig.OrderStr[this._orderType];for(var t=[],n=0;n<d.default.instance.itemDepot.length;n++)if(this.param.scene==r.eggChoose||g.ShopMgr.instance.getItemCanSell(d.default.instance.itemDepot[n].id)){var i=d.default.instance.itemDepot[n].id,a=u.default.instance.getDataByName("item")[i];if(!a.type)continue;if(a.type&&this.filterType&&!a.type.some(function(t){return e.filterType.includes(t)}))continue;t.push(n)}switch(this._orderType){case v.OrderType.priceUp:t=t.sort(function(e,t){var n=d.default.instance.itemDepot[e],i=d.default.instance.itemDepot[t];return m.default.instance.getItemPrice(i)-m.default.instance.getItemPrice(n)});break;case v.OrderType.numUp:t=t.sort(function(e,t){var n=d.default.instance.itemDepot[e];return d.default.instance.itemDepot[t].num-n.num});break;case v.OrderType.qualityUp:t=t.sort(function(e,t){var n=d.default.instance.itemDepot[e];return d.default.instance.itemDepot[t].quality-n.quality});break;default:t=t.sort(function(e,t){var n=d.default.instance.itemDepot[e],i=d.default.instance.itemDepot[t];return n.id==i.id?n.quality-i.quality:t-e})}t.forEach(function(t){p.default.instance.createObjectByName("itemAmountChoose",e._view.nodeContainer).getComponent(l.default).init(d.default.instance.itemDepot[t],e.onChoose.bind(e))}),this._view.nodeSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(v.ResType.main,n==e.subType?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")})},t.prototype.onChoose=function(e){switch(this.param.scene){case r.saleChoose:break;case r.farmMatch:this.param.cb&&this.param.cb(this.param.index,e);break;case 6:case 7:case 8:case 9:this.param.cb&&this.param.cb(this.param.scene,e);break;default:this.param.cb&&this.param.cb(e)}this.hideUI()},t.prototype.hideUI=function(){c.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onChooseType=function(e){this.subType=e;var t=[[[v.Itemtype.food],[v.Itemtype.crop,v.Itemtype.flower,v.Itemtype.vegetable],[v.Itemtype.meta,v.Itemtype.animal,v.Itemtype.monster,v.Itemtype.seasoning,v.Itemtype.fish]],[[v.Itemtype.egg]],[[v.Itemtype.grass,v.Itemtype.fruit]],[[v.Itemtype.food],[v.Itemtype.crop,v.Itemtype.flower,v.Itemtype.vegetable],[v.Itemtype.meta,v.Itemtype.animal,v.Itemtype.monster,v.Itemtype.seasoning,v.Itemtype.fish]],[[v.Itemtype.egg]],[[v.Itemtype.vegetable]],[[v.Itemtype.meta]],[[v.Itemtype.flower,v.Itemtype.mashroom]],[[v.Itemtype.meet,v.Itemtype.fish]]];this.filterType=t[this.param.scene-1][e],this.refreshList()},t.prototype.onClickOrder=function(){c.default.instance.playAudio("click"),this._orderType+=1,this._orderType>3&&(this._orderType=0),this.refreshList()},t.instance=null,n=o([w],t)}(cc.Component);n.default=C,cc._RF.pop()},{"../item/item_amount_choose":"item_amount_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../manager/shop_manager":"shop_manager","../ui_view/panel/amount_choose_ui_view":"amount_choose_ui_view","../utils/enum":"enum","../utils/game_config":"game_config"}],anima_help:[function(e,t,n){"use strict";cc._RF.push(t,"18af7Q+R6tGMIuGmGJwZbLK","anima_help");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./item_animal"),l=e("./item_char"),s=cc._decorator,c=s.ccclass,d=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t}return a(t,e),t.prototype.onLoad=function(){this.node.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,this.onAnimationFinished,this)},t.prototype.callback=function(e){var t=this.item.getComponent(l.default);t&&t.onFrameEvent(e);var n=this.item.getComponent(r.default);n&&n.onFrameEvent(e)},t.prototype.onAnimationFinished=function(){},o([d(cc.Node)],t.prototype,"item",void 0),o([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./item_animal":"item_animal","./item_char":"item_char"}],animal_choose_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"abaa4RwhnJEvr5gPGVkpOJb","animal_choose_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.labLanList=[],this.labNone=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.labLanList[0]=null===(t=cc.find("content/labLanList0",e))||void 0===t?void 0:t.getComponent(cc.Label),this.labNone=null===(n=cc.find("content/labNone",e))||void 0===n?void 0:n.getComponent(cc.Label),this.svMain=null===(i=cc.find("content/svMain",e))||void 0===i?void 0:i.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.labLanList=[],this.labNone=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],animal_choose_ui:[function(e,t,n){"use strict";cc._RF.push(t,"cd0e890ARdII4aY8YXF4Y6h","animal_choose_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_animal_choose"),l=e("../manager/action_manager"),s=e("../manager/audio_manager"),c=e("../manager/dynamic_data_manager"),d=e("../manager/language_manager"),u=e("../manager/meadow_manager"),h=e("../manager/pool_manager"),p=e("../ui_view/panel/animal_choose_ui_view"),f=cc._decorator,m=f.ccclass,g=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new p.default,t.index=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList.concat(this._view.labNone),t=["\u52a8\u7269\u9009\u62e9","\u6ca1\u6709\u52a8\u7269\u63d0\u793a"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this)},t.prototype.showUI=function(e){this.index=e,l.default.instance.popOut(this._view.content,this._view.nodeMask),this.refreshList()},t.prototype.refreshList=function(){h.default.instance.removeObjByContainer(this._view.nodeContainer);var e=!1;for(var t in c.default.instance.meadowData.animalDepot)c.default.instance.meadowData.animalDepot[t]&&(e=!0,h.default.instance.createObjectByName("itemAnimalChoose",this._view.nodeContainer).getComponent(r.default).init(+t));this._view.labNone.node.active=!e},t.prototype.onChoose=function(e){u.MeadowMgr.instance.putAnimalOn(this.index,e),this.hideUI()},t.prototype.hideUI=function(){s.default.instance.playAudio("paper2"),this._view.content.active=!1},t.instance=null,n=o([m],t)}(cc.Component));n.default=g,cc._RF.pop()},{"../item/item_animal_choose":"item_animal_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/meadow_manager":"meadow_manager","../manager/pool_manager":"pool_manager","../ui_view/panel/animal_choose_ui_view":"animal_choose_ui_view"}],animal_state:[function(e,t,n){"use strict";cc._RF.push(t,"5d1e08ejaNHrIydMhnCsl7k","animal_state");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AnimalRushState=n.AnimalMoveState=n.AnimalIdleState=n.AnimalState=void 0;var o=e("../manager/action_manager"),r=e("../manager/resources_manager"),l=e("../utils/enum"),s=e("../utils/utils"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.item=t,n}return a(t,e),t.prototype.onFrameEvent=function(){},t}(e("./i_state").IState);n.AnimalState=c;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.waitTime=0,t}return a(t,e),t.prototype.onEnter=function(){this.timer=0,this.waitTime=s.Utils.getRandomNumber(6),this.item.getComponent(cc.Animation).stop(),this.item.getComponent(cc.Sprite).spriteFrame=r.default.instance.getSprite(l.ResType.char,"char_"+this.item.id+"_"+(this.waitTime>4?1:2))},t.prototype.onUpdate=function(e){this.timer+=e,this.timer>=this.waitTime&&(Math.random()>.7?this.item.switchState(l.CharAnimaType.atk):this.item.switchState(l.CharAnimaType.walk))},t}(c);n.AnimalIdleState=d;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spd=0,t.targetPos=null,t}return a(t,e),t.prototype.onEnter=function(){this.spd=10+s.Utils.getRandomNumber(5),this.targetPos=cc.v2(-58+s.Utils.getRandomNumber(116),-30+s.Utils.getRandomNumber(60)),o.default.instance.playNpcAnimation(this.item.id,l.CharAnimaType.walk,this.item.node)},t.prototype.onUpdate=function(e){var t=this.targetPos.sub(this.item.node.getPosition());t.mag()<2?this.item.switchState(l.CharAnimaType.idle):(this.item.node.scaleX=t.x>0?-1:1,t=t.normalize(),this.item.node.x+=this.spd*t.x*e,this.item.node.y+=this.spd*t.y*e,this.item.node.zIndex=17-this.item.node.y)},t}(c);n.AnimalMoveState=u;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spd=0,t.arr=null,t}return a(t,e),t.prototype.onEnter=function(){this.spd=30+s.Utils.getRandomNumber(15),this.arr=cc.v2(-1+s.Utils.getRandomNumber(2),-1+s.Utils.getRandomNumber(2)).normalize(),o.default.instance.playNpcAnimation(this.item.id,l.CharAnimaType.atk,this.item.node)},t.prototype.onUpdate=function(e){this.item.node.x+=this.spd*this.arr.x*e,this.item.node.y+=this.spd*this.arr.y*e,this.item.node.scaleX=this.arr.x>0?-1:1,this.item.node.zIndex=17-this.item.node.y,Math.abs(this.item.node.x)>58&&this.item.switchState(l.CharAnimaType.idle),Math.abs(this.item.node.y)>30&&this.item.switchState(l.CharAnimaType.idle)},t.prototype.onFrameEvent=function(){this.item.switchState(l.CharAnimaType.idle)},t}(c);n.AnimalRushState=h,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/resources_manager":"resources_manager","../utils/enum":"enum","../utils/utils":"utils","./i_state":"i_state"}],audio_manager:[function(e,t,n){"use strict";cc._RF.push(t,"8028fANfKJIOo8vKT6a1TAj","audio_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./dynamic_data_manager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sourceMaps={},t.audioTimer=null,t.canAudio=!0,t.switchBgmTween=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){n.instance=this},t.prototype.init=function(){this.playBGM("opening")},t.prototype.loadAudioClip=function(e,t){var n=this;void 0===t&&(t=r.default.instance.config.audio),cc.resources.load("audio/"+e,function(i,a){n.sourceMaps[e]=a,cc.audioEngine.setEffectsVolume(t),cc.audioEngine.playEffect(a,!1)})},t.prototype.loadBGMClip=function(e,t){var n=this;void 0===t&&(t=r.default.instance.config.music),cc.loader.loadRes("music/"+e,function(i,a){n.sourceMaps[e]=a,cc.audioEngine.setMusicVolume(t),cc.audioEngine.playMusic(a,!0)})},t.prototype.playAudio=function(e,t){var n=this;if(void 0===t&&(t=r.default.instance.config.audio),this.canAudio)if(this.canAudio=!1,this.audioTimer=setTimeout(function(){n.canAudio=!0},30),this.sourceMaps[e]){var i=this.sourceMaps[e];cc.audioEngine.setEffectsVolume(t),cc.audioEngine.playEffect(i,!1)}else this.loadAudioClip(e,t)},t.prototype.playAudioHard=function(e,t){if(void 0===t&&(t=r.default.instance.config.audio),this.sourceMaps[e]){var n=this.sourceMaps[e];cc.audioEngine.setEffectsVolume(t),cc.audioEngine.playEffect(n,!1)}else this.loadAudioClip(e,t)},t.prototype.playBGM=function(e,t){var n=this;void 0===t&&(t=r.default.instance.config.music),this.switchBgmTween&&this.switchBgmTween.stop();var i={volume:t};this.switchBgmTween=cc.tween(i).to(.5,{volume:0},{onUpdate:function(){cc.audioEngine.setMusicVolume(i.volume)}}).call(function(){if(n.sourceMaps[e]){var i=n.sourceMaps[e];cc.audioEngine.playMusic(i,!0)}else n.loadBGMClip(e,t)}).to(.5,{volume:t},{onUpdate:function(){cc.audioEngine.setMusicVolume(i.volume)}}).start()},t.prototype.changeBgmVolume=function(e){cc.audioEngine.setMusicVolume(e)},t.instance=null,n=o([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{"./dynamic_data_manager":"dynamic_data_manager"}],background_manager:[function(e,t,n){"use strict";cc._RF.push(t,"f3588G1ivxFkqY9OB1QQpOa","background_manager"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e._instance=null,e}();n.default=i,cc._RF.pop()},{}],bag_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"ddef5LLYHtPQLrqF9czn1UX","bag_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodePageList=[],this.nodeBagBg=null,this.nodeSubMenu=null,this.nodeHouseList=[],this.nodeTools=null,this.nodeKitchen=null,this.nodeRecipeBg=null,this.nodeAction=null,this.nodeArr=null,this.nodeArr=null,this.nodeThreeF=null,this.nodeArr=null,this.nodeContainer=null,this.nodeRecipeContainer=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.btnAllBag=null,this.btnRecipe=null,this.btnMain=null,this.btnOrder=null,this.btnDepot=null,this.btnMakeup=null,this.btnMakeup=null,this.btnDepot=null,this.btnDepot=null,this.btnMakeup=null,this.btnBed=null,this.btnTable=null,this.btnBackHome=null,this.labLanList=[],this.labOrder=null,this.svBag=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v,y,b,w,C,S,L,A,k,T;this.content=cc.find("content",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodePageList[2]=cc.find("content/nodePageList2",e),this.nodeBagBg=cc.find("content/nodePageList0/nodeBagBg",e),this.nodeSubMenu=cc.find("content/nodePageList0/nodeSubMenu",e),this.nodeHouseList[0]=cc.find("content/nodePageList1/nodeHouseList0",e),this.nodeHouseList[1]=cc.find("content/nodePageList1/nodeHouseList1",e),this.nodeHouseList[2]=cc.find("content/nodePageList1/nodeHouseList2",e),this.nodeTools=cc.find("content/nodePageList1/nodeTools",e),this.nodeKitchen=cc.find("content/nodePageList1/nodeKitchen",e),this.nodeRecipeBg=cc.find("content/nodePageList2/nodeRecipeBg",e),this.nodeAction=cc.find("content/nodePageList2/nodeAction",e),this.nodeArr=cc.find("content/nodePageList0/btnAllBag/nodeArr",e),this.nodeArr=cc.find("content/nodePageList0/btnAllBag/nodeArr",e),this.nodeThreeF=cc.find("content/nodePageList1/nodeHouseList2/nodeThreeF",e),this.nodeArr=cc.find("content/nodePageList2/btnBackHome/nodeArr",e),this.nodeContainer=cc.find("content/nodePageList0/svBag/view/nodeContainer",e),this.nodeRecipeContainer=cc.find("content/nodePageList2/svMain/view/nodeRecipeContainer",e),this.itemTag=cc.find("content/nodePageList0/nodeSubMenu/itemTag",e),this.itemTag=cc.find("content/nodePageList0/nodeSubMenu/itemTag",e),this.itemTag=cc.find("content/nodePageList0/nodeSubMenu/itemTag",e),this.itemTag=cc.find("content/nodePageList0/nodeSubMenu/itemTag",e),this.btnAllBag=null===(t=cc.find("content/nodePageList0/btnAllBag",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnRecipe=null===(n=cc.find("content/nodePageList0/btnAllBag/btnRecipe",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnMain=null===(i=cc.find("content/nodePageList0/btnMain",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnOrder=null===(a=cc.find("content/nodePageList0/btnOrder",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnDepot=null===(o=cc.find("content/nodePageList1/nodeHouseList0/btnDepot",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnMakeup=null===(r=cc.find("content/nodePageList1/nodeHouseList0/btnMakeup",e))||void 0===r?void 0:r.getComponent(cc.Button),this.btnMakeup=null===(l=cc.find("content/nodePageList1/nodeHouseList1/btnMakeup",e))||void 0===l?void 0:l.getComponent(cc.Button),this.btnDepot=null===(s=cc.find("content/nodePageList1/nodeHouseList1/btnDepot",e))||void 0===s?void 0:s.getComponent(cc.Button),this.btnDepot=null===(c=cc.find("content/nodePageList1/nodeHouseList2/btnDepot",e))||void 0===c?void 0:c.getComponent(cc.Button),this.btnMakeup=null===(d=cc.find("content/nodePageList1/nodeHouseList2/btnMakeup",e))||void 0===d?void 0:d.getComponent(cc.Button),this.btnBed=null===(u=cc.find("content/nodePageList1/nodeHouseList2/btnBed",e))||void 0===u?void 0:u.getComponent(cc.Button),this.btnTable=null===(h=cc.find("content/nodePageList1/nodeHouseList2/btnTable",e))||void 0===h?void 0:h.getComponent(cc.Button),this.btnBackHome=null===(p=cc.find("content/nodePageList2/btnBackHome",e))||void 0===p?void 0:p.getComponent(cc.Button),this.labLanList[2]=null===(f=cc.find("content/nodePageList0/btnAllBag/labLanList2",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labLanList[1]=null===(m=cc.find("content/nodePageList0/btnAllBag/labLanList1",e))||void 0===m?void 0:m.getComponent(cc.Label),this.labLanList[0]=null===(g=cc.find("content/nodePageList0/btnMain/labLanList0",e))||void 0===g?void 0:g.getComponent(cc.Label),this.labOrder=null===(_=cc.find("content/nodePageList0/btnOrder/labOrder",e))||void 0===_?void 0:_.getComponent(cc.Label),this.labLanList[3]=null===(v=cc.find("content/nodePageList1/nodeHouseList0/labLanList3",e))||void 0===v?void 0:v.getComponent(cc.Label),this.labLanList[4]=null===(y=cc.find("content/nodePageList1/nodeHouseList0/labLanList4",e))||void 0===y?void 0:y.getComponent(cc.Label),this.labLanList[5]=null===(b=cc.find("content/nodePageList1/nodeHouseList1/labLanList5",e))||void 0===b?void 0:b.getComponent(cc.Label),this.labLanList[6]=null===(w=cc.find("content/nodePageList1/nodeHouseList1/labLanList6",e))||void 0===w?void 0:w.getComponent(cc.Label),this.labLanList[7]=null===(C=cc.find("content/nodePageList1/nodeHouseList2/labLanList7",e))||void 0===C?void 0:C.getComponent(cc.Label),this.labLanList[8]=null===(S=cc.find("content/nodePageList1/nodeHouseList2/labLanList8",e))||void 0===S?void 0:S.getComponent(cc.Label),this.labLanList[9]=null===(L=cc.find("content/nodePageList2/labLanList9",e))||void 0===L?void 0:L.getComponent(cc.Label),this.labLanList[10]=null===(A=cc.find("content/nodePageList2/btnBackHome/labLanList10",e))||void 0===A?void 0:A.getComponent(cc.Label),this.svBag=null===(k=cc.find("content/nodePageList0/svBag",e))||void 0===k?void 0:k.getComponent(cc.ScrollView),this.svMain=null===(T=cc.find("content/nodePageList2/svMain",e))||void 0===T?void 0:T.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodePageList=[],this.nodeBagBg=null,this.nodeSubMenu=null,this.nodeHouseList=[],this.nodeTools=null,this.nodeKitchen=null,this.nodeRecipeBg=null,this.nodeAction=null,this.nodeArr=null,this.nodeArr=null,this.nodeThreeF=null,this.nodeArr=null,this.nodeContainer=null,this.nodeRecipeContainer=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.btnAllBag=null,this.btnRecipe=null,this.btnMain=null,this.btnOrder=null,this.btnDepot=null,this.btnMakeup=null,this.btnMakeup=null,this.btnDepot=null,this.btnDepot=null,this.btnMakeup=null,this.btnBed=null,this.btnTable=null,this.btnBackHome=null,this.labLanList=[],this.labOrder=null,this.svBag=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],bag_ui:[function(e,t,n){"use strict";cc._RF.push(t,"8a573Lb5BZN3oV2bctqDxto","bag_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l=e("../interface/item_amount"),s=e("../item/item_bag"),c=e("../item/item_recipe"),d=e("../manager/action_manager"),u=e("../manager/audio_manager"),h=e("../manager/dynamic_data_manager"),p=e("../manager/json_manager"),f=e("../manager/language_manager"),m=e("../manager/pool_manager"),g=e("../manager/resources_manager"),_=e("../manager/sale_manager"),v=e("../manager/ui_manager"),y=e("../manager/workshop_manager"),b=e("../ui_view/panel/bag_ui_view"),w=e("../utils/config"),C=e("../utils/emmiter"),S=e("../utils/enum"),L=e("../utils/game_config"),A=e("../utils/message"),k=e("../utils/utils"),T=e("./menu_ui"),M=e("./select_tag_ui"),R=cc._decorator,P=R.ccclass;R.property,function(e){e[e.bag=0]="bag",e[e.home=1]="home",e[e.recipe=2]="recipe"}(r||(r={}));var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new b.default,t._showHomeType=r.bag,t._haveRecord=!1,t._orderType=S.OrderType.default,t._recipeType=0,t.bagType=0,t.toolType=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._bindEvent()},t.prototype._bindEvent=function(){var e=this;C.Emitter.register(A.MessageType.dairyOpen,this.changeSvToShort,this),C.Emitter.register(A.MessageType.dairyClose,this.changeSvToLong,this),this._view.btnAllBag.node.on("click",function(){e._showHomeType=r.home,e.onSwitchPage()},this),this._view.btnBackHome.node.on("click",function(){e._showHomeType=r.home,e.onSwitchPage()},this),this._view.nodeSubMenu.children.forEach(function(t,n){t.on("click",function(){u.default.instance.playAudio("switch"),e.onChooseItemType(n)},e)}),this._view.nodeAction.children.forEach(function(t,n){t.on("click",function(){u.default.instance.playAudio("switch"),e.onChooseRecipeType(n)},e)}),this._view.btnOrder.node.on("click",this.onSwitchOrderType,this),this._view.btnMain.node.on("click",this.onClickSelectTag,this),C.Emitter.register(A.MessageType.onMakeup,function(){e.refreshBag()},this),C.Emitter.register(A.MessageType.onItemChangeAlert,function(){e.refreshBag()},this),this._view.nodeHouseList.forEach(function(t){t.getChildByName("btnDepot").on("click",function(){u.default.instance.playAudio("Coffee1"),e._showHomeType=r.bag,e.onSwitchPage()},e),t.getChildByName("btnMakeup").on("click",function(){u.default.instance.playAudio("Coffee1"),e.toolType=0,e._showHomeType=r.recipe,e.onSwitchPage()},e)}),this._view.btnBed.node.on("click",function(){u.default.instance.playAudio("Coffee2"),v.default.instance.LoadTipsByStr(f.default.GetText("\u8212\u9002\u7684\u5e8a"))},this),this._view.btnTable.node.on("click",function(){u.default.instance.playAudio("Coffee2"),v.default.instance.LoadTipsByStr(f.default.GetText("\u8bf7\u670b\u53cb\u6765\u5bb6"))},this),this._view.nodeKitchen.children.forEach(function(t,n){t.on("click",function(){u.default.instance.playAudio("Coffee2"),e.toolType=601+n,e._showHomeType=r.recipe,e.onSwitchPage()},e)}),this._view.nodeThreeF.children.forEach(function(t,n){t.on("click",function(){u.default.instance.playAudio("Coffee2"),e.toolType=608+n,e._showHomeType=r.recipe,e.onSwitchPage()},e)}),this._view.btnRecipe.node.on("click",function(){u.default.instance.playAudio("Coffee1"),e.toolType=0,e._showHomeType=r.recipe,e.onSwitchPage()},this)},t.prototype.onSwitchPage=function(){var e=this;switch(u.default.instance.playAudio("Coffee1"),this._view.nodePageList.forEach(function(t,n){t.active=n==e._showHomeType}),this._showHomeType){case r.bag:this._view.nodeSubMenu.active=!0,this._view.btnOrder.node.active=!0,this._view.btnMain.node.active=!0;break;case r.home:this.refreshHome();break;case r.recipe:this.onChooseRecipeType(0)}this._haveRecord?this.changeSvToShort():this.changeSvToLong()},t.prototype.changeSvToShort=function(){this._haveRecord=!0,this._view.nodeBagBg.height=150,this._view.svBag.node.height=108,this._view.svBag.node.getChildByName("view").height=108,this._view.btnAllBag.node.y=4.5,this._view.nodeSubMenu.y=19,this._view.btnOrder.node.y=19,this._view.btnMain.node.y=19,this._view.nodeRecipeBg.height=150,this._view.svMain.node.height=108,this._view.svMain.node.getChildByName("view").height=108,this._view.btnBackHome.node.y=4.5},t.prototype.changeSvToLong=function(){this._haveRecord=!1,this._view.nodeBagBg.height=230,this._view.svBag.node.height=188,this._view.svBag.node.getChildByName("view").height=188,this._view.btnAllBag.node.y=-76.5,this._view.nodeSubMenu.y=-61,this._view.btnOrder.node.y=-61,this._view.btnMain.node.y=-61,this._view.nodeRecipeBg.height=230,this._view.svMain.node.height=188,this._view.svMain.node.getChildByName("view").height=188,this._view.btnBackHome.node.y=-76.5},t.prototype.showUI=function(){this.setLanguage(),d.default.instance.fadeShowDialog(this._view.content),this._showHomeType=r.bag,this.onSwitchPage(),this.refreshBag(),1==T.default.instance._view.nodeBG.active?this.changeSvToShort():this.changeSvToLong(),this.refreshSelectContainer()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u7b5b\u9009","\u914d\u65b9\u5236\u4f5c","\u6253\u5f00\u5c0f\u5bb6","\u5236\u4f5c\u53f0","\u4ed3\u5e93","\u5236\u4f5c\u53f0","\u4ed3\u5e93","\u5236\u4f5c\u53f0","\u4ed3\u5e93","\u5408\u6210\u5217\u8868","\u6253\u5f00\u5c0f\u5bb6"];e.forEach(function(e,n){e.string=f.default.GetText(t[n])});var n=["\u53ef\u5408\u6210","\u6599\u7406","\u751c\u54c1","\u5de5\u827a"];this._view.nodeAction.children.forEach(function(e,t){e.getChildByName("label").getComponent(cc.Label).string=f.default.GetText(n[t])})},t.prototype.hideUI=function(){d.default.instance.fadeHideDialog(this._view.content)},t.prototype.refreshBag=function(){this._view.nodePageList[0].activeInHierarchy&&this.onChooseItemType(this.bagType)},t.prototype.refreshHome=function(){var e=h.default.instance.shopData.homeLv;this._view.nodeHouseList.forEach(function(e,t){e.active=h.default.instance.shopData.homeLv==t}),this._view.nodeKitchen.children.forEach(function(e){e.active=!1}),this._view.nodeTools.children.forEach(function(e,t){var n=h.default.instance.getToolLevel(401+t);e.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(S.ResType.main,k.Utils.getItemSpByAmount({id:401+t,quality:n}))}),this._view.nodeThreeF.children.forEach(function(e){e.active=!1}),e>=1&&this._view.nodeKitchen.children.forEach(function(e,t){y.WorkshopMgr.instance.getCanUseBuild(601+t)>0&&(e.active=!0,e.children[0].getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(S.ResType.main,k.Utils.getItemSpName(601+t)))}),2==e&&this._view.nodeThreeF.children.forEach(function(e,t){y.WorkshopMgr.instance.getCanUseBuild(608+t)>0&&(e.active=!0,e.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(S.ResType.main,k.Utils.getItemSpName(608+t)))})},t.prototype.refreshRecipeList=function(){if(this._view.nodePageList[2].activeInHierarchy){m.default.instance.removeObjByContainer(this._view.nodeRecipeContainer);var e=h.default.instance.getRecipeList(this._recipeType,this.toolType);e.sort(function(e,t){var n=h.default.instance.collectionData.recipeCollect.includes(e)?1:0;return(h.default.instance.collectionData.recipeCollect.includes(t)?1:0)-n});for(var t=0;t<e.length;t++)m.default.instance.createObjectByName("itemRecipe",this._view.nodeRecipeContainer).getComponent(c.default).init(e[t])}},t.prototype.onChooseItemType=function(e){var t=this;this.bagType=e;var n=h.default.instance.userTagData[S.SelectTagType.bag].map(function(e){return[e]});this._view.labOrder.string=L.GameConfig.OrderStr[this._orderType],m.default.instance.removeObjByContainer(this._view.nodeContainer);for(var i=[],a=0;a<h.default.instance.itemDepot.length;a++){var o=h.default.instance.itemDepot[a].id,r=p.default.instance.getDataByName("item")[o];r&&(0==n[e][0]||r.type&&n[e]&&r.type.some(function(t){return n[e].includes(t)}))&&i.push(a)}switch(this._orderType){case S.OrderType.priceUp:i=i.sort(function(e,t){var n=h.default.instance.itemDepot[e],i=h.default.instance.itemDepot[t];return _.default.instance.getItemPrice(i)-_.default.instance.getItemPrice(n)});break;case S.OrderType.numUp:i=i.sort(function(e,t){var n=h.default.instance.itemDepot[e];return h.default.instance.itemDepot[t].num-n.num});break;case S.OrderType.qualityUp:i=i.sort(function(e,t){var n=h.default.instance.itemDepot[e];return h.default.instance.itemDepot[t].quality-n.quality});break;default:i=i.sort(function(e,t){var n=h.default.instance.itemDepot[e],i=h.default.instance.itemDepot[t];return n.id==i.id?n.quality-i.quality:e-t})}i.forEach(function(e){m.default.instance.createObjectByName("itemBag",t._view.nodeContainer).getComponent(s.default).init(e,h.default.instance.itemDepot[e])}),this._view.nodeSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(S.ResType.main,n==e?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")})},t.prototype.onChooseRecipeType=function(e){this._recipeType=e,this._view.nodeAction.children.forEach(function(t,n){t.color=n==e?cc.Color.YELLOW:cc.Color.WHITE}),this.refreshRecipeList()},t.prototype.createMakeupEffect=function(e,t,n,i){for(var a=[],o=0;o<t;o++)a.push({type:l.RewardType.item,id:e,quality:n});T.default.instance.showReward(S.PageType.depot,a,i)},t.prototype.onSwitchOrderType=function(){u.default.instance.playAudio("switch"),this._orderType+=1,this._orderType>3&&(this._orderType=0),this.onChooseItemType(this.bagType)},t.prototype.onClickSelectTag=function(){v.default.instance.openUI(M.default,{name:w.Config.uiName.selectTagUI,param:[this._view.btnMain.node.y,S.SelectTagType.bag]},501)},t.prototype.refreshSelectContainer=function(){this._view.nodeSubMenu.children.forEach(function(e,t){var n=h.default.instance.userTagData[S.SelectTagType.bag][t];void 0!==n?(e.active=!0,e.getChildByName("label").getComponent(cc.Label).string=f.default.GetText("ItemTypeName"+n)):e.active=!1}),this.onChooseItemType(0)},t.prototype.checkNeedRecipeRed=function(){var e=h.default.instance.getRecipeList(0);return 0==h.default.instance.recordData.makeupRecipe&&e.length>0},t.instance=null,n=o([P],t)}(cc.Component);n.default=D,cc._RF.pop()},{"../interface/item_amount":"item_amount","../item/item_bag":"item_bag","../item/item_recipe":"item_recipe","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../manager/ui_manager":"ui_manager","../manager/workshop_manager":"workshop_manager","../ui_view/panel/bag_ui_view":"bag_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","../utils/utils":"utils","./menu_ui":"menu_ui","./select_tag_ui":"select_tag_ui"}],buff:[function(e,t,n){"use strict";cc._RF.push(t,"c6799O91dVFDImGMGIKglK7","buff"),Object.defineProperty(n,"__esModule",{value:!0}),n.Buff=void 0;var i=e("../manager/json_manager"),a=function(){function e(e,t){this.total=0,this.left=0,this.progress=0,this.id=0,this.entity=null,this.id=e,this.left=3,this.total=3,this.progress=1,this.entity=t}return e.prototype.addBuff=function(){var e=i.default.instance.getDataByName("buff")[this.id];e.time&&(this.total+=3,this.left+=3),e.stack&&(this.progress+=1)},e.prototype.onUpdate=function(e){i.default.instance.getDataByName("buff")[this.id].time&&(this.left-=e,this.entity.removeBuff(this.id))},e}();n.Buff=a,cc._RF.pop()},{"../manager/json_manager":"json_manager"}],build_manager:[function(e,t,n){"use strict";cc._RF.push(t,"4a704yaxwhDHpnKI7WWAr4V","build_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.BuildMgr=void 0;var i=e("../interface/item_amount"),a=e("../ui/building_ui"),o=e("../ui/field_ui"),r=e("../ui/friend_ui"),l=e("../ui/meadow_ui"),s=e("../ui/menu_ui"),c=e("../ui/sale_ui"),d=e("../ui/talk_ui"),u=e("../utils/config"),h=e("../utils/emmiter"),p=e("../utils/enum"),f=e("../utils/message"),m=e("../utils/utils"),g=e("./dynamic_data_manager"),_=e("./effect_manager"),v=e("./game_manager"),y=e("./guide_manager"),b=e("./json_manager"),w=e("./language_manager"),C=e("./ui_manager"),S=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.onExpand=function(e){var t=this.getExpandCost(e);if(g.default.instance.money<t[1].num)C.default.instance.LoadTipsByStr(w.default.GetText("\u91d1\u5e01\u4e0d\u8db3"));else if(this.getItemTotalNum(t[0].id)<t[0].num)C.default.instance.LoadTipsByStr(w.default.GetText("item_name_"+t[0].id)+w.default.GetText("\u4e0d\u8db3"));else{a.default.instance.hideUI();var n=g.default.instance.recordData.donePlot;switch(e){case p.BuildingExpandType.friend:g.default.instance.allFriendData.friendMax++,g.default.instance.allFriendData.friendMax<4?(s.default.instance.onClickMenuBtn(0),r.default.instance.showNewEffect()):C.default.instance.LoadTipsByStr(w.default.GetText("\u670b\u53cb\u6269\u5efa")+g.default.instance.allFriendData.friendMax),n.includes(30301)||C.default.instance.openUI(d.default,{name:u.Config.uiName.talkUI,param:[30301]});break;case p.BuildingExpandType.sale:g.default.instance.allSaleData.maxSale++,g.default.instance.allSaleData.list.push({index:g.default.instance.allSaleData.maxSale-1,item:null,autoNum:0,autoUp:!1}),g.default.instance.allSaleData.maxSale<5?(s.default.instance.onClickMenuBtn(1),c.default.instance.showNewEffect()):C.default.instance.LoadTipsByStr(w.default.GetText("\u644a\u4f4d\u6269\u5efa")+g.default.instance.allSaleData.maxSale),n.includes(30201)||C.default.instance.openUI(d.default,{name:u.Config.uiName.talkUI,param:[30201]});break;case p.BuildingExpandType.field:g.default.instance.allFieldData.maxField++,g.default.instance.allFieldData.list.push({index:g.default.instance.allFieldData.maxField-1,seed:null,maxNum:1,grow:0,autoWater:!1,progress:0,quality:0,saveWater:0,defenceBug:0,growSpeed:0,bug:0,monthFert:[0,0,0,0]}),g.default.instance.allFieldData.maxField<7?(s.default.instance.onClickMenuBtn(2),o.default.instance.showNewEffect()):C.default.instance.LoadTipsByStr(w.default.GetText("\u519c\u7530\u6269\u5efa")+g.default.instance.allFieldData.list.length),n.includes(30001)||C.default.instance.openUI(d.default,{name:u.Config.uiName.talkUI,param:[30001]});break;case p.BuildingExpandType.meadow:g.default.instance.meadowData.maxNum++,g.default.instance.meadowData.animalList.push({id:null,index:g.default.instance.meadowData.maxNum-1,productIndex:0,hungry:0,progress:0}),g.default.instance.meadowData.maxNum<7?C.default.instance.openUI(l.default,{name:u.Config.uiName.meadowUI,param:[!0]}):C.default.instance.LoadTipsByStr(w.default.GetText("\u7267\u573a\u6269\u5efa")+g.default.instance.meadowData.maxNum),n.includes(30101)||C.default.instance.openUI(d.default,{name:u.Config.uiName.talkUI,param:[30101]});break;case p.BuildingExpandType.shop:g.default.instance.shopData.shopLv++,n.includes(30501)?C.default.instance.LoadTipsByStr(w.default.GetText("\u5546\u5e97\u6269\u5efa")):C.default.instance.openUI(d.default,{name:u.Config.uiName.talkUI,param:[30501]});break;case p.BuildingExpandType.adv:g.default.instance.shopData.advLv++,n.includes(30601)?C.default.instance.LoadTipsByStr(w.default.GetText("\u516c\u4f1a\u6269\u5efa")):C.default.instance.openUI(d.default,{name:u.Config.uiName.talkUI,param:[30601]});break;case p.BuildingExpandType.home:g.default.instance.shopData.homeLv++,1==g.default.instance.shopData.homeLv?n.includes(30401)||C.default.instance.openUI(d.default,{name:u.Config.uiName.talkUI,param:[30401]}):2==g.default.instance.shopData.homeLv&&(n.includes(951)||C.default.instance.openUI(d.default,{name:u.Config.uiName.talkUI,param:[951]}));break;case p.BuildingExpandType.town:g.default.instance.shopData.townLv++,n.includes(30701)?C.default.instance.LoadTipsByStr(w.default.GetText("\u5c0f\u9547\u6269\u5efa")):C.default.instance.openUI(d.default,{name:u.Config.uiName.talkUI,param:[30701]}),5==g.default.instance.shopData.townLv&&(n.includes(30801)||C.default.instance.openUI(d.default,{name:u.Config.uiName.talkUI,param:[30801]}))}g.default.instance.money-=t[1].num,this.costItemTotalNum(t[0].id,t[0].num)}},e.prototype.checkCanExpand=function(){return!0},e.prototype.getExpandCost=function(e){var t=0,n=0,a=v.default.instance.getPrecentValueByStr("buildCost"),o=n;switch(e){case p.BuildingExpandType.friend:return t=g.default.instance.allFriendData.friendMax,n=Math.ceil(Math.pow(10*t,1.2)*a),o=Math.ceil(160*n*(Math.floor(t/3)+1)),[{type:i.RewardType.item,id:504,num:n},{type:i.RewardType.money,num:o}];case p.BuildingExpandType.meadow:return t=g.default.instance.meadowData.maxNum,n=Math.ceil(Math.pow(8*t,1)*a),o=Math.ceil(130*n*(Math.floor(t/5)+1)),[{type:i.RewardType.item,id:502,num:n},{type:i.RewardType.money,num:o}];case p.BuildingExpandType.sale:return t=g.default.instance.allSaleData.maxSale,n=Math.ceil(Math.pow(15*t,1.05)*a),o=Math.ceil(80*n*(Math.floor(t/3.5)+1)),[{type:i.RewardType.item,id:501,num:n},{type:i.RewardType.money,num:o}];case p.BuildingExpandType.field:return t=g.default.instance.allFieldData.maxField,n=Math.ceil(Math.pow(12*t,1.1)*a),o=Math.ceil(110*n*(Math.floor(t/4)+1)),[{type:i.RewardType.item,id:503,num:n},{type:i.RewardType.money,num:o}];case p.BuildingExpandType.shop:return t=g.default.instance.shopData.shopLv+1,n=Math.ceil(20*Math.pow(2,t)*a),o=Math.ceil(200*n*(Math.floor(t)+1)),[{type:i.RewardType.item,id:501,num:n},{type:i.RewardType.money,num:o}];case p.BuildingExpandType.adv:return t=g.default.instance.shopData.advLv+1,n=Math.ceil(22*Math.pow(2,t)*a),o=Math.ceil(250*n*(Math.floor(t)+1)),[{type:i.RewardType.item,id:503,num:n},{type:i.RewardType.money,num:o}];case p.BuildingExpandType.home:return t=g.default.instance.shopData.homeLv+1,n=Math.ceil(35*Math.pow(2,t)*a),o=Math.ceil(360*n*(Math.floor(t)+1)),[{type:i.RewardType.item,id:502,num:n},{type:i.RewardType.money,num:o}];case p.BuildingExpandType.town:return t=g.default.instance.shopData.townLv+1,n=Math.ceil(50*Math.pow(2,t)*a),o=Math.ceil(180*n*(Math.floor(t)+1)/3),[{type:i.RewardType.item,id:504,num:n},{type:i.RewardType.money,num:o}]}},e.prototype.onBuyFurniture=function(e,t){var n=b.default.instance.getDataByName("item")[e],i=v.default.instance.getPrecentValueByStr("furnitureCost");if(g.default.instance.money<10*n.point*i)C.default.instance.LoadTipsByStr(w.default.GetText("\u91d1\u5e01\u4e0d\u8db3"));else if(g.default.instance.point<n.point*i)C.default.instance.LoadTipsByStr(w.default.GetText("\u70b9\u6570\u4e0d\u8db3"));else{g.default.instance.money-=10*n.point*i,g.default.instance.point-=n.point*i;var a={id:e,num:1,quality:1};g.default.instance.onReward(a),t&&_.default.instance.createRewardItemSp(a,m.Utils.getNodeUsePos(t))}},e.prototype.upgradeKit=function(e,t){var n=g.default.instance.findItem(e)[0].quality,i=Math.floor(Math.pow(25,1+.2*n));if(g.default.instance.point<i)C.default.instance.LoadTipsByStr(w.default.GetText("\u70b9\u6570\u4e0d\u8db3"));else{var a;a=e==p.ToolId.\u80cc\u5305?[1014,809,817,1008,1012][n]:[505,506,507,508,509][n];var o=[10,6,12,10,8,8,4][e-p.ToolId.\u6c34\u58f6];if(this.getItemTotalNum(a)<o)C.default.instance.LoadTipsByStr(w.default.GetText("item_name_"+a)+w.default.GetText("\u4e0d\u8db3"));else{g.default.instance.point-=i,this.costItemTotalNum(a,o);var r=g.default.instance.itemDepot.findIndex(function(t){return t.id==e}),l={id:e,num:1,quality:g.default.instance.itemDepot[r].quality+1};g.default.instance.onCost(g.default.instance.itemDepot[r]),g.default.instance.onReward(l),t&&_.default.instance.createRewardItemSp(l,m.Utils.getNodeUsePos(t)),h.Emitter.fire(f.MessageType.doneGuideByType,y.GuideStep.upgrade)}}},e.prototype.getItemTotalNum=function(e){var t=g.default.instance.findItem(e),n=0;return t.forEach(function(e){n+=e.num}),n},e.prototype.costItemTotalNum=function(e,t){g.default.instance.findItem(e).forEach(function(e){if(t>0){var n=Math.min(e.num,t);t-=n,g.default.instance.onCost({id:e.id,num:n,quality:e.quality})}})},e._instance=null,e}();n.BuildMgr=S,cc._RF.pop()},{"../interface/item_amount":"item_amount","../ui/building_ui":"building_ui","../ui/field_ui":"field_ui","../ui/friend_ui":"friend_ui","../ui/meadow_ui":"meadow_ui","../ui/menu_ui":"menu_ui","../ui/sale_ui":"sale_ui","../ui/talk_ui":"talk_ui","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./dynamic_data_manager":"dynamic_data_manager","./effect_manager":"effect_manager","./game_manager":"game_manager","./guide_manager":"guide_manager","./json_manager":"json_manager","./language_manager":"language_manager","./ui_manager":"ui_manager"}],building_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"51a470wMiZFKY+GwDhpoTYM","building_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodeBuildingContainer=null,this.nodeFurnitureContainer=null,this.nodeKitCraftContainer=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.btnAct=null,this.btnMain=null,this.btnHome=null,this.labLanList=[],this.svMain=null,this.svMain=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodePageList[2]=cc.find("content/nodePageList2",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodeBuildingContainer=cc.find("content/nodePageList0/svMain/view/nodeBuildingContainer",e),this.nodeFurnitureContainer=cc.find("content/nodePageList1/svMain/view/nodeFurnitureContainer",e),this.nodeKitCraftContainer=cc.find("content/nodePageList2/svMain/view/nodeKitCraftContainer",e),this.itemBuilding=cc.find("content/nodePageList0/svMain/view/nodeBuildingContainer/itemBuilding",e),this.itemBuilding=cc.find("content/nodePageList0/svMain/view/nodeBuildingContainer/itemBuilding",e),this.itemBuilding=cc.find("content/nodePageList0/svMain/view/nodeBuildingContainer/itemBuilding",e),this.itemBuilding=cc.find("content/nodePageList0/svMain/view/nodeBuildingContainer/itemBuilding",e),this.itemBuilding=cc.find("content/nodePageList0/svMain/view/nodeBuildingContainer/itemBuilding",e),this.itemBuilding=cc.find("content/nodePageList0/svMain/view/nodeBuildingContainer/itemBuilding",e),this.itemBuilding=cc.find("content/nodePageList0/svMain/view/nodeBuildingContainer/itemBuilding",e),this.itemBuilding=cc.find("content/nodePageList0/svMain/view/nodeBuildingContainer/itemBuilding",e),this.btnAct=null===(t=cc.find("content/nodeMenu/btnAct",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnMain=null===(n=cc.find("content/nodeMenu/btnMain",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnHome=null===(i=cc.find("content/nodeMenu/btnHome",e))||void 0===i?void 0:i.getComponent(cc.Button),this.labLanList[0]=null===(a=cc.find("content/nodeMenu/btnAct/labLanList0",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labLanList[1]=null===(o=cc.find("content/nodeMenu/btnMain/labLanList1",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labLanList[2]=null===(r=cc.find("content/nodeMenu/btnHome/labLanList2",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[3]=null===(l=cc.find("content/labLanList3",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[4]=null===(s=cc.find("content/labLanList4",e))||void 0===s?void 0:s.getComponent(cc.Label),this.svMain=null===(c=cc.find("content/nodePageList0/svMain",e))||void 0===c?void 0:c.getComponent(cc.ScrollView),this.svMain=null===(d=cc.find("content/nodePageList1/svMain",e))||void 0===d?void 0:d.getComponent(cc.ScrollView),this.svMain=null===(u=cc.find("content/nodePageList2/svMain",e))||void 0===u?void 0:u.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodeBuildingContainer=null,this.nodeFurnitureContainer=null,this.nodeKitCraftContainer=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.itemBuilding=null,this.btnAct=null,this.btnMain=null,this.btnHome=null,this.labLanList=[],this.svMain=null,this.svMain=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],building_ui:[function(e,t,n){"use strict";cc._RF.push(t,"9b348xmomhPkoAiDBKdvLmH","building_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/plan_data"),l=e("../item/item_building"),s=e("../item/item_furniture_craft"),c=e("../item/item_kit_craft"),d=e("../manager/action_manager"),u=e("../manager/audio_manager"),h=e("../manager/dynamic_data_manager"),p=e("../manager/language_manager"),f=e("../manager/pool_manager"),m=e("../manager/record_manager"),g=e("../manager/resources_manager"),_=e("../ui_view/panel/building_ui_view"),v=e("../utils/enum"),y=cc._decorator,b=y.ccclass,w=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new _.default,t._page=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u6269\u5efa","\u5bb6\u5177","\u5de5\u5177\u5347\u7ea7","\u5de5\u5320\u5c4b\u63d0\u793a","\u5de5\u5320\u5c4b"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeMenu.children.forEach(function(t,n){t.on("click",function(){u.default.instance.playAudio("switch"),e.onClickPageBtn(n)},e)})},t.prototype.showUI=function(){d.default.instance.popOut(this._view.content,this._view.nodeMask),m.default.instance.onOpenPage(v.PageType.building),this.onClickPageBtn(0)},t.prototype.hideUI=function(){u.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onClickPageBtn=function(e){switch(this._page=e,this._view.nodePageList.forEach(function(t,n){t.active=n==e}),this._view.nodeMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(v.ResType.main,n==e?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")}),e){case 0:this.refreshExpandPage();break;case 1:this.refreshBuildingPage();break;case 2:this.refreshToolPage()}},t.prototype.refreshExpandPage=function(){this._view.nodeBuildingContainer.children.forEach(function(e,t){t<8?e.getComponent(l.default).init(t):e.active=!1})},t.prototype.refreshBuildingPage=function(){f.default.instance.removeObjByContainer(this._view.nodeFurnitureContainer);var e=[601,602,603,604,605,606,607,608,609];h.default.instance.planData.skillLv[r.PlanType.fish]>0&&e.push(610);for(var t=0;t<e.length;t++)f.default.instance.createObjectByName("itemFurnitureCraft",this._view.nodeFurnitureContainer).getComponent(s.default).init(e[t])},t.prototype.refreshToolPage=function(){f.default.instance.removeObjByContainer(this._view.nodeKitCraftContainer);for(var e=[401,407,402,403,404,405,406],t=0;t<e.length;t++)h.default.instance.findItem(e[t])[0].quality<5&&f.default.instance.createObjectByName("itemKitCraft",this._view.nodeKitCraftContainer).getComponent(c.default).init(e[t])},t.instance=null,n=o([b],t)}(cc.Component));n.default=w,cc._RF.pop()},{"../interface/plan_data":"plan_data","../item/item_building":"item_building","../item/item_furniture_craft":"item_furniture_craft","../item/item_kit_craft":"item_kit_craft","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../ui_view/panel/building_ui_view":"building_ui_view","../utils/enum":"enum"}],canvas_ui:[function(e,t,n){"use strict";cc._RF.push(t,"5295bTGPAxI6qyZ2at1VQPC","canvas_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{s(i.next(e))}catch(t){o(t)}}function l(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,l)}s((i=i.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(l){o=[6,l],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../manager/effect_manager"),c=e("../manager/game_manager"),d=e("../manager/resources_manager"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.effectContainer=null,t.bgNode=null,t.maskBgNode=null,t.waveOffset=0,t.maskOpa=0,t.weatherPar=[],t.refreshSpdTimer=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){var e=this;n.instance=this,this.node.on(cc.Node.EventType.TOUCH_START,function(t){3==d.default.instance.loading&&s.default.instance.createEffect("effect_4",t.getLocation().sub(cc.v2(window.winSize.width/2,window.winSize.height/2))),e.refreshSpdTimer&&clearTimeout(e.refreshSpdTimer),e.refreshSpdTimer=setTimeout(function(){c.default.instance.refreshGameSpd(),e.refreshSpdTimer=null},100),e.onGetClickPos(t.getLocation().sub(cc.v2(window.winSize.width/2,window.winSize.height/2)))},this,!0),this.node._touchListener.setSwallowTouches(!1),this.effectContainer.zIndex=999},t.prototype.update=function(e){this.waveOffset<1.5&&(this.waveOffset+=e,this.bgNode.getComponent(cc.Sprite).getMaterial(0).setProperty("wave_offset",this.waveOffset)),this.maskOpa<1.2&&(this.maskOpa+=e,this.maskBgNode.getComponent(cc.Sprite).getMaterial(0).setProperty("u_time",this.maskOpa))},t.prototype.start=function(){var e=new cc.Node("CameraClearStencil"),t=e.addComponent(cc.Camera);cc.find("Canvas").addChild(e),e.groupIndex=1,t.clearFlags=cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL,t.depth=10,t.cullingMask=0},t.prototype.switchBg=function(e){return r(this,void 0,void 0,function(){var t,n;return l(this,function(i){switch(i.label){case 0:return this.maskOpa=0,(t=this.maskBgNode.getComponent(cc.Sprite)).getMaterial(0).setProperty("u_time",this.maskOpa),t.spriteFrame=this.bgNode.getComponent(cc.Sprite).spriteFrame,n=this.bgNode.getComponent(cc.Sprite),[4,d.default.instance.getBackGround(e)];case 1:return n.spriteFrame=i.sent(),[2]}})})},t.prototype.onGetClickPos=function(e){var t=[.5+e.x/160,(330-e.y)/330-.5];this.bgNode.getComponent(cc.Sprite).getMaterial(0).setProperty("center",t),this.waveOffset=0},t.instance=null,o([p(cc.Node)],t.prototype,"effectContainer",void 0),o([p(cc.Node)],t.prototype,"bgNode",void 0),o([p(cc.Node)],t.prototype,"maskBgNode",void 0),o([p(cc.ParticleSystem)],t.prototype,"weatherPar",void 0),n=o([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../manager/effect_manager":"effect_manager","../manager/game_manager":"game_manager","../manager/resources_manager":"resources_manager"}],char_data:[function(e,t,n){"use strict";cc._RF.push(t,"68fbb2CkM9DTZ2jFS7KqSaf","char_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],char_state:[function(e,t,n){"use strict";cc._RF.push(t,"ae938i22wBMmKbf1evYmgp9","char_state");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CharDeathState=n.CharBehitState=n.CharAtkState=n.CharMoveState=n.CharIdleState=n.CharState=void 0;var o=e("../manager/action_manager"),r=e("../manager/audio_manager"),l=e("../manager/effect_manager"),s=e("../manager/game_manager"),c=e("../manager/language_manager"),d=e("../manager/resources_manager"),u=e("../manager/ui_manager"),h=e("../ui/friend_ui"),p=e("../utils/enum"),f=e("../utils/utils"),m=function(e){function t(t){var n=e.call(this,t)||this;return n.item=t,n}return a(t,e),t.prototype.onFrameEvent=function(){},t}(e("./i_state").IState);n.CharState=m;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t}return a(t,e),t.prototype.onEnter=function(){this.item.nodeAnima.getComponent(cc.Animation).stop(),this.item.nodeAnima.getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(p.ResType.main,"char-char_"+this.item.entity.id)},t.prototype.onUpdate=function(e){this.timer+=e,this.item.barAction.progress=this.timer/this.item.entity.getAtkCold();var t=this.item.getTarget();this.timer>this.item.entity.getAtkCold()&&t.some(function(e){return e})&&this.item.switchState(p.CharAnimaType.atk)},t}(m);n.CharIdleState=g;var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spd=0,t}return a(t,e),t.prototype.onEnter=function(){this.spd=25+f.Utils.getRandomNumber(15),o.default.instance.playNpcAnimation(this.item.entity.id,p.CharAnimaType.walk,this.item.nodeAnima)},t.prototype.onUpdate=function(e){var t=this.item.node.x;Math.abs(t)<.5?this.item.switchState(p.CharAnimaType.idle):this.item.isMonster()?t>0?this.item.node.x-=e*this.spd:this.item.switchState(p.CharAnimaType.idle):t<0?this.item.node.x+=e*this.spd:this.item.switchState(p.CharAnimaType.idle)},t}(m);n.CharMoveState=_;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onEnter=function(){this.timer=0,o.default.instance.playNpcAnimation(this.item.entity.id,p.CharAnimaType.atk,this.item.nodeAnima)},t.prototype.onUpdate=function(e){this.timer+=e,this.timer>.83&&this.onFrameEvent(null)},t.prototype.onFrameEvent=function(){var e=this;this.item._isDeath?this.item.switchState(p.CharAnimaType.defeat):(this.item.onAtk(),this.item.switchState(p.CharAnimaType.idle),setTimeout(function(){!e.item.isMonster()&&f.Utils.luckChance(s.default.instance.getValueByStr("twiceAtk"))?e.item.checkShowEffect()&&l.default.instance.createLabel(c.default.GetText("\u53cc\u51fb"),f.Utils.getNodeUsePos(e.item.nodeAnima)):e.item.state[p.CharAnimaType.idle].timer=0}))},t}(m);n.CharAtkState=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onEnter=function(){this.timer=0,o.default.instance.playNpcAnimation(this.item.entity.id,p.CharAnimaType.hit,this.item.nodeAnima)},t.prototype.onUpdate=function(e){this.timer+=e,this.timer>.67&&this.onFrameEvent(null)},t.prototype.onFrameEvent=function(){var e=this;this.item.switchState(p.CharAnimaType.idle),!this.item.isMonster()&&f.Utils.luckChance(s.default.instance.getValueByStr("fightBack"))&&(this.item.checkShowEffect()&&l.default.instance.createLabel(c.default.GetText("\u53cd\u51fb"),f.Utils.getNodeUsePos(this.item.nodeAnima)),setTimeout(function(){e.item.state[p.CharAnimaType.idle].timer=999}))},t}(m);n.CharBehitState=y;var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startDis=!1,t.isRemove=!1,t}return a(t,e),t.prototype.onEnter=function(){this.timer=0,this.isRemove=!1,o.default.instance.playNpcAnimation(this.item.entity.id,p.CharAnimaType.defeat,this.item.nodeAnima)},t.prototype.onFrameEvent=function(){this.startDis=!0,this.item.nodeAnima.getComponent(cc.Animation).stop()},t.prototype.onUpdate=function(e){this.timer+=e,!this.startDis&&this.timer>.83?this.onFrameEvent(null):this.startDis&&(this.item.node.opacity-=510*e,this.item.node.opacity<=0&&!this.isRemove&&(this.isRemove=!0,u.default.instance.checkUIIsOpen(h.default)&&(this.item.isMonster()?r.default.instance.playAudio("point"):r.default.instance.playAudio("died")),this.item.onRemove()))},t}(m);n.CharDeathState=b,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/effect_manager":"effect_manager","../manager/game_manager":"game_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui/friend_ui":"friend_ui","../utils/enum":"enum","../utils/utils":"utils","./i_state":"i_state"}],choose_map_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"73d13pMUxJAv4UNi/JzT+zJ","choose_map_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeChooseContainer=null,this.labLanList=[],this.svMain=null}return e.prototype.initView=function(e){var t,n;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeChooseContainer=cc.find("content/svMain/view/nodeChooseContainer",e),this.labLanList[0]=null===(t=cc.find("content/labLanList0",e))||void 0===t?void 0:t.getComponent(cc.Label),this.svMain=null===(n=cc.find("content/svMain",e))||void 0===n?void 0:n.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeChooseContainer=null,this.labLanList=[],this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],choose_map_ui:[function(e,t,n){"use strict";cc._RF.push(t,"dc398vS51FB0b2/JHyKoXxS","choose_map_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_map_choose"),l=e("../manager/action_manager"),s=e("../manager/audio_manager"),c=e("../manager/dynamic_data_manager"),d=e("../manager/friend_manager"),u=e("../manager/language_manager"),h=e("../manager/plan_manager"),p=e("../manager/pool_manager"),f=e("../ui_view/panel/choose_map_ui_view"),m=cc._decorator,g=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new f.default,t.curMapIndex=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u9009\u62e9\u5730\u56fe"];e.forEach(function(e,n){e.string=u.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this)},t.prototype.showUI=function(){this.curMapIndex=c.default.instance.allFriendData.area-1,l.default.instance.popOut(this._view.content,this._view.nodeMask),this.refreshList()},t.prototype.refreshList=function(){p.default.instance.removeObjByContainer(this._view.nodeChooseContainer);for(var e=0;e<h.PlanMgr.instance.getMaxMap()+1&&!(e>=20);e++){var t=p.default.instance.createObjectByName("itemMapChoose",this._view.nodeChooseContainer);t.getComponent(r.default).init(e),t.getComponent(r.default).setSelect(e==this.curMapIndex)}},t.prototype.onChoose=function(e){e<h.PlanMgr.instance.getMaxMap()&&(this.curMapIndex=e,this.refreshList())},t.prototype.hideUI=function(){s.default.instance.playAudio("paper2"),d.FriendMgr.instance.onChooseArea(this.curMapIndex+1),this._view.content.active=!1},t.instance=null,n=o([g],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../item/item_map_choose":"item_map_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/language_manager":"language_manager","../manager/plan_manager":"plan_manager","../manager/pool_manager":"pool_manager","../ui_view/panel/choose_map_ui_view":"choose_map_ui_view"}],collection_data:[function(e,t,n){"use strict";cc._RF.push(t,"3a800tsJbhHwoqj7Qo3Fw7X","collection_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],collection_manager:[function(e,t,n){"use strict";cc._RF.push(t,"9447fM/xr1JXICHyYCqizmz","collection_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.CollectionMgr=void 0;var i=e("../utils/emmiter"),a=e("../utils/enum"),o=e("../utils/message"),r=e("../utils/utils"),l=e("./dynamic_data_manager"),s=e("./game_manager"),c=e("./shop_manager"),d=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(){var e=this;for(var t in l.default.instance.collectionData={recipeCollect:[],autoSell:{},autoEat:[],autoEgg:[],autoAddFeed:{},unlockItem:l.default.instance.shopData.maxQuality},l.default.instance.itemDepot.forEach(function(t){e.updateCollection(t)}),l.default.instance.planData.maxPlanNum>1&&this.updateCollection({id:852,quality:1}),l.default.instance.meadowData.animalDepot)this.updateCollection({id:+t+1400,quality:1});l.default.instance.meadowData.animalList.forEach(function(t){t.id&&e.updateCollection({id:t.id+1400,quality:1})})},e.prototype.updateCollection=function(e){var t=l.default.instance.collectionData;t.unlockItem[e.id]?t.unlockItem[e.id]<e.quality&&(t.unlockItem[e.id]=e.quality):t.unlockItem[e.id]=e.quality},e.prototype.isRecipeCollect=function(e){return l.default.instance.collectionData.recipeCollect.includes(e)},e.prototype.onToggleCollectRecipe=function(e){var t=l.default.instance.collectionData.recipeCollect,n=t.findIndex(function(t){return t==e});-1==n?t.push(e):t.splice(n,1)},e.prototype.getAutoSellQua=function(e){var t=l.default.instance.collectionData;return t.autoSell[e]?t.autoSell[e]:-1},e.prototype.setAutoSell=function(e,t){var n=l.default.instance.collectionData;n.autoSell[e]&&n.autoSell[e]==t?delete n.autoSell[e]:n.autoSell[e]=t},e.prototype.isAutoEat=function(e){return l.default.instance.collectionData.autoEat.includes(e)},e.prototype.setAutoEat=function(e){var t=l.default.instance.collectionData.autoEat,n=t.findIndex(function(t){return t==e});-1==n?t.push(e):t.splice(n,1)},e.prototype.onAutoSell=function(){var e=this,t=0;l.default.instance.itemDepot.forEach(function(n){e.getAutoSellQua(n.id)>=n.quality&&(t+=c.ShopMgr.instance.onSellItemByData(n))}),t>0&&i.Emitter.fire(o.MessageType.addDairy,a.DairyRtType.autoSell,{num:t})},e.prototype.onAutoEat=function(){var e=l.default.instance.maxHealth-l.default.instance.health,t=[];if(l.default.instance.collectionData.autoEat.forEach(function(e){t.push.apply(t,l.default.instance.findItem(e))}),(t=t.filter(function(t){return e>=s.default.instance.getFoodHealth(t)})).length>0){var n=r.Utils.getArrRandomItem(t),c={id:n.id,num:1,quality:n.quality};i.Emitter.fire(o.MessageType.addDairy,a.DairyRtType.autoEat,{rewardList:[c]}),s.default.instance.onUseFood(r.Utils.getArrRandomItem(t)),l.default.instance.onCost(c)}},e._instance=null,e}();n.CollectionMgr=d,cc._RF.pop()},{"../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./dynamic_data_manager":"dynamic_data_manager","./game_manager":"game_manager","./shop_manager":"shop_manager"}],collection_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"008c2rq+FlEGJT3Uy5lnt04","collection_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeMenu=null,this.nodeDetail=null,this.nodePageList=[],this.nodeAutoSell=null,this.nodeCollect=null,this.nodeAutoEat=null,this.nodeMenuList=[],this.nodeQuality=null,this.nodeContainerList=[],this.btnAct=null,this.btnMain=null,this.btnAct=null,this.btnHome=null,this.btnHome=null,this.btnBack=null,this.btnMoreInfo=null,this.btnCheck=null,this.btnCheck=null,this.btnMain=null,this.btnAct=null,this.btnHome=null,this.btnHome=null,this.btnAct=null,this.btnHome=null,this.btnAct=null,this.btnAct=null,this.btnHome=null,this.btnHome=null,this.btnHome=null,this.btnAct=null,this.btnAct=null,this.btnHome=null,this.btnHome=null,this.btnHome=null,this.labLanList=[],this.labDec=null,this.labName=null,this.labTitle=null,this.sprMain=null,this.svLabel=null,this.svMain=null,this.svMain=null,this.svMain=null,this.svMain=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v,y,b,w,C,S,L,A,k,T,M,R,P,D,B,F,I,O,N,x,j,U,E,G,V,H,q,Q,J,K,W,Y,z,Z,X,$,ee,te,ne,ie,ae,oe;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodeDetail=cc.find("content/nodeDetail",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodePageList[2]=cc.find("content/nodePageList2",e),this.nodePageList[3]=cc.find("content/nodePageList3",e),this.nodePageList[4]=cc.find("content/nodePageList4",e),this.nodeAutoSell=cc.find("content/nodeDetail/nodeAutoSell",e),this.nodeCollect=cc.find("content/nodeDetail/nodeCollect",e),this.nodeAutoEat=cc.find("content/nodeDetail/nodeAutoEat",e),this.nodeMenuList[0]=cc.find("content/nodePageList0/nodeMenuList0",e),this.nodeMenuList[1]=cc.find("content/nodePageList1/nodeMenuList1",e),this.nodeMenuList[2]=cc.find("content/nodePageList2/nodeMenuList2",e),this.nodeQuality=cc.find("content/nodeDetail/nodeAutoSell/nodeQuality",e),this.nodeContainerList[0]=cc.find("content/nodePageList0/svMain/view/nodeContainerList0",e),this.nodeContainerList[1]=cc.find("content/nodePageList1/svMain/view/nodeContainerList1",e),this.nodeContainerList[2]=cc.find("content/nodePageList2/svMain/view/nodeContainerList2",e),this.nodeContainerList[3]=cc.find("content/nodePageList3/svMain/view/nodeContainerList3",e),this.nodeContainerList[4]=cc.find("content/nodePageList4/svMain/view/nodeContainerList4",e),this.btnAct=null===(t=cc.find("content/nodeMenu/btnAct",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnMain=null===(n=cc.find("content/nodeMenu/btnMain",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnAct=null===(i=cc.find("content/nodeMenu/btnAct",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnHome=null===(a=cc.find("content/nodeMenu/btnHome",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnHome=null===(o=cc.find("content/nodeMenu/btnHome",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnBack=null===(r=cc.find("content/btnBack",e))||void 0===r?void 0:r.getComponent(cc.Button),this.btnMoreInfo=null===(l=cc.find("content/nodeDetail/btnMoreInfo",e))||void 0===l?void 0:l.getComponent(cc.Button),this.btnCheck=null===(s=cc.find("content/nodeDetail/nodeCollect/btnCheck",e))||void 0===s?void 0:s.getComponent(cc.Button),this.btnCheck=null===(c=cc.find("content/nodeDetail/nodeAutoEat/btnCheck",e))||void 0===c?void 0:c.getComponent(cc.Button),this.btnMain=null===(d=cc.find("content/nodePageList0/nodeMenuList0/btnMain",e))||void 0===d?void 0:d.getComponent(cc.Button),this.btnAct=null===(u=cc.find("content/nodePageList0/nodeMenuList0/btnAct",e))||void 0===u?void 0:u.getComponent(cc.Button),this.btnHome=null===(h=cc.find("content/nodePageList0/nodeMenuList0/btnHome",e))||void 0===h?void 0:h.getComponent(cc.Button),this.btnHome=null===(p=cc.find("content/nodePageList0/nodeMenuList0/btnHome",e))||void 0===p?void 0:p.getComponent(cc.Button),this.btnAct=null===(f=cc.find("content/nodePageList0/nodeMenuList0/btnAct",e))||void 0===f?void 0:f.getComponent(cc.Button),this.btnHome=null===(m=cc.find("content/nodePageList0/nodeMenuList0/btnHome",e))||void 0===m?void 0:m.getComponent(cc.Button),this.btnAct=null===(g=cc.find("content/nodePageList1/nodeMenuList1/btnAct",e))||void 0===g?void 0:g.getComponent(cc.Button),this.btnAct=null===(_=cc.find("content/nodePageList1/nodeMenuList1/btnAct",e))||void 0===_?void 0:_.getComponent(cc.Button),this.btnHome=null===(v=cc.find("content/nodePageList1/nodeMenuList1/btnHome",e))||void 0===v?void 0:v.getComponent(cc.Button),this.btnHome=null===(y=cc.find("content/nodePageList1/nodeMenuList1/btnHome",e))||void 0===y?void 0:y.getComponent(cc.Button),this.btnHome=null===(b=cc.find("content/nodePageList1/nodeMenuList1/btnHome",e))||void 0===b?void 0:b.getComponent(cc.Button),this.btnAct=null===(w=cc.find("content/nodePageList2/nodeMenuList2/btnAct",e))||void 0===w?void 0:w.getComponent(cc.Button),this.btnAct=null===(C=cc.find("content/nodePageList2/nodeMenuList2/btnAct",e))||void 0===C?void 0:C.getComponent(cc.Button),this.btnHome=null===(S=cc.find("content/nodePageList2/nodeMenuList2/btnHome",e))||void 0===S?void 0:S.getComponent(cc.Button),this.btnHome=null===(L=cc.find("content/nodePageList2/nodeMenuList2/btnHome",e))||void 0===L?void 0:L.getComponent(cc.Button),this.btnHome=null===(A=cc.find("content/nodePageList2/nodeMenuList2/btnHome",e))||void 0===A?void 0:A.getComponent(cc.Button),this.labLanList[0]=null===(k=cc.find("content/nodeDetail/nodeAutoSell/labLanList0",e))||void 0===k?void 0:k.getComponent(cc.Label),this.labLanList[1]=null===(T=cc.find("content/nodeDetail/nodeCollect/labLanList1",e))||void 0===T?void 0:T.getComponent(cc.Label),this.labLanList[2]=null===(M=cc.find("content/nodeDetail/nodeAutoEat/labLanList2",e))||void 0===M?void 0:M.getComponent(cc.Label),this.labDec=null===(R=cc.find("content/nodeDetail/svLabel/view/content/labDec",e))||void 0===R?void 0:R.getComponent(cc.Label),this.labName=null===(P=cc.find("content/nodeDetail/labName",e))||void 0===P?void 0:P.getComponent(cc.Label),this.labLanList[3]=null===(D=cc.find("content/nodePageList0/labLanList3",e))||void 0===D?void 0:D.getComponent(cc.Label),this.labLanList[4]=null===(B=cc.find("content/nodePageList0/labLanList4",e))||void 0===B?void 0:B.getComponent(cc.Label),this.labLanList[5]=null===(F=cc.find("content/nodePageList0/labLanList5",e))||void 0===F?void 0:F.getComponent(cc.Label),this.labLanList[6]=null===(I=cc.find("content/nodePageList0/labLanList6",e))||void 0===I?void 0:I.getComponent(cc.Label),this.labLanList[7]=null===(O=cc.find("content/nodePageList0/labLanList7",e))||void 0===O?void 0:O.getComponent(cc.Label),this.labLanList[8]=null===(N=cc.find("content/nodePageList0/labLanList8",e))||void 0===N?void 0:N.getComponent(cc.Label),this.labLanList[9]=null===(x=cc.find("content/nodePageList1/labLanList9",e))||void 0===x?void 0:x.getComponent(cc.Label),this.labLanList[10]=null===(j=cc.find("content/nodePageList1/labLanList10",e))||void 0===j?void 0:j.getComponent(cc.Label),this.labLanList[11]=null===(U=cc.find("content/nodePageList1/labLanList11",e))||void 0===U?void 0:U.getComponent(cc.Label),this.labLanList[12]=null===(E=cc.find("content/nodePageList1/labLanList12",e))||void 0===E?void 0:E.getComponent(cc.Label),this.labLanList[13]=null===(G=cc.find("content/nodePageList1/labLanList13",e))||void 0===G?void 0:G.getComponent(cc.Label),this.labLanList[14]=null===(V=cc.find("content/nodePageList2/labLanList14",e))||void 0===V?void 0:V.getComponent(cc.Label),this.labLanList[15]=null===(H=cc.find("content/nodePageList2/labLanList15",e))||void 0===H?void 0:H.getComponent(cc.Label),this.labLanList[16]=null===(q=cc.find("content/nodePageList2/labLanList16",e))||void 0===q?void 0:q.getComponent(cc.Label),this.labLanList[17]=null===(Q=cc.find("content/nodePageList2/labLanList17",e))||void 0===Q?void 0:Q.getComponent(cc.Label),this.labLanList[18]=null===(J=cc.find("content/nodePageList2/labLanList18",e))||void 0===J?void 0:J.getComponent(cc.Label),this.labLanList[19]=null===(K=cc.find("content/labLanList19",e))||void 0===K?void 0:K.getComponent(cc.Label),this.labLanList[20]=null===(W=cc.find("content/labLanList20",e))||void 0===W?void 0:W.getComponent(cc.Label),this.labLanList[21]=null===(Y=cc.find("content/labLanList21",e))||void 0===Y?void 0:Y.getComponent(cc.Label),this.labLanList[22]=null===(z=cc.find("content/labLanList22",e))||void 0===z?void 0:z.getComponent(cc.Label),this.labLanList[23]=null===(Z=cc.find("content/labLanList23",e))||void 0===Z?void 0:Z.getComponent(cc.Label),this.labTitle=null===(X=cc.find("content/labTitle",e))||void 0===X?void 0:X.getComponent(cc.Label),this.sprMain=null===($=cc.find("content/nodeDetail/sprMain",e))||void 0===$?void 0:$.getComponent(cc.Sprite),this.svLabel=null===(ee=cc.find("content/nodeDetail/svLabel",e))||void 0===ee?void 0:ee.getComponent(cc.ScrollView),this.svMain=null===(te=cc.find("content/nodePageList0/svMain",e))||void 0===te?void 0:te.getComponent(cc.ScrollView),this.svMain=null===(ne=cc.find("content/nodePageList1/svMain",e))||void 0===ne?void 0:ne.getComponent(cc.ScrollView),this.svMain=null===(ie=cc.find("content/nodePageList2/svMain",e))||void 0===ie?void 0:ie.getComponent(cc.ScrollView),this.svMain=null===(ae=cc.find("content/nodePageList3/svMain",e))||void 0===ae?void 0:ae.getComponent(cc.ScrollView),this.svMain=null===(oe=cc.find("content/nodePageList4/svMain",e))||void 0===oe?void 0:oe.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeMenu=null,this.nodeDetail=null,this.nodePageList=[],this.nodeAutoSell=null,this.nodeCollect=null,this.nodeAutoEat=null,this.nodeMenuList=[],this.nodeQuality=null,this.nodeContainerList=[],this.btnAct=null,this.btnMain=null,this.btnAct=null,this.btnHome=null,this.btnHome=null,this.btnBack=null,this.btnMoreInfo=null,this.btnCheck=null,this.btnCheck=null,this.btnMain=null,this.btnAct=null,this.btnHome=null,this.btnHome=null,this.btnAct=null,this.btnHome=null,this.btnAct=null,this.btnAct=null,this.btnHome=null,this.btnHome=null,this.btnHome=null,this.btnAct=null,this.btnAct=null,this.btnHome=null,this.btnHome=null,this.btnHome=null,this.labLanList=[],this.labDec=null,this.labName=null,this.labTitle=null,this.sprMain=null,this.svLabel=null,this.svMain=null,this.svMain=null,this.svMain=null,this.svMain=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],collection_ui:[function(e,t,n){"use strict";cc._RF.push(t,"0d507tssL1I77UScZy4YGwV","collection_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_collect_animal"),l=e("../item/item_collect_crop"),s=e("../item/item_collect_food"),c=e("../item/item_collect_friend"),d=e("../item/item_collection"),u=e("../manager/audio_manager"),h=e("../manager/collection_manager"),p=e("../manager/dynamic_data_manager"),f=e("../manager/friend_manager"),m=e("../manager/game_manager"),g=e("../manager/json_manager"),_=e("../manager/language_manager"),v=e("../manager/pool_manager"),y=e("../manager/record_manager"),b=e("../manager/resources_manager"),w=e("../manager/ui_manager"),C=e("../ui_view/panel/collection_ui_view"),S=e("../utils/config"),L=e("../utils/enum"),A=e("../utils/utils"),k=e("./item_detail_ui"),T=cc._decorator,M=T.ccclass,R=(T.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new C.default,t._curPage=0,t._curItem=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this._view.nodeAutoSell.active=!1,this._view.nodeCollect.active=!1,this._view.nodeAutoEat.active=!1,this._view.btnBack.node.on("click",this.hideUI,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u81ea\u52a8\u4f4e\u4ef7\u51fa\u552e","\u914d\u65b9\u6536\u85cf","\u81ea\u52a8\u98df\u7528","\u6625","\u590f","\u79cb","\u51ac","\u56db\u5b63","\u91ce\u5916","\u52a8\u7269\u4ea7\u51fa","\u602a\u7269\u6389\u843d","\u6750\u6599","\u9493\u9c7c","\u7279\u6b8a","\u4e3b\u98df","\u751c\u54c1","\u8c03\u6599","\u836f\u6c34","\u6b66\u5668","\u4f5c\u7269","\u6536\u96c6","\u5236\u4f5c","\u52a8\u7269","\u89d2\u8272"];e.forEach(function(e,n){e.string=_.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMenu.children.forEach(function(t,n){t.on("click",function(){u.default.instance.playAudio("click"),e.choosePage(n)})}),this._view.nodeMenuList.forEach(function(t){t.children.forEach(function(t,n){t.on("click",function(){u.default.instance.playAudio("switch"),e.onChooseSubType(n)})})}),this._view.nodeQuality.children.forEach(function(t,n){t.on("click",function(){e.onClickAutoSell(n)},e)}),this._view.nodeAutoEat.getChildByName("btnCheck").on("click",this.onClickAutoEat,this),this._view.nodeCollect.getChildByName("btnCheck").on("click",this.onClickCollect,this),this._view.btnMoreInfo.node.on("click",this.onClickMoreInfo,this)},t.prototype.showUI=function(){this._view.content.active=!0,this._view.labTitle.string=_.default.GetText("\u56fe\u9274"),this.choosePage(0),y.default.instance.onOpenPage(L.PageType.collection)},t.prototype.choosePage=function(e){this._curPage=e,this._view.nodePageList.forEach(function(t,n){t.active=n==e}),this.onChooseSubType(0),this._view.nodeMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=b.default.instance.getSprite(L.ResType.main,n==e?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")})},t.prototype.onChooseSubType=function(e){this["refreshPage"+this._curPage](e),this._curPage<3&&this._view.nodeMenuList[this._curPage].children.forEach(function(t,n){t.color=n==e?cc.Color.YELLOW:cc.Color.WHITE})},t.prototype.refreshItemDetail=function(e,t){void 0===t&&(t=1),this._curItem={id:e,quality:t,num:1},this._view.nodeCollect.active=!1,this._view.nodeAutoEat.active=!1,this._view.nodeAutoSell.active=!1,this._view.btnMoreInfo.node.active=!0;var n=g.default.instance.getDataByName("item")[e];if(n.type&&n.type.includes(L.Itemtype.food)&&(this._view.nodeAutoEat.active=!0,this._view.nodeAutoEat.getChildByName("btnCheck").getChildByName("check").active=h.CollectionMgr.instance.isAutoEat(e)),n.price){this._view.nodeAutoSell.active=!0;var i=this._view.nodeAutoSell.getChildByName("nodeQuality"),a=h.CollectionMgr.instance.getAutoSellQua(e);i.children.forEach(function(e,t){e.getChildByName("check").active=t+1<=a})}n.recipe&&(this._view.nodeCollect.active=!0,this._view.nodeCollect.getChildByName("btnCheck").getChildByName("check").active=h.CollectionMgr.instance.isRecipeCollect(e)),this._view.labName.string=_.default.GetText("item_name_"+e),this._view.labDec.string=f.FriendMgr.instance.getItemdec(this._curItem.id,this._curItem),this._view.sprMain.spriteFrame=b.default.instance.getSprite(L.ResType.main,A.Utils.getItemSpByAmount(this._curItem))},t.prototype.refreshCharDetail=function(e){this._view.nodeCollect.active=!1,this._view.nodeAutoEat.active=!1,this._view.nodeAutoSell.active=!1,this._view.btnMoreInfo.node.active=!1;var t=g.default.instance.getDataByName("char")[e];this._view.sprMain.spriteFrame=b.default.instance.getSprite(L.ResType.main,"char-char_"+t.id),this._view.labName.string=_.default.GetText("char_name_"+e),this._view.labDec.string=_.default.GetText("char_dec_"+e)},t.prototype.onClickMoreInfo=function(){u.default.instance.playAudio("paper1"),w.default.instance.openUI(k.default,{name:S.Config.uiName.itemDetailUI,param:[this._curItem,0]},201)},t.prototype.hideUI=function(){u.default.instance.playAudio("paper1"),this._view.content.active=!1},t.prototype.refreshPage0=function(e){var t=[];if(e<5)for(var n=1;n<=71;n++){var i=g.default.instance.getDataByName("item")[n+200];4==e&&i.seed.season.every(function(e){return e>=0})?t.push(n):e<4&&1==i.seed.season[e]&&t.push(n)}else{for(n=0;n<13;n++)t.push(150+n);t.push(511)}var a=0;for(t.forEach(function(e){p.default.instance.collectionData.unlockItem[e]&&a++}),t.sort(function(e,t){return(p.default.instance.collectionData.unlockItem[t]?1:0)-(p.default.instance.collectionData.unlockItem[e]?1:0)}),this._view.labTitle.string="\u56fe\u9274-"+["\u4f5c\u7269","\u6536\u96c6","\u5236\u4f5c","\u52a8\u7269","\u89d2\u8272"][this._curPage]+"-"+["\u6625","\u590f","\u79cb","\u51ac","\u56db\u5b63","\u91ce\u5916"][e]+"("+a+"/"+t.length+")",v.default.instance.removeObjByContainer(this._view.nodeContainerList[0]),n=0;n<t.length;n++)v.default.instance.createObjectByName("itemCollectCrop",this._view.nodeContainerList[0]).getComponent(l.default).init(t[n])},t.prototype.refreshPage1=function(e){var t=[];switch(e){case 0:for(var n=0;n<19;n++)t.push(1001+n);break;case 1:for(n=0;n<18;n++)t.push(801+n);break;case 2:for(n=0;n<10;n++)t.push(501+n);break;case 3:for(n=0;n<10;n++)t.push(751+n);break;case 4:for(n=0;n<10;n++)t.push(851+n)}var i=0;for(t.forEach(function(e){p.default.instance.collectionData.unlockItem[e]&&i++}),t.sort(function(e,t){return(p.default.instance.collectionData.unlockItem[t]?1:0)-(p.default.instance.collectionData.unlockItem[e]?1:0)}),this._view.labTitle.string=_.default.GetText("\u56fe\u9274")+"-"+_.default.GetText(["\u4f5c\u7269","\u6536\u96c6","\u5236\u4f5c","\u52a8\u7269","\u89d2\u8272"][this._curPage])+"-"+_.default.GetText(["\u52a8\u7269\u4ea7\u51fa","\u602a\u7269\u6389\u843d","\u6750\u6599","\u9493\u9c7c","\u7279\u6b8a"][e])+"("+i+"/"+t.length+")",v.default.instance.removeObjByContainer(this._view.nodeContainerList[1]),n=0;n<t.length;n++)v.default.instance.createObjectByName("itemCollection",this._view.nodeContainerList[1]).getComponent(d.default).init(t[n])},t.prototype.refreshPage2=function(e){var t=[];switch(e){case 0:t=m.default.instance.typeMap[L.Itemtype.meal];break;case 1:t=m.default.instance.typeMap[L.Itemtype.dsert];break;case 2:t=m.default.instance.typeMap[L.Itemtype.seasoning].filter(function(e){return g.default.instance.getDataByName("item")[e].recipe});break;case 3:t=m.default.instance.typeMap[L.Itemtype.potion];break;case 4:t=m.default.instance.typeMap[L.Itemtype.weapon]}var n=0;t.forEach(function(e){p.default.instance.allSaleData.recipeList.includes(e)&&n++}),this._view.labTitle.string=_.default.GetText("\u56fe\u9274")+"-"+_.default.GetText(["\u4f5c\u7269","\u6536\u96c6","\u5236\u4f5c","\u52a8\u7269","\u89d2\u8272"][this._curPage])+"-"+_.default.GetText(["\u4e3b\u98df","\u751c\u54c1","\u8c03\u6599","\u836f\u6c34","\u6b66\u5668"][e])+"("+n+"/"+t.length+")",v.default.instance.removeObjByContainer(this._view.nodeContainerList[2]);for(var i=0;i<t.length;i++)v.default.instance.createObjectByName("itemCollectFood",this._view.nodeContainerList[2]).getComponent(s.default).init(t[i])},t.prototype.refreshPage3=function(){for(var e=[],t=0;t<40;t++)e.push(101+t);var n=0;for(e.forEach(function(e){p.default.instance.collectionData.unlockItem[e+1400]&&n++}),this._view.labTitle.string=_.default.GetText("\u56fe\u9274")+"-"+_.default.GetText(["\u4f5c\u7269","\u6536\u96c6","\u5236\u4f5c","\u52a8\u7269","\u89d2\u8272"][this._curPage])+"("+n+"/"+e.length+")",v.default.instance.removeObjByContainer(this._view.nodeContainerList[3]),t=0;t<e.length;t++)v.default.instance.createObjectByName("itemCollectAnimal",this._view.nodeContainerList[3]).getComponent(r.default).init(e[t])},t.prototype.refreshPage4=function(){for(var e=[],t=1;t<=100;t++)g.default.instance.getDataByName("char")[t].friend&&e.push(t);var n=0;for(e.forEach(function(e){p.default.instance.allFriendData.friendMap[e]&&n++}),this._view.labTitle.string=_.default.GetText("\u56fe\u9274")+"-"+_.default.GetText(["\u4f5c\u7269","\u6536\u96c6","\u5236\u4f5c","\u52a8\u7269","\u89d2\u8272"][this._curPage])+"("+n+"/"+e.length+")",v.default.instance.removeObjByContainer(this._view.nodeContainerList[4]),t=0;t<e.length;t++)v.default.instance.createObjectByName("itemCollectFriend",this._view.nodeContainerList[4]).getComponent(c.default).init(e[t])},t.prototype.onClickAutoSell=function(e){u.default.instance.playAudio("click"),h.CollectionMgr.instance.setAutoSell(this._curItem.id,e+1),this.refreshItemDetail(this._curItem.id,this._curItem.quality)},t.prototype.onClickCollect=function(){u.default.instance.playAudio("click"),h.CollectionMgr.instance.onToggleCollectRecipe(this._curItem.id),this.refreshItemDetail(this._curItem.id,this._curItem.quality)},t.prototype.onClickAutoEat=function(){u.default.instance.playAudio("click"),h.CollectionMgr.instance.setAutoEat(this._curItem.id),this.refreshItemDetail(this._curItem.id,this._curItem.quality)},t.instance=null,n=o([M],t)}(cc.Component));n.default=R,cc._RF.pop()},{"../item/item_collect_animal":"item_collect_animal","../item/item_collect_crop":"item_collect_crop","../item/item_collect_food":"item_collect_food","../item/item_collect_friend":"item_collect_friend","../item/item_collection":"item_collection","../manager/audio_manager":"audio_manager","../manager/collection_manager":"collection_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/collection_ui_view":"collection_ui_view","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils","./item_detail_ui":"item_detail_ui"}],config_data:[function(e,t,n){"use strict";cc._RF.push(t,"cf2dffjck9MqI5hcIrETZYW","config_data"),Object.defineProperty(n,"__esModule",{value:!0}),n.LangType=n.CheatingType=void 0,function(e){e[e.none=0]="none",e[e.costIsReward=1]="costIsReward",e[e.battle=2]="battle"}(n.CheatingType||(n.CheatingType={})),function(e){e[e.chinese=0]="chinese",e[e.en=1]="en"}(n.LangType||(n.LangType={})),cc._RF.pop()},{}],config:[function(e,t,n){"use strict";cc._RF.push(t,"efa2f8tmV9CJqBTCXGgXlRe","config"),Object.defineProperty(n,"__esModule",{value:!0}),n.Config=void 0,function(e){e.resConfig={altasArr:["main","char","language"],jsonArr:["animation","char","item","map","skill","quest","achievement","holiday","plot","language"],prefabArr:["itemCostomer","itemFriend","itemSale","itemField","itemDrop","itemAnimal","itemBag","itemMeadow","itemChoose","itemProductChoose","itemShop","itemSell","itemNeed","itemRecipe","itemSp","itemChooseFriend","itemTag","itemAmountChoose","itemSeedChoose","effectItem","itemPlanTargetChoose","itemMapChoose","itemDairyRt","itemAnimalChoose","itemSkillChoose","itemFurnitureCraft","itemKitCraft","itemQuest","itemAchievement","itemAdventure","itemChestReward","itemOpenRecipe","itemAllBuff","itemTalk","itemTalkImg","itemTalkSys","itemMarket","itemYangCard","itemAnimalGame","itemFoodAnimal","itemGameFish","itemPole","itemFoodChoose","itemSeedPreview","particalItem","itemSaleChoose","damageLabel","itemCollection","itemCollectFood","itemCollectCrop","itemCollectFriend","itemCollectAnimal","itemTranslate","itemWorkshop","itemRecipeChoose","itemWork","itemPlanFieldChoose"]},e.uiName={createRoleUI:"create_role_ui",messageBox:"messagebox_ui",planUI:"plan_ui",settingUI:"setting_ui",adventureUI:"adventure_ui",buildingUI:"building_ui",questUI:"quest_ui",shopUI:"shop_ui",workshopUI:"workshop_ui",meadowUI:"meadow_ui",friendDetailUI:"friend_detail_ui",itemDetailUI:"item_detail_ui",amountChooseUI:"amount_choose_ui",friendChooseUI:"friend_choose_ui",fieldDetailUI:"field_detail_ui",seedChooseUI:"seed_choose_ui",numChooseUI:"num_choose_ui",chooseMapUI:"choose_map_ui",animalChooseUI:"animal_choose_ui",itemChooseUI:"item_choose_ui",openChestUI:"open_chest_ui",openRecipeUI:"open_recipe_ui",allBuffUI:"all_buff_ui",talkUI:"talk_ui",marketUI:"market_ui",seasonResultUI:"season_result_ui",holidayUI:"holiday_ui",farmMatchUI:"farm_match_ui",foodMatchUI:"food_match_ui",foodChooseUI:"food_choose_ui",saleChooseUI:"sale_choose_ui",helpUI:"help_ui",infomationUI:"infomation_ui",selectTagUI:"select_tag_ui",collectionUI:"collection_ui",vipUI:"vip_ui",alchemyUI:"alchemy_ui",recipeChooseUI:"recipe_choose_ui",rewardTipUI:"reward_tip_ui",gameYangUI:"game_yang_ui",gameFlowerUI:"game_flower_ui",gameAnimalUI:"game_animal_ui",gameFishUI:"game_fish_ui"},e.aniConfig={},e.version="v1.3.6"}(n.Config||(n.Config={})),cc._RF.pop()},{}],create_role_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"aec6bg2YX5IiLmOwsXzuPPq","create_role_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeChoose=null,this.nodeContainer=null,this.nodeGuideCheck=null,this.nodeSelect=null,this.itemBorn=null,this.itemBorn=null,this.itemBorn=null,this.itemBorn=null,this.itemBorn=null,this.itemBorn=null,this.itemBorn=null,this.btnCharList=[],this.btnGuide=null,this.btnStart=null,this.labStart=null,this.labLanList=[]}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeChoose=cc.find("content/nodeChoose",e),this.nodeContainer=cc.find("content/nodeContainer",e),this.nodeGuideCheck=cc.find("content/nodeGuideCheck",e),this.nodeSelect=cc.find("content/nodeSelect",e),this.itemBorn=cc.find("content/nodeContainer/itemBorn",e),this.itemBorn=cc.find("content/nodeContainer/itemBorn",e),this.itemBorn=cc.find("content/nodeContainer/itemBorn",e),this.itemBorn=cc.find("content/nodeContainer/itemBorn",e),this.itemBorn=cc.find("content/nodeContainer/itemBorn",e),this.itemBorn=cc.find("content/nodeContainer/itemBorn",e),this.itemBorn=cc.find("content/nodeContainer/itemBorn",e),this.btnCharList[1]=null===(t=cc.find("content/btnCharList1",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnCharList[2]=null===(n=cc.find("content/btnCharList2",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnCharList[0]=null===(i=cc.find("content/btnCharList0",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnGuide=null===(a=cc.find("content/btnGuide",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnStart=null===(o=cc.find("content/btnStart",e))||void 0===o?void 0:o.getComponent(cc.Button),this.labStart=null===(r=cc.find("content/labStart",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[0]=null===(l=cc.find("content/labLanList0",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[1]=null===(s=cc.find("content/labLanList1",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[2]=null===(c=cc.find("content/labLanList2",e))||void 0===c?void 0:c.getComponent(cc.Label)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeChoose=null,this.nodeContainer=null,this.nodeGuideCheck=null,this.nodeSelect=null,this.itemBorn=null,this.itemBorn=null,this.itemBorn=null,this.itemBorn=null,this.itemBorn=null,this.itemBorn=null,this.itemBorn=null,this.btnCharList=[],this.btnGuide=null,this.btnStart=null,this.labStart=null,this.labLanList=[]},e}();n.default=i,cc._RF.pop()},{}],create_role_ui:[function(e,t,n){"use strict";cc._RF.push(t,"8f49a/CQEVM0oaHewlNXQ0T","create_role_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/ad_manager"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/language_manager"),d=e("../ui_view/panel/create_role_ui_view"),u=e("./switch_mask_ui"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new d.default,t._char=1,t._born=0,t._skilGuide=!1,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this._view.nodeGuideCheck.active=!1,this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u89d2\u8272\u5934\u50cf","\u9009\u62e9\u51fa\u751f","\u8df3\u8fc7\u6559\u7a0b"];e.forEach(function(e,n){e.string=c.default.GetText(t[n])}),this._view.nodeContainer.children.forEach(function(e,t){e.getChildByName("label").getComponent(cc.Label).string=c.default.GetText("\u51fa\u751f"+t),e.getChildByName("dec").getComponent(cc.Label).string=c.default.GetText("\u51fa\u751f\u63cf\u8ff0"+t)})},t.prototype._bindEvent=function(){var e=this;this._view.btnCharList.forEach(function(t,n){t.node.on("click",function(){l.default.instance.playAudio("sclick_1"),e.onChooseChar(n)},e)}),this._view.nodeContainer.children.forEach(function(t,n){t.on("click",function(){l.default.instance.playAudio("sclick_1"),e.onChooseBorn(n)},e)}),this._view.btnStart.node.on("click",this.onStartGame,this),this._view.btnGuide.node.on("click",this.onClickGuide,this)},t.prototype.showUI=function(){this._view.content.active=!0,this.onChooseChar(1),this.onChooseBorn(0),l.default.instance.playAudio("paper1"),this._view.nodeContainer.children[6].active=r.default.getInatance().isHaveAndroidAd()},t.prototype.onChooseChar=function(e){this._char=e,this._view.nodeChoose.x=this._view.btnCharList[this._char].node.x+12},t.prototype.onChooseBorn=function(e){this._born=e,this._view.nodeSelect.y=this._view.nodeContainer.children[e].y-16,this._view.labStart.string=6==e?c.default.GetText("\u70b9\u51fb\u770b\u5e7f\u544a\u540e\u5f00\u59cb"):c.default.GetText("\u70b9\u51fb\u5f00\u59cb")},t.prototype.onClickGuide=function(){l.default.instance.playAudio("switch"),this._skilGuide=!this._skilGuide,this._view.nodeGuideCheck.active=this._skilGuide},t.prototype.onStartGame=function(){var e=this;6!=this._born?(l.default.instance.playAudio("joinGame"),u.default.instance.onSwitch(function(){e.hideUI(),s.default.instance.char=e._char+1,s.default.instance.onBorn(e._born,e._skilGuide),u.default.instance.endSwitch()})):r.default.getInatance().showAndroidAd(function(){l.default.instance.playAudio("joinGame"),u.default.instance.onSwitch(function(){e.hideUI(),s.default.instance.char=e._char+1,s.default.instance.onBorn(e._born,e._skilGuide),u.default.instance.endSwitch()})})},t.prototype.hideUI=function(){l.default.instance.playAudio("paper2"),this._view.content.active=!1},t.instance=null,n=o([p],t)}(cc.Component));n.default=f,cc._RF.pop()},{"../manager/ad_manager":"ad_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../ui_view/panel/create_role_ui_view":"create_role_ui_view","./switch_mask_ui":"switch_mask_ui"}],damage_label:[function(e,t,n){"use strict";cc._RF.push(t,"55d1byuVrhI2ojg9xWeSui1","damage_label");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/effect_manager"),l=e("../manager/pool_manager"),s=e("../utils/utils"),c=cc._decorator,d=c.ccclass,u=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.outLine=null,t}return a(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e,t,n,i){this.node.setPosition(t),this.label.string=e,this.node.opacity=255,i?(this.node.color=i.color,this.outLine.color=i.outLineColor,this.label.fontSize=i.fontSize,i.cri&&(this.label.string="\u2726"+this.label.string,this.label.fontSize=1.5*i.fontSize,r.default.instance.createEffect("shine0012",t,this.node))):(this.node.color=cc.Color.WHITE,this.outLine.color=cc.Color.BLACK,this.label.fontSize=36),this.node.scaleX=.25,this.node.scaleY=.25,this.showAni(n)},t.prototype.showAni=function(e){var t=this,n=s.Utils.getRandomNumber(e/2.5)+e/2.5,i=cc.v2(s.Utils.getRandomNumber(e)-e/2,n);cc.tween(this.node).by(.3,{x:i.x,y:i.y},cc.easeOut(3)).delay(.15).sequence(cc.tween().by(.1,{y:-3},cc.easeIn(3)),cc.tween().parallel(cc.tween().to(.1,{scaleX:.1,scaleY:.25},cc.easeOut(3)),cc.tween().to(.2,{opacity:0}))).call(function(){l.default.instance.removeObject(t.node)}).start()},o([u(cc.Label)],t.prototype,"label",void 0),o([u(cc.LabelOutline)],t.prototype,"outLine",void 0),o([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../manager/effect_manager":"effect_manager","../manager/pool_manager":"pool_manager","../utils/utils":"utils"}],dynamic_data_manager:[function(e,t,n){"use strict";cc._RF.push(t,"a3c0b4Urd1DL6KeBJyk8vMo","dynamic_data_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/config_data"),l=e("../interface/friend_data"),s=e("../interface/item_amount"),c=e("../interface/plan_data"),d=e("../ui/canvas_ui"),u=e("../ui/friend_ui"),h=e("../ui/header_ui"),p=e("../ui/menu_ui"),f=e("../utils/emmiter"),m=e("../utils/enum"),g=e("../utils/game_config"),_=e("../utils/message"),v=e("../utils/utils"),y=e("./collection_manager"),b=e("./festival_manager"),w=e("./field_manager"),C=e("./friend_manager"),S=e("./game_manager"),L=e("./json_manager"),A=e("./language_manager"),k=e("./meadow_manager"),T=e("./plan_manager"),M=e("./quest_manager"),R=e("./record_manager"),P=e("./sale_manager"),D=e("./shop_manager"),B=e("./storage_manager"),F=e("./ui_manager"),I=e("./workshop_manager"),O=cc._decorator,N=O.ccclass,x=(O.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config={version:"1.0.0",audio:.7,music:.4,talk:.6,dailyAutoPause:!1,seasonAutoPause:!0,festivalAutoPause:!0,firstAD:!1,timeSpdUpTimes:0,timeSpdUp:!1,refreshTimes:3,cheatingTimes:0,cheating:r.CheatingType.none,adFree:!1},t.char=1,t._money=0,t._point=0,t.day=0,t.time=0,t.rain=!1,t._health=50,t._maxHealth=50,t.planData=null,t.itemDepot=[],t.allFriendData=null,t.allSaleData=null,t.allFieldData=null,t.meadowData=null,t.shopData=null,t.achievementData=null,t.recordData=null,t.workShopData=null,t.festivalData=null,t.userTagData={1:[0,2],2:[3,4,13,5],3:[12,2,5],4:[3,4,13,5]},t.collectionData=null,t}var n;return a(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"money",{get:function(){return this._money},set:function(e){this._money=e,f.Emitter.fire(_.MessageType.moneyChange)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"point",{get:function(){return this._point},set:function(e){var t=this._point;this._point=e,f.Emitter.fire(_.MessageType.pointChange,t,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"health",{get:function(){return this._health},set:function(e){isNaN(e)&&(F.default.instance.LoadTipsByStr("\u5f53\u524d\u64cd\u4f5c\u5bfc\u81f4\u4e0d\u53ef\u9884\u4f30\u7684\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u5f00\u53d1\u8005"),e=0),this._health=e,this._health>this.maxHealth&&(this._health=this.maxHealth),f.Emitter.fire(_.MessageType.healthChange)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxHealth",{get:function(){var e=0;return S.default.instance.checkHaveSkill(40)&&(e+=C.FriendMgr.instance.getAllFriendList().length),e+=S.default.instance.getValueByStr("maxHealth"),this._maxHealth+e},set:function(e){this._maxHealth=e},enumerable:!1,configurable:!0}),t.prototype.addFakeData=function(e){for(var t=this,n=0;n<7;n++)this.itemDepot.push({id:n+401,quality:0,num:1});T.PlanMgr.instance.initData(),D.ShopMgr.instance.initData(),R.default.instance.initData(),b.FestivalMgr.instance.initData(),I.WorkshopMgr.instance.initData();var i=[];switch(e){case 0:C.FriendMgr.instance.initData(1),P.default.instance.initData(2),w.FieldMgr.instance.initData(2,3),k.MeadowMgr.instance.initData(2),i=[[853,3],[851,2],[1508,1],[2258,10],[501,30],[502,15],[503,20],[504,10]],this.money=1500,this.point=200;break;case 1:C.FriendMgr.instance.initData(1),P.default.instance.initData(1),w.FieldMgr.instance.initData(3,5),k.MeadowMgr.instance.initData(1),i=[[853,2],[851,1],[231,3],[2258,10],[701,5],[702,5],[703,5],[704,5]],this.money=1e3,this.point=200;break;case 2:C.FriendMgr.instance.initData(1),P.default.instance.initData(1),w.FieldMgr.instance.initData(1,3),k.MeadowMgr.instance.initData(4),i=[[851,1],[18,30],[1504,1],[1508,1],[1528,1]],this.meadowData.animalDepot[110]=1,this.meadowData.animalDepot[107]=1,this.money=500,this.point=200;break;case 3:C.FriendMgr.instance.initData(2),P.default.instance.initData(1),w.FieldMgr.instance.initData(1,3),k.MeadowMgr.instance.initData(1),i=[[851,2],[855,10],[2501,1],[2502,1],[2503,1],[2504,1]],C.FriendMgr.instance.addFriend(9,400),C.FriendMgr.instance.addFriend(27,400),this.money=500,this.point=500;break;case 4:C.FriendMgr.instance.initData(1),P.default.instance.initData(2),w.FieldMgr.instance.initData(1,3),k.MeadowMgr.instance.initData(1),i=[[860,2],[851,1],[858,3],[857,3],[510,20]],this.money=15e3,this.point=1e3;break;case 5:C.FriendMgr.instance.initData(1),P.default.instance.initData(2),w.FieldMgr.instance.initData(1,3),k.MeadowMgr.instance.initData(1),i=[[853,3],[856,10],[859,5],[610,3]],this.planData.skillLv[c.PlanType.fish]=1,this.findItem(m.ToolId.\u9c7c\u7aff)[0].quality=2,this.money=3e3,this.point=300;break;case 6:C.FriendMgr.instance.initData(2),P.default.instance.initData(2),w.FieldMgr.instance.initData(3,5),k.MeadowMgr.instance.initData(4),this.meadowData.animalDepot[110]=1,this.meadowData.animalDepot[107]=1,C.FriendMgr.instance.addFriend(9,400),C.FriendMgr.instance.addFriend(27,400),i=[[853,5],[851,3],[860,2],[855,10],[2258,30],[610,3],[856,10],[858,3],[857,3],[501,30],[502,15],[503,20],[504,10],[231,3],[701,5],[702,5],[703,5],[704,5],[510,20],[18,30],[1504,1],[1508,1],[1528,1],[859,5],[2501,1],[2502,1],[2503,1],[2504,1]],this.planData.skillLv[c.PlanType.fish]=1,this.findItem(m.ToolId.\u9c7c\u7aff)[0].quality=2,this.money=1e4,this.point=1e3,this.config.firstAD=!0}y.CollectionMgr.instance.initData(),i.forEach(function(e){var n=e[0],i=e[1];t.onReward({id:n,num:i,quality:1})}),M.default.instance.initData(),D.ShopMgr.instance.refreshMarketList()},t.prototype.checkEnough=function(e,t){return void 0===t&&(t=!1),-1!=this.itemDepot.findIndex(function(t){return t.id==e.id&&t.quality==e.quality&&t.num>=e.num})},t.prototype.checkHaveBuild=function(e){return this.findItem(e).length>0},t.prototype.findItem=function(e,t){var n=[];return this.itemDepot.forEach(function(i){i.id==e&&(t?t==i.quality&&n.push(i):n.push(i))}),n=n.sort(function(e,t){return e.quality-t.quality})},t.prototype.findItemsByType=function(e){var t=[];return this.itemDepot.forEach(function(n){var i=L.default.instance.getDataByName("item")[n.id];i.type&&i.type.includes(e)&&t.push(n)}),t},t.prototype.onReward=function(e){switch(e.num||(e.num=1),void 0===e.quality&&(e.quality=1),e.quality>5&&(e.quality=5),g.GameConfig.OnlyOneQuaIds.includes(e.id)&&(e.quality=1),e.type){case s.RewardType.friend:n.instance.allFriendData.friendMap[e.id]?C.FriendMgr.instance.onAddFriendLove(e.id,e.num?e.num:100):C.FriendMgr.instance.addFriend(e.id,e.num?e.num:100);break;case s.RewardType.point:this.point+=e.num;break;case s.RewardType.money:this.money+=e.num;break;case s.RewardType.item:default:if(e.num>0){var t=this.itemDepot.findIndex(function(t){return e.id==t.id&&e.quality==t.quality});if(-1!=t)this.itemDepot[t].num+=e.num;else{var i=this.itemDepot.findIndex(function(t){return e.id==t.id}),a={id:e.id,num:e.num,quality:e.quality};-1!=i?this.itemDepot.splice(i,0,a):this.itemDepot.push(a)}y.CollectionMgr.instance.updateCollection(e),f.Emitter.fire(_.MessageType.onItemChangeAlert)}}},t.prototype.onCost=function(e){var t=this.itemDepot.findIndex(function(t){return e.id==t.id&&e.quality==t.quality});-1!=t&&(this.itemDepot[t].num-=e.num,this.itemDepot[t].num<=0&&this.itemDepot.splice(t,1)),f.Emitter.fire(_.MessageType.onItemChangeAlert)},t.prototype.onBorn=function(e,t){void 0===t&&(t=!1),n.instance.addFakeData(e),t&&(this.recordData.donePlot=[1,101,151,601,401,651,301,701,751,501,801,201,901],this.recordData.guide=-1,setTimeout(function(){f.Emitter.fire(_.MessageType.onDonePlot)})),u.default.instance.initBattle(),S.default.instance.status=S.GameStatue.pause,S.default.instance.initGame(),D.ShopMgr.instance.refreshMarketList(),n.instance.recordData.dairyList.push([m.DairyRtType.newDay,{season:0,month:1,water:this.rain}]),B.default.instance.saveGameData(),h.default.instance.refreshDay(),p.default.instance.showUI()},t.prototype.onLoadDataDone=function(){this.fixData(),u.default.instance.initBattle(),S.default.instance.status=S.GameStatue.pause,S.default.instance.initGame(),h.default.instance.refreshDay(),h.default.instance.refreshDay(),h.default.instance.refreshProgressDay();var e=S.default.instance.getSeason()+1;d.default.instance.switchBg("season_"+e+"_1"),p.default.instance.showUI()},t.prototype.checkItemIsType=function(e,t){var n=L.default.instance.getDataByName("item")[e];return n.type&&n.type.includes(t)},t.prototype.getToolLevel=function(e){return this.findItem(e)[0].quality},t.prototype.getToolUseTime=function(e){var t=this.findItem(e)[0];return 0==t.quality?1:t.quality},t.prototype.getItemAmountByArr=function(e){return{id:e[0],num:e[1],quality:e[2]||1}},t.prototype.onMakeupRecipe=function(e,t,i,a,o){void 0===o&&(o=!1);var r=L.default.instance.getDataByName("item")[e].recipe.health*i;if(0!=i)if(n.instance.checkHealthEnough(r)){for(var l=0;l<t.length;l++){var s=this.findItem(t[l].id,t[l].quality);if(0==s.length||s[0].num<t[l].num*i)return void(o||F.default.instance.LoadTipsByStr(A.default.GetText("\u7269\u54c1\u4e0d\u8db3")))}for(this.onCostHealth(r*(o?.5:1)),l=0;l<t.length;l++)this.onCost({id:t[l].id,num:t[l].num*i,quality:t[l].quality});var c=this.countProduct(e,t),d=c[0],u=c[1];S.default.instance.checkHaveSkill(27)&&d++,this.onReward({id:e,num:d*i,quality:u}),a&&a(d*i,u)}else o||F.default.instance.LoadTipsByStr(A.default.GetText("\u4f53\u529b\u4e0d\u8db3"))},t.prototype.countProduct=function(e,t){for(var n=0,i=0,a=0,o=0;o<t.length;o++){if(!t[o])return[0,0];var r=L.default.instance.getDataByName("item")[t[o].id];n+=t[o].num*(r.price||1),i+=t[o].quality*t[o].num,a+=t[o].num}var l=L.default.instance.getDataByName("item")[e],s=Math.ceil(n/l.recipe.value),c=Math.round(i/a);return S.default.instance.checkHaveBuff(2568)&&v.Utils.luckChance(10+S.default.instance.getLuck())&&c++,c>5&&(c=5),c<1&&(c=1),[s,c]},t.prototype.getRecipeList=function(e,t){void 0===t&&(t=0);for(var n=[],i=function(i){if(!a.allSaleData.recipeList[i])return"continue";var o=a.allSaleData.recipeList[i],r=L.default.instance.getDataByName("item")[o];if(0!=t&&r.recipe.building!=t)return"continue";switch(e){case 0:a.checkIsHave(r.recipe.need)&&(r.recipe.building?I.WorkshopMgr.instance.getCanUseBuild(r.recipe.building)>0&&n.push(o):n.push(o));break;case 1:r.type&&r.type.includes(m.Itemtype.meal)&&n.push(o);break;case 2:r.type&&r.type.includes(m.Itemtype.dsert)&&n.push(o);break;case 3:r.type&&[m.Itemtype.dsert,m.Itemtype.meal].every(function(e){return!r.type.includes(e)})&&n.push(o)}},a=this,o=0;o<this.allSaleData.recipeList.length;o++)i(o);return n},t.prototype.checkIsHave=function(e){var t=!0,i=[];return e.forEach(function(e){switch(e[0]){case 1:0==(i=n.instance.findItem(e[1]).filter(function(t){return t.num>=(e[2]||1)})).length&&(t=!1);break;case 2:0==(i=n.instance.findItemsByType(e[1]).filter(function(t){return t.num>=(e[2]||1)})).length&&(t=!1);break;case 3:i=[],e[1].forEach(function(e){i.push.apply(i,n.instance.findItem(e))}),0==(i=i.filter(function(t){return t.num>=(e[2]||1)})).length&&(t=!1)}}),t},t.prototype.getRandomQuality=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var n=g.GameConfig.QualityChance.map(function(t){return t+e}),i=v.Utils.getArrRandomIndex(n)+1;return i>5&&(i=5),i<1&&(i=1),!t&&i>3&&(i=3),i},t.prototype.checkHealthEnough=function(e){var t=C.FriendMgr.instance.getAllHelpFriendHealth();if(this.health+t>=e)return!0;for(var i=n.instance.allFriendData,a=0;a<i.workArr.length;a++){var o=i.friendMap[i.workArr[a]];o.relax||o.op!=l.FriendOPType.work||o.health<10&&(o.relax=!0)}return!1},t.prototype.onCostHealth=function(e){for(var t=this.allFriendData,n=0;n<t.workArr.length;n++){var i=t.friendMap[t.workArr[n]];if(!i.relax&&i.op==l.FriendOPType.work){if(!(i.health<e)){i.health-=e,e=0;break}e-=i.health,i.health=0}}e>0&&(this.health-=e)},t.prototype.fixData=function(){var e;for(var t in void 0===this.recordData.guide&&(this.recordData.guide=-1,(e=this.recordData.donePlot).push.apply(e,[1,101,151,601,401,651,301,701,751,501,801,201,901])),this.allFriendData.friendMap){var n=this.allFriendData.friendMap[t];isNaN(n.health)&&(n.health=0)}void 0===this.recordData.guide&&(this.recordData.guide=-1),void 0===this.userTagData&&(this.userTagData={1:[0,2],2:[3,4,13,5],3:[12,2,5],4:[3,4,13,5]});for(var i=0;i<this.itemDepot.length;i++)L.default.instance.getDataByName("item")[this.itemDepot[i].id]||this.onCost(this.itemDepot[i]);this.collectionData||y.CollectionMgr.instance.initData(),this.workShopData||I.WorkshopMgr.instance.initData(),this.allSaleData.saleRate||(this.allSaleData.saleRate={}),void 0===this.shopData.shopLv&&(this.shopData.shopLv=0,this.shopData.advLv=0,this.shopData.homeLv=0,this.shopData.townLv=0),this.planData.planTarget[c.PlanType.fish]||(this.planData.planTarget[c.PlanType.fish]=0)},t._instance=null,n=o([N],t)}(cc.Component));n.default=x,cc._RF.pop()},{"../interface/config_data":"config_data","../interface/friend_data":"friend_data","../interface/item_amount":"item_amount","../interface/plan_data":"plan_data","../ui/canvas_ui":"canvas_ui","../ui/friend_ui":"friend_ui","../ui/header_ui":"header_ui","../ui/menu_ui":"menu_ui","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","../utils/utils":"utils","./collection_manager":"collection_manager","./festival_manager":"festival_manager","./field_manager":"field_manager","./friend_manager":"friend_manager","./game_manager":"game_manager","./json_manager":"json_manager","./language_manager":"language_manager","./meadow_manager":"meadow_manager","./plan_manager":"plan_manager","./quest_manager":"quest_manager","./record_manager":"record_manager","./sale_manager":"sale_manager","./shop_manager":"shop_manager","./storage_manager":"storage_manager","./ui_manager":"ui_manager","./workshop_manager":"workshop_manager"}],effect_item:[function(e,t,n){"use strict";cc._RF.push(t,"1f452ZmYqFCJb1ZcQ5LkNJa","effect_item");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/pool_manager"),l=e("../manager/resources_manager"),s=cc._decorator,c=s.ccclass,d=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.anima=null,t.isMoney=!1,t.recycle=!1,t.timer=null,t}return a(t,e),t.prototype.init=function(e,t,n){var i=this;void 0===n&&(n=!1);var a=e;this.recycle=n;var o=this.anima.getClips();this.node.setPosition(t),this.node.scale=1,this.node.opacity=255,this.timer&&clearTimeout(this.timer),o.some(function(e){return e.name==a})?this.playAnima(a):l.default.instance.getEffect(e).then(function(e){i.anima.addClip(e),i.playAnima(a)})},t.prototype.playAnima=function(e){var t=this;this.anima.play(e);var n=this.anima.currentClip;this.timer=setTimeout(function(){t.recycle&&(t.anima.stop(),t.node.getComponent(cc.Sprite).spriteFrame=null,r.default.instance.removeObject(t.node))},999/n.speed)},o([d(cc.Animation)],t.prototype,"anima",void 0),o([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager"}],effect_manager:[function(e,t,n){"use strict";cc._RF.push(t,"2500d8t8ABENoQhM74hjgFX","effect_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/item_amount"),l=e("../item/damage_label"),s=e("../item/effect_item"),c=e("../ui/canvas_ui"),d=e("../ui/friend_ui"),u=e("../ui/header_ui"),h=e("../ui/menu_ui"),p=e("../utils/enum"),f=e("../utils/utils"),m=e("./dynamic_data_manager"),g=e("./pool_manager"),_=e("./resources_manager"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return a(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.getWorldPos=function(e){return e.convertToWorldSpaceAR(cc.v2(0,0)).sub(cc.v2(window.winSize.width/2,window.winSize.height/2))},t.prototype.createLabel=function(e,t,n){void 0===n&&(n=10),m.default.instance.config.skipEffect||g.default.instance.createObjectByName("damageLabel",d.default.instance.view.nodeLabelContainer).getComponent(l.default).init(e,t,n,{color:cc.Color.BLACK,outLineColor:cc.Color.WHITE,fontSize:26})},t.prototype.createMoneyLabel=function(e,t){e<=0||m.default.instance.config.skipEffect||g.default.instance.createObjectByName("damageLabel",d.default.instance.view.nodeLabelContainer).getComponent(l.default).init(e,t,0,{color:cc.Color.YELLOW,outLineColor:cc.Color.BLACK,fontSize:18})},t.prototype.createRewardListEffect=function(e,t){if(!m.default.instance.config.skipEffect)for(var i=0;i<e.length;i++){var a=0;if(t)switch(e[i].type){case r.RewardType.friend:break;case r.RewardType.money:a=Math.min(10,Math.sqrt(e[i].num/10));for(var o=0;o<a;o++)n.instance.createRewardItemSp(e[i],f.Utils.getNodeUsePos(t));break;case r.RewardType.point:for(a=Math.min(10,Math.sqrt(e[i].num/3)),o=0;o<a;o++)n.instance.createRewardItemSp(e[i],f.Utils.getNodeUsePos(t));break;default:for(a=Math.min(10,Math.sqrt(e[i].num)),o=0;o<a;o++)n.instance.createRewardItemSp(e[i],f.Utils.getNodeUsePos(t))}}},t.prototype.createRewardItemSp=function(e,t,n,i,a){if(!m.default.instance.config.skipEffect||n){a||(a=c.default.instance.effectContainer);var o=g.default.instance.createObjectByName("itemSp",a);switch(o.angle=0,o.stopAllActions(),o.setPosition(t),o.scale=1,o.getComponent(cc.Sprite).spriteFrame=null,o.children.forEach(function(e){return e.active=!1}),e.type){case r.RewardType.money:o.getChildByName("nodeMoney").active=!0;break;case r.RewardType.point:o.getChildByName("nodePoint").active=!0;break;case r.RewardType.friend:o.getComponent(cc.Sprite).spriteFrame=_.default.instance.getSprite(p.ResType.main,"char-char_"+e.id);case r.RewardType.item:default:o.getComponent(cc.Sprite).spriteFrame=_.default.instance.getSprite(p.ResType.main,f.Utils.getItemSpByAmount(e))}var l=f.Utils.getNormalDivByAngel(-f.Utils.getRandomNumber(180)),s=f.Utils.getRandomNumber(15)+5;if(!i)switch(e.type){case r.RewardType.money:i=u.default.instance.getMoneyEffect();break;case r.RewardType.point:i=u.default.instance.getPointEffect();break;case r.RewardType.friend:i=h.default.instance.getMenuPos(0);break;case r.RewardType.item:default:i=h.default.instance.getMenuPos(4)}cc.tween(o).by(.4,{x:s*l.x,y:s*l.y},cc.easeOut(2)).delay(.3).to(.6,{x:i.x,y:i.y,scale:.2},cc.easeIn(2)).call(function(){g.default.instance.removeObject(o),n&&n()}).start()}},t.prototype.createEffect=function(e,t,n){void 0===n&&(n=c.default.instance.effectContainer),m.default.instance.config.skipEffect||e&&g.default.instance.createObjectByName("effectItem",n).getComponent(s.default).init(e,t,!0)},t.prototype.createPartical=function(e,t,n){if(void 0===n&&(n=c.default.instance.effectContainer),!m.default.instance.config.skipEffect){var i=g.default.instance.createObjectByName("particalItem",n);return i.setPosition(t),_.default.instance.getPartical(e).then(function(e){var t=i.getComponent(cc.ParticleSystem);t.stopSystem(),t.file=e,t.custom=!0,t.custom=!1,t.resetSystem()}),i}},t._instance=null,n=o([y],t)}(cc.Component));n.default=b,cc._RF.pop()},{"../interface/item_amount":"item_amount","../item/damage_label":"damage_label","../item/effect_item":"effect_item","../ui/canvas_ui":"canvas_ui","../ui/friend_ui":"friend_ui","../ui/header_ui":"header_ui","../ui/menu_ui":"menu_ui","../utils/enum":"enum","../utils/utils":"utils","./dynamic_data_manager":"dynamic_data_manager","./pool_manager":"pool_manager","./resources_manager":"resources_manager"}],emmiter:[function(e,t,n){"use strict";cc._RF.push(t,"3bd588Y6IlJB5kqZ3DLJOtI","emmiter");var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,l=o.length;r<l;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0}),n.Emitter=void 0;var a=function(){function e(){}return e.register=function(t,n,i){e.listeners[t]||(e.listeners[t]=[]),e.listeners[t].push(new o(n,i))},e.remove=function(t,n){var i=e.listeners[t];if(i){for(var a=i.length,o=0;o<a;o++)if(i[o].compar(n)){i.splice(o,1);break}0==i.length&&delete e.listeners[t]}},e.fire=function(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var o=e.listeners[t];if(o)for(var r=o.length,l=0;l<r;l++){var s=o[l];s.notify.apply(s,i([t],n))}},e.listeners={},e}();n.Emitter=a;var o=function(){function e(e,t){this.callback=null,this.context=null,this.callback=e,this.context=t}return e.prototype.notify=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=this;(e=a.callback).call.apply(e,i([a.context],t))},e.prototype.compar=function(e){return e==this.context},e}();cc._RF.pop()},{}],enum:[function(e,t,n){"use strict";cc._RF.push(t,"75b25GCjslAZoWZUoEMcMji","enum"),Object.defineProperty(n,"__esModule",{value:!0}),n.SelectTagType=n.FunctionType=n.ToolId=n.LevelupRewardType=n.FoodSpecialSkill=n.OrderType=n.BuildingExpandType=n.DairyRtType=n.ShopOnType=n.QualityType=n.FindType=n.CharAnimaType=n.Itemtype=n.PageType=n.ResType=void 0,function(e){e[e.main=0]="main",e[e.char=1]="char",e[e.language=2]="language"}(n.ResType||(n.ResType={})),function(e){e[e.friend=0]="friend",e[e.sale=1]="sale",e[e.field=2]="field",e[e.ground=3]="ground",e[e.depot=4]="depot",e[e.meadow=7]="meadow",e[e.shop=6]="shop",e[e.building=8]="building",e[e.quest=9]="quest",e[e.adventure=10]="adventure",e[e.workshop=11]="workshop",e[e.marketDay=12]="marketDay",e[e.festival=13]="festival",e[e.bestChef=14]="bestChef",e[e.bestFarmer=15]="bestFarmer",e[e.collection=16]="collection",e[e.alchemy=17]="alchemy",e[e.fieldDetail=18]="fieldDetail",e[e.friendDetail=19]="friendDetail",e[e.plan=20]="plan"}(n.PageType||(n.PageType={})),function(e){e[e.seed=1]="seed",e[e.food=2]="food",e[e.vegetable=3]="vegetable",e[e.fruit=4]="fruit",e[e.meta=5]="meta",e[e.kit=6]="kit",e[e.build=7]="build",e[e.animal=8]="animal",e[e.monster=9]="monster",e[e.egg=10]="egg",e[e.seasoning=11]="seasoning",e[e.crop=12]="crop",e[e.flower=13]="flower",e[e.fertilizer=14]="fertilizer",e[e.weapon=15]="weapon",e[e.dsert=16]="dsert",e[e.meal=17]="meal",e[e.special=19]="special",e[e.meet=20]="meet",e[e.fish=21]="fish",e[e.water=22]="water",e[e.mashroom=23]="mashroom",e[e.potion=24]="potion",e[e.grass=25]="grass"}(n.Itemtype||(n.Itemtype={})),function(e){e[e.walk=0]="walk",e[e.atk=1]="atk",e[e.defeat=2]="defeat",e[e.hit=3]="hit",e[e.idle=4]="idle"}(n.CharAnimaType||(n.CharAnimaType={})),function(e){e[e.any=0]="any",e[e.food=1]="food",e[e.wood=2]="wood",e[e.mine=3]="mine",e[e.fishing=4]="fishing"}(n.FindType||(n.FindType={})),function(e){e[e.fake=0]="fake",e[e.normal=1]="normal",e[e.green=2]="green",e[e.purple=3]="purple",e[e.orange=4]="orange",e[e.magic=5]="magic"}(n.QualityType||(n.QualityType={})),function(e){e[e.spring=1]="spring",e[e.summmer=2]="summmer",e[e.autumn=3]="autumn",e[e.winter=4]="winter",e[e.all=5]="all",e[e.pointShop=100]="pointShop",e[e.marketDay=400]="marketDay",e[e.marketDayRandom1=401]="marketDayRandom1",e[e.marketDayRandom2=402]="marketDayRandom2",e[e.marketDayRandom3=403]="marketDayRandom3",e[e.marketDayRandom4=404]="marketDayRandom4",e[e.festival=500]="festival",e[e.festival2=501]="festival2",e[e.festival3=502]="festival3",e[e.festival4=503]="festival4",e[e.anniversary=600]="anniversary"}(n.ShopOnType||(n.ShopOnType={})),function(e){e[e.newDay=1]="newDay",e[e.autoWater=2]="autoWater",e[e.autoHavest=3]="autoHavest",e[e.autoSeeding=4]="autoSeeding",e[e.planResult=5]="planResult",e[e.friendPlanResult=6]="friendPlanResult",e[e.animalReward=7]="animalReward",e[e.onFoodExprie=8]="onFoodExprie",e[e.planFail=9]="planFail",e[e.noMeadowFood=10]="noMeadowFood",e[e.noMoneyForFriend=11]="noMoneyForFriend",e[e.autoFish=12]="autoFish",e[e.festival=13]="festival",e[e.friend=14]="friend",e[e.giftFromShop=15]="giftFromShop",e[e.giftFromAnimal=16]="giftFromAnimal",e[e.giftFromAdv=17]="giftFromAdv",e[e.giftFromFriend=18]="giftFromFriend",e[e.bestFarmer=19]="bestFarmer",e[e.newbFarmer=20]="newbFarmer",e[e.bestChef=21]="bestChef",e[e.eggBreak=22]="eggBreak",e[e.skillLevelup=23]="skillLevelup",e[e.saleLevelup=24]="saleLevelup",e[e.newMap=25]="newMap",e[e.autoSell=26]="autoSell",e[e.autoEat=27]="autoEat",e[e.workshop=28]="workshop",e[e.beFriend=29]="beFriend"}(n.DairyRtType||(n.DairyRtType={})),function(e){e[e.friend=0]="friend",e[e.sale=1]="sale",e[e.field=2]="field",e[e.meadow=3]="meadow",e[e.shop=4]="shop",e[e.adv=5]="adv",e[e.home=6]="home",e[e.town=7]="town"}(n.BuildingExpandType||(n.BuildingExpandType={})),function(e){e[e.default=0]="default",e[e.priceUp=1]="priceUp",e[e.numUp=2]="numUp",e[e.qualityUp=3]="qualityUp"}(n.OrderType||(n.OrderType={})),function(e){e[e.none=0]="none",e[e.seasonDouble=1]="seasonDouble",e[e.addMaxHp=2]="addMaxHp",e[e.speedup=9]="speedup",e[e.freePlan=10]="freePlan",e[e.field=11]="field",e[e.find=12]="find",e[e.logging=13]="logging",e[e.mine=14]="mine",e[e.fish=15]="fish"}(n.FoodSpecialSkill||(n.FoodSpecialSkill={})),function(e){e[e.unlockInShop=1]="unlockInShop",e[e.unlockInAdvShop=2]="unlockInAdvShop",e[e.item=3]="item",e[e.newOne=4]="newOne"}(n.LevelupRewardType||(n.LevelupRewardType={})),function(e){e[e["\u6c34\u58f6"]=401]="\u6c34\u58f6",e[e["\u9570\u5200"]=407]="\u9570\u5200",e[e["\u9504\u5934"]=402]="\u9504\u5934",e[e["\u7a3f\u5b50"]=403]="\u7a3f\u5b50",e[e["\u80cc\u5305"]=404]="\u80cc\u5305",e[e["\u65a7\u5934"]=405]="\u65a7\u5934",e[e["\u9c7c\u7aff"]=406]="\u9c7c\u7aff"}(n.ToolId||(n.ToolId={})),function(e){e[e.vip=1]="vip",e[e.sale=2]="sale",e[e.friend=3]="friend",e[e.shop=4]="shop",e[e.meadow=5]="meadow",e[e.build=6]="build",e[e.quest=7]="quest",e[e.adventure=8]="adventure",e[e.collection=9]="collection"}(n.FunctionType||(n.FunctionType={})),function(e){e[e.bag=1]="bag",e[e.sell=2]="sell",e[e.sale=3]="sale",e[e.farmMatch=4]="farmMatch"}(n.SelectTagType||(n.SelectTagType={})),cc._RF.pop()},{}],farm_match_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"ddec761KzNBaYg9KoHbLcuF","farm_match_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeSceneList=[],this.nodeContainer=null,this.nodeCharContainer=null,this.nodeShowContainer=null,this.itemGift=null,this.itemFarmMatch=null,this.itemFarmMatch=null,this.itemFarmMatch=null,this.itemFarmMatch=null,this.itemFarmMatch=null,this.btnHelp=null,this.labLanList=[],this.sprBg=null,this.sprRole=null}return e.prototype.initView=function(e){var t,n,i,a,o;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeSceneList[0]=cc.find("content/nodeSceneList0",e),this.nodeContainer=cc.find("content/nodeContainer",e),this.nodeCharContainer=cc.find("content/nodeCharContainer",e),this.nodeShowContainer=cc.find("content/nodeShowContainer",e),this.itemGift=cc.find("content/nodeSceneList0/itemGift",e),this.itemFarmMatch=cc.find("content/nodeContainer/itemFarmMatch",e),this.itemFarmMatch=cc.find("content/nodeContainer/itemFarmMatch",e),this.itemFarmMatch=cc.find("content/nodeContainer/itemFarmMatch",e),this.itemFarmMatch=cc.find("content/nodeContainer/itemFarmMatch",e),this.itemFarmMatch=cc.find("content/nodeContainer/itemFarmMatch",e),this.btnHelp=null===(t=cc.find("content/btnHelp",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("content/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labLanList[1]=null===(i=cc.find("content/labLanList1",e))||void 0===i?void 0:i.getComponent(cc.Label),this.sprBg=null===(a=cc.find("content/nodeSceneList0/sprBg",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprRole=null===(o=cc.find("content/sprRole",e))||void 0===o?void 0:o.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeSceneList=[],this.nodeContainer=null,this.nodeCharContainer=null,this.nodeShowContainer=null,this.itemGift=null,this.itemFarmMatch=null,this.itemFarmMatch=null,this.itemFarmMatch=null,this.itemFarmMatch=null,this.itemFarmMatch=null,this.btnHelp=null,this.labLanList=[],this.sprBg=null,this.sprRole=null},e}();n.default=i,cc._RF.pop()},{}],farm_match_ui:[function(e,t,n){"use strict";cc._RF.push(t,"8ef5bBBd01AYotdZEdWqR1M","farm_match_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/language_manager"),d=e("../manager/record_manager"),u=e("../manager/resources_manager"),h=e("../manager/ui_manager"),p=e("../ui_view/panel/farm_match_ui_view"),f=e("../utils/config"),m=e("../utils/enum"),g=e("../utils/utils"),_=e("./amount_choose_ui"),v=e("./pop_text_ui"),y=cc._decorator,b=y.ccclass,w=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new p.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u519c\u573a\u7269\u54c1\u5c55\u89c8","\u519c\u573a\u7269\u54c1\u63cf\u8ff0"];e.forEach(function(e,n){e.string=c.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeContainer.children.forEach(function(t,n){t.on("click",function(){l.default.instance.playAudio("click"),e.onClickChooseItem(n)})}),this._view.btnHelp.node.on("click",this.onClickHelp,this)},t.prototype.showUI=function(){r.default.instance.popOut(this._view.content,this._view.nodeMask),this.refreshUI(),d.default.instance.onOpenPage(m.PageType.bestFarmer),this._view.sprRole.spriteFrame=u.default.instance.getSprite(m.ResType.main,"role_"+s.default.instance.char)},t.prototype.refreshUI=function(){var e=["D","C","B","A","S"],t=[10,30,55,85];this._view.nodeShowContainer.children.forEach(function(e,t){e.getComponent(cc.Sprite).spriteFrame=null;var n=s.default.instance.festivalData.farmMatch.items[t];n&&(e.getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount(n)))}),this._view.nodeContainer.children.forEach(function(n,i){var a=s.default.instance.festivalData.farmMatch.items[i];if(a){n.getChildByName("sprQuality").getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,"ui-quality_"+a.quality),n.getChildByName("sprMain").getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount(a));var o=d.default.instance.getItemScore(a);n.getChildByName("labScore").getComponent(cc.Label).string=e[4];for(var r=0;r<t.length;r++)if(o<t[r]){n.getChildByName("labScore").getComponent(cc.Label).string=e[r];break}}else n.getChildByName("labScore").getComponent(cc.Label).string=c.default.GetText("\u7b49\u5f85\u8bc4\u5206"),n.getChildByName("sprQuality").getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,"ui-quality_0"),n.getChildByName("sprMain").getComponent(cc.Sprite).spriteFrame=null})},t.prototype.hideUI=function(){l.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onClickChooseItem=function(e){h.default.instance.openUI(_.default,{name:f.Config.uiName.amountChooseUI,param:[{index:e,cb:this.onChooseItem.bind(this),scene:4}]},301)},t.prototype.onChooseItem=function(e,t){s.default.instance.festivalData.farmMatch.items.some(function(e){return t.id==(null==e?void 0:e.id)})?h.default.instance.LoadTipsByStr(c.default.GetText("\u9009\u62e9\u4e0d\u540c\u7269\u54c1\u53c2\u8d5b")):(s.default.instance.festivalData.farmMatch.items[e]={id:t.id,num:1,quality:t.quality},this.refreshUI())},t.prototype.onClickHelp=function(){v.default.instance.showUI(g.Utils.getNodeUsePos(this._view.btnHelp.node),{name:c.default.GetText("\u5e2e\u52a9"),dec:c.default.GetText("\u519c\u573a\u6bd4\u8d5b\u5e2e\u52a9"),spr:""})},t.instance=null,n=o([b],t)}(cc.Component));n.default=w,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/farm_match_ui_view":"farm_match_ui_view","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils","./amount_choose_ui":"amount_choose_ui","./pop_text_ui":"pop_text_ui"}],festival_data:[function(e,t,n){"use strict";cc._RF.push(t,"c3eb16/ImhF8INVFBQ9RByD","festival_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],festival_manager:[function(e,t,n){"use strict";cc._RF.push(t,"6b23fa4JEdGxKtVQUNSbc5r","festival_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.FestivalMgr=void 0;var i=e("../utils/utils"),a=e("./dynamic_data_manager"),o=e("./json_manager"),r=e("./sale_manager"),l=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(){a.default.instance.festivalData={foodMatch:{level:0,maxLevel:0,food:null,reward:!1,need:[0,0,0]},farmMatch:{level:0,maxLevel:0,items:[],reward:!1},game:{hard:!1,score:0,reward:!1,freeItem:[]},endOfYear:!1},this.onMonthBy()},e.prototype.onMonthBy=function(){var e=a.default.instance.festivalData;e.foodMatch.food=null,e.foodMatch.reward=!1,e.game.hard=!1,e.game.reward=!1,e.foodMatch.need=[i.Utils.getRandomNumber(1)+16,i.Utils.getRandomNumber(5)+601,i.Utils.getRandomNumber(1)],e.farmMatch.items=[]},e.prototype.getFestivalId=function(){var e=[5,40,77,119].indexOf(a.default.instance.day%120+1);return-1==e?0:[1,5,10,16][e]},e.prototype.getTodayHolidayType=function(){for(var e=null,t=1;t<=16;t++){var n=o.default.instance.getDataByName("holiday")[t];if(a.default.instance.day%120+1==n.day){e=n;break}}return e?e.type:0},e.prototype.getFoodMatchScore=function(){var e=a.default.instance.festivalData.foodMatch,t=e.food,n=0,i=o.default.instance.getDataByName("item")[t.id],l=r.default.instance.getItemNeed(t),s=i.price;i.type.includes(e.need[0])&&(n+=30),i.recipe.building==e.need[1]&&(n+=50),n+=10*e.food.quality,n+=15*Math.sqrt(i.rare),0==e.need[2]?(n+=l,n+=3*Math.sqrt(s)):(n+=l/2,n+=5*Math.sqrt(s));var c=[0,60,100,160,230];e.level&&(c=[0,100,160,260,350]);for(var d=0,u=0;u<c.length;u++)n>c[u]&&(d=u);return d},e._instance=null,e}();n.FestivalMgr=l,cc._RF.pop()},{"../utils/utils":"utils","./dynamic_data_manager":"dynamic_data_manager","./json_manager":"json_manager","./sale_manager":"sale_manager"}],field_data:[function(e,t,n){"use strict";cc._RF.push(t,"0a87fRjIsVEJboptC/BxLWx","field_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],field_detail_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"8b3ad/qyydGp6dp3IqeZEnu","field_detail_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeMenu=null,this.nodeHave=null,this.nodeNone=null,this.nodePageList=[],this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.btnHelp=null,this.btnReseed=null,this.btnSeed=null,this.btnAutoWater=null,this.btnAutoHarvest=null,this.btnFertList=[],this.btnAutoSeeding=null,this.labReseed=null,this.labLanList=[],this.labFertNum=null,this.labFertNum=null,this.labFertNum=null,this.labFertNum=null,this.labGropUp=null,this.labFieldName=null,this.labFieldProgress=null,this.labFieldQuality=null,this.labWater=null,this.labBugDef=null,this.labSpd=null,this.sprSoild=null,this.sprPlant=null,this.rtName=null,this.barProgress=null,this.barGrowUp=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v,y,b,w,C,S,L,A,k,T,M,R,P,D,B,F,I,O;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodeHave=cc.find("content/nodeHave",e),this.nodeNone=cc.find("content/nodeNone",e),this.nodePageList[0]=cc.find("content/nodeHave/nodePageList0",e),this.itemDec=cc.find("content/nodeHave/nodePageList0/itemDec",e),this.itemDec=cc.find("content/nodeHave/nodePageList0/itemDec",e),this.itemDec=cc.find("content/nodeHave/nodePageList0/itemDec",e),this.itemDec=cc.find("content/nodeHave/nodePageList0/itemDec",e),this.btnHelp=null===(t=cc.find("content/btnHelp",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnReseed=null===(n=cc.find("content/nodeMenu/btnReseed",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnSeed=null===(i=cc.find("content/nodeMenu/btnSeed",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnAutoWater=null===(a=cc.find("content/btnAutoWater",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnAutoHarvest=null===(o=cc.find("content/btnAutoHarvest",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnFertList[0]=null===(r=cc.find("content/btnFertList0",e))||void 0===r?void 0:r.getComponent(cc.Button),this.btnFertList[1]=null===(l=cc.find("content/btnFertList1",e))||void 0===l?void 0:l.getComponent(cc.Button),this.btnFertList[2]=null===(s=cc.find("content/btnFertList2",e))||void 0===s?void 0:s.getComponent(cc.Button),this.btnFertList[3]=null===(c=cc.find("content/btnFertList3",e))||void 0===c?void 0:c.getComponent(cc.Button),this.btnAutoSeeding=null===(d=cc.find("content/btnAutoSeeding",e))||void 0===d?void 0:d.getComponent(cc.Button),this.labReseed=null===(u=cc.find("content/nodeMenu/btnReseed/labReseed",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[7]=null===(h=cc.find("content/nodeMenu/btnSeed/labLanList7",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labLanList[0]=null===(p=cc.find("content/btnFertList0/labLanList0",e))||void 0===p?void 0:p.getComponent(cc.Label),this.labFertNum=null===(f=cc.find("content/btnFertList0/labFertNum",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labLanList[1]=null===(m=cc.find("content/btnFertList1/labLanList1",e))||void 0===m?void 0:m.getComponent(cc.Label),this.labFertNum=null===(g=cc.find("content/btnFertList1/labFertNum",e))||void 0===g?void 0:g.getComponent(cc.Label),this.labLanList[2]=null===(_=cc.find("content/btnFertList2/labLanList2",e))||void 0===_?void 0:_.getComponent(cc.Label),this.labFertNum=null===(v=cc.find("content/btnFertList2/labFertNum",e))||void 0===v?void 0:v.getComponent(cc.Label),this.labLanList[3]=null===(y=cc.find("content/btnFertList3/labLanList3",e))||void 0===y?void 0:y.getComponent(cc.Label),this.labFertNum=null===(b=cc.find("content/btnFertList3/labFertNum",e))||void 0===b?void 0:b.getComponent(cc.Label),this.labGropUp=null===(w=cc.find("content/nodeHave/labGropUp",e))||void 0===w?void 0:w.getComponent(cc.Label),this.labFieldName=null===(C=cc.find("content/labFieldName",e))||void 0===C?void 0:C.getComponent(cc.Label),this.labFieldProgress=null===(S=cc.find("content/labFieldProgress",e))||void 0===S?void 0:S.getComponent(cc.Label),this.labFieldQuality=null===(L=cc.find("content/labFieldQuality",e))||void 0===L?void 0:L.getComponent(cc.Label),this.labWater=null===(A=cc.find("content/labWater",e))||void 0===A?void 0:A.getComponent(cc.Label),this.labBugDef=null===(k=cc.find("content/labBugDef",e))||void 0===k?void 0:k.getComponent(cc.Label),this.labSpd=null===(T=cc.find("content/labSpd",e))||void 0===T?void 0:T.getComponent(cc.Label),this.labLanList[4]=null===(M=cc.find("content/labLanList4",e))||void 0===M?void 0:M.getComponent(cc.Label),this.labLanList[5]=null===(R=cc.find("content/labLanList5",e))||void 0===R?void 0:R.getComponent(cc.Label),this.labLanList[6]=null===(P=cc.find("content/labLanList6",e))||void 0===P?void 0:P.getComponent(cc.Label),this.sprSoild=null===(D=cc.find("content/sprSoild",e))||void 0===D?void 0:D.getComponent(cc.Sprite),this.sprPlant=null===(B=cc.find("content/sprPlant",e))||void 0===B?void 0:B.getComponent(cc.Sprite),this.rtName=null===(F=cc.find("content/nodeHave/rtName",e))||void 0===F?void 0:F.getComponent(cc.RichText),this.barProgress=null===(I=cc.find("content/barProgress",e))||void 0===I?void 0:I.getComponent(cc.ProgressBar),this.barGrowUp=null===(O=cc.find("content/nodeHave/barGrowUp",e))||void 0===O?void 0:O.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeMenu=null,this.nodeHave=null,this.nodeNone=null,this.nodePageList=[],this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.btnHelp=null,this.btnReseed=null,this.btnSeed=null,this.btnAutoWater=null,this.btnAutoHarvest=null,this.btnFertList=[],this.btnAutoSeeding=null,this.labReseed=null,this.labLanList=[],this.labFertNum=null,this.labFertNum=null,this.labFertNum=null,this.labFertNum=null,this.labGropUp=null,this.labFieldName=null,this.labFieldProgress=null,this.labFieldQuality=null,this.labWater=null,this.labBugDef=null,this.labSpd=null,this.sprSoild=null,this.sprPlant=null,this.rtName=null,this.barProgress=null,this.barGrowUp=null},e}();n.default=i,cc._RF.pop()},{}],field_detail_ui:[function(e,t,n){"use strict";cc._RF.push(t,"01ffcapP9dJF5XptZJMl++J","field_detail_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/effect_manager"),d=e("../manager/field_manager"),u=e("../manager/game_manager"),h=e("../manager/json_manager"),p=e("../manager/language_manager"),f=e("../manager/record_manager"),m=e("../manager/resources_manager"),g=e("../manager/ui_manager"),_=e("../ui_view/panel/field_detail_ui_view"),v=e("../utils/config"),y=e("../utils/enum"),b=e("../utils/utils"),w=e("./field_ui"),C=e("./help_ui"),S=e("./seed_choose_ui"),L=cc._decorator,A=L.ccclass,k=(L.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new _.default,t.index=0,t._startAddFert=!1,t._curAddFert=-1,t.updateTime=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent()},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.btnReseed.node.on("click",this.onClickReseed,this),this._view.btnSeed.node.on("click",this.onClickSeed,this),this._view.btnAutoWater.node.on("click",this.onClickAutoWater,this),this._view.btnAutoHarvest.node.on("click",this.onClickAutoHarvest,this),this._view.btnAutoSeeding.node.on("click",this.onClickAutoSeeding,this),this._view.btnHelp.node.on("click",this.onClickHelp,this),this._view.btnFertList.forEach(function(t,n){t.node.on(cc.Node.EventType.TOUCH_START,function(){e.onClickFertilizerStart(n)},e),t.node.on(cc.Node.EventType.TOUCH_END,function(){e.onClickFertilizerEnd(n)},e),t.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.onClickFertilizerEnd(n)},e)}),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList.concat(this._view.labReseed),t=["\u4fdd\u6e7f","\u54c1\u8d28","\u62b5\u5fa1","\u80a5\u6c83","\u81ea\u52a8\u6536\u83b7","\u81ea\u52a8\u64ad\u79cd","\u81ea\u52a8\u6d47\u6c34","\u64ad\u79cd","\u79fb\u9664"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])})},t.prototype.showUI=function(e){f.default.instance.onOpenPage(y.PageType.fieldDetail),this.index=e,r.default.instance.popOut(this._view.content,this._view.nodeMask);var t=s.default.instance.allFieldData.list[e];this._view.sprPlant.spriteFrame=null,t.seed?(this._view.btnReseed.node.active=!0,this._view.btnSeed.node.active=!1,this._view.nodeHave.active=!0,this._view.nodeNone.active=!1):(this._view.btnReseed.node.active=!1,this._view.btnSeed.node.active=!0,this._view.nodeHave.active=!1,this._view.nodeNone.active=!0),u.default.instance.checkHaveSkill(36)&&(this._view.labReseed.string=p.default.GetText("\u8fd8\u539f\u4e3a\u79cd\u5b50")),this.refreshUI(),this.refreshSeedUI()},t.prototype.refreshUI=function(){var e=s.default.instance.allFieldData.list[this.index];this._view.labFieldName.string=""+p.default.GetText("\u571f\u5730")+(this.index+1)+" "+p.default.GetText("\u89c4\u6a21")+e.maxNum,this._view.labFieldProgress.string=p.default.GetText("\u5f00\u57a6\u5ea6")+"("+(s.default.instance.allFieldData.list[this.index].progress||0)+"/"+d.FieldMgr.instance.getNextFieldMaxProgress(this.index)+")",this._view.barProgress.progress=(s.default.instance.allFieldData.list[this.index].progress||0)/d.FieldMgr.instance.getNextFieldMaxProgress(this.index),this._view.labFieldQuality.string=p.default.GetText("\u571f\u58e4\u54c1\u8d28")+"\uff1a"+(e.quality?e.quality.toFixed(0)+"%":"0%"),this._view.labWater.string=p.default.GetText("\u4fdd\u6e7f\u6982\u7387")+"\uff1a"+(e.saveWater?e.saveWater.toFixed(0)+"%":"0%"),this._view.labBugDef.string=p.default.GetText("\u866b\u5bb3\u7387")+"\uff1a"+(6*d.FieldMgr.instance.getBugChance(this.index)).toFixed(0)+"%",this._view.labSpd.string=p.default.GetText("\u751f\u957f\u901f\u5ea6")+"\uff1a"+(100*d.FieldMgr.instance.getGrowSpd(this.index)).toFixed(0)+"%",this._view.btnAutoWater.node.getChildByName("check").active=e.autoWater,this._view.btnAutoHarvest.node.getChildByName("check").active=e.autoHarvest,this._view.btnAutoSeeding.node.getChildByName("check").active=e.autoSeeding;for(var t=function(e){var t=s.default.instance.findItem(701+e);if(t.length>0){n._view.btnFertList[e].node.active=!0;var i=0;t.forEach(function(e){i+=e.num}),n._view.btnFertList[e].node.getChildByName("labFertNum").getComponent(cc.Label).string=i+""}else n._view.btnFertList[e].node.active=!1},n=this,i=0;i<4;i++)t(i)},t.prototype.refreshSeedUI=function(){var e=s.default.instance.allFieldData.list[this.index];if(e.seed){var t=h.default.instance.getDataByName("item")[e.seed.id];this._view.rtName.string="["+p.default.GetText("QualityStr"+e.seed.quality)+"]"+p.default.GetText("item_name_"+e.seed.id)+" x"+e.seed.num+" ",this._view.labGropUp.string=p.default.GetText("\u6210\u719f\u5ea6")+":"+(e.grow/t.seed.time*100).toFixed(0)+"%",this._view.barGrowUp.progress=e.grow/t.seed.time,this._view.sprPlant.spriteFrame=m.default.instance.getSprite(y.ResType.main,d.FieldMgr.instance.getFieldPlantSpr(this.index));var n=this._view.nodePageList[0].children;n[0].getChildByName("label").getComponent(cc.Label).string=p.default.GetText("\u751f\u957f\u65f6\u95f4")+":"+t.seed.time+p.default.GetText("\u5929"),n[1].getChildByName("rtLabel").getComponent(cc.RichText).string=p.default.GetText("\u5b63\u8282\u9002\u5e94")+":"+b.Utils.getSeaonColorStr(t.seed.season),n[2].getChildByName("label").getComponent(cc.Label).string=p.default.GetText("\u8fde\u7eed\u6536\u83b7")+":"+(t.seed.continue?p.default.GetText("\u662f"):p.default.GetText("\u5426")),n[3].getChildByName("label").getComponent(cc.Label).string=p.default.GetText("\u6d47\u6c34\u91cf")+":"+t.seed.water}},t.prototype.hideUI=function(){l.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onClickReseed=function(){l.default.instance.playAudio("click"),this.hideUI(),d.FieldMgr.instance.onReseed(this.index),w.default.instance.refreshList()},t.prototype.onClickSeed=function(){l.default.instance.playAudio("click"),g.default.instance.openUI(S.default,{name:v.Config.uiName.seedChooseUI,param:[{index:this.index}]},300)},t.prototype.onClickAutoWater=function(){l.default.instance.playAudio("click");var e=s.default.instance.allFieldData.list[this.index];s.default.instance.allFieldData.list[this.index].autoWater=!s.default.instance.allFieldData.list[this.index].autoWater,this._view.btnAutoWater.node.getChildByName("check").active=e.autoWater},t.prototype.onClickAutoHarvest=function(){l.default.instance.playAudio("click");var e=s.default.instance.allFieldData.list[this.index];s.default.instance.allFieldData.list[this.index].autoHarvest=!s.default.instance.allFieldData.list[this.index].autoHarvest,this._view.btnAutoHarvest.node.getChildByName("check").active=e.autoHarvest},t.prototype.onClickAutoSeeding=function(){l.default.instance.playAudio("click");var e=s.default.instance.allFieldData.list[this.index];s.default.instance.allFieldData.list[this.index].autoSeeding=!s.default.instance.allFieldData.list[this.index].autoSeeding,this._view.btnAutoSeeding.node.getChildByName("check").active=e.autoSeeding},t.prototype.onClickFertilizerStart=function(e){this._startAddFert||this._curAddFert!=e&&-1!=this._curAddFert||(this._startAddFert=!0,this._curAddFert=e,this.addFertilizer(e))},t.prototype.addFertilizer=function(e){this._view.btnFertList[e].node.active?(c.default.instance.createPartical("luck",b.Utils.getNodeUsePos(this._view.btnFertList[e].node)),d.FieldMgr.instance.onStrengthField(this.index,[701,702,703,704][e]),this.refreshUI()):this.onClickFertilizerEnd(e)},t.prototype.onClickFertilizerEnd=function(e){this._curAddFert==e&&(this._startAddFert=!1,this._curAddFert=-1)},t.prototype.update=function(e){this._startAddFert&&(this.updateTime+=e,this.updateTime>.1&&(this.updateTime=0,this.addFertilizer(this._curAddFert)))},t.prototype.onClickWater=function(){l.default.instance.playAudio("water"),d.FieldMgr.instance.onWater(this.index),this.refreshUI()},t.prototype.onClickHarvest=function(){l.default.instance.playAudio("haverst"),d.FieldMgr.instance.onHarvest(this.index),this.refreshUI()},t.prototype.onClickHelp=function(){g.default.instance.openUI(C.default,{name:v.Config.uiName.helpUI,param:[1]},301)},t.instance=null,n=o([A],t)}(cc.Component));n.default=k,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/field_manager":"field_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/field_detail_ui_view":"field_detail_ui_view","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils","./field_ui":"field_ui","./help_ui":"help_ui","./seed_choose_ui":"seed_choose_ui"}],field_manager:[function(e,t,n){"use strict";cc._RF.push(t,"4cb9eFrSnhMNJbZ/kQ3DtzP","field_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.FieldMgr=void 0;var i=e("../ui/field_ui"),a=e("../utils/emmiter"),o=e("../utils/enum"),r=e("../utils/game_config"),l=e("../utils/message"),s=e("../utils/utils"),c=e("./dynamic_data_manager"),d=e("./game_manager"),u=e("./json_manager"),h=e("./language_manager"),p=e("./ui_manager"),f=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(e,t){void 0===e&&(e=1),void 0===t&&(t=2),c.default.instance.allFieldData={maxField:e,list:[]};for(var n=0;n<c.default.instance.allFieldData.maxField;n++)c.default.instance.allFieldData.list.push({index:n,seed:null,maxNum:t,grow:0,autoWater:!1,progress:0,quality:0,saveWater:0,defenceBug:0,growSpeed:0,monthFert:[0,0,0,0],bug:0})},e.prototype.onUpdate=function(e){var t=this;c.default.instance.allFieldData.list.forEach(function(n,i){if(n.seed&&n.water){var o=t.getGrowSpd(i);n.grow+=e/100*o,t.isGrowUp(i)&&a.Emitter.fire(l.MessageType.fieldAlert)}!n.seed||c.default.instance.rain||n.bug||d.default.instance.checkHaveBuff(2564)||s.Utils.luckChance(t.getBugChance(i))&&(n.bugId=s.Utils.getArrRandomItem(r.GameConfig.SeasonBugId[d.default.instance.getSeason()]),n.bug=1,a.Emitter.fire(l.MessageType.fieldAlert)),n.seed&&n.bug&&(n.bug++,n.bug>t.getBugHealth()&&t.onBugEat(i))}),i.default.instance.refreshList()},e.prototype.getBugHealth=function(){return 7},e.prototype.getBugChance=function(e){var t=c.default.instance.allFieldData.list[e];return.3*(t.seed?t.seed.quality:0)-t.defenceBug/100+t.growSpeed/100},e.prototype.getGrowSpd=function(e){var t=c.default.instance.allFieldData.list[e],n=(100+d.default.instance.getValueByStr("soildGorwSpd")+Math.pow(t.growSpeed,.7))/100;if(n>300&&(n=300+Math.pow(n-300,.7)),t.seed){var i=u.default.instance.getDataByName("item")[t.seed.id];d.default.instance.checkIsInGoodSeason(i.seed.season)?n+=.33:d.default.instance.checkIsInBedSeason(i.seed.season)&&(n*=.15)}return n},e.prototype.onDayStart=function(){var e=this,t=c.default.instance.allFieldData,n=0,r=!0;t.list.forEach(function(t,i){if(n+=t.maxNum,t.seed){var a=e.getGrowSpd(i);t.water&&(t.grow+=.4*a);var o={id:t.seed.id,num:t.seed.num,quality:t.seed.quality},l=u.default.instance.getDataByName("item")[t.seed.id];if(t.grow>=l.seed.time&&t.autoHarvest&&e.onHarvest(i),!t.seed&&t.autoSeeding&&o){var d=c.default.instance.findItem(o.id,o.quality);if(d[0]){var h=Math.min(d[0].num,t.maxNum);o.num=h,e.onSeeding(i,o)}}s.Utils.luckChance(t.saveWater)||c.default.instance.rain||(t.water=!1),!t.water&&l.seed&&t.autoWater&&t.grow<l.seed.time&&(e.onWater(i)||(r=!1)),t.saveWater>0&&(t.saveWater*=.98,t.saveWater=Math.max(t.saveWater-1,0))}else t.water=!1}),t.list.forEach(function(e){e.quality+=d.default.instance.getValueByStr("daliySoildQua")/n,e.saveWater+=d.default.instance.getValueByStr("dailySoildWater")/n}),c.default.instance.rain||r||a.Emitter.fire(l.MessageType.addDairy,o.DairyRtType.autoWater,{waterAll:r}),i.default.instance.refreshList()},e.prototype.onMonthBy=function(){for(var e=0;e<c.default.instance.allFieldData.list.length;e++)c.default.instance.allFieldData.list[e].monthFert=[0,0,0,0]},e.prototype.getWaterHealthCost=function(e){var t=0,n=c.default.instance.allFieldData.list[e].seed;return n?(t=u.default.instance.getDataByName("item")[n.id].seed.water*n.num,t*=[1.2,1,.9,.75,.5,.33][c.default.instance.getToolLevel(o.ToolId.\u6c34\u58f6)]):0},e.prototype.onWater=function(e,t){if(void 0===t&&(t=!1),c.default.instance.allFieldData.list[e].water)return t&&p.default.instance.LoadTipsByStr(h.default.GetText("\u5df2\u7ecf\u6d47\u6c34")),!0;var n=this.getWaterHealthCost(e);return c.default.instance.checkHealthEnough(n)?(c.default.instance.onCostHealth(n),c.default.instance.allFieldData.list[e].water=!0,i.default.instance.createWaterEffect(e),a.Emitter.fire(l.MessageType.checkGuide),!0):(t&&p.default.instance.LoadTipsByStr(h.default.GetText("\u4f53\u529b\u503c\u4e0d\u8db3")),!1)},e.prototype.onSeeding=function(e,t){var n=c.default.instance.allFieldData.list[e];n.seed,n.grow=0,n.water=!1,c.default.instance.rain&&(n.water=!0),c.default.instance.onCost(t),c.default.instance.allFieldData.list[e].seed={id:t.id,num:t.num,quality:t.quality},a.Emitter.fire(l.MessageType.checkGuide)},e.prototype.onReseed=function(e){var t=c.default.instance.allFieldData.list[e];t.seed,d.default.instance.checkHaveSkill(36)&&(i.default.instance.createHarvestEffect(t.seed.id,t.seed.num,e),c.default.instance.onReward(t.seed)),t.seed=null,t.water=!1,c.default.instance.rain&&(t.water=!0)},e.prototype.getHarvestHealthCost=function(e){return c.default.instance.allFieldData.list[e].seed.num*[1,.8,.6,.4,.2,0][c.default.instance.getToolLevel(o.ToolId.\u9570\u5200)]},e.prototype.onHarvest=function(e,t){void 0===t&&(t=!1);var n=c.default.instance.allFieldData.list[e];if(n.seed){var o=this.getHarvestHealthCost(e);if(c.default.instance.checkHealthEnough(o)){if(c.default.instance.onCostHealth(o),this.isGrowUp(e)){var r=s.Utils.luckChance(n.quality-100*n.seed.quality+100),f=s.Utils.luckChance(100*n.seed.quality-n.quality-250)&&!d.default.instance.checkHaveSkill(52),m=u.default.instance.getDataByName("item")[n.seed.id],g={id:m.seed.product,num:n.seed.num,quality:n.seed.quality};if(d.default.instance.checkHaveSkill(3)){for(var _=0,v=0;v<n.seed.num;v++)s.Utils.luckChance(15)&&_++;g.num+=_}if(i.default.instance.createHarvestEffect(m.seed.product,g.num,e),m.seed.continue)n.grow=m.seed.time-m.seed.continue;else{if(d.default.instance.checkHaveSkill(4)){var y=0;for(v=0;v<n.seed.num;v++)s.Utils.luckChance(20)&&y++;y>0&&(i.default.instance.createHarvestEffect(m.id,y,e),c.default.instance.onReward({id:m.id,num:y,quality:n.seed.quality}))}n.seed=null,n.grow=0}!(n.quality>0)||d.default.instance.checkHaveSkill(48)&&n.monthFert[1]||(n.quality*=.9,n.quality=Math.max(n.quality-5,0)),n.defenceBug>0&&(n.defenceBug*=.95,n.defenceBug=Math.max(n.defenceBug-3,0)),n.growSpeed>0&&(n.growSpeed*=.9,n.growSpeed=Math.max(n.growSpeed-5,0)),r&&(g.quality>=5?g.num++:g.quality++),f&&g.quality>1&&g.quality--,c.default.instance.onReward(g),a.Emitter.fire(l.MessageType.onHarvest,g.id,g.num)}a.Emitter.fire(l.MessageType.fieldAlert)}else t&&p.default.instance.LoadTipsByStr(h.default.GetText("\u4f53\u529b\u503c\u4e0d\u8db3"))}},e.prototype.onStrengthField=function(e,t){var n=c.default.instance.findItem(t);if(0!=n.length){var i=d.default.instance.getPrecentValueByStr("fertEffect"),a=c.default.instance.allFieldData.list[e];c.default.instance.onCost({id:t,num:1,quality:n[0].quality});var o=r.GameConfig.QualityDouble.effect;switch(t){case 701:a.saveWater+=100*i/a.maxNum*o[n[0].quality];break;case 702:a.quality+=100*i/a.maxNum*o[n[0].quality];break;case 703:a.defenceBug+=100*i/a.maxNum*o[n[0].quality];break;case 704:a.growSpeed+=100*i/a.maxNum*o[n[0].quality]}a.monthFert[t-701]=1}else p.default.instance.LoadTipsByStr(h.default.GetText("\u6682\u65e0\u8be5\u80a5\u6599"))},e.prototype.isGrowUp=function(e){var t=c.default.instance.allFieldData.list[e],n=u.default.instance.getDataByName("item")[t.seed.id];return t.grow>=n.seed.time},e.prototype.canHavest=function(e){var t=c.default.instance.allFieldData.list[e];if(!t.seed)return!1;var n=u.default.instance.getDataByName("item")[t.seed.id];return t.grow>=n.seed.time},e.prototype.getNextFieldMaxProgress=function(e){return Math.ceil(Math.pow(c.default.instance.allFieldData.list[e].maxNum,1.35))},e.prototype.getFieldPlantSpr=function(e){var t=c.default.instance.allFieldData.list[e];if(t.seed){var n=u.default.instance.getDataByName("item")[t.seed.id];if(t.grow>=n.seed.time)return n.seed.growSp[n.seed.growSp.length-1];for(var i=null,a=0;a<n.seed.growSp.length;a++)if(t.grow<n.seed.time/(n.seed.growSp.length-1)*a){i=n.seed.growSp[a-1];break}return i}return"Icons-Download"},e.prototype.onBugEat=function(e){var t=c.default.instance.allFieldData.list[e];t.seed&&[224,225,226,227].includes(t.seed.id)?(t.bug=0,i.default.instance.refreshList()):t.seed&&(t.seed.num--,0==t.seed.num&&(t.seed=null,t.grow=0),t.bug=0,i.default.instance.refreshList(),a.Emitter.fire(l.MessageType.fieldAlert))},e.prototype.onRemoveBug=function(e){c.default.instance.allFieldData.list[e].bug=0,a.Emitter.fire(l.MessageType.fieldAlert)},e._instance=null,e}();n.FieldMgr=f,cc._RF.pop()},{"../ui/field_ui":"field_ui","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","../utils/utils":"utils","./dynamic_data_manager":"dynamic_data_manager","./game_manager":"game_manager","./json_manager":"json_manager","./language_manager":"language_manager","./ui_manager":"ui_manager"}],field_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"07819izOXhOY6kQdRScQdMM","field_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeEffectContainer=null,this.nodeContainer=null,this.btnHelp=null,this.svMain=null}return e.prototype.initView=function(e){var t,n;this.content=cc.find("content",e),this.nodeEffectContainer=cc.find("content/nodeEffectContainer",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.btnHelp=null===(t=cc.find("content/btnHelp",e))||void 0===t?void 0:t.getComponent(cc.Button),this.svMain=null===(n=cc.find("content/svMain",e))||void 0===n?void 0:n.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeEffectContainer=null,this.nodeContainer=null,this.btnHelp=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],field_ui:[function(e,t,n){"use strict";cc._RF.push(t,"855c7yiytNEUIc8vORgch2t","field_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/item_amount"),l=e("../item/item_field"),s=e("../manager/action_manager"),c=e("../manager/dynamic_data_manager"),d=e("../manager/effect_manager"),u=e("../manager/game_manager"),h=e("../manager/help_manager"),p=e("../manager/pool_manager"),f=e("../manager/record_manager"),m=e("../manager/ui_manager"),g=e("../ui_view/panel/field_ui_view"),_=e("../utils/config"),v=e("../utils/emmiter"),y=e("../utils/enum"),b=e("../utils/message"),w=e("../utils/utils"),C=e("./help_ui"),S=e("./menu_ui"),L=cc._decorator,A=L.ccclass,k=(L.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._bindEvent()},t.prototype._bindEvent=function(){v.Emitter.register(b.MessageType.dairyOpen,this.changeSvToShort,this),v.Emitter.register(b.MessageType.dairyClose,this.changeSvToLong,this),this._view.btnHelp.node.on("click",this.onClickHelp,this)},t.prototype.changeSvToShort=function(){this._view.svMain.node.height=190,this._view.svMain.node.getChildByName("view").height=190},t.prototype.changeSvToLong=function(){this._view.svMain.node.height=270,this._view.svMain.node.getChildByName("view").height=270},t.prototype.update=function(e){u.default.instance.onUpdate(e)},t.prototype.showUI=function(){s.default.instance.fadeShowDialog(this._view.content),this.refreshList(),f.default.instance.onOpenPage(y.PageType.field),1==S.default.instance._view.nodeBG.active?this.changeSvToShort():this.changeSvToLong()},t.prototype.hideUI=function(){s.default.instance.fadeHideDialog(this._view.content)},t.prototype.onUpdate=function(e){this._view.nodeContainer.children.forEach(function(t){t.getComponent(l.default).onUpdate(e)})},t.prototype.refreshList=function(){this._view.content.active&&h.default.instance.debounce(h.limitKeyType.fieldRefresh,this.realRefreshList.bind(this))},t.prototype.realRefreshList=function(){c.default.instance.config.minField?this._view.nodeContainer.getComponent(cc.Layout).type=cc.Layout.Type.GRID:this._view.nodeContainer.getComponent(cc.Layout).type=cc.Layout.Type.VERTICAL,p.default.instance.removeObjByContainer(this._view.nodeContainer);for(var e=0;e<c.default.instance.allFieldData.maxField;e++)p.default.instance.createObjectByName("itemField",this._view.nodeContainer).getComponent(l.default).init(e)},t.prototype.createWaterEffect=function(e){this._view.content.active&&d.default.instance.createEffect("water_"+(w.Utils.getRandomNumber(1)+1),w.Utils.getNodeUsePos(this._view.nodeContainer.children[e].getComponent(l.default)._view.sprSoild.node).add(cc.v2(7,-5)),this._view.nodeEffectContainer)},t.prototype.createHarvestEffect=function(e,t,n){var i=[],a=Math.sqrt(t);a>5&&(a=5);for(var o=0;o<a;o++)i.push({type:r.RewardType.item,id:e});S.default.instance.showReward(y.PageType.field,i,this._view.nodeContainer.children[n].getComponent(l.default)._view.sprSoild.node)},t.prototype.showNewEffect=function(){var e=this;setTimeout(function(){var t=e._view.nodeContainer.children[e._view.nodeContainer.children.length-1];d.default.instance.createPartical("build",w.Utils.getNodeUsePos(t),e._view.nodeEffectContainer)},200)},t.prototype.onClickHelp=function(){m.default.instance.openUI(C.default,{name:_.Config.uiName.helpUI,param:[0]},301)},t.prototype.getSeedPos=function(){return w.Utils.getNodeUsePos(this._view.nodeContainer.children[0]).add(cc.v2(-64,0))},t.instance=null,n=o([A],t)}(cc.Component));n.default=k,cc._RF.pop()},{"../interface/item_amount":"item_amount","../item/item_field":"item_field","../manager/action_manager":"action_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/game_manager":"game_manager","../manager/help_manager":"help_manager","../manager/pool_manager":"pool_manager","../manager/record_manager":"record_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/field_ui_view":"field_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./help_ui":"help_ui","./menu_ui":"menu_ui"}],fish_state:[function(e,t,n){"use strict";cc._RF.push(t,"548d6MjmTZHxLUk+hVfwcMx","fish_state");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.FishEscapeStat=n.FishBiteState=n.FishAttractState=n.FishMoveState=n.FishIdleState=n.FishState=n.FishStateType=void 0;var o,r=e("../littleGame/item_fish_pole"),l=e("../manager/dynamic_data_manager"),s=e("../manager/pool_manager"),c=e("../ui/game_fish_ui"),d=e("../utils/utils"),u=e("./i_state");(function(e){e[e.idle=0]="idle",e[e.move=1]="move",e[e.attract=2]="attract",e[e.bite=3]="bite",e[e.escape=4]="escape"})(o=n.FishStateType||(n.FishStateType={}));var h=function(e){function t(t){var n=e.call(this,t)||this;return n.item=null,n.anima=null,n.item=t,n}return a(t,e),t}(u.IState);n.FishState=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onEnter=function(){this.timer=0},t.prototype.onUpdate=function(e){this.timer+=e,this.timer>1&&this.item.switchState(o.move)},t}(h);n.FishIdleState=p;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveSpd=20,t.targetPos=null,t}return a(t,e),t.prototype.onEnter=function(){this.targetPos=cc.v2(d.Utils.getRandomNumber(150)-75,d.Utils.getRandomNumber(200)-75)},t.prototype.onUpdate=function(e){var t=cc.v2();if(this.findPole(),this.item.targetPole&&this.item.targetPole.status==r.PoleStateType.\u7b49\u5f85\u4e0a\u94a9){if((t=this.item.targetPole.getBaitPos().sub(this.item.node.getPosition())).mag()<30)return void this.item.switchState(o.attract);t=t.normalize()}else{if((t=this.targetPos.sub(this.item.node.getPosition())).mag()<1)return void this.item.switchState(o.idle);t=t.normalize()}this.item.node.scaleX=t.x>0?-1:1,this.item.node.y+=t.y*e*this.moveSpd,this.item.node.x+=t.x*e*this.moveSpd},t.prototype.findPole=function(){for(var e=0;e<c.default.instance._view.nodePoleContainer.children.length;e++){var t=c.default.instance._view.nodePoleContainer.children[e].getComponent(r.default),n=t.getBaitPos().sub(this.item.node.getPosition());if(t.status==r.PoleStateType.\u7b49\u5f85\u4e0a\u94a9&&n.mag()<30&&[[1,2,3],[3,4,5],[5,6,7],[7,8,9,10]][t.id-1].includes(this.item.id)){this.item.targetPole=t;break}}},t}(h);n.FishMoveState=f;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=0,t.tween=null,t.checkTime=0,t.selfPos=null,t}return a(t,e),t.prototype.onEnter=function(){this.tween=null,this.selfPos=cc.v2(this.item.node.getPosition().x,this.item.node.getPosition().y),this.checkTime=0},t.prototype.onUpdate=function(e){this.item.targetPole&&this.item.targetPole.status==r.PoleStateType.\u7b49\u5f85\u4e0a\u94a9?(this.time+=e,this.time>.5&&!this.tween&&this.onAttract()):(this.item.targetPole=null,this.item.switchState(o.move))},t.prototype.onAttract=function(){var e=this,t=this.item.targetPole.getBaitPos(),n=t.sub(this.item.node.getPosition());this.item.node.scaleX=n.x>0?-1:1,this.tween=cc.tween(this.item.node).to(1,{x:t.x,y:t.y}).call(function(){e.checkAttract()}).to(.6,{x:this.selfPos.x,y:this.selfPos.y}).call(function(){e.item.targetPole&&e.item.targetPole.status==r.PoleStateType.\u7b49\u5f85\u4e0a\u94a9?e.attractEnd():e.item.switchState(o.move)}).start()},t.prototype.checkAttract=function(){this.item.targetPole&&this.item.targetPole.status==r.PoleStateType.\u7b49\u5f85\u4e0a\u94a9&&(d.Utils.luckChance(10+this.checkTime)?this.item.switchState(o.bite):this.checkTime++)},t.prototype.attractEnd=function(){this.onAttract()},t.prototype.onExit=function(){this.tween&&this.tween.stop()},t}(h);n.FishAttractState=m;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t}return a(t,e),t.prototype.onEnter=function(){this.timer=l.default.instance.festivalData.game.hard?1.3:2,this.item.targetPole.onHook(this.item)},t.prototype.onUpdate=function(e){this.timer-=e,this.item.targetPole.updateHook(this.timer),this.timer<=0&&(this.item.targetPole.onEscape(this.item),this.item.switchState(o.escape))},t}(h);n.FishBiteState=g;var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveSpd=3,t.timer=0,t.targetPos=null,t}return a(t,e),t.prototype.onEnter=function(){this.timer=1,this.item.targetPole.onEscape(this.item),this.targetPos=cc.v2(d.Utils.getRandomNumber(150)-75,d.Utils.getRandomNumber(200)-75)},t.prototype.onUpdate=function(e){this.timer-=e;var t=this.targetPos.sub(this.item.node.getPosition());this.item.node.opacity=150*this.timer,this.timer<0&&s.default.instance.removeObject(this.item.node),this.item.node.scaleX=t.x>0?-1:1,this.item.node.y+=t.y*e*this.moveSpd,this.item.node.x+=t.x*e*this.moveSpd},t}(h);n.FishEscapeStat=_,cc._RF.pop()},{"../littleGame/item_fish_pole":"item_fish_pole","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/pool_manager":"pool_manager","../ui/game_fish_ui":"game_fish_ui","../utils/utils":"utils","./i_state":"i_state"}],food_choose_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"2b716mzOvRNmZUxkdMguxDg","food_choose_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.btnMain=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnOrder=null,this.labOrder=null,this.labLanList=[],this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeSubMenu=cc.find("content/nodeSubMenu",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.btnMain=null===(t=cc.find("content/nodeSubMenu/btnMain",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnHome=null===(n=cc.find("content/nodeSubMenu/btnHome",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnHome=null===(i=cc.find("content/nodeSubMenu/btnHome",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnMain=null===(a=cc.find("content/nodeSubMenu/btnMain",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnOrder=null===(o=cc.find("content/btnOrder",e))||void 0===o?void 0:o.getComponent(cc.Button),this.labOrder=null===(r=cc.find("content/btnOrder/labOrder",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[0]=null===(l=cc.find("content/labLanList0",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[1]=null===(s=cc.find("content/labLanList1",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[2]=null===(c=cc.find("content/labLanList2",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[3]=null===(d=cc.find("content/labLanList3",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[4]=null===(u=cc.find("content/labLanList4",e))||void 0===u?void 0:u.getComponent(cc.Label),this.svMain=null===(h=cc.find("content/svMain",e))||void 0===h?void 0:h.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.btnMain=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnOrder=null,this.labOrder=null,this.labLanList=[],this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],food_choose_ui:[function(e,t,n){"use strict";cc._RF.push(t,"cc90ddDemxLbIzY7QpiaiW1","food_choose_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l=e("../item/item_food_choose"),s=e("../manager/action_manager"),c=e("../manager/audio_manager"),d=e("../manager/dynamic_data_manager"),u=e("../manager/game_manager"),h=e("../manager/json_manager"),p=e("../manager/language_manager"),f=e("../manager/pool_manager"),m=e("../manager/resources_manager"),g=e("../ui_view/panel/food_choose_ui_view"),_=e("../utils/enum"),v=e("./food_match_ui");(function(e){e[e.default=0]="default",e[e.timeUp=1]="timeUp",e[e.price=2]="price",e[e.water=3]="water"})(r||(r={}));var y=cc._decorator,b=y.ccclass,w=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t.curType=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u6599\u7406\u9009\u62e9","\u5168\u90e8","\u4e3b\u98df","\u751c\u54c1","\u5e94\u5b63"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeSubMenu.children.forEach(function(t,n){t.on("click",function(){c.default.instance.playAudio("switch"),e.onChooseType(n)},e)}),this._view.btnOrder.node.on("click",this.onClickOrder,this)},t.prototype.showUI=function(){s.default.instance.popOut(this._view.content,this._view.nodeMask),this._orderType=r.default,this.onChooseType(0)},t.prototype.refreshList=function(){var e=this;f.default.instance.removeObjByContainer(this._view.nodeContainer),this._view.nodeSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(_.ResType.main,n==e.curType?"ui-UI_Flat_Slot_01_Selected":"ui-UI_Flat_Slot_02_Available")});for(var t=[],n=0;n<d.default.instance.itemDepot.length;n++)switch(this.curType){case 0:(d.default.instance.checkItemIsType(d.default.instance.itemDepot[n].id,_.Itemtype.meal)||d.default.instance.checkItemIsType(d.default.instance.itemDepot[n].id,_.Itemtype.dsert))&&t.push(n);break;case 1:d.default.instance.checkItemIsType(d.default.instance.itemDepot[n].id,_.Itemtype.meal)&&t.push(n);break;case 2:d.default.instance.checkItemIsType(d.default.instance.itemDepot[n].id,_.Itemtype.dsert)&&t.push(n);break;case 3:if(d.default.instance.checkItemIsType(d.default.instance.itemDepot[n].id,_.Itemtype.meal)||d.default.instance.checkItemIsType(d.default.instance.itemDepot[n].id,_.Itemtype.dsert)){var i=h.default.instance.getDataByName("item")[d.default.instance.itemDepot[n].id];i.food.season&&1==i.food.season[u.default.instance.getSeason()]&&t.push(n)}}t.forEach(function(t){f.default.instance.createObjectByName("itemFoodChoose",e._view.nodeContainer).getComponent(l.default).init(d.default.instance.itemDepot[t],e.onChoose.bind(e))})},t.prototype.onChoose=function(e){v.default.instance.onChooseItem(e),this.hideUI()},t.prototype.hideUI=function(){c.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onChooseType=function(e){this.curType=e,this.refreshList()},t.prototype.onClickOrder=function(){c.default.instance.playAudio("switch"),this._orderType++,this._orderType>3&&(this._orderType=0),this.refreshList()},t.instance=null,n=o([b],t)}(cc.Component));n.default=w,cc._RF.pop()},{"../item/item_food_choose":"item_food_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../ui_view/panel/food_choose_ui_view":"food_choose_ui_view","../utils/enum":"enum","./food_match_ui":"food_match_ui"}],food_match_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"667e2KoQvZNjLSmLIb7zSJM","food_match_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeSceneList=[],this.itemGift=null,this.btnHelp=null,this.btnLevel=null,this.btnStart=null,this.labNeed=null,this.labLanList=[],this.labNone=null,this.sprQua=null,this.sprMain=null,this.sprBg=null,this.sprRole=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeSceneList[0]=cc.find("content/nodeSceneList0",e),this.itemGift=cc.find("content/nodeSceneList0/itemGift",e),this.btnHelp=null===(t=cc.find("content/btnHelp",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnLevel=null===(n=cc.find("content/btnLevel",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnStart=null===(i=cc.find("content/btnStart",e))||void 0===i?void 0:i.getComponent(cc.Button),this.labNeed=null===(a=cc.find("content/labNeed",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labLanList[0]=null===(o=cc.find("content/btnStart/labLanList0",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labLanList[1]=null===(r=cc.find("content/labLanList1",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[2]=null===(l=cc.find("content/labLanList2",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labNone=null===(s=cc.find("content/labNone",e))||void 0===s?void 0:s.getComponent(cc.Label),this.sprQua=null===(c=cc.find("content/sprQua",e))||void 0===c?void 0:c.getComponent(cc.Sprite),this.sprMain=null===(d=cc.find("content/sprMain",e))||void 0===d?void 0:d.getComponent(cc.Sprite),this.sprBg=null===(u=cc.find("content/nodeSceneList0/sprBg",e))||void 0===u?void 0:u.getComponent(cc.Sprite),this.sprRole=null===(h=cc.find("content/sprRole",e))||void 0===h?void 0:h.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeSceneList=[],this.itemGift=null,this.btnHelp=null,this.btnLevel=null,this.btnStart=null,this.labNeed=null,this.labLanList=[],this.labNone=null,this.sprQua=null,this.sprMain=null,this.sprBg=null,this.sprRole=null},e}();n.default=i,cc._RF.pop()},{}],food_match_ui:[function(e,t,n){"use strict";cc._RF.push(t,"f92168IljVGSpBHxIpVuHnH","food_match_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,l=o.length;r<l;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../manager/action_manager"),s=e("../manager/audio_manager"),c=e("../manager/dynamic_data_manager"),d=e("../manager/festival_manager"),u=e("../manager/game_manager"),h=e("../manager/language_manager"),p=e("../manager/record_manager"),f=e("../manager/resources_manager"),m=e("../manager/sale_manager"),g=e("../manager/ui_manager"),_=e("../ui_view/panel/food_match_ui_view"),v=e("../utils/config"),y=e("../utils/emmiter"),b=e("../utils/enum"),w=e("../utils/message"),C=e("../utils/utils"),S=e("./food_choose_ui"),L=e("./pop_text_ui"),A=e("./talk_ui"),k=cc._decorator,T=k.ccclass,M=(k.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new _.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList.concat(this._view.labNone),t=["\u6bd4\u8d5b\u5f00\u59cb","\u9ad8\u7ea7","\u6599\u7406\u9009\u62e9","\u672a\u9009\u62e9"];e.forEach(function(e,n){e.string=h.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this),this._view.btnHelp.node.on("click",this.onClickHelp,this),this._view.sprQua.node.on("click",this.onClickChooseItem,this),this._view.btnLevel.node.on("click",this.onSwitchDiff,this),this._view.btnStart.node.on("click",this.onStartMatch,this)},t.prototype.showUI=function(){l.default.instance.popOut(this._view.content,this._view.nodeMask),this.refreshUI(),p.default.instance.onOpenPage(b.PageType.bestChef),this._view.sprRole.spriteFrame=f.default.instance.getSprite(b.ResType.main,"role_"+c.default.instance.char)},t.prototype.refreshUI=function(){var e=c.default.instance.festivalData.foodMatch;this._view.sprQua.spriteFrame=f.default.instance.getSprite(b.ResType.main,"ui-quality_0"),this._view.labNone.string="",this._view.sprMain.spriteFrame=null,this._view.btnStart.interactable=!1,this._view.labNeed.string=h.default.GetText("\u8bc4\u5206\u6743\u91cd")+":";var t=c.default.instance.festivalData.foodMatch.need;this._view.labNeed.string+="\n1."+(17==t[0]?h.default.GetText("\u4e3b\u98df"):h.default.GetText("\u751c\u98df")),this._view.labNeed.string+="\n2."+h.default.GetText("item_name_"+t[1])+h.default.GetText("\u6599\u7406"),this._view.labNeed.string+="\n3."+(t[2]?h.default.GetText("\u4eba\u6c14"):h.default.GetText("\u552e\u4ef7")),e.food?(this._view.sprQua.spriteFrame=f.default.instance.getSprite(b.ResType.main,"ui-quality_"+e.food.quality),this._view.sprMain.spriteFrame=f.default.instance.getSprite(b.ResType.main,C.Utils.getItemSpByAmount(e.food)),e.reward?this._view.btnStart.interactable=!1:this._view.btnStart.interactable=!0):this._view.labNone.string=h.default.GetText("\u672a\u9009\u62e9"),this._view.btnLevel.node.getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(b.ResType.main,e.level?"ui-new-switch_open":"ui-new-switch_close")},t.prototype.onSwitchDiff=function(){s.default.instance.playAudio("click"),c.default.instance.festivalData.foodMatch.level?c.default.instance.festivalData.foodMatch.level=0:c.default.instance.festivalData.foodMatch.level=1,this._view.btnLevel.node.getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(b.ResType.main,c.default.instance.festivalData.foodMatch.level?"ui-new-switch_open":"ui-new-switch_close")},t.prototype.hideUI=function(){s.default.instance.playAudio("paper2"),c.default.instance.festivalData.foodMatch.reward||(c.default.instance.festivalData.foodMatch.food=null),this._view.content.active=!1,y.Emitter.fire(w.MessageType.gameDone)},t.prototype.onClickChooseItem=function(){s.default.instance.playAudio("click"),c.default.instance.festivalData.foodMatch.reward?g.default.instance.LoadTipsByStr(h.default.GetText("\u6bd4\u8d5b\u5df2\u7ed3\u675f")):g.default.instance.openUI(S.default,{name:v.Config.uiName.foodChooseUI,param:[]})},t.prototype.onChooseItem=function(e){c.default.instance.festivalData.foodMatch.food=e,this.refreshUI()},t.prototype.onStartMatch=function(){s.default.instance.playAudio("click");for(var e=[2211,2212,2213,2214,2215][d.FestivalMgr.instance.getFoodMatchScore()],t=[],n=0;n<28;n++)t.push(2121+2*n);var i=C.Utils.getArrRandomItemsByNum(t,2);i.push(C.Utils.getArrRandomItem([2177,2179,2181,2183,2185,2187,2189,2191,2193,2195]));var a=r([2111],i,[2201,e]);if(d.FestivalMgr.instance.getFoodMatchScore()>2){if(y.Emitter.fire(w.MessageType.addDairy,b.DairyRtType.bestChef),c.default.instance.festivalData.foodMatch.level){for(c.default.instance.onReward({id:859,num:10,quality:1}),n=0;n<3;n++)c.default.instance.onReward({id:C.Utils.getArrRandomItem(u.default.instance.typeMap[b.Itemtype.seasoning]),num:1,quality:5});c.default.instance.onReward({id:851,num:1,quality:1}),a.push(2231)}else{for(c.default.instance.onReward({id:859,num:5,quality:1}),n=0;n<3;n++)c.default.instance.onReward({id:C.Utils.getArrRandomItem(u.default.instance.typeMap[b.Itemtype.seasoning]),num:1,quality:4});c.default.instance.onReward({id:853,num:2,quality:c.default.instance.getRandomQuality(u.default.instance.getLuck(),!0)}),a.push(2221)}m.default.instance.addBuff(113,7)}else c.default.instance.onReward({id:859,num:3,quality:1}),a.push(2251);c.default.instance.onCost(c.default.instance.festivalData.foodMatch.food),c.default.instance.festivalData.foodMatch.reward=!0,g.default.instance.openUI(A.default,{name:v.Config.uiName.talkUI,param:a},301),this.hideUI()},t.prototype.onClickHelp=function(){L.default.instance.showUI(C.Utils.getNodeUsePos(this._view.btnHelp.node),{name:h.default.GetText("\u5e2e\u52a9"),dec:h.default.GetText("\u6599\u7406\u5927\u8d5b\u5e2e\u52a9"),spr:""})},t.instance=null,n=o([T],t)}(cc.Component));n.default=M,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/festival_manager":"festival_manager","../manager/game_manager":"game_manager","../manager/language_manager":"language_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/food_match_ui_view":"food_match_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./food_choose_ui":"food_choose_ui","./pop_text_ui":"pop_text_ui","./talk_ui":"talk_ui"}],friend_choose_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"ef31f0yj9ROe7uWGG5o/BMh","friend_choose_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.btnMain=null,this.btnMain=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnArray=null,this.labLanList=[],this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeSubMenu=cc.find("content/nodeSubMenu",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.btnMain=null===(t=cc.find("content/nodeSubMenu/btnMain",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnMain=null===(n=cc.find("content/nodeSubMenu/btnMain",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnHome=null===(i=cc.find("content/nodeSubMenu/btnHome",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnHome=null===(a=cc.find("content/nodeSubMenu/btnHome",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnMain=null===(o=cc.find("content/nodeSubMenu/btnMain",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnArray=null===(r=cc.find("content/btnArray",e))||void 0===r?void 0:r.getComponent(cc.Button),this.labLanList[0]=null===(l=cc.find("content/labLanList0",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[1]=null===(s=cc.find("content/labLanList1",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[2]=null===(c=cc.find("content/labLanList2",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[3]=null===(d=cc.find("content/labLanList3",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[4]=null===(u=cc.find("content/labLanList4",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[5]=null===(h=cc.find("content/labLanList5",e))||void 0===h?void 0:h.getComponent(cc.Label),this.svMain=null===(p=cc.find("content/svMain",e))||void 0===p?void 0:p.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.btnMain=null,this.btnMain=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnArray=null,this.labLanList=[],this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],friend_choose_ui:[function(e,t,n){"use strict";cc._RF.push(t,"44577byAV1OVbi2PAu78Kz+","friend_choose_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l=e("../item/item_choose_friend"),s=e("../manager/action_manager"),c=e("../manager/audio_manager"),d=e("../manager/dynamic_data_manager"),u=e("../manager/friend_manager"),h=e("../manager/json_manager"),p=e("../manager/language_manager"),f=e("../manager/pool_manager"),m=e("../manager/resources_manager"),g=e("../ui_view/panel/friend_choose_ui_view"),_=e("../utils/enum"),v=cc._decorator,y=v.ccclass;v.property,function(e){e[e.none=0]="none",e[e.salary=1]="salary",e[e.quality=2]="quality"}(r||(r={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t._orderType=r.none,t.friendType=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u641c\u5bfb","\u4f10\u6728","\u91c7\u77ff","\u9493\u9c7c","\u670b\u53cb\u9009\u62e9"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.btnArray.node.on("click",this.onSwitchOrderType,this),this._view.nodeSubMenu.children.forEach(function(t,n){t.on("click",function(){c.default.instance.playAudio("switch"),e.onChooseType(n)},e)})},t.prototype.showUI=function(){s.default.instance.popOut(this._view.content,this._view.nodeMask),this.refreshList()},t.prototype.onChooseType=function(e){this.friendType=e,this.refreshList()},t.prototype.refreshList=function(){var e=this;this._view.btnArray.node.getChildByName("label").getComponent(cc.Label).string=p.default.GetText(["\u6392\u5e8f","\u65e5\u85aa\u2191","\u597d\u611f\u2191"][this._orderType]);var t=u.FriendMgr.instance.getUnWorkList();switch(f.default.instance.removeObjByContainer(this._view.nodeContainer),0!=this.friendType&&(t=t.filter(function(t){return h.default.instance.getDataByName("char")[t].findType==e.friendType})),this._orderType){case r.quality:t.sort(function(e,t){var n=d.default.instance.allFriendData.friendMap[e];return d.default.instance.allFriendData.friendMap[t].love-n.love});break;case r.salary:t.sort(function(e,t){var n=u.FriendMgr.instance.getDailySalary(e);return u.FriendMgr.instance.getDailySalary(t)-n})}for(var n=0;n<t.length;n++)f.default.instance.createObjectByName("itemChooseFriend",this._view.nodeContainer).getComponent(l.default).init(t[n]);this._view.nodeSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(_.ResType.main,n==e.friendType?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")})},t.prototype.hideUI=function(){c.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onSwitchOrderType=function(){c.default.instance.playAudio("switch"),this._orderType+=1,this._orderType>2&&(this._orderType=0),this.refreshList()},t.instance=null,n=o([y],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../item/item_choose_friend":"item_choose_friend","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../ui_view/panel/friend_choose_ui_view":"friend_choose_ui_view","../utils/enum":"enum"}],friend_data:[function(e,t,n){"use strict";cc._RF.push(t,"82420A+CDNPgpodjvjyFVMX","friend_data"),Object.defineProperty(n,"__esModule",{value:!0}),n.FriendOPType=void 0,function(e){e[e.battle=1]="battle",e[e.find=2]="find",e[e.work=3]="work",e[e.relax=4]="relax"}(n.FriendOPType||(n.FriendOPType={})),cc._RF.pop()},{}],friend_detail_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"178e1lyxt9NtrxqnbCbWcCI","friend_detail_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeLoveContainer=null,this.nodeTalk=null,this.nodeDetail=null,this.btnGift=null,this.btnHelp=null,this.btnDismiss=null,this.labTalk=null,this.labDec=null,this.labLanList=[],this.labSkillName=null,this.labSkillDec=null,this.sprSkillQua=null,this.sprSkill=null,this.sprMain=null,this.sprAvatar=null,this.rtName=null,this.svLabel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeLoveContainer=cc.find("content/nodeLoveContainer",e),this.nodeTalk=cc.find("content/nodeTalk",e),this.nodeDetail=cc.find("content/nodeDetail",e),this.btnGift=null===(t=cc.find("content/btnGift",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnHelp=null===(n=cc.find("content/btnHelp",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnDismiss=null===(i=cc.find("content/btnDismiss",e))||void 0===i?void 0:i.getComponent(cc.Button),this.labTalk=null===(a=cc.find("content/nodeTalk/labTalk",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labDec=null===(o=cc.find("content/svLabel/view/content/labDec",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labLanList[0]=null===(r=cc.find("content/btnDismiss/labLanList0",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labSkillName=null===(l=cc.find("content/labSkillName",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labSkillDec=null===(s=cc.find("content/labSkillDec",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[1]=null===(c=cc.find("content/labLanList1",e))||void 0===c?void 0:c.getComponent(cc.Label),this.sprSkillQua=null===(d=cc.find("content/sprSkillQua",e))||void 0===d?void 0:d.getComponent(cc.Sprite),this.sprSkill=null===(u=cc.find("content/sprSkill",e))||void 0===u?void 0:u.getComponent(cc.Sprite),this.sprMain=null===(h=cc.find("content/sprMain",e))||void 0===h?void 0:h.getComponent(cc.Sprite),this.sprAvatar=null===(p=cc.find("content/sprAvatar",e))||void 0===p?void 0:p.getComponent(cc.Sprite),this.rtName=null===(f=cc.find("content/rtName",e))||void 0===f?void 0:f.getComponent(cc.RichText),this.svLabel=null===(m=cc.find("content/svLabel",e))||void 0===m?void 0:m.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeLoveContainer=null,this.nodeTalk=null,this.nodeDetail=null,this.btnGift=null,this.btnHelp=null,this.btnDismiss=null,this.labTalk=null,this.labDec=null,this.labLanList=[],this.labSkillName=null,this.labSkillDec=null,this.sprSkillQua=null,this.sprSkill=null,this.sprMain=null,this.sprAvatar=null,this.rtName=null,this.svLabel=null},e}();n.default=i,cc._RF.pop()},{}],friend_detail_ui:[function(e,t,n){"use strict";cc._RF.push(t,"8e3davMthdOJ6VXX5vlhq45","friend_detail_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/effect_manager"),d=e("../manager/friend_manager"),u=e("../manager/json_manager"),h=e("../manager/language_manager"),p=e("../manager/record_manager"),f=e("../manager/resources_manager"),m=e("../manager/ui_manager"),g=e("../ui_view/panel/friend_detail_ui_view"),_=e("../utils/config"),v=e("../utils/enum"),y=e("../utils/game_config"),b=e("../utils/utils"),w=e("./help_ui"),C=e("./item_choose_ui"),S=cc._decorator,L=S.ccclass,A=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t.id=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u89e3\u96c7","\u89d2\u8272\u8be6\u60c5"];e.forEach(function(e,n){e.string=h.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this),this._view.btnDismiss.node.on("click",this.onDismiss,this),this._view.btnGift.node.on("click",this.onClickGift,this),this._view.btnHelp.node.on("click",this.onClickHelp,this)},t.prototype.showUI=function(e){p.default.instance.onOpenPage(v.PageType.friendDetail),this.id=e,r.default.instance.popOut(this._view.content,this._view.nodeMask),this.refreshDetail();var t=s.default.instance.allFriendData.friendMap[e],n=u.default.instance.getDataByName("char")[this.id];this._view.sprMain.spriteFrame=f.default.instance.getSprite(v.ResType.main,"char-char_"+this.id),this._view.sprSkill.node.getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(v.ResType.main,"skill-skill_"+n.skill),this._view.rtName.string="lv"+t.lv+" <color="+y.GameConfig.QualityColor[t.quality]+"/>["+h.default.GetText("FriendlyStr"+t.quality)+"]</color>"+h.default.GetText("char_name_"+this.id),this._view.labDec.string=h.default.GetText("char_dec_"+this.id),this._view.nodeTalk.active=!1},t.prototype.refreshDetail=function(){var e=this,t=s.default.instance.allFriendData.friendMap[this.id],n=u.default.instance.getDataByName("char")[this.id];this._view.sprAvatar.spriteFrame=f.default.instance.getSprite(v.ResType.main,"avatar-avatar_"+this.id),this._view.sprSkillQua.node.getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(v.ResType.main,"ui-q ("+t.quality+")"),this._view.labSkillName.string=h.default.GetText("skill_name_"+n.skill),this._view.labSkillDec.string=d.FriendMgr.instance.getFriendSkillDec(this.id),this._view.nodeDetail.children.forEach(function(i,a){var o=i.getChildByName("label").getComponent(cc.Label),r=i.getChildByName("icon").getComponent(cc.Sprite);switch(a){case 0:o.string=h.default.GetText("\u653b\u51fb")+"\uff1a"+d.FriendMgr.instance.getFriendAttr(e.id,1);break;case 1:o.string=h.default.GetText("\u9632\u5fa1")+"\uff1a"+d.FriendMgr.instance.getFriendAttr(e.id,2);break;case 2:o.string=h.default.GetText("\u56de\u590d")+"\uff1a"+d.FriendMgr.instance.getFriendAttr(e.id,3);break;case 3:o.string=h.default.GetText("\u64c5\u957f")+"\uff1a"+h.default.GetText("FindTypeStr"+n.findType),r.spriteFrame=f.default.instance.getSprite(v.ResType.main,y.GameConfig.FindTypeIcon[n.findType]);break;case 4:o.string=h.default.GetText("\u5f53\u6708\u5de5\u8d44")+"\uff1a"+s.default.instance.allFriendData.friendMap[e.id].salary;break;case 5:o.string=h.default.GetText("\u4f53\u529b")+"\uff1a"+t.health.toFixed(0)+"("+h.default.GetText("\u6700\u5927")+d.FriendMgr.instance.getFriendAttr(e.id,4)+")"}});var i=5+(2==s.default.instance.shopData.homeLv?5:0);this._view.btnGift.node.active=t.giftNum<i,this.refreshTalk()},t.prototype.refreshTalk=function(){var e=this;this._view.nodeLoveContainer.children.forEach(function(t,n){var i="ui-gui-Gui_0";n>=s.default.instance.allFriendData.friendMap[e.id].quality&&(i="ui-gui-Gui_2"),t.getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(v.ResType.main,i)})},t.prototype.hideUI=function(){l.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onDismiss=function(){l.default.instance.playAudio("click"),this.hideUI(),d.FriendMgr.instance.removeFriendToWorkArr(this.id)},t.prototype.onClickHire=function(){},t.prototype.onClickGift=function(){var e=this;l.default.instance.playAudio("click_2"),m.default.instance.openUI(C.default,{name:_.Config.uiName.itemChooseUI,param:[[[2,v.Itemtype.flower],[2,v.Itemtype.food],[2,v.Itemtype.weapon]],function(t){t&&(c.default.instance.createPartical("love",b.Utils.getNodeUsePos(e._view.btnGift.node)),d.FriendMgr.instance.onSendGift(e.id,t),e.showUI(e.id))}]},300)},t.prototype.thankGift=function(e){u.default.instance.getDataByName("item")[e]},t.prototype.onClickHelp=function(){m.default.instance.openUI(w.default,{name:_.Config.uiName.helpUI,param:[6]},301)},t.instance=null,n=o([L],t)}(cc.Component));n.default=A,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/friend_detail_ui_view":"friend_detail_ui_view","../utils/config":"config","../utils/enum":"enum","../utils/game_config":"game_config","../utils/utils":"utils","./help_ui":"help_ui","./item_choose_ui":"item_choose_ui"}],friend_manager:[function(e,t,n){"use strict";cc._RF.push(t,"5c4a792latBFb6WAOocRfSO","friend_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.FriendMgr=void 0;var i=e("../interface/friend_data"),a=e("../interface/item_amount"),o=e("../ui/friend_detail_ui"),r=e("../ui/friend_ui"),l=e("../ui/menu_ui"),s=e("../utils/emmiter"),c=e("../utils/enum"),d=e("../utils/game_config"),u=e("../utils/message"),h=e("../utils/utils"),p=e("./dynamic_data_manager"),f=e("./game_manager"),m=e("./json_manager"),g=e("./language_manager"),_=e("./plan_manager"),v=e("./ui_manager"),y=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(e){void 0===e&&(e=0),p.default.instance.allFriendData={battleArr:[],workArr:[],friendMax:e,area:1,friendMap:{}};for(var t=0;t<d.GameConfig.OriginCharList.length;t++){var n=d.GameConfig.OriginCharList[t];this.addFriend(n,1)}},e.prototype.onUpdate=function(e){for(var t=p.default.instance.allFriendData,n=0;n<t.workArr.length;n++){var a=t.workArr[n],o=t.friendMap[a],l=f.default.instance.getPrecentValueByStr("relaxSpd")+Math.pow(this.getFriendAttr(a,3),.85)/100;if(o.relax)o.health+=e*this.getFriendAttr(a,4)/60*l,o.health>=this.getFriendAttr(a,4)&&(o.relax=!1,o.op==i.FriendOPType.battle&&this.onBattleArrChange());else switch(o.op){case i.FriendOPType.battle:t.battleArr.includes(a)&&(o.health-=e/3);break;case i.FriendOPType.find:var s=m.default.instance.getDataByName("char")[o.id];o.findPro+=e*f.default.instance.getPrecentValueByStr("find"+s.findType+"Spd"),o.findPro>=40&&(o.findPro-=40,this.onFindDone(a)),o.health-=e;break;case i.FriendOPType.work:o.health<this.getFriendAttr(a,4)&&(o.health+=e*this.getFriendAttr(a,4)/120*l)}if(o.health<=0&&(p.default.instance.allFriendData.friendMap[a].relax=!0,p.default.instance.allFriendData.friendMap[a].op==i.FriendOPType.battle)){var c=t.battleArr.indexOf(a);t.battleArr.splice(c,1),this.onBattleArrChange()}}r.default.instance.refreshList()},e.prototype.isHaveFriend=function(e){return!!p.default.instance.allFriendData.friendMap[e]},e.prototype.addFriendToWorkArr=function(e){this.isHaveFriend(e)&&(p.default.instance.money<=0&&this.getDailySalary(e)>0?v.default.instance.LoadTipsByStr(g.default.GetText("\u62db\u52df\u91d1\u94b1\u4e0d\u8db3")):(p.default.instance.allFriendData.workArr.length<p.default.instance.allFriendData.friendMax&&p.default.instance.allFriendData.workArr.push(e),this.changeOpType(e,i.FriendOPType.relax),r.default.instance.refreshBattleChars(),r.default.instance.refreshList()))},e.prototype.removeFriendToWorkArr=function(e){var t=this,n=p.default.instance.allFriendData.workArr.indexOf(e);if(-1!=n){var i=p.default.instance.allFriendData.battleArr.indexOf(e);-1!=i&&(p.default.instance.allFriendData.battleArr.splice(i,1),setTimeout(function(){t.onBattleArrChange()})),p.default.instance.allFriendData.workArr.splice(n,1),r.default.instance.refreshList()}else cc.log(p.default.instance.allFriendData)},e.prototype.changeOpType=function(e,t){var n=p.default.instance.allFriendData,a=p.default.instance.allFriendData.friendMap[e],o=a.op;if(t==i.FriendOPType.relax){if(a.relax=!0,o==i.FriendOPType.battle){var l=n.battleArr.indexOf(e);n.battleArr.splice(l,1),this.onBattleArrChange()}}else a.relax&&(a.relax=!1),p.default.instance.allFriendData.friendMap[e].op=t,t==i.FriendOPType.battle?this.onBattleArrChange():o==i.FriendOPType.battle&&(l=n.battleArr.indexOf(e),n.battleArr.splice(l,1),this.onBattleArrChange());r.default.instance.refreshList()},e.prototype.onDeath=function(e){var t=p.default.instance.allFriendData;t.friendMap[e].health-=10,p.default.instance.allFriendData.friendMap[e].health<=0&&(t.friendMap[e].relax=!0);var n=t.battleArr.indexOf(e);t.battleArr.splice(n,1),this.onBattleArrChange(),r.default.instance.refreshList()},e.prototype.onBattleArrChange=function(){var e=0,t=p.default.instance.allFriendData;t.battleArr.length<=2&&(t.workArr.forEach(function(n){var a=t.friendMap[n];a.op!=i.FriendOPType.battle||t.battleArr.includes(n)||a.relax||(e=n)}),0!=e&&t.battleArr.push(e)),r.default.instance.refreshBattleChars()},e.prototype.onDayBy=function(){var e=f.default.instance.checkHaveSkill(29);for(var t in p.default.instance.allFriendData.friendMap)p.default.instance.allFriendData.workArr.includes(+t)&&(p.default.instance.allFriendData.friendMap[t].salary+=this.getDailySalary(+t),e&&(p.default.instance.allFriendData.friendMap[t].exp++,this.checkLevelup(+t)))},e.prototype.getDailySalary=function(e){var t=p.default.instance.allFriendData.friendMap[e];if(138==m.default.instance.getDataByName("char")[e].skill)return 0;var n=p.default.instance.allFriendData.area,i=(3+Math.pow(t.lv,.5+.1*t.quality))*f.default.instance.getPrecentValueByStr("salaryPrecent")*n;return Math.ceil(i)},e.prototype.onMonthBy=function(){var e=this,t=p.default.instance.allFriendData,n=0;for(var i in t.friendMap)n+=t.friendMap[i].salary,t.friendMap[i].salary=0,t.friendMap[i].giftNum=0;p.default.instance.recordData.historyRecord.friendSalary.push(n),p.default.instance.money-=n,p.default.instance.money<=0&&(t.workArr.forEach(function(t){1!==t&&e.removeFriendToWorkArr(t)}),s.Emitter.fire(u.MessageType.addDairy,c.DairyRtType.noMoneyForFriend))},e.prototype.getMonthSalary=function(e){return 30*this.getDailySalary(e)},e.prototype.getUnWorkList=function(){var e=[];for(var t in p.default.instance.allFriendData.friendMap)p.default.instance.allFriendData.friendMap[t]&&p.default.instance.allFriendData.friendMap[t].quality>0&&!p.default.instance.allFriendData.workArr.includes(+t)&&e.push(+t);return e},e.prototype.onMonsterDie=function(e){var t=m.default.instance.getDataByName("char")[e],n=Math.sqrt(p.default.instance.allFriendData.area)*f.default.instance.getPrecentValueByStr("pointReward"),i=[{type:a.RewardType.point,num:n}],o=!!f.default.instance.getLuck();f.default.instance.checkHaveSkill(142)&&i.push({type:a.RewardType.money,num:3*n});var l=(t.dropChance||0)*f.default.instance.getPrecentValueByStr("dropChanceAdd");if(17==p.default.instance.recordData.guide&&t.animal){for(var d=!1,g=0;g<p.default.instance.itemDepot.length;g++){var v=p.default.instance.itemDepot[g].id;v>1500&&v<1550&&(d=!0)}d||(l*=20)}var y=null;for(h.Utils.luckChance(l)&&(y={type:a.RewardType.item,id:t.drop,num:1,quality:e>100?1:p.default.instance.getRandomQuality(f.default.instance.getLuck(),o)}),y&&h.Utils.luckChance(f.default.instance.getValueByStr("dropQuaChance"))&&e>100&&y.quality<5&&y.quality++,y&&i.push(y),i.forEach(function(e){p.default.instance.onReward(e)}),g=0;g<p.default.instance.allFriendData.battleArr.length;g++){var b=p.default.instance.allFriendData.battleArr[g],w=Math.sqrt(p.default.instance.allFriendData.area)*f.default.instance.getPrecentValueByStr("expRate");p.default.instance.allFriendData.friendMap[b].exp+=w,this.checkLevelup(+b)}var C=p.default.instance.allFriendData.area*f.default.instance.getPrecentValueByStr("exploreSpd"),S=_.PlanMgr.instance.getMaxMap();p.default.instance.planData.explore+=C,S<_.PlanMgr.instance.getMaxMap()&&s.Emitter.fire(u.MessageType.addDairy,c.DairyRtType.newMap),s.Emitter.fire(u.MessageType.onKillMonster,e,n),r.default.instance.onMonsterDie(i)},e.prototype.getAreaRandomMonsterId=function(){return m.default.instance.getDataByName("map")[p.default.instance.allFriendData.area].monster[h.Utils.getArrRandomIndex([15,10,40,35])]},e.prototype.onChooseArea=function(e){p.default.instance.allFriendData.area!=e&&(p.default.instance.allFriendData.area=e,r.default.instance.initBattle())},e.prototype.onFindDone=function(e){var t=p.default.instance.allFriendData.workArr.indexOf(e),n=m.default.instance.getDataByName("char")[e],i=p.default.instance.allFriendData.friendMap[e],o=[],d=1;switch(f.default.instance.getValueByStr("find"+n.findType+"Double")&&d++,n.findType){case c.FindType.wood:o=_.PlanMgr.instance.onLoggingDone(d,i.quality);break;case c.FindType.food:o=_.PlanMgr.instance.onFindDone(d,i.quality);break;case c.FindType.mine:o=_.PlanMgr.instance.onMineDone(d,i.quality);break;case c.FindType.fishing:o=_.PlanMgr.instance.onfishingDone(d,i.quality)}for(var g=h.Utils.amountMerge(o),v=0;v<g.length;v++)p.default.instance.onReward(g[v]);l.default.instance.showReward(c.PageType.friend,g.map(function(e){return{type:a.RewardType.item,id:e.id}}),r.default.instance.view.nodeContainer.children[t]);var y=g.map(function(e){return{id:e.id,type:a.RewardType.item,num:e.num,quality:e.quality||1}});s.Emitter.fire(u.MessageType.addDairy,c.DairyRtType.friendPlanResult,{id:e,rewardList:y,planType:n.findType})},e.prototype.onSendGift=function(e,t){var n=m.default.instance.getDataByName("item")[t.id];if(n.type.includes(c.Itemtype.flower)){var i=Math.pow(n.price/3,.7)*t.quality*(1+f.default.instance.getValueByStr("friendFlower"))/3.5;this.onAddFriendLove(e,i),v.default.instance.LoadTipsByStr(g.default.GetText("\u670b\u53cb\u9001\u82b1",g.default.GetText("char_name_"+e))+i.toFixed(0))}else if(n.type.includes(c.Itemtype.weapon)){var a=f.default.instance.getValueByStr("friendWeapon");for(var l in n.param)p.default.instance.allFriendData.friendMap[e].addPower[+l-1]+=(n.param[l]+a)*(90+10*t.quality)/100;v.default.instance.LoadTipsByStr(g.default.GetText("char_name_"+e)+g.default.GetText("\u670b\u53cb\u9001\u6b66\u5668"))}else if(n.type.includes(c.Itemtype.food)){var s=f.default.instance.getFoodHealth(t);p.default.instance.allFriendData.friendMap[e].health+=s,v.default.instance.LoadTipsByStr(g.default.GetText("char_name_"+e)+g.default.GetText("\u670b\u53cb\u9001\u5403\u7684")+s.toFixed(0))}p.default.instance.onCost({id:t.id,num:1,quality:t.quality}),p.default.instance.allFriendData.friendMap[e].giftNum++,o.default.instance.refreshDetail(),o.default.instance.thankGift(t.id),r.default.instance.refreshList()},e.prototype.getItemdec=function(e,t){t||(t={id:e,quality:1,num:1});var n=m.default.instance.getDataByName("item")[t.id];if(n.type.includes(c.Itemtype.weapon)){var i=f.default.instance.getValueByStr("friendWeapon"),a={1:0,2:0,3:0,4:0};for(var o in n.param)a[o]=(n.param[o]+i)*(90+10*t.quality)/100;var r=g.default.GetText("item_dec_"+t.id);return(r=(r=(r=r.replace("{0}",Math.abs(a[1]).toFixed(0))).replace("{1}",Math.abs(a[2]).toFixed(0))).replace("{2}",Math.abs(a[3]).toFixed(0))).replace("{3}",Math.abs(a[4]).toFixed(0))}return g.default.GetText("item_dec_"+t.id)},e.prototype.getFriendAttr=function(e,t,n){void 0===n&&(n=!0);var i=m.default.instance.getDataByName("char")[e],a=p.default.instance.allFriendData.friendMap[e],o=a.addPower[t-1]+i.power[t-1];return a.quality>=1&&t<4?o+=(Math.sqrt(a.lv)/2+(a.quality-1))*i.power[t-1]:4==t&&(o+=a.lv/3),(o+=f.default.instance.getValueByStr("point"+t+"Add"))<0&&t<4&&(o=0),o<10&&4==t&&(o=10),n?Math.floor(o):o},e.prototype.getNextLevelExp=function(e){return 3*Math.pow(p.default.instance.allFriendData.friendMap[e].lv,1.765)},e.prototype.getFriendSkillsList=function(){for(var e=p.default.instance.allFriendData,t=[],n=0;n<e.workArr.length;n++){var i=e.workArr[n],a=m.default.instance.getDataByName("char")[i];t.push([a.skill,e.friendMap[i].quality])}return t},e.prototype.getFriendSkillDec=function(e){var t=m.default.instance.getDataByName("char")[e],n=m.default.instance.getDataByName("skill")[t.skill],i=0;for(var a in n.param)i=n.param[a];return i+=n.num*(p.default.instance.allFriendData.friendMap[e].quality||1),h.Utils.getText(g.default.GetText("skill_dec_"+e),i)},e.prototype.getAllFriendList=function(){var e=[],t=p.default.instance.allFriendData;for(var n in t.friendMap)t.friendMap[n].quality>=1&&e.push(+n);return e},e.prototype.checkLevelup=function(e){var t=this.getNextLevelExp(e);p.default.instance.allFriendData.friendMap[e].exp>=t&&(p.default.instance.allFriendData.friendMap[e].exp-=t,p.default.instance.allFriendData.friendMap[e].lv++,r.default.instance.refreshList(),s.Emitter.fire(u.MessageType.friendLevelup,e))},e.prototype.addFriend=function(e,t){void 0===t&&(t=1),p.default.instance.allFriendData.friendMap[e]={id:e,lv:1,exp:0,quality:0,health:30,relax:!1,op:1,love:0,findPro:0,salary:0,addPower:[0,0,0,0],giftNum:0},this.onAddFriendLove(e,t)},e.prototype.onAddFriendLove=function(e,t){var n=p.default.instance.allFriendData.friendMap[e];n.love+=t;var i=Math.floor(Math.sqrt(n.love/100));if(i>5&&(i=5),i>n.quality){var a=null;3==i&&(a=h.Utils.luckChance(75)?{id:853,quality:p.default.instance.getRandomQuality(f.default.instance.getLuck()+5,!0),num:1}:{id:860,quality:p.default.instance.getRandomQuality(f.default.instance.getLuck()+5,!0),num:1},p.default.instance.onReward(a)),s.Emitter.fire(u.MessageType.addDairy,c.DairyRtType.friend,{id:e,quality:i,rewardList:[a]})}n.quality=i,s.Emitter.fire(u.MessageType.friendAlert)},e.prototype.getFirendByOpType=function(e){for(var t=[],n=p.default.instance.allFriendData,i=0;i<n.workArr.length;i++){var a=n.friendMap[n.workArr[i]];a.relax||a.op!=e||t.push(n.workArr[i])}return t},e.prototype.getAllHelpFriendHealth=function(){for(var e=0,t=p.default.instance.allFriendData,n=0;n<t.workArr.length;n++){var a=t.friendMap[t.workArr[n]];a.relax||a.op!=i.FriendOPType.work||(e+=a.health)}return e},e._instance=null,e}();n.FriendMgr=y,cc._RF.pop()},{"../interface/friend_data":"friend_data","../interface/item_amount":"item_amount","../ui/friend_detail_ui":"friend_detail_ui","../ui/friend_ui":"friend_ui","../ui/menu_ui":"menu_ui","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","../utils/utils":"utils","./dynamic_data_manager":"dynamic_data_manager","./game_manager":"game_manager","./json_manager":"json_manager","./language_manager":"language_manager","./plan_manager":"plan_manager","./ui_manager":"ui_manager"}],friend_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"cbcbfa0MHdD9bvtzAN8cBmt","friend_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeBattle=null,this.nodeCharList=[],this.nodeMonster=null,this.nodeLabelContainer=null,this.nodeEffectContainer=null,this.nodeContainer=null,this.nodeAnima=null,this.nodeAnima=null,this.nodeAnima=null,this.nodeAnima=null,this.btnMap=null,this.btnHelp=null,this.sprBattleBg=null,this.svMain=null,this.barHp=null,this.barAction=null,this.barHp=null,this.barAction=null,this.barHp=null,this.barAction=null,this.barHp=null,this.barAction=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h;this.content=cc.find("content",e),this.nodeBattle=cc.find("content/nodeBattle",e),this.nodeCharList[1]=cc.find("content/nodeBattle/nodeCharList1",e),this.nodeCharList[0]=cc.find("content/nodeBattle/nodeCharList0",e),this.nodeCharList[2]=cc.find("content/nodeBattle/nodeCharList2",e),this.nodeMonster=cc.find("content/nodeBattle/nodeMonster",e),this.nodeLabelContainer=cc.find("content/nodeBattle/nodeLabelContainer",e),this.nodeEffectContainer=cc.find("content/nodeBattle/nodeEffectContainer",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.nodeAnima=cc.find("content/nodeBattle/nodeCharList1/nodeAnima",e),this.nodeAnima=cc.find("content/nodeBattle/nodeCharList0/nodeAnima",e),this.nodeAnima=cc.find("content/nodeBattle/nodeCharList2/nodeAnima",e),this.nodeAnima=cc.find("content/nodeBattle/nodeMonster/nodeAnima",e),this.btnMap=null===(t=cc.find("content/btnMap",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnHelp=null===(n=cc.find("content/nodeBattle/btnHelp",e))||void 0===n?void 0:n.getComponent(cc.Button),this.sprBattleBg=null===(i=cc.find("content/sprBattleBg",e))||void 0===i?void 0:i.getComponent(cc.Sprite),this.svMain=null===(a=cc.find("content/svMain",e))||void 0===a?void 0:a.getComponent(cc.ScrollView),this.barHp=null===(o=cc.find("content/nodeBattle/nodeCharList1/barHp",e))||void 0===o?void 0:o.getComponent(cc.ProgressBar),this.barAction=null===(r=cc.find("content/nodeBattle/nodeCharList1/barHp/barAction",e))||void 0===r?void 0:r.getComponent(cc.ProgressBar),this.barHp=null===(l=cc.find("content/nodeBattle/nodeCharList0/barHp",e))||void 0===l?void 0:l.getComponent(cc.ProgressBar),this.barAction=null===(s=cc.find("content/nodeBattle/nodeCharList0/barHp/barAction",e))||void 0===s?void 0:s.getComponent(cc.ProgressBar),this.barHp=null===(c=cc.find("content/nodeBattle/nodeCharList2/barHp",e))||void 0===c?void 0:c.getComponent(cc.ProgressBar),this.barAction=null===(d=cc.find("content/nodeBattle/nodeCharList2/barHp/barAction",e))||void 0===d?void 0:d.getComponent(cc.ProgressBar),this.barHp=null===(u=cc.find("content/nodeBattle/nodeMonster/barHp",e))||void 0===u?void 0:u.getComponent(cc.ProgressBar),this.barAction=null===(h=cc.find("content/nodeBattle/nodeMonster/barHp/barAction",e))||void 0===h?void 0:h.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.content=null,this.nodeBattle=null,this.nodeCharList=[],this.nodeMonster=null,this.nodeLabelContainer=null,this.nodeEffectContainer=null,this.nodeContainer=null,this.nodeAnima=null,this.nodeAnima=null,this.nodeAnima=null,this.nodeAnima=null,this.btnMap=null,this.btnHelp=null,this.sprBattleBg=null,this.svMain=null,this.barHp=null,this.barAction=null,this.barHp=null,this.barAction=null,this.barHp=null,this.barAction=null,this.barHp=null,this.barAction=null},e}();n.default=i,cc._RF.pop()},{}],friend_ui:[function(e,t,n){"use strict";cc._RF.push(t,"bd103LZH3ZJhJaLoeQoMc1B","friend_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_char"),l=e("../item/item_drop"),s=e("../item/item_friend"),c=e("../item/item_monster"),d=e("../manager/action_manager"),u=e("../manager/audio_manager"),h=e("../manager/dynamic_data_manager"),p=e("../manager/effect_manager"),f=e("../manager/friend_manager"),m=e("../manager/json_manager"),g=e("../manager/language_manager"),_=e("../manager/pool_manager"),v=e("../manager/record_manager"),y=e("../manager/resources_manager"),b=e("../manager/ui_manager"),w=e("../ui_view/panel/friend_ui_view"),C=e("../utils/config"),S=e("../utils/emmiter"),L=e("../utils/enum"),A=e("../utils/message"),k=e("../utils/utils"),T=e("./choose_map_ui"),M=e("./help_ui"),R=e("./menu_ui"),P=e("./pop_text_ui"),D=cc._decorator,B=D.ccclass,F=D.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=new w.default,t.normalMate=null,t.greyMate=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this.view.initView(this.node),n.instance=this,this._bindEvent(),this.view.nodeMonster.getChildByName("nodeAnima").on("click",this.onClickMonster,this)},t.prototype._bindEvent=function(){S.Emitter.register(A.MessageType.dairyOpen,this.changeSvToShort,this),S.Emitter.register(A.MessageType.dairyClose,this.changeSvToLong,this),S.Emitter.register(A.MessageType.friendAlert,this.refreshList,this),this.view.btnMap.node.on("click",this.onClickMap,this),this.view.btnHelp.node.on("click",this.onClickHelp,this)},t.prototype.changeSvToShort=function(){this.view.svMain.node.height=145,this.view.svMain.node.getChildByName("view").height=145},t.prototype.changeSvToLong=function(){this.view.svMain.node.height=225,this.view.svMain.node.getChildByName("view").height=225},t.prototype.showUI=function(){d.default.instance.fadeShowDialog(this.view.content),v.default.instance.onOpenPage(L.PageType.friend),this.refreshList(),1==R.default.instance._view.nodeBG.active?this.changeSvToShort():this.changeSvToLong()},t.prototype.hideUI=function(){d.default.instance.fadeHideDialog(this.view.content)},t.prototype.refreshList=function(){if(this.view.content.active){_.default.instance.removeObjByContainer(this.view.nodeContainer);for(var e=0;e<h.default.instance.allFriendData.friendMax;e++)_.default.instance.createObjectByName("itemFriend",this.view.nodeContainer).getComponent(s.default).init(e)}},t.prototype.initBattle=function(){var e=this;this.view.nodeCharList.forEach(function(e,t){h.default.instance.allFriendData.battleArr[t]?(e.active=!0,e.getComponent(r.default).init(h.default.instance.allFriendData.battleArr[t]),e.x=-125):e.active=!1}),this.view.nodeMonster.getComponent(r.default).init(f.FriendMgr.instance.getAreaRandomMonsterId()),this.view.nodeMonster.x=125;var t=m.default.instance.getDataByName("map")[h.default.instance.allFriendData.area];y.default.instance.getBackGround("battle_"+t.sp).then(function(t){return e.view.sprBattleBg.spriteFrame=t})},t.prototype.onUpdate=function(e){this.view.nodeCharList.forEach(function(t){t.active&&t.getComponent(r.default).onUpdate(e)}),this.view.nodeMonster.getComponent(c.default).onUpdate(e)},t.prototype.getMonster=function(){var e=this.view.nodeMonster.getComponent(c.default);return e.canAtk()?e:null},t.prototype.getChar=function(){},t.prototype.onMonsterDie=function(e){if(this.view.content.active)for(var t=-6*(e.length-1),n=0;n<e.length;n++)_.default.instance.createObjectByName("itemDrop",this.view.nodeEffectContainer).getComponent(l.default).init(e[n],t+12*n);else R.default.instance.showMenuReward(L.PageType.friend,e)},t.prototype.refreshBattleChars=function(){var e=this,t=[-56,-24,7],n=h.default.instance.allFriendData.battleArr,i=[];this.view.nodeCharList.forEach(function(e,t){var a,o,l=e.getComponent(r.default);if(l.entity){var s=l.entity.id;-1!=n.findIndex(function(e){return s==e})&&n[t]||l.removeInstant()}i[t]=[(null===(a=l.entity)||void 0===a?void 0:a.id)||0,(null===(o=l.entity)||void 0===o?void 0:o.hp)||0]}),n.forEach(function(n,a){var o=i.findIndex(function(e){var t=e[0];return e[1],t==n}),l=e.view.nodeCharList[a].getComponent(r.default);l.node.active=!0,-1==o?(l.node.x=-125,l.init(n)):(l.node.x=t[a]-t[o],l.init(n,i[o][1]))})},t.prototype.onClickMap=function(){u.default.instance.playAudio("click"),b.default.instance.openUI(T.default,{name:C.Config.uiName.chooseMapUI})},t.prototype.onClickMonster=function(){var e=this.view.nodeMonster.getComponent(c.default).entity.id,t=m.default.instance.getDataByName("char")[e],n=m.default.instance.getDataByName("item")[t.drop];P.default.instance.showUI(cc.v2(54,115),{spr:k.Utils.getItemSpName(n.id),name:g.default.GetText("char_name_"+e),dec:g.default.GetText("char_dec_"+e)+" \u6218\u5229\u54c1\uff1a"+g.default.GetText("item_name_"+t.drop)+" "+t.dropChance+"%\u6389\u843d"})},t.prototype.getFirstFriend=function(){for(var e=n.instance.view.nodeCharList,t=0;t<3;t++)if(e[t].active){var i=e[t].getComponent(r.default);if(i.canAtk())return i}return null},t.prototype.getAllFriend=function(){for(var e=n.instance.view.nodeCharList,t=[],i=0;i<3;i++)if(e[i].active){var a=e[i].getComponent(r.default);a.canAtk()&&t.push(a)}return t},t.prototype.showNewEffect=function(){var e=this;setTimeout(function(){var t=e.view.nodeContainer.children[e.view.nodeContainer.children.length-1];p.default.instance.createPartical("build",k.Utils.getNodeUsePos(t),e.view.nodeEffectContainer)},200)},t.prototype.onClickHelp=function(){b.default.instance.openUI(M.default,{name:C.Config.uiName.helpUI,param:[5]},301)},t.instance=null,o([F(cc.Material)],t.prototype,"normalMate",void 0),o([F(cc.Material)],t.prototype,"greyMate",void 0),n=o([B],t)}(cc.Component);n.default=I,cc._RF.pop()},{"../item/item_char":"item_char","../item/item_drop":"item_drop","../item/item_friend":"item_friend","../item/item_monster":"item_monster","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/friend_ui_view":"friend_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./choose_map_ui":"choose_map_ui","./help_ui":"help_ui","./menu_ui":"menu_ui","./pop_text_ui":"pop_text_ui"}],game_animal_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"0bccbCOl6tDFIlv5+xTra9Y","game_animal_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.nodeFoodContainer=null,this.nodeTargetPos=null,this.nodeCharContainer=null,this.nodeChooseDiff=null,this.btnHelp=null,this.btnStart=null,this.btnRestart=null,this.btnLeave=null,this.btnLevel=null,this.labLanList=[],this.labTime=null,this.labScore=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeContainer=cc.find("content/nodeContainer",e),this.nodeFoodContainer=cc.find("content/nodeFoodContainer",e),this.nodeTargetPos=cc.find("content/nodeTargetPos",e),this.nodeCharContainer=cc.find("content/nodeCharContainer",e),this.nodeChooseDiff=cc.find("content/btnContainer/nodeChooseDiff",e),this.btnHelp=null===(t=cc.find("content/btnContainer/btnHelp",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnStart=null===(n=cc.find("content/btnContainer/btnStart",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnRestart=null===(i=cc.find("content/btnContainer/btnRestart",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnLeave=null===(a=cc.find("content/btnContainer/btnLeave",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnLevel=null===(o=cc.find("content/btnContainer/nodeChooseDiff/btnLevel",e))||void 0===o?void 0:o.getComponent(cc.Button),this.labLanList[2]=null===(r=cc.find("content/btnContainer/btnStart/labLanList2",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[0]=null===(l=cc.find("content/btnContainer/btnRestart/labLanList0",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[1]=null===(s=cc.find("content/btnContainer/btnLeave/labLanList1",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[2]=null===(c=cc.find("content/btnContainer/nodeChooseDiff/labLanList2",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labTime=null===(d=cc.find("content/labTime",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[4]=null===(u=cc.find("content/labLanList4",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[3]=null===(h=cc.find("content/labLanList3",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labScore=null===(p=cc.find("content/labScore",e))||void 0===p?void 0:p.getComponent(cc.Label)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.nodeFoodContainer=null,this.nodeTargetPos=null,this.nodeCharContainer=null,this.nodeChooseDiff=null,this.btnHelp=null,this.btnStart=null,this.btnRestart=null,this.btnLeave=null,this.btnLevel=null,this.labLanList=[],this.labTime=null,this.labScore=null},e}();n.default=i,cc._RF.pop()},{}],game_animal_ui:[function(e,t,n){"use strict";cc._RF.push(t,"3834dHvRfpBAJvvQDrzk1LL","game_animal_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l,s=e("../littleGame/item_animal_game"),c=e("../littleGame/item_food_animal"),d=e("../manager/audio_manager"),u=e("../manager/dynamic_data_manager"),h=e("../manager/language_manager"),p=e("../manager/pool_manager"),f=e("../manager/resources_manager"),m=e("../manager/ui_manager"),g=e("../ui_view/panel/game_animal_ui_view"),_=e("../utils/config"),v=e("../utils/emmiter"),y=e("../utils/enum"),b=e("../utils/message"),w=e("../utils/utils"),C=e("./reward_tip_ui"),S=cc._decorator,L=S.ccclass;S.property,function(e){e[e.unStart=0]="unStart",e[e.start=1]="start",e[e.end=2]="end"}(r||(r={})),function(e){e[e.wood=0]="wood",e[e.fruit=1]="fruit",e[e.food=2]="food",e[e.egg=3]="egg"}(l||(l={}));var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t.time=0,t._score=0,t.success=!1,t.coldSpd=1,t.throwTimer=0,t.status=r.unStart,t}var n;return a(t,e),n=t,Object.defineProperty(t.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e,this._view.labScore.string=h.default.GetText("\u5f97\u5206")+"\uff1a"+e.toFixed(0)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u7ee7\u7eed\u73a9","\u7ee7\u7eed","\u9ad8\u7ea7","\u52a8\u7269\u5c0f\u6e38\u620f","\u52a8\u7269\u6e38\u620f\u63d0\u793a","\u70b9\u51fb\u5f00\u59cb"];e.forEach(function(e,n){e.string=h.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),this._view.nodeMask.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch,this),this._view.nodeMask.on(cc.Node.EventType.TOUCH_CANCEL,this.onCancelTouch,this),this._view.nodeMask.on(cc.Node.EventType.TOUCH_END,this.onCancelTouch,this),this._view.btnStart.node.on("click",this.onClickStartGame,this),this._view.btnRestart.node.on("click",this.onRestart,this),this._view.btnLevel.node.on("click",this.onSwitchDiff,this),this._view.btnLeave.node.on("click",this.hideUI,this)},t.prototype.getScoreRate=function(){var e=[],t=0;return this._view.nodeContainer.children.forEach(function(n){var i=n.getComponent(s.default);e.includes(i.id)?t+=.3+.1*i.eatNum:e.push(i.id)}),e.length+t},t.prototype.showUI=function(){this.status=r.unStart,this.score=0,this._view.content.active=!0,this._view.btnStart.node.active=!0,this._view.nodeChooseDiff.active=!0,this._view.btnLeave.node.active=!1,this._view.btnRestart.node.active=!1,this.success=!1},t.prototype.hideUI=function(){d.default.instance.playAudio("paper1"),u.default.instance.festivalData.game.reward=!0,this._view.content.active=!1,v.Emitter.fire(b.MessageType.gameDone)},t.prototype.onTouch=function(e){var t=e.getLocation();this._view.nodeTargetPos.setPosition(this.node.convertToNodeSpaceAR(t))},t.prototype.onCancelTouch=function(){},t.prototype.update=function(e){this.status==r.start&&(this.time-=e,this.throwTimer-=e,this._view.labTime.string=h.default.GetText("\u65f6\u95f4")+"\uff1a"+Math.round(this.time),this.throwTimer<=0&&this.time>3&&(this.throwTimer=Math.sqrt(Math.floor(this.time/10)+1),this.onThrow()),this.time<=0&&(this.success=!0,this.onEndGame())),this._view.nodeFoodContainer.children.forEach(function(t){t.getComponent(c.default).onUpdate(e)});for(var t=this._view.nodeContainer.children,n=0;n<t.length;n++){var i=t[n];i.zIndex=.1*i.x-i.y,i.getComponent(s.default).onUpdate(e);for(var a=n+1;a<t.length;a++){var o=t[a],l=i.getPosition().sub(o.getPosition());l.mag()<8&&(l=l.normalize(),i.x+=l.x*e*40,i.y+=l.y*e*40,o.x-=l.x*e*40,o.y-=l.y*e*40)}}},t.prototype.onAddScore=function(e){var t=this.getScoreRate();this.score+=e*t},t.prototype.onClickStartGame=function(){d.default.instance.playAudio("click_2"),this.time=63,this._view.btnStart.node.active=!1,this._view.nodeChooseDiff.active=!1,this.status=r.start,p.default.instance.removeObjByContainer(this._view.nodeContainer),p.default.instance.removeObjByContainer(this._view.nodeFoodContainer);for(var e=!1,t=0;t<u.default.instance.meadowData.animalList.length;t++){var n,i=u.default.instance.meadowData.animalList[t].id;i&&(e=!0,(n=p.default.instance.createObjectByName("itemAnimalGame",this._view.nodeContainer)).getComponent(s.default).init(i-100),n.getPosition(this._view.nodeTargetPos.getPosition()))}e||((n=p.default.instance.createObjectByName("itemAnimalGame",this._view.nodeContainer)).getComponent(s.default).init(7),n.getPosition(this._view.nodeTargetPos.getPosition()))},t.prototype.onThrow=function(){d.default.instance.playAudio("sclick_1");for(var e=this._view.nodeCharContainer.children[w.Utils.getRandomNumber(2)],t=w.Utils.getRandomNumber(4)+1,n=0;n<t;n++){var i=p.default.instance.createObjectByName("itemFoodAnimal",this._view.nodeFoodContainer);i.setPosition(e.getPosition()),i.getComponent(c.default).init(n)}},t.prototype.checkEnd=function(){0==this._view.nodeContainer.children.length&&this.status==r.start&&(this.success=!1,m.default.instance.LoadTipsByStr(h.default.GetText("\u6311\u6218\u5931\u8d25")),this.onEndGame())},t.prototype.onEndGame=function(){var e=[],t="";if(u.default.instance.festivalData.game.hard){(a=Math.sqrt(this.score)/2)>20&&(a=20);for(var n=0;n<a;n++){var i=w.Utils.getArrRandomItem([502,502,502,504,504,504,505,505,506,506,507,508]);e.push({id:i,num:1,quality:1})}t=h.default.GetText("\u52a8\u7269\u6e38\u620f\u5927\u6210\u529f")}else{var a;for((a=Math.sqrt(this.score)/1.5)>15&&(a=15),n=0;n<a;n++)i=w.Utils.getArrRandomItem([501,501,501,502,503,503,503,504,505]),e.push({id:i,num:1,quality:1});t=h.default.GetText("\u52a8\u7269\u6e38\u620f\u6210\u529f")}(e=w.Utils.amountMerge(e)).length>0&&(m.default.instance.openUI(C.default,{name:_.Config.uiName.rewardTipUI,param:[e,t]},300),e.forEach(function(e){u.default.instance.onReward(e)})),this.status=r.end,this._view.btnLeave.node.active=!0},t.prototype.onRestart=function(){d.default.instance.playAudio("click_2"),this.score=0,this._view.btnLeave.node.active=!1,this._view.btnRestart.node.active=!1,this.onClickStartGame()},t.prototype.onSwitchDiff=function(){d.default.instance.playAudio("switch"),u.default.instance.festivalData.game.hard?u.default.instance.festivalData.game.hard=!1:u.default.instance.festivalData.game.hard=!0,this._view.btnLevel.node.getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(y.ResType.main,u.default.instance.festivalData.game.hard?"ui-new-switch_open":"ui-new-switch_close")},t.instance=null,n=o([L],t)}(cc.Component);n.default=A,cc._RF.pop()},{"../littleGame/item_animal_game":"item_animal_game","../littleGame/item_food_animal":"item_food_animal","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/game_animal_ui_view":"game_animal_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./reward_tip_ui":"reward_tip_ui"}],game_config:[function(e,t,n){"use strict";cc._RF.push(t,"42fe5XBcqZBuYcJnUowJROk","game_config"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameConfig=void 0,function(e){e.ColorDefault={"-1":"#cf573c",0:"#252525",1:"#a8ca58"},e.IconDefault={},e.QualityColor={0:"#828282",1:"#252525",2:"#a8ca58",3:"#73bed3",4:"#7a367b",5:"#cf573c"},e.SeasonSpr=[],e.FindTypeIcon={0:"items-Other_33",1:"Icons-Other_29",2:"Icons-003_SilverAxe",3:"Icons-032_SilverHammer",4:"Icons-016_SilverFishingRod"},e.CanUseTypeList=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,20,22,23,24],e.defaultParam={"\u6bcf\u65e5\u4f53\u529b\u6062\u590d\u6bd4\u4f8b":.15,"\u4f11\u606f\u6062\u590d\u4f53\u529b\u6bd4\u4f8b":.1},e.PlanReward={LoggingSeasonReward:[[24],[27],[25],[26]],MineReward:[505,506,507,508,509],MineChange:[35,15,7,3,1]},e.FriendAttrIcon={1:"Icons-free_icons1-3",2:"Icons-free_icons1-4",3:"Icons-free_icons1-0"},e.QualityDouble={sale:[.5,1,1.5,2,2.5,3],buy:[.5,1,2,3,4,5],effect:[.6,1,1.3,1.5,1.8,2.2]},e.QualityChance=[62,25,9,3,1],e.OrderStr={0:"\u6392\u5e8f",1:"\u4ef7\u683c\u2193",2:"\u6570\u91cf\u2193",3:"\u54c1\u8d28\u2193"},e.OriginCharList=[2,3,4,5,6,10,11,29,31,35,39,41,65,91,94],e.SeasonBugId=[[1,2,2,2,2,4,4,4,4,4,4,4],[1,3,3,5,5,5,5,5,5,5,5,5],[1,2,2,2,6,6,6,6,6,6,6,6],[3,3,3,3,7,7,7,7,7,7,7,7]],e.OnlyOneQuaIds=[501,502,503,504,505,506,507,508,509,851,852,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1515,1516,1517,1518,1519,1520,1521,1522,1523,1524,1525,1526,1527,1528,1529,1530,1531,1532,1533,1534,1535,1536,1537,1538,1539,1540]}(n.GameConfig||(n.GameConfig={})),cc._RF.pop()},{}],game_fish_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"d7bf7j41IJDW7C+/V4xI/L0","game_fish_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.nodePoleContainer=null,this.nodeHockContainer=null,this.nodeChooseDiff=null,this.btnHelp=null,this.btnStart=null,this.btnRestart=null,this.btnLeave=null,this.btnLevel=null,this.labLanList=[],this.labTime=null,this.labScore=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeContainer=cc.find("content/nodeContainer",e),this.nodePoleContainer=cc.find("content/nodePoleContainer",e),this.nodeHockContainer=cc.find("content/nodeHockContainer",e),this.nodeChooseDiff=cc.find("content/btnContainer/nodeChooseDiff",e),this.btnHelp=null===(t=cc.find("content/btnContainer/btnHelp",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnStart=null===(n=cc.find("content/btnContainer/btnStart",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnRestart=null===(i=cc.find("content/btnContainer/btnRestart",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnLeave=null===(a=cc.find("content/btnContainer/btnLeave",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnLevel=null===(o=cc.find("content/btnContainer/nodeChooseDiff/btnLevel",e))||void 0===o?void 0:o.getComponent(cc.Button),this.labLanList[5]=null===(r=cc.find("content/btnContainer/btnStart/labLanList5",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[0]=null===(l=cc.find("content/btnContainer/btnRestart/labLanList0",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[1]=null===(s=cc.find("content/btnContainer/btnLeave/labLanList1",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[2]=null===(c=cc.find("content/btnContainer/nodeChooseDiff/labLanList2",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labTime=null===(d=cc.find("content/labTime",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[3]=null===(u=cc.find("content/labLanList3",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[3]=null===(h=cc.find("content/labLanList3",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labScore=null===(p=cc.find("content/labScore",e))||void 0===p?void 0:p.getComponent(cc.Label)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.nodePoleContainer=null,this.nodeHockContainer=null,this.nodeChooseDiff=null,this.btnHelp=null,this.btnStart=null,this.btnRestart=null,this.btnLeave=null,this.btnLevel=null,this.labLanList=[],this.labTime=null,this.labScore=null},e}();n.default=i,cc._RF.pop()},{}],game_fish_ui:[function(e,t,n){"use strict";cc._RF.push(t,"f5adeJCU8NK7J+SzJqmkx2h","game_fish_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l=e("../littleGame/item_fish_pole"),s=e("../littleGame/item_game_fish"),c=e("../manager/audio_manager"),d=e("../manager/dynamic_data_manager"),u=e("../manager/language_manager"),h=e("../manager/pool_manager"),p=e("../manager/resources_manager"),f=e("../manager/ui_manager"),m=e("../ui_view/panel/game_fish_ui_view"),g=e("../utils/config"),_=e("../utils/emmiter"),v=e("../utils/enum"),y=e("../utils/message"),b=e("../utils/utils"),w=e("./reward_tip_ui"),C=cc._decorator,S=C.ccclass;C.property,function(e){e[e.unStart=0]="unStart",e[e.start=1]="start",e[e.end=2]="end"}(r||(r={}));var L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new m.default,t.time=0,t.score=0,t.scoreRate=1,t.coldSpd=1,t.status=r.unStart,t.nextTimer=1,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u7ee7\u7eed\u73a9","\u7ee7\u7eed","\u9ad8\u7ea7","\u9493\u9c7c\u6bd4\u8d5b","\u9493\u9c7c\u6bd4\u8d5b\u63d0\u793a","\u70b9\u51fb\u5f00\u59cb"];e.forEach(function(e,n){e.string=u.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.btnLeave.node.on("click",this.hideUI,this),this._view.btnLevel.node.on("click",this.onSwitchDiff,this),this._view.btnStart.node.on("click",this.onClickStartGame,this),this._view.btnRestart.node.on("click",this.onRestart,this),this._view.nodeHockContainer.children.forEach(function(t,n){t.on("click",function(){c.default.instance.playAudio("sclick_1"),e.addPole(n)},e)})},t.prototype.showUI=function(){this.status=r.unStart,this.score=0,this._view.content.active=!0,this._view.btnStart.node.active=!0,this._view.nodeChooseDiff.active=!0,this._view.btnLeave.node.active=!1,this._view.btnRestart.node.active=!1,this._view.nodeHockContainer.active=!1},t.prototype.hideUI=function(){c.default.instance.playAudio("paper1"),d.default.instance.festivalData.game.reward=!0,this._view.content.active=!1,_.Emitter.fire(y.MessageType.gameDone)},t.prototype.update=function(e){if(this.status==r.start){if(this.time-=e,this._view.labTime.string=u.default.GetText("\u65f6\u95f4")+"\uff1a"+Math.round(this.time),this.time<=0&&this.onEndGame(),this._view.nodePoleContainer.children.length>=2)for(var t=0;t<this._view.nodePoleContainer.children.length;t++){for(var n=this._view.nodePoleContainer.children[t],i=t+1;i<this._view.nodePoleContainer.children.length;i++){var a=this._view.nodePoleContainer.children[i];if(Math.abs(n.x-a.x)<30){var o=n.getPosition().sub(a.getPosition());n.getComponent(l.default).onMovePole(cc.v2(5*o.x*e,0)),a.getComponent(l.default).onMovePole(cc.v2(5*-o.x*e,0))}}n.x<-90&&(n.x+=15*e),n.x>90&&(n.x-=15*e)}this.nextTimer-=e,this.nextTimer<=0&&this.time>3&&(this.nextTimer=this.time/10+b.Utils.getRandomNumber(6)-3,this.nextTimer<0&&(this.nextTimer=1),this.createFish())}},t.prototype.onClickStartGame=function(){c.default.instance.playAudio("click_2"),this.score=0,this.addScore(0),this.time=128,this._view.btnStart.node.active=!1,this._view.nodeChooseDiff.active=!1,this._view.nodeHockContainer.active=!0,this.status=r.start,h.default.instance.removeObjByContainer(this._view.nodeContainer),h.default.instance.removeObjByContainer(this._view.nodePoleContainer),this.nextTimer=1},t.prototype.onEndGame=function(){var e=[];if(d.default.instance.festivalData.game.hard){(i=Math.sqrt(this.score)/4)>10&&(i=10);for(var t=0;t<i;t++){var n=d.default.instance.getRandomQuality();e.push({id:857,num:1,quality:n}),e.push({id:858,num:1,quality:n})}f.default.instance.LoadTipsByStr(u.default.GetText("\u9493\u9c7c\u6e38\u620f\u6210\u529f"))}else{var i;for((i=Math.sqrt(this.score)/4)>10&&(i=10),t=0;t<i;t++)e.push({id:856,num:1,quality:d.default.instance.getRandomQuality()});f.default.instance.LoadTipsByStr(u.default.GetText("\u9493\u9c7c\u6e38\u620f\u6210\u529f"))}e=b.Utils.amountMerge(e),f.default.instance.openUI(w.default,{name:g.Config.uiName.rewardTipUI,param:[e,""]},300),e.forEach(function(e){d.default.instance.onReward(e)}),this.status=r.end,this._view.btnLeave.node.active=!0,this._view.nodeHockContainer.active=!1},t.prototype.onRestart=function(){c.default.instance.playAudio("click_2"),this.score=0,this._view.btnLeave.node.active=!1,this._view.btnRestart.node.active=!1,this.onClickStartGame()},t.prototype.addPole=function(e){var t=[0,10,25,50];if(this.score<t[e])f.default.instance.LoadTipsByStr(u.default.GetText("\u5206\u6570\u4e0d\u8db3"));else if(this.score-=t[e],this._view.nodePoleContainer.children.length<5){var n=h.default.instance.createObjectByName("itemPole",this._view.nodePoleContainer);n.getComponent(l.default).init(e+1),n.x=b.Utils.getRandomNumber(10)-5}else f.default.instance.LoadTipsByStr(u.default.GetText("\u9493\u9c7c\u63d0\u793a"))},t.prototype.createFish=function(){h.default.instance.createObjectByName("itemGameFish",this._view.nodeContainer).getComponent(s.default).init()},t.prototype.onSwitchDiff=function(){c.default.instance.playAudio("switch"),d.default.instance.festivalData.game.hard?d.default.instance.festivalData.game.hard=!1:d.default.instance.festivalData.game.hard=!0,this._view.btnLevel.node.getComponent(cc.Sprite).spriteFrame=p.default.instance.getSprite(v.ResType.main,d.default.instance.festivalData.game.hard?"ui-new-switch_open":"ui-new-switch_close")},t.prototype.getFishId=function(){return d.default.instance.festivalData.game.hard?this.time>100?b.Utils.getRandomNumber(3)+1:this.time>40?b.Utils.getRandomNumber(5)+2:b.Utils.getRandomNumber(6)+4:this.time>100?b.Utils.getRandomNumber(2)+1:this.time>50?b.Utils.getRandomNumber(4)+3:b.Utils.getRandomNumber(4)+6},t.prototype.addScore=function(e){this.score+=e,this._view.labScore.string=u.default.GetText("\u5206\u6570")+":"+this.score.toFixed(0)},t.prototype.getAroundFish=function(e){var t=[];return this._view.nodeContainer.children.forEach(function(n){n.getPosition().sub(e).mag()<30&&t.push(n)}),t},t.instance=null,n=o([S],t)}(cc.Component);n.default=L,cc._RF.pop()},{"../littleGame/item_fish_pole":"item_fish_pole","../littleGame/item_game_fish":"item_game_fish","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/game_fish_ui_view":"game_fish_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./reward_tip_ui":"reward_tip_ui"}],game_flower_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"62706/Rr1lL9ofytPUSojoj","game_flower_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.nodeChooseDiff=null,this.btnHelp=null,this.btnStart=null,this.btnRestart=null,this.btnLeave=null,this.btnLevel=null,this.labLanList=[]}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeContainer=cc.find("content/nodeContainer",e),this.nodeChooseDiff=cc.find("content/btnContainer/nodeChooseDiff",e),this.btnHelp=null===(t=cc.find("content/btnContainer/btnHelp",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnStart=null===(n=cc.find("content/btnContainer/btnStart",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnRestart=null===(i=cc.find("content/btnContainer/btnRestart",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnLeave=null===(a=cc.find("content/btnContainer/btnLeave",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnLevel=null===(o=cc.find("content/btnContainer/nodeChooseDiff/btnLevel",e))||void 0===o?void 0:o.getComponent(cc.Button),this.labLanList[5]=null===(r=cc.find("content/btnContainer/btnStart/labLanList5",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[0]=null===(l=cc.find("content/btnContainer/btnRestart/labLanList0",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[1]=null===(s=cc.find("content/btnContainer/btnLeave/labLanList1",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[2]=null===(c=cc.find("content/btnContainer/nodeChooseDiff/labLanList2",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[4]=null===(d=cc.find("content/labLanList4",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[3]=null===(u=cc.find("content/labLanList3",e))||void 0===u?void 0:u.getComponent(cc.Label)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.nodeChooseDiff=null,this.btnHelp=null,this.btnStart=null,this.btnRestart=null,this.btnLeave=null,this.btnLevel=null,this.labLanList=[]},e}();n.default=i,cc._RF.pop()},{}],game_flower_ui:[function(e,t,n){"use strict";cc._RF.push(t,"95beevssTJPaZEJX58iCc9i","game_flower_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/language_manager"),d=e("../manager/resources_manager"),u=e("../manager/ui_manager"),h=e("../ui_view/panel/game_flower_ui_view"),p=e("../utils/config"),f=e("../utils/emmiter"),m=e("../utils/enum"),g=e("../utils/message"),_=e("../utils/utils"),v=e("./reward_tip_ui"),y=cc._decorator,b=y.ccclass;y.property,function(e){e[e.unStart=0]="unStart",e[e.change=1]="change",e[e.choose=2]="choose",e[e.end=3]="end"}(r||(r={}));var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new h.default,t.status=r.unStart,t.size=2,t.thePos=[0,0],t.round=0,t.totalRound=0,t.changeSpd=1,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u7ee7\u7eed\u73a9","\u7ee7\u7eed","\u9ad8\u7ea7","\u9c9c\u82b1\u6e38\u620f","\u9c9c\u82b1\u6e38\u620f\u63d0\u793a","\u70b9\u51fb\u5f00\u59cb"];e.forEach(function(e,n){e.string=c.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeContainer.children.forEach(function(t,n){t.on("click",function(){e.onChooseItem(n)},e)}),this._view.btnStart.node.on("click",this.onClickStart,this),this._view.btnLeave.node.on("click",this.hideUI,this),this._view.btnRestart.node.on("click",this.onClickRestart,this),this._view.btnLevel.node.on("click",this.onSwitchDiff,this)},t.prototype.showUI=function(){this._view.content.active=!0,this.status=r.unStart,this._view.btnLeave.node.active=!1,this._view.nodeChooseDiff.active=!0,this._view.btnStart.node.active=!0},t.prototype.onClickStart=function(){var e=this;l.default.instance.playAudio("click_2"),this._view.nodeChooseDiff.active=!1,this._view.btnStart.node.active=!1,s.default.instance.festivalData.game.hard?(this.size=3,this.changeSpd=.4):(this.changeSpd=.7,this.size=2),this.totalRound=0,this.round=0,this.status=r.change;for(var t=0;t<6;t++)for(var n=0;n<6;n++){var i=this.getNodeByXY(t,n);i.setPosition(21*t-53,21*n-53),t>=this.getShowIndex()&&t<this.getShowIndex()+this.size&&n>=this.getShowIndex()&&n<this.getShowIndex()+this.size?i.getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(m.ResType.main,"Icons-ChestTreasure"):i.getComponent(cc.Sprite).spriteFrame=null}this.thePos=[3,3];var a=this.getNodeByXY(this.thePos[0],this.thePos[1]);a.getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(m.ResType.main,"Icons-Flower2"),cc.tween(a).to(.5,{scale:1.5}).to(1,{scale:.75}).to(1,{scale:1.5}).to(.5,{scale:1}).start(),setTimeout(function(){e.startRound(),a.getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(m.ResType.main,"Icons-ChestTreasure")},3e3)},t.prototype.getNodeByXY=function(e,t){return this._view.nodeContainer.children[e+6*t]},t.prototype.getShowIndex=function(){switch(this.size){case 2:case 3:return 2;case 4:case 5:return 1;case 6:return 0}},t.prototype.startRound=function(){if(this.round>4+Math.pow(2,this.totalRound))return this.round=0,void(this.status=r.choose);switch(_.Utils.getRandomNumber(5)){case 0:this.onRotate();break;case 1:this.onSwitchCol();break;case 2:this.onSwitchArr();break;default:this.onSwitch()}this.round++},t.prototype.getChangeSpd=function(){return this.changeSpd*(6-this.totalRound)/6},t.prototype.onRotate=function(){var e=this,t=90;Math.random()>.5&&(t=-90),cc.tween(this._view.nodeContainer).by(this.getChangeSpd(),{angle:t}).start();for(var n=0;n<6;n++)for(var i=0;i<6;i++){var a=this.getNodeByXY(n,i);cc.tween(a).by(this.getChangeSpd(),{angle:-t}).start()}setTimeout(function(){e.startRound()},1300*1.1*this.getChangeSpd())},t.prototype.onSwitch=function(){for(var e=this,t=[_.Utils.getRandomNumber(this.size-1)+this.getShowIndex(),_.Utils.getRandomNumber(this.size-1)+this.getShowIndex()],n=[this.thePos[0]+_.Utils.getRandomNumber(2)-1,this.thePos[1]+_.Utils.getRandomNumber(2)-1];t[0]==n[0]&&t[1]==n[1]||n[0]<this.getShowIndex()||n[0]>=this.getShowIndex()+this.size||n[1]<this.getShowIndex()||n[1]>=this.getShowIndex()+this.size;)n=[_.Utils.getRandomNumber(this.size-1)+this.getShowIndex(),_.Utils.getRandomNumber(this.size-1)+this.getShowIndex()];var i=this.getNodeByXY(t[0],t[1]),a=this.getNodeByXY(n[0],n[1]),o=cc.v2(i.getPosition().x,i.getPosition().y),r=cc.v2(a.getPosition().x,a.getPosition().y);cc.tween(i).to(this.getChangeSpd(),{x:r.x,y:r.y}).call(function(){i.setPosition(o)}).start(),cc.tween(a).to(this.getChangeSpd(),{x:o.x,y:o.y}).call(function(){a.setPosition(r)}).start(),this.thePos[0]==t[0]&&this.thePos[1]==t[1]?this.thePos=n:this.thePos[0]==n[0]&&this.thePos[1]==n[1]&&(this.thePos=t),setTimeout(function(){e.startRound()},1300*1.1*this.getChangeSpd())},t.prototype.onSwitchArr=function(){for(var e=this,t=_.Utils.getRandomNumber(this.size-1)+this.getShowIndex(),n=this.thePos[0];t==n;)n=_.Utils.getRandomNumber(this.size-1)+this.getShowIndex();for(var i=this.getNodeByXY(t,0).x,a=this.getNodeByXY(n,0).x,o=function(e){if(e>=r.getShowIndex()&&e<r.getShowIndex()+r.size){var n=r.getNodeByXY(t,e),i=n.getPosition();cc.tween(n).to(r.getChangeSpd(),{x:a}).call(function(){n.setPosition(i)}).start()}},r=this,l=0;l<6;l++)o(l);var s=function(e){if(e>=c.getShowIndex()&&e<c.getShowIndex()+c.size){var t=c.getNodeByXY(n,e),a=t.getPosition();cc.tween(t).to(c.getChangeSpd(),{x:i}).call(function(){t.setPosition(a)}).start()}},c=this;for(l=0;l<6;l++)s(l);this.thePos[0]==t?this.thePos[0]=n:this.thePos[0]==n&&(this.thePos[0]=t),setTimeout(function(){e.startRound()},1300*1.1*this.getChangeSpd())},t.prototype.onSwitchCol=function(){for(var e=this,t=_.Utils.getRandomNumber(this.size-1)+this.getShowIndex(),n=this.thePos[1];t==n;)n=_.Utils.getRandomNumber(this.size-1)+this.getShowIndex();for(var i=this.getNodeByXY(0,t).y,a=this.getNodeByXY(0,n).y,o=function(e){if(e>=r.getShowIndex()&&e<r.getShowIndex()+r.size){var n=r.getNodeByXY(e,t),i=n.getPosition();cc.tween(n).to(r.getChangeSpd(),{y:a}).call(function(){n.setPosition(i)}).start()}},r=this,l=0;l<6;l++)o(l);var s=function(e){if(e>=c.getShowIndex()&&e<c.getShowIndex()+c.size){var t=c.getNodeByXY(e,n),a=t.getPosition();cc.tween(t).to(c.getChangeSpd(),{y:i}).call(function(){t.setPosition(a)}).start()}},c=this;for(l=0;l<6;l++)s(l);this.thePos[1]==t?this.thePos[1]=n:this.thePos[1]==n&&(this.thePos[1]=t),setTimeout(function(){e.startRound()},1300*1.1*this.getChangeSpd())},t.prototype.onSwitchDiff=function(){l.default.instance.playAudio("switch"),s.default.instance.festivalData.game.hard?s.default.instance.festivalData.game.hard=!1:s.default.instance.festivalData.game.hard=!0,this._view.btnLevel.node.getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(m.ResType.main,s.default.instance.festivalData.game.hard?"ui-new-switch_open":"ui-new-switch_close")},t.prototype.addTotalRound=function(){var e=this;this.totalRound++,this.size++;for(var t=this.getNodeByXY(this.thePos[0],this.thePos[1]),n=0;n<6;n++)for(var i=0;i<6;i++){var a=this.getNodeByXY(n,i),o=a.getComponent(cc.Sprite);n>=this.getShowIndex()&&n<this.getShowIndex()+this.size&&i>=this.getShowIndex()&&i<this.getShowIndex()+this.size&&!o.spriteFrame&&(a.opacity=0,o.spriteFrame=d.default.instance.getSprite(m.ResType.main,"Icons-ChestTreasure"),cc.tween(a).to(1,{opacity:255}).start())}cc.tween(t).to(.25,{scale:1.5}).to(.5,{scale:.75}).to(.5,{scale:1.5}).to(.25,{scale:1}).start(),setTimeout(function(){e.startRound(),t.getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(m.ResType.main,"Icons-ChestTreasure")},1500)},t.prototype.onChooseItem=function(e){if(this.status==r.choose){var t=e%6,n=Math.floor(e/6);cc.log(t,n," ",this.thePos),this.getNodeByXY(this.thePos[0],this.thePos[1]).getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(m.ResType.main,"Icons-Flower2"),t==this.thePos[0]&&n==this.thePos[1]?(l.default.instance.playAudio("effect_1"),this.totalRound<3?this.addTotalRound():this.onSuccess()):(l.default.instance.playAudio("died"),this.getNodeByXY(t,n).getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(m.ResType.main,"Icons-Flower"),this.onFail())}},t.prototype.onSuccess=function(){var e=[],t="";s.default.instance.festivalData.game.hard?(e.push({id:859,num:5,quality:5}),t=c.default.GetText("\u82b1\u6735\u5927\u6210\u529f")):(e.push({id:859,num:3,quality:3}),t=c.default.GetText("\u82b1\u6735\u6210\u529f")),u.default.instance.openUI(v.default,{name:p.Config.uiName.rewardTipUI,param:[e,t]},300),e.forEach(function(e){s.default.instance.onReward(e)}),this.status=r.end,this._view.btnLeave.node.active=!0},t.prototype.onClickRestart=function(){l.default.instance.playAudio("click_2"),this._view.btnRestart.node.active=!1,this.onClickStart()},t.prototype.onFail=function(){u.default.instance.LoadTipsByStr(c.default.GetText("\u6311\u6218\u5931\u8d25")),this.status=r.end,this._view.btnLeave.node.active=!0,this._view.btnRestart.node.active=!1},t.prototype.hideUI=function(){l.default.instance.playAudio("paper1"),s.default.instance.festivalData.game.reward=!0,this._view.content.active=!1,f.Emitter.fire(g.MessageType.gameDone)},t.instance=null,n=o([b],t)}(cc.Component);n.default=w,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/game_flower_ui_view":"game_flower_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./reward_tip_ui":"reward_tip_ui"}],game_manager:[function(e,t,n){"use strict";cc._RF.push(t,"7e90fpGto5Cp76pYcH0gDUl","game_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameStatue=void 0;var i,a=e("../interface/item_amount"),o=e("../ui/canvas_ui"),r=e("../ui/friend_ui"),l=e("../ui/ground_ui"),s=e("../ui/header_ui"),c=e("../ui/menu_ui"),d=e("../ui/sale_ui"),u=e("../utils/emmiter"),h=e("../utils/enum"),p=e("../utils/game_config"),f=e("../utils/message"),m=e("../utils/utils"),g=e("./audio_manager"),_=e("./collection_manager"),v=e("./dynamic_data_manager"),y=e("./festival_manager"),b=e("./field_manager"),w=e("./friend_manager"),C=e("./guide_manager"),S=e("./json_manager"),L=e("./language_manager"),A=e("./meadow_manager"),k=e("./plan_manager"),T=e("./quest_manager"),M=e("./record_manager"),R=e("./sale_manager"),P=e("./shop_manager"),D=e("./storage_manager"),B=e("./ui_manager"),F=e("./workshop_manager");(function(e){e[e.none=0]="none",e[e.pause=1]="pause",e[e.go=2]="go"})(i=n.GameStatue||(n.GameStatue={}));var I=function(){function e(){this._status=i.none,this.tenDt=0,this.gameSpd=1,this.typeMap={},this.foodRecipeList=[],this.rareRecipeList=[701,702,703,704],this.needCheckPlot=[],this.valueStr=[]}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},set:function(e){this._status=e,c.default.instance.refreshGameStateBtn()},enumerable:!1,configurable:!0}),e.prototype.initData=function(){var e=this,t=function(t){var i=S.default.instance.getDataByName("item")[t];i.type&&+t&&(i.type.forEach(function(n){e.typeMap[n]||(e.typeMap[n]=[]),e.typeMap[n].push(+t)}),+t<2500&&+t>2e3&&n.foodRecipeList.push(+t),+t<2600&&+t>2500&&n.rareRecipeList.push(+t))},n=this;for(var i in S.default.instance.getDataByName("item"))t(i);for(var i in S.default.instance.getDataByName("plot")){var a=S.default.instance.getDataByName("plot")[i];(a.fristTime||a.unlockChar)&&this.needCheckPlot.push(+i)}},e.prototype.onUpdate=function(e){this.status!=i.go||B.default.instance.checkIsAutoPause()||(v.default.instance.time<40&&v.default.instance.time+e>=40&&this.onChangeNight(),v.default.instance.time<55&&v.default.instance.time+e>=55&&this.closeAllWeatherPartical(),this.tenDt+=e,this.tenDt>=10&&(this.tenDt-=10,w.FriendMgr.instance.onUpdate(10),b.FieldMgr.instance.onUpdate(10),k.PlanMgr.instance.onUpdate(10),A.MeadowMgr.instance.onUpdate(10),_.CollectionMgr.instance.onAutoEat()),v.default.instance.time+=e,v.default.instance.time>60&&this.onDayBy(),d.default.instance.onUpdate(e),r.default.instance.onUpdate(e),s.default.instance.refreshProgressDay())},e.prototype.initGame=function(){this.showWeatherPar(),this.refreshGameSpd()},e.prototype.onChangeNight=function(){var e=this.getSeason()+1;o.default.instance.switchBg("season_"+e+"_2"),v.default.instance.rain||o.default.instance.weatherPar[0].stopSystem(),y.FestivalMgr.instance.getTodayHolidayType()?g.default.instance.playBGM("holiday_night"):g.default.instance.playBGM("night_"+(e-1))},e.prototype.showWeatherPar=function(){var e=this.getSeason()+1;v.default.instance.time<55&&(v.default.instance.rain?4==e?o.default.instance.weatherPar[2].resetSystem():o.default.instance.weatherPar[1].resetSystem():o.default.instance.weatherPar[0].resetSystem()),y.FestivalMgr.instance.getTodayHolidayType()?g.default.instance.playBGM("holiday_"+y.FestivalMgr.instance.getTodayHolidayType()):g.default.instance.playBGM("season_"+(e-1))},e.prototype.closeAllWeatherPartical=function(){o.default.instance.weatherPar.forEach(function(e){e.stopSystem()})},e.prototype.onDayBy=function(){var t=this;if(!M.default.instance.checkOnEndOfYear()){_.CollectionMgr.instance.onAutoSell(),v.default.instance.time=0,v.default.instance.day++,v.default.instance.rain=0==m.Utils.getRandomNumber(7),u.Emitter.fire(f.MessageType.addDairy,h.DairyRtType.newDay,{season:this.getSeason(),month:v.default.instance.day%30+1,water:v.default.instance.rain});var n=v.default.instance.config;n.timeSpdUp&&(n.timeSpdUpTimes--,n.timeSpdUpTimes<=0&&(n.timeSpdUp=!1,this.refreshGameSpd())),this.showWeatherPar(),v.default.instance.day%30==0&&0!=v.default.instance.day&&this.onMonthBy(),v.default.instance.day%120==0&&0!=v.default.instance.day&&this.onYearBy(),s.default.instance.refreshDay(),k.PlanMgr.instance.onDayStart(),b.FieldMgr.instance.onDayStart(),A.MeadowMgr.instance.onDayStart(),w.FriendMgr.instance.onDayBy(),M.default.instance.onDayBy(),T.default.instance.onDayBy(),F.WorkshopMgr.instance.onDayBy(),R.default.instance.onDayBy(),this.checkOpenHoliday();var a=this.getSeason()+1;o.default.instance.switchBg("season_"+a+"_1"),e.instance.checkHaveSkill(39)&&(m.Utils.luckChance(40+e.instance.getValueByStr("luck"))?v.default.instance.money*=1.02:v.default.instance.money*=.99),setTimeout(function(){l.default.instance.refreshUI(),c.default.instance.refreshUI(),n.dailyAutoPause&&(e.instance.status=i.pause),n.seasonAutoPause&&v.default.instance.day%30==29&&(e.instance.status=i.pause);for(var a=1;a<=16;a++){var o=S.default.instance.getDataByName("holiday")[a];o.day==v.default.instance.day%120+1&&(n.festivalAutoPause&&(e.instance.status=i.pause),u.Emitter.fire(f.MessageType.addDairy,h.DairyRtType.festival,{id:o.id}))}t.refreshGameSpd(),D.default.instance.saveGameData()}),u.Emitter.fire(f.MessageType.doneGuideByType,C.GuideStep.dayby)}},e.prototype.onMonthBy=function(){T.default.instance.onMonthBy(),w.FriendMgr.instance.onMonthBy(),y.FestivalMgr.instance.onMonthBy(),M.default.instance.onMonthBy(),v.default.instance.config.refreshTimes<3&&(v.default.instance.config.refreshTimes=3);var t=v.default.instance.recordData.load.findIndex(function(e){return 0==e});if(-1==t){var n=v.default.instance.recordData.load.findIndex(function(e){return-1!=e});v.default.instance.recordData.load[n]++}else v.default.instance.recordData.load[t]=-1;P.ShopMgr.instance.refreshMarketList();var i=[];if(e.instance.checkHaveSkill(32)){var a=[],o=[];for(var r in S.default.instance.getDataByName("char")){var s=S.default.instance.getDataByName("char")[r];if(s.animal)for(var d=0;d<7-s.animal.rare;d++)a.push(+r)}S.default.instance.getDataByName("char")[m.Utils.getArrRandomItem(a)].animal.product.forEach(function(e){o.push({id:e[0],num:e[1],quality:e[2]||1})}),i.push.apply(i,o),c.default.instance.showReward(h.PageType.ground,i,l.default.instance._view.nodeContainer.children[0]),u.Emitter.fire(f.MessageType.addDairy,h.DairyRtType.giftFromAnimal,{rewardList:o})}if(e.instance.checkHaveSkill(12)){var p=[{id:this.getArrRareId(h.Itemtype.weapon),num:1,quality:v.default.instance.getRandomQuality()}];i.push.apply(i,p),c.default.instance.showReward(h.PageType.ground,i,l.default.instance._view.nodeContainer.children[4]),u.Emitter.fire(f.MessageType.addDairy,h.DairyRtType.giftFromAdv,{rewardList:p})}if(e.instance.checkHaveSkill(13)&&(p=[{id:r=this.getArrRareId(h.Itemtype.crop),num:10,quality:v.default.instance.allSaleData.itemSaleData[r]||1}],i.push.apply(i,p),c.default.instance.showReward(h.PageType.ground,i,l.default.instance._view.nodeContainer.children[3]),u.Emitter.fire(f.MessageType.addDairy,h.DairyRtType.giftFromFriend,{rewardList:p})),e.instance.checkHaveSkill(22)){var g=P.ShopMgr.instance.getShopList(0),_=m.Utils.getArrRandomItem(g);p=[{id:_.id,num:20,quality:v.default.instance.allSaleData.itemSaleData[_.id]||1}],i.push.apply(i,p),c.default.instance.showReward(h.PageType.ground,i,l.default.instance._view.nodeContainer.children[1]),u.Emitter.fire(f.MessageType.addDairy,h.DairyRtType.giftFromShop,{rewardList:p})}i.forEach(function(e){v.default.instance.onReward(e)})},e.prototype.onYearBy=function(){M.default.instance.onYearBy()},e.prototype.onPayLoad=function(){var e=0,t=v.default.instance.recordData.load.findIndex(function(e){return e>0});-1!=t&&(e=[1e4,35e3,1e5][t]*Math.pow(1.05,v.default.instance.recordData.load[t]-1),e=Math.floor(e)),e>v.default.instance.money?B.default.instance.LoadTipsByStr(L.default.GetText("\u91d1\u94b1\u4e0d\u8db3")):(v.default.instance.money-=e,v.default.instance.recordData.load[t]=0)},e.prototype.getSeason=function(){return Math.floor(v.default.instance.day/30)%4},e.prototype.getYear=function(){return Math.floor(v.default.instance.day/120)},e.prototype.checkOpenHoliday=function(){for(var e in v.default.instance.allSaleData.saleBuff)(+e<301||+e>310)&&this.onCostBuff(+e);var t=v.default.instance.day%120+1;for(var e in S.default.instance.getDataByName("holiday")){var n=S.default.instance.getDataByName("holiday")[e];n.type&&9==n.type&&t==n.day&&(v.default.instance.allSaleData.saleBuff[+e]=n.long)}d.default.instance.refreshLabel()},e.prototype.getChestReward=function(t,n){void 0===n&&(n=1);var i=[],o=e.instance.getValueByStr("lucky"),r=0,l=this.checkHaveSkill(10);switch(t){case 859:for(var s=0;s<3+n;s++)m.Utils.luckChance(5+n)?i.push({id:this.getArrRareId(h.Itemtype.fruit),num:1,quality:v.default.instance.getRandomQuality(n-1+o,l)}):i.push({id:m.Utils.getArrRandomItem(p.GameConfig.PlanReward.LoggingSeasonReward[e.instance.getSeason()]),num:1,quality:v.default.instance.getRandomQuality(n-1+o,l)});m.Utils.luckChance(10+n+o)&&i.push({id:this.getArrRareId(h.Itemtype.seasoning),num:1,quality:v.default.instance.getRandomQuality(n-1+o,l)}),m.Utils.luckChance(1+n/5+o/2)&&i.push({id:853,num:1,quality:v.default.instance.getRandomQuality()});break;case 856:for(r=m.Utils.getRandomNumber(100*n)+100,i.push({type:a.RewardType.money,num:r}),m.Utils.luckChance(3+n)&&i.push({id:this.getArrRareId(h.Itemtype.potion),num:1,quality:v.default.instance.getRandomQuality(n-1+o,l)}),m.Utils.luckChance(10+n)&&i.push({id:this.getArrRareId(h.Itemtype.weapon),num:1,quality:v.default.instance.getRandomQuality(n-1+o,l)}),s=0;s<n/2;s++){var c=this.getArrRareId(h.Itemtype.meta),d=v.default.instance.getRandomQuality(n-1+o,l);p.GameConfig.OnlyOneQuaIds.includes(c)&&(d=1),i.push({id:c,num:1,quality:d})}break;case 858:r=m.Utils.getRandomNumber(200*n)+200,i.push({type:a.RewardType.money,num:r});var u=m.Utils.getRandomNumber(50*n)+25;for(i.push({type:a.RewardType.point,num:u}),s=0;s<5;s++)m.Utils.luckChance(3+n)&&i.push({id:this.getArrRareId(h.Itemtype.potion),num:1,quality:v.default.instance.getRandomQuality(n-1+o,l)}),m.Utils.luckChance(10+n)&&i.push({id:this.getArrRareId(h.Itemtype.weapon),num:1,quality:v.default.instance.getRandomQuality(n-1+o,l)});for(var f=0;f<2*n;f++){var g=this.getArrRareId(h.Itemtype.meta);d=v.default.instance.getRandomQuality(n-1+o,l),p.GameConfig.OnlyOneQuaIds.includes(g)&&(d=1),i.push({id:g,num:1,quality:d})}m.Utils.luckChance(1+n/5+o/2)&&i.push({id:860,num:1,quality:1})}return i},e.prototype.getArrRareId=function(e){var t=[];return this.typeMap[e].forEach(function(e){for(var n=S.default.instance.getDataByName("item")[e],i=0;i<6-(n.rare||1);i++)t.push(e)}),m.Utils.getArrRandomItem(t)},e.prototype.getRandomNewRecipe=function(t){for(var n=[],i=0;i<this.foodRecipeList.length;i++){var a=S.default.instance.getDataByName("item")[this.foodRecipeList[i]],o=6-a.rare-Math.abs(a.rare-t)+e.instance.getLuck();o<0&&(o=0);for(var r=0;r<o;r++)n.push(this.foodRecipeList[i])}return m.Utils.getArrRandomItem(n)},e.prototype.getRandomRareRecipe=function(){for(var t=[],n=0;n<this.rareRecipeList.length;n++){var i=6-S.default.instance.getDataByName("item")[this.rareRecipeList[n]].rare+e.instance.getLuck();i<0&&(i=0);for(var a=0;a<i;a++)t.push(this.rareRecipeList[n])}return m.Utils.getArrRandomItem(t)},e.prototype.checkIsInGoodSeason=function(e){return 1==e[this.getSeason()]},e.prototype.checkIsInBedSeason=function(e){return-1==e[this.getSeason()]},e.prototype.getValueByStr=function(e){var t=0,n=k.PlanMgr.instance.getAllLearnSkill(),i=w.FriendMgr.instance.getFriendSkillsList();for(var a in v.default.instance.allSaleData.saleBuff)if(a&&"null"!=a){var o=S.default.instance.getDataByName("holiday")[+a];o.param&&(t+=o.param[e]||0)}return n.forEach(function(n){var i=S.default.instance.getDataByName("skill")[n];i.param&&(t+=i.param[e]||0)}),i.forEach(function(n){var i=n[0],a=n[1],o=S.default.instance.getDataByName("skill")[i];o.param&&null!=o.param[e]&&(t+=o.param[e]+a*o.num)}),t},e.prototype.getPrecentValueByStr=function(e){var t=1+this.getValueByStr(e)/100;return t<0&&(t=0),t},e.prototype.checkHaveSkill=function(e){var t=w.FriendMgr.instance.getFriendSkillsList();return k.PlanMgr.instance.checkSkillIsLearn(e)||t.some(function(t){var n=t[0];return t[1],n==e})},e.prototype.checkHaveBuff=function(e){return!!v.default.instance.allSaleData.saleBuff[e]},e.prototype.onCostBuff=function(e){v.default.instance.allSaleData.saleBuff[e]-=1,(!v.default.instance.allSaleData.saleBuff[e]||v.default.instance.allSaleData.saleBuff[e]<=0)&&delete v.default.instance.allSaleData.saleBuff[e],u.Emitter.fire(f.MessageType.buffAlert)},e.prototype.checkHolidayIsOpen=function(e){for(var t=0;t<16;t++){var n=S.default.instance.getDataByName("holiday")[t+1];if(n.day>=v.default.instance.day%120&&n.day+(n.long||1)<v.default.instance.day%120&&e==t+1)return!0}return!1},e.prototype.getLuck=function(){return this.getValueByStr("luck")},e.prototype.getFoodHealth=function(t){var n=S.default.instance.getDataByName("item")[t.id],i=n.food.health*p.GameConfig.QualityDouble.sale[t.quality];return n.food.specialType==h.FoodSpecialSkill.seasonDouble&&e.instance.checkIsInGoodSeason(n.food.season)&&(i*=2),Math.floor(i*e.instance.getPrecentValueByStr("foodHealth"))},e.prototype.onUseFood=function(t){var n=e.instance.getFoodHealth(t);v.default.instance.health+=+n;var i=L.default.GetText("\u56de\u590d\u4e86\u4f53\u529b")+n;v.default.instance.health>=v.default.instance.maxHealth&&(i=L.default.GetText("\u4f53\u529b\u5df2\u6062\u590d\u6ee1"));var a=S.default.instance.getDataByName("item")[t.id];switch(a.food.specialType){case h.FoodSpecialSkill.seasonDouble:break;case h.FoodSpecialSkill.addMaxHp:var o=Math.ceil((a.food.specialNum-50)*(.8+.2*t.quality)+50);v.default.instance._maxHealth<o&&(v.default.instance._maxHealth++,i+=L.default.GetText("\u5403\u996d\u589e\u52a0\u4e0a\u9650"));break;case h.FoodSpecialSkill.none:break;default:var r=a.food.specialNum+t.quality-1,l=a.food.specialType+292;R.default.instance.addBuff(l,r),i+="\uff0c"+L.default.GetText("\u83b7\u5f97\u589e\u76ca")+"\uff1a"+L.default.GetText("holiday_name_"+l)}B.default.instance.LoadTipsByStr(i)},e.prototype.refreshGameSpd=function(){v.default.instance.config.timeSpdUp?B.default.instance.checkIsAutoPause()?cc.kSpeed(1):cc.kSpeed(5):cc.kSpeed(1),c.default.instance.refreshGameStateBtn()},e.prototype.getFromStr=function(e){var t=S.default.instance.getDataByName("item")[e],n="";e<=510&&e>504&&(n+="\n"+L.default.GetText("\u6316\u77ff\u83b7\u5f97")),e<=760&&e>750&&(n+="\n"+L.default.GetText("\u9493\u9c7c\u83b7\u5f97")),t.shop&&t.shop.forEach(function(e){if(e<100)if(5==e)n+="\n"+L.default.GetText("\u5546\u5e97\u51fa\u552e");else{var t=e%10,i=Math.floor(e/10);n+="\n"+L.default.GetText("\u7b2c\u51e0\u5e74",i+1)+[L.default.GetText("\u6625"),L.default.GetText("\u590f"),L.default.GetText("\u79cb"),L.default.GetText("\u51ac")][t-1]+" "+L.default.GetText("\u5546\u5e97\u51fa\u552e")}else if(e<400)if(100==e)n+="\n"+L.default.GetText("\u5192\u9669\u516c\u4f1a\u51fa\u552e");else{var a=S.default.instance.getDataByName("map")[e%100];n+="\n"+L.default.GetText("\u901a\u8fc7\u516c\u4f1a\u51fa\u552e",a.name)}else if(e<500)n+="\n"+L.default.GetText("\u884c\u5546\u5546\u5e97\u51fa\u552e");else switch(e){case h.ShopOnType.festival:n+="\n"+L.default.GetText("\u8282\u65e5\u5546\u5e97\u51fa\u552e1");break;case h.ShopOnType.festival2:n+="\n"+L.default.GetText("\u8282\u65e5\u5546\u5e97\u51fa\u552e2");break;case h.ShopOnType.festival3:n+="\n"+L.default.GetText("\u8282\u65e5\u5546\u5e97\u51fa\u552e3");break;case h.ShopOnType.festival4:n+="\n"+L.default.GetText("\u8282\u65e5\u5546\u5e97\u51fa\u552e4");break;case h.ShopOnType.anniversary:n+="\n"+L.default.GetText("\u8282\u65e5\u5546\u5e97\u51fa\u552e5")}});var i=function(t){var i=S.default.instance.getDataByName("map")[t];i.findReward.includes(e)&&(n+="\n"+L.default.GetText("map_name_"+t)+L.default.GetText("\u641c\u5bfb\u83b7\u5f97")),i.monster.forEach(function(i){S.default.instance.getDataByName("char")[i].drop==e&&(n+="\n"+L.default.GetText("map_name_"+t)+L.default.GetText("\u51fb\u8d25\u83b7\u5f97",L.default.GetText("char_name_"+i)))})};for(var a in S.default.instance.getDataByName("map"))i(a);for(var o=[],r=0;r<40;r++)S.default.instance.getDataByName("char")[r+101].animal.product.some(function(t){return t[0]==e})&&o.push(L.default.GetText("char_name_"+r+101));return o.length>0&&(n+="\n"+L.default.GetText("\u7267\u573a\u83b7\u5f97",o.join(","))),""==n&&(n="\n"+L.default.GetText("\u672a\u77e5")),n},e._instance=null,e}();n.default=I,cc._RF.pop()},{"../interface/item_amount":"item_amount","../ui/canvas_ui":"canvas_ui","../ui/friend_ui":"friend_ui","../ui/ground_ui":"ground_ui","../ui/header_ui":"header_ui","../ui/menu_ui":"menu_ui","../ui/sale_ui":"sale_ui","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","../utils/utils":"utils","./audio_manager":"audio_manager","./collection_manager":"collection_manager","./dynamic_data_manager":"dynamic_data_manager","./festival_manager":"festival_manager","./field_manager":"field_manager","./friend_manager":"friend_manager","./guide_manager":"guide_manager","./json_manager":"json_manager","./language_manager":"language_manager","./meadow_manager":"meadow_manager","./plan_manager":"plan_manager","./quest_manager":"quest_manager","./record_manager":"record_manager","./sale_manager":"sale_manager","./shop_manager":"shop_manager","./storage_manager":"storage_manager","./ui_manager":"ui_manager","./workshop_manager":"workshop_manager"}],game_yang_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"d5993wDJVRMr7V5+LU0B8SQ","game_yang_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeDoorContainer=null,this.nodeContainer=null,this.nodeStartBtn=null,this.nodeGameBtn=null,this.itemYangDoor=null,this.btnHelp=null,this.btnStart=null,this.btnLevel=null,this.btnQuit=null,this.btnBack=null,this.btnRestart=null,this.labLanList=[]}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeDoorContainer=cc.find("content/nodeDoorContainer",e),this.nodeContainer=cc.find("content/nodeContainer",e),this.nodeStartBtn=cc.find("content/nodeStartBtn",e),this.nodeGameBtn=cc.find("content/nodeGameBtn",e),this.itemYangDoor=cc.find("content/nodeDoorContainer/itemYangDoor",e),this.btnHelp=null===(t=cc.find("content/nodeStartBtn/btnHelp",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnStart=null===(n=cc.find("content/nodeStartBtn/btnStart",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnLevel=null===(i=cc.find("content/nodeStartBtn/btnLevel",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnQuit=null===(a=cc.find("content/nodeGameBtn/btnQuit",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnBack=null===(o=cc.find("content/nodeGameBtn/btnBack",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnRestart=null===(r=cc.find("content/nodeGameBtn/btnRestart",e))||void 0===r?void 0:r.getComponent(cc.Button),this.labLanList[3]=null===(l=cc.find("content/nodeStartBtn/btnStart/labLanList3",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[2]=null===(s=cc.find("content/nodeStartBtn/btnLevel/labLanList2",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[1]=null===(c=cc.find("content/labLanList1",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[0]=null===(d=cc.find("content/labLanList0",e))||void 0===d?void 0:d.getComponent(cc.Label)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeDoorContainer=null,this.nodeContainer=null,this.nodeStartBtn=null,this.nodeGameBtn=null,this.itemYangDoor=null,this.btnHelp=null,this.btnStart=null,this.btnLevel=null,this.btnQuit=null,this.btnBack=null,this.btnRestart=null,this.labLanList=[]},e}();n.default=i,cc._RF.pop()},{}],game_yang_ui:[function(e,t,n){"use strict";cc._RF.push(t,"7b3b2VFwZ9Oxo6XzJ+dw1Ul","game_yang_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../littleGame/item_yang_card"),l=e("../littleGame/item_yang_door"),s=e("../manager/ad_manager"),c=e("../manager/audio_manager"),d=e("../manager/dynamic_data_manager"),u=e("../manager/language_manager"),h=e("../manager/pool_manager"),p=e("../manager/resources_manager"),f=e("../manager/ui_manager"),m=e("../ui_view/panel/game_yang_ui_view"),g=e("../utils/emmiter"),_=e("../utils/enum"),v=e("../utils/message"),y=e("../utils/utils"),b=cc._decorator,w=b.ccclass,C=(b.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new m.default,t.allCardsValue=[],t.lastCard=null,t.cardsContainer=[],t.total=51,t.totalCardType=6,t.gameStatus=0,t.boxPostion=[{x:-275,t:0},{x:-165,t:0},{x:-55,t:0},{x:55,t:0},{x:166,t:0},{x:276,t:0}],t.allCards=[],t.mapPostion=[{x:-279,t:250},{x:-234,t:250},{x:-189,t:250},{x:-144,t:250},{x:-99,t:250},{x:-54,t:250},{x:-9,t:250},{x:36,t:250},{x:81,t:250},{x:126,t:250},{x:171,t:250},{x:216,t:250},{x:261,t:250},{x:-279,t:131},{x:-234,t:131},{x:-189,t:131},{x:-144,t:131},{x:-99,t:131},{x:-54,t:131},{x:-9,t:131},{x:36,t:131},{x:81,t:131},{x:126,t:131},{x:171,t:131},{x:216,t:131},{x:261,t:131},{x:-279,t:13},{x:-234,t:13},{x:-189,t:13},{x:-144,t:13},{x:-99,t:13},{x:-54,t:13},{x:-9,t:13},{x:36,t:13},{x:81,t:13},{x:126,t:13},{x:171,t:13},{x:216,t:13},{x:261,t:13},{x:-279,t:-105},{x:-234,t:-105},{x:-189,t:-105},{x:-144,t:-105},{x:-99,t:-105},{x:-54,t:-105},{x:-9,t:-105},{x:36,t:-105},{x:81,t:-105},{x:126,t:-105},{x:171,t:-105},{x:216,t:-105},{x:261,t:-105},{x:-279,t:-223},{x:-234,t:-223},{x:-189,t:-223},{x:-144,t:-223},{x:-99,t:-223},{x:-54,t:-223},{x:-9,t:-223},{x:36,t:-223},{x:81,t:-223},{x:126,t:-223},{x:171,t:-223},{x:216,t:-223},{x:261,t:-223}],t.rewardItemId=[801,855,859,856,510,853,860,1538],t.rewardRare=[7,6,5,5,4,3,2,1],t.curDoor=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u9c9c\u82b1\u6e38\u620f","\u9c9c\u82b1\u6e38\u620f\u63d0\u793a","\u9ad8\u7ea7","\u70b9\u51fb\u5f00\u59cb"];e.forEach(function(e,n){e.string=u.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.btnStart.node.on("click",function(){c.default.instance.playAudio("click_2"),d.default.instance.festivalData.game.hard?(e.total=51,e.totalCardType=8):(e.total=36,e.totalCardType=6),e.curDoor.getComponent(l.default).isOpen=!0},this),this._view.btnLevel.node.on("click",this.onSwitchDiff,this)},t.prototype.showUI=function(){this.gameStatus=0,this._view.content.active=!0,this._view.nodeStartBtn.active=!0,this._view.nodeGameBtn.active=!1},t.prototype.onSwitchDiff=function(){c.default.instance.playAudio("switch"),d.default.instance.festivalData.game.hard?d.default.instance.festivalData.game.hard=!1:d.default.instance.festivalData.game.hard=!0,this._view.btnLevel.node.getComponent(cc.Sprite).spriteFrame=p.default.instance.getSprite(_.ResType.main,d.default.instance.festivalData.game.hard?"ui-new-switch_open":"ui-new-switch_close")},t.prototype.hideUI=function(){c.default.instance.playAudio("paper1"),d.default.instance.festivalData.game.reward=!0,this._view.content.active=!1,g.Emitter.fire(v.MessageType.gameDone)},t.prototype.initGame=function(e){var t=this;e||(e=[],this.cardsContainer=[],this._view.nodeDoorContainer.destroyAllChildren(),this._view.nodeDoorContainer.removeAllChildren()),this._view.nodeStartBtn.active=!1,this._view.nodeGameBtn.active=!0,this.allCardsValue=[],this.allCards=[],h.default.instance.removeObjByContainer(this._view.nodeContainer);var n=this.getRandomNum(0,this.mapPostion.length,this.total);n=n.sort(function(e,t){return e-t});for(var i=e.length/3;i<this.total/3;i++){var a=y.Utils.getArrRandomIndex(this.rewardRare.slice(0,this.totalCardType))+1;e.push(a),e.push(a),e.push(a)}e=y.Utils.shuffle(e),n.forEach(function(i,a){var o=h.default.instance.createObjectByName("itemYangCard",t._view.nodeContainer),l=o.getComponent(r.default),s=e[a];l.init(i,s),l.setClickable(!(n.indexOf(i+1)>-1&&(i+1)%13!=0)),t.allCardsValue.push(l.val),t.allCards.push({index:i,ele:o}),o.setPosition(new cc.Vec3(0,0,0)),cc.tween(o).to(Math.random(),{position:new cc.Vec3(t.mapPostion[i].x,t.mapPostion[i].t,0)}).call(function(){o.setPosition(new cc.Vec3(t.mapPostion[i].x,t.mapPostion[i].t,0))}).start()}),cc.log(e)},t.prototype.getRandomNum=function(e,t,n){for(var i=[],a=0;a<n;a++){var o=Math.floor(Math.random()*(t-e)+e);-1==i.indexOf(o)?i.push(o):a--}return i},t.prototype.clickableCheck=function(e,t){var n=e.getComponent(r.default).index,i=this.allCards.find(function(e){return e.index==n});if(n>-1&&i){var a=this.allCards.findIndex(function(e){return e.index==i.index});a-1>=0&&(this.allCards[a-1].index==i.index-1||1==n)&&this.allCards[a-1].ele.getComponent(r.default).setClickable(!t)}},t.prototype.start=function(){var e=cc.instantiate(this._view.itemYangDoor);this.curDoor=e,this.node.addChild(e)},t.prototype.update=function(){var e=this.curDoor.getComponent(l.default).isOpen;0==this.gameStatus&&e&&(this.initGame(),this.gameStatus=1)},t.prototype.cardClick=function(e){if(1==this.gameStatus)if(6!=this.cardsContainer.length){if(this.lastCard={position:{x:e.node.position.x,t:e.node.position.y},index:e.index,value:e.val,containerIndex:0},this.cardsContainer.length<6&&e.clickable){for(var t=0;t<this.allCardsValue.length;t++)if(this.allCardsValue[t]==e.val){this.allCardsValue.splice(t,1);break}this.clickableCheck(e.node),e.setClickable(!1),this.groupCheck(e,e.node)}}else f.default.instance.LoadTipsByStr(u.default.GetText("\u624b\u724c\u5df2\u6ee1"))},t.prototype.moveCard=function(e,t,n){cc.tween(e).to(.3,{x:t.x,y:t.y}).call(function(){n&&n()}).start()},t.prototype.groupCheck=function(e,t){for(var n=this,i=this.cardsContainer,a=i.find(function(t){return t.getComponent(r.default).val==e.val}),o=a?i.indexOf(a):0,l=i.length-1;l>=o;l--){var s=i[l],c=this.boxPostion[l+1];this.cardsContainer[l+1]=s,this.moveCard(s,cc.v2(c.x,c.t),function(){})}var d=this.boxPostion[o];this.cardsContainer[o]=t,this.lastCard.containerIndex=o,t.parent=this._view.nodeDoorContainer,this.moveCard(t,cc.v2(d.x,d.t),function(){n.resultCheck()})},t.prototype.resultCheck=function(){var e=this,t=this.cardsContainer,n=[];t.forEach(function(t,i){var a=t.getComponent(r.default);n.length?n[n.length-1].key==a.val?n.push({key:a.val,Component:t,index:i}):n=[{key:a.val,Component:t,index:i}]:n.push({key:a.val,Component:t,index:i}),3==n.length&&(n.forEach(function(t){cc.tween(t.Component).to(.1,{position:new cc.Vec3(n[1].Component.position.x,n[1].Component.position.y,0)}).call(function(){c.default.instance.playAudio("effect_2"),e._view.nodeDoorContainer.removeChild(t.Component)}).start(),e.cardsContainer[t.index]=null}),e.addReward(n[0].key),e.cardsContainer=e.cardsContainer.filter(function(e){return null!==e}),n=[],e.cardsContainer.forEach(function(t,n){var i=e.boxPostion[n];e.moveCard(t,cc.v2(i.x,i.y))}),e.lastCard=null)})},t.prototype.addReward=function(e){var t=this.rewardItemId[e-1];d.default.instance.onReward({id:t,num:1,quality:1}),f.default.instance.LoadTipsByStr(u.default.GetText("\u83b7\u5f97")+u.default.GetText("item_name_"+t))},t.prototype.lastStep=function(){var e=this;if(c.default.instance.playAudio("click_2"),null==this.lastCard)f.default.instance.LoadTipsByStr(u.default.GetText("\u5c0f\u63d0\u793a")+u.default.GetText("\u6ca1\u6709\u4e0a\u4e00\u6b65\u53ef\u4ee5\u56de\u9000"));else{var t=h.default.instance.createObjectByName("itemYangCard",this._view.nodeContainer);t.getComponent(r.default).init(this.lastCard.index,this.lastCard.value),this.allCardsValue.push(this.lastCard.value),t.getComponent(r.default).setClickable(!0),t.setPosition(cc.v2(this.lastCard.position.x,this.lastCard.position.t)),this.clickableCheck(t,!0),this.cardsContainer[this.lastCard.containerIndex].destroy(),this.cardsContainer[this.lastCard.containerIndex]=null,this.cardsContainer=this.cardsContainer.filter(function(e){return null!==e}),this.cardsContainer.length||(this._view.nodeDoorContainer.destroyAllChildren(),this._view.nodeDoorContainer.removeAllChildren()),this.cardsContainer.forEach(function(t,n){var i=e.boxPostion[n];e.moveCard(t,cc.v2(i.x,i.y))}),this.lastCard=null}},t.prototype.randomCards=function(){var e=this;c.default.instance.playAudio("click_2"),1==this.gameStatus?f.default.instance.LoadMessageBox(u.default.GetText("\u91cd\u65b0\u5f00\u59cb"),u.default.GetText("\u5e7f\u544a\u91cd\u65b0\u5f00\u59cb"),function(t){t&&s.default.getInatance().showAndroidAd(function(){f.default.instance.LoadTipsByStr(u.default.GetText("\u611f\u8c22\u652f\u6301")),e.initGame()})}):f.default.instance.LoadTipsByStr(u.default.GetText("\u5c0f\u63d0\u793a")+u.default.GetText("\u6682\u65f6\u4e0d\u53ef\u4f7f\u7528\u968f\u673a\u68cb\u76d8"))},t.instance=null,n=o([w],t)}(cc.Component));n.default=C,cc._RF.pop()},{"../littleGame/item_yang_card":"item_yang_card","../littleGame/item_yang_door":"item_yang_door","../manager/ad_manager":"ad_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/game_yang_ui_view":"game_yang_ui_view","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils"}],ground_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"3ca5ftEzEVE6oka2z2g1sF2","ground_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeContainer=null,this.itemMap=null,this.itemMap=null,this.itemMap=null,this.itemMap=null,this.itemMap=null,this.itemMap=null,this.itemMap=null,this.svMain=null}return e.prototype.initView=function(e){var t;this.content=cc.find("content",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.itemMap=cc.find("content/svMain/view/nodeContainer/itemMap",e),this.itemMap=cc.find("content/svMain/view/nodeContainer/itemMap",e),this.itemMap=cc.find("content/svMain/view/nodeContainer/itemMap",e),this.itemMap=cc.find("content/svMain/view/nodeContainer/itemMap",e),this.itemMap=cc.find("content/svMain/view/nodeContainer/itemMap",e),this.itemMap=cc.find("content/svMain/view/nodeContainer/itemMap",e),this.itemMap=cc.find("content/svMain/view/nodeContainer/itemMap",e),this.svMain=null===(t=cc.find("content/svMain",e))||void 0===t?void 0:t.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeContainer=null,this.itemMap=null,this.itemMap=null,this.itemMap=null,this.itemMap=null,this.itemMap=null,this.itemMap=null,this.itemMap=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],ground_ui:[function(e,t,n){"use strict";cc._RF.push(t,"a88aeoGFMZPTqoxl7Kucatv","ground_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/holiday_data"),l=e("../interface/plan_data"),s=e("../manager/action_manager"),c=e("../manager/audio_manager"),d=e("../manager/dynamic_data_manager"),u=e("../manager/festival_manager"),h=e("../manager/game_manager"),p=e("../manager/guide_manager"),f=e("../manager/json_manager"),m=e("../manager/language_manager"),g=e("../manager/reddot_manager"),_=e("../manager/resources_manager"),v=e("../manager/shop_manager"),y=e("../manager/ui_manager"),b=e("../ui_view/panel/ground_ui_view"),w=e("../utils/config"),C=e("../utils/emmiter"),S=e("../utils/enum"),L=e("../utils/message"),A=e("../utils/utils"),k=e("./adventure_ui"),T=e("./alchemy_ui"),M=e("./building_ui"),R=e("./collection_ui"),P=e("./farm_match_ui"),D=e("./food_match_ui"),B=e("./holiday_ui"),F=e("./market_ui"),I=e("./meadow_ui"),O=e("./menu_ui"),N=e("./quest_ui"),x=e("./shop_ui"),j=e("./switch_mask_ui"),U=e("./workshop_ui"),E=cc._decorator,G=E.ccclass,V=(E.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new b.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._bindEvent()},t.prototype._bindEvent=function(){var e=this;C.Emitter.register(L.MessageType.dairyOpen,this.changeSvToShort,this),C.Emitter.register(L.MessageType.dairyClose,this.changeSvToLong,this),C.Emitter.register(L.MessageType.onDonePlot,this.refreshReddot,this),C.Emitter.register(L.MessageType.onDoneAchievement,this.refreshReddot,this),C.Emitter.register(L.MessageType.gameDone,this.refreshReddot,this),C.Emitter.register(L.MessageType.onItemChangeAlert,this.refreshReddot,this),C.Emitter.register(L.MessageType.onDonePlot,function(){e.refreshReddot(),e.refreshUI()},this),this._view.nodeContainer.children.forEach(function(t,n){t.on("click",function(){c.default.instance.playAudio("click"),e.onClickMapBtn(n+6)},e)})},t.prototype.changeSvToShort=function(){this._view.svMain.node.height=190,this._view.svMain.node.getChildByName("view").height=190},t.prototype.changeSvToLong=function(){this._view.svMain.node.height=270,this._view.svMain.node.getChildByName("view").height=270},t.prototype.showUI=function(){this.setLanguage(),s.default.instance.fadeShowDialog(this._view.content),this.refreshUI(),this.refreshReddot(),1==O.default.instance._view.nodeBG.active?this.changeSvToShort():this.changeSvToLong()},t.prototype.setLanguage=function(){var e=["\u5546\u5e97","\u7267\u573a","\u5efa\u7b51\u5e97","\u516c\u544a\u680f","\u5192\u9669\u516c\u4f1a","\u4f5c\u574a","\u5e02\u96c6\u5546\u5e97","\u8282\u65e5","\u6599\u7406\u5927\u8d5b","\u519c\u573a\u5c55\u89c8","\u56fe\u9274","\u9b54\u5973\u5c0f\u5c4b"],t=["\u5546\u5e97\u63cf\u8ff0","\u7267\u573a\u63cf\u8ff0","\u5efa\u7b51\u5e97\u63cf\u8ff0","\u516c\u544a\u680f\u63cf\u8ff0","\u5192\u9669\u516c\u4f1a\u63cf\u8ff0","\u4f5c\u574a\u63cf\u8ff0","\u5e02\u96c6\u5546\u5e97\u63cf\u8ff0","\u8282\u65e5\u63cf\u8ff0","\u6599\u7406\u5927\u8d5b\u63cf\u8ff0","\u519c\u573a\u5c55\u89c8\u63cf\u8ff0","\u56fe\u9274\u63cf\u8ff0","\u9b54\u5973\u5c0f\u5c4b\u63cf\u8ff0"];this._view.nodeContainer.children.forEach(function(n,i){n.getChildByName("label").getComponent(cc.Label).string=m.default.GetText(t[i]),n.getChildByName("rtLabel").getComponent(cc.RichText).string=m.default.GetText(e[i])})},t.prototype.refreshUI=function(){this._view.content.active&&(d.default.instance.recordData.donePlot,this._view.nodeContainer.children[1].active=p.GuideMgr.instance.getFunctionIsOpen(S.FunctionType.meadow),this._view.nodeContainer.children[2].active=p.GuideMgr.instance.getFunctionIsOpen(S.FunctionType.build),this._view.nodeContainer.children[3].active=p.GuideMgr.instance.getFunctionIsOpen(S.FunctionType.quest),this._view.nodeContainer.children[4].active=p.GuideMgr.instance.getFunctionIsOpen(S.FunctionType.adventure),this._view.nodeContainer.children[5].active=h.default.instance.checkHaveSkill(34),this._view.nodeContainer.children[6].active=d.default.instance.day%30+1==15,this._view.nodeContainer.children[7].active=[5,40,77,119].includes(d.default.instance.day%120+1),this._view.nodeContainer.children[7].active&&this.refreshHolidayBtn(),this._view.nodeContainer.children[8].active=d.default.instance.day%30+1==20,this._view.nodeContainer.children[9].active=u.FestivalMgr.instance.getTodayHolidayType()==r.HolidayType.bestFarmer,this._view.nodeContainer.children[10].active=p.GuideMgr.instance.getFunctionIsOpen(S.FunctionType.collection),this._view.nodeContainer.children[11].active=h.default.instance.checkHaveSkill(51),this.refreshIcons())},t.prototype.hideUI=function(){s.default.instance.fadeHideDialog(this._view.content)},t.prototype.onClickMapBtn=function(e){switch(e){case S.PageType.shop:y.default.instance.openUI(x.default,{name:w.Config.uiName.shopUI});break;case S.PageType.meadow:y.default.instance.openUI(I.default,{name:w.Config.uiName.meadowUI});break;case S.PageType.building:y.default.instance.openUI(M.default,{name:w.Config.uiName.buildingUI});break;case S.PageType.quest:y.default.instance.openUI(N.default,{name:w.Config.uiName.questUI});break;case S.PageType.adventure:y.default.instance.openUI(k.default,{name:w.Config.uiName.adventureUI});break;case S.PageType.workshop:y.default.instance.openUI(U.default,{name:w.Config.uiName.workshopUI});break;case S.PageType.marketDay:y.default.instance.openUI(F.default,{name:w.Config.uiName.marketUI});break;case S.PageType.festival:var t=[5,40,77,119].indexOf(d.default.instance.day%120+1);y.default.instance.openUI(B.default,{name:w.Config.uiName.holidayUI,param:[t]});break;case S.PageType.bestChef:y.default.instance.openUI(D.default,{name:w.Config.uiName.foodMatchUI});break;case S.PageType.bestFarmer:y.default.instance.openUI(P.default,{name:w.Config.uiName.farmMatchUI});break;case S.PageType.collection:j.default.instance.onSwitch(function(){y.default.instance.openUI(R.default,{name:w.Config.uiName.collectionUI}),j.default.instance.endSwitch()});break;case S.PageType.alchemy:y.default.instance.openUI(T.default,{name:w.Config.uiName.alchemyUI})}},t.prototype.refreshHolidayBtn=function(){var e=u.FestivalMgr.instance.getFestivalId(),t=f.default.instance.getDataByName("holiday")[e];this._view.nodeContainer.children[7].getChildByName("rtLabel").getComponent(cc.RichText).string=m.default.GetText("holiday_name_"+e),this._view.nodeContainer.children[7].getChildByName("label").getComponent(cc.Label).string=m.default.GetText("holiday_dec_"+e),this._view.nodeContainer.children[7].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=_.default.instance.getSprite(S.ResType.main,t.sp)},t.prototype.refreshReddot=function(){this._view.nodeContainer.children.forEach(function(e,t){switch(t+6){case S.PageType.shop:case S.PageType.meadow:case S.PageType.building:case S.PageType.quest:case S.PageType.adventure:case S.PageType.workshop:e.getChildByName("reddot").active=g.ReddotMgr.instance.getGroundReddotByPage(t+6);break;case S.PageType.marketDay:case S.PageType.festival:case S.PageType.bestChef:case S.PageType.bestFarmer:e.getChildByName("reddot").active=g.ReddotMgr.instance.getFestivalReddot()}})},t.prototype.getMenuPos=function(e){return A.Utils.getNodeUsePos(this._view.nodeContainer.children[e])},t.prototype.refreshIcons=function(){var e=v.ShopMgr.instance.getShopList(-1).map(function(e){return A.Utils.getItemSpName(e.id)});this._view.nodeContainer.children[0].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=_.default.instance.getSprite(S.ResType.main,A.Utils.getArrRandomItem(e));for(var t=["Icons-174_Weed"],n=0;n<40;n++){var i=n+1401;d.default.instance.findItem(i).length>0&&t.push(A.Utils.getItemSpName(i))}for(var a in d.default.instance.meadowData.animalDepot)t.push("char-char_"+a);d.default.instance.meadowData.animalList.forEach(function(e){e.id&&t.push("char-char_"+e.id)}),this._view.nodeContainer.children[1].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=_.default.instance.getSprite(S.ResType.main,A.Utils.getArrRandomItem(t));var o=[501,502,503,504,601,602,603,604,605,606,607,608,609];d.default.instance.planData.skillLv[l.PlanType.fish]>0&&o.push(610);var r=[401,407,402,403,404,405,406];for(n=0;n<r.length;n++)d.default.instance.findItem(r[n])[0].quality<5&&o.push(r[n]);this._view.nodeContainer.children[2].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=_.default.instance.getSprite(S.ResType.main,A.Utils.getItemSpName(A.Utils.getArrRandomItem(o)));var s=["Icons-012_Bell"];d.default.instance.achievementData.randomQuest.forEach(function(e){s.push("char-char_"+e.charId)}),this._view.nodeContainer.children[3].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=_.default.instance.getSprite(S.ResType.main,A.Utils.getArrRandomItem(s));var c=v.ShopMgr.instance.getAdvShopList(-1).map(function(e){return A.Utils.getItemSpName(e.id)});this._view.nodeContainer.children[4].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=_.default.instance.getSprite(S.ResType.main,A.Utils.getArrRandomItem(c))},t.instance=null,n=o([G],t)}(cc.Component));n.default=V,cc._RF.pop()},{"../interface/holiday_data":"holiday_data","../interface/plan_data":"plan_data","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/festival_manager":"festival_manager","../manager/game_manager":"game_manager","../manager/guide_manager":"guide_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/reddot_manager":"reddot_manager","../manager/resources_manager":"resources_manager","../manager/shop_manager":"shop_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/ground_ui_view":"ground_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./adventure_ui":"adventure_ui","./alchemy_ui":"alchemy_ui","./building_ui":"building_ui","./collection_ui":"collection_ui","./farm_match_ui":"farm_match_ui","./food_match_ui":"food_match_ui","./holiday_ui":"holiday_ui","./market_ui":"market_ui","./meadow_ui":"meadow_ui","./menu_ui":"menu_ui","./quest_ui":"quest_ui","./shop_ui":"shop_ui","./switch_mask_ui":"switch_mask_ui","./workshop_ui":"workshop_ui"}],guide_manager:[function(e,t,n){"use strict";cc._RF.push(t,"47c3cHQ6Y9BKIv1fO5eb3It","guide_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.GuideStep=n.GuideMgr=void 0;var i,a=e("../ui/field_ui"),o=e("../ui/friend_ui"),r=e("../ui/ground_ui"),l=e("../ui/menu_ui"),s=e("../ui/sale_ui"),c=e("../ui/talk_ui"),d=e("../utils/config"),u=e("../utils/emmiter"),h=e("../utils/enum"),p=e("../utils/message"),f=e("../utils/utils"),m=e("./audio_manager"),g=e("./build_manager"),_=e("./dynamic_data_manager"),v=e("./effect_manager"),y=e("./game_manager"),b=e("./json_manager"),w=e("./language_manager"),C=e("./ui_manager"),S=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){u.Emitter.register(p.MessageType.checkGuide,this.onCheckCurGuideIsDone,this),u.Emitter.register(p.MessageType.onDonePlot,this.onCheckCurGuideIsDone,this),u.Emitter.register(p.MessageType.doneGuide,this.onCheckCurGuideIsDone,this),u.Emitter.register(p.MessageType.doneGuideByType,this.onDoneGuide,this),u.Emitter.register(p.MessageType.onItemChangeAlert,this.onCheckCurGuideIsDone,this),u.Emitter.register(p.MessageType.onDoneQuest,this.onCheckCurGuideIsDone,this),u.Emitter.register(p.MessageType.onSaleItem,this.onCheckCurGuideIsDone,this),u.Emitter.register(p.MessageType.friendAlert,this.onCheckCurGuideIsDone,this),u.Emitter.register(p.MessageType.onKillMonster,this.onCheckCurGuideIsDone,this)},e.prototype.isInGuide=function(){return _.default.instance.recordData.guide>=0},e.prototype.getGuideStr=function(){var e=_.default.instance.recordData.guide;if(-1==e){var t=_.default.instance.recordData.load.findIndex(function(e){return e>0});if(-1!=t){var n=[1e4,35e3,1e5][t]*Math.pow(1.05,_.default.instance.recordData.load[t]-1);return n=Math.floor(n),w.default.GetText("\u8fd8\u6b3e\u76ee\u6807",n,t+1)}return null}return b.default.instance.getDataByName("plot")["guide_"+e].content},e.prototype.onCheckCurGuideIsDone=function(){var e=_.default.instance.recordData.guide;if(-1!=e){var t=_.default.instance.recordData.donePlot,n=_.default.instance.allFieldData,i=_.default.instance.allFriendData,a=!1;switch(e){case 0:t.includes(101)&&(a=!0);break;case 1:g.BuildMgr.instance.getItemTotalNum(217)>=3&&(a=!0);break;case 2:n.list.some(function(e){return e.seed})&&(a=!0);break;case 3:n.list.some(function(e){return e.water})&&(a=!0);break;case 5:_.default.instance.planData.planList.some(function(e){return e})&&(a=!0);break;case 7:t.includes(401)&&(a=!0);case 8:_.default.instance.recordData.doneQuest>0&&(a=!0,C.default.instance.openUI(c.default,{name:d.Config.uiName.talkUI,param:[651]}));break;case 9:t.includes(301)&&(a=!0);break;case 10:g.BuildMgr.instance.getItemTotalNum(505)>=4&&(a=!0);break;case 12:_.default.instance.allSaleData.itemSaleData[17]&&_.default.instance.allSaleData.itemSaleData[17]>=3&&(C.default.instance.openUI(c.default,{name:d.Config.uiName.talkUI,param:[751]}),a=!0);break;case 13:t.includes(501)&&(a=!0);break;case 14:for(var o in i.friendMap)if(i.friendMap[o].quality>=1){a=!0;break}break;case 15:_.default.instance.recordData.killMonster>=10&&(C.default.instance.openUI(c.default,{name:d.Config.uiName.talkUI,param:[801]}),a=!0);break;case 16:t.includes(201)&&(a=!0);break;case 17:for(var r=0;r<_.default.instance.itemDepot.length;r++)(o=_.default.instance.itemDepot[r].id)>1500&&o<1550&&(a=!0);break;case 21:_.default.instance.meadowData.animalList.some(function(e){return e.id})&&(a=!0)}a&&(m.default.instance.playAudioHard("usePosion"),C.default.instance.LoadTipsByStr(w.default.GetText("\u76ee\u6807\u8fdb\u5ea6")+"\uff08"+(_.default.instance.recordData.guide+1)+"/23\uff09"),_.default.instance.recordData.guide++,u.Emitter.fire(p.MessageType.doneGuide))}},e.prototype.onDoneGuide=function(e,t){var n=_.default.instance.recordData.guide;if(-1!=n){if(22==n&&t==n)return m.default.instance.playAudioHard("newSeason"),C.default.instance.LoadTipsByStr(w.default.GetText("\u76ee\u6807\u5168\u90e8\u5b8c\u6210")+"\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"),_.default.instance.recordData.guide=-1,u.Emitter.fire(p.MessageType.doneGuide),void C.default.instance.openUI(c.default,{name:d.Config.uiName.talkUI,param:[901]});if(t==n){switch(m.default.instance.playAudioHard("usePosion"),C.default.instance.LoadTipsByStr(w.default.GetText("\u76ee\u6807\u8fdb\u5ea6")+"\uff08"+(_.default.instance.recordData.guide+1)+"/23\uff09"),t){case i.dayby:C.default.instance.openUI(c.default,{name:d.Config.uiName.talkUI,param:[151]});break;case i.onFindDone:C.default.instance.openUI(c.default,{name:d.Config.uiName.talkUI,param:[601]});break;case i.upgrade:C.default.instance.openUI(c.default,{name:d.Config.uiName.talkUI,param:[701]})}_.default.instance.recordData.guide++,u.Emitter.fire(p.MessageType.doneGuide)}}},e.prototype.onSkipGuide=function(){m.default.instance.playAudioHard("usePosion");var e=[null,null,null,151,null,601,null,651,null,null,701,751,null,null,801,null,null,null,null,null,null,901];e[_.default.instance.recordData.guide-1]&&C.default.instance.openUI(c.default,{name:d.Config.uiName.talkUI,param:[e[_.default.instance.recordData.guide-1]]}),22==_.default.instance.recordData.guide?(C.default.instance.LoadTipsByStr(w.default.GetText("\u76ee\u6807\u5168\u90e8\u5b8c\u6210")+"\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"),_.default.instance.recordData.guide=-1):(C.default.instance.LoadTipsByStr(w.default.GetText("\u76ee\u6807\u8fdb\u5ea6")+"\uff08"+(_.default.instance.recordData.guide+1)+"/23\uff09"),_.default.instance.recordData.guide++),u.Emitter.fire(p.MessageType.doneGuide)},e.prototype.getFunctionIsOpen=function(e){var t=_.default.instance.recordData.guide;switch(e){case h.FunctionType.shop:return!0;case h.FunctionType.sale:return-1==t||t>11;case h.FunctionType.friend:return-1==t||t>13;case h.FunctionType.meadow:return-1==t||t>15;case h.FunctionType.build:return-1==t||t>8;case h.FunctionType.quest:return-1==t||t>6;case h.FunctionType.adventure:return-1==t||t>12;case h.FunctionType.collection:return _.default.instance.shopData.homeLv>=2;case h.FunctionType.vip:return!0}},e.prototype.showGuide=function(){switch(_.default.instance.recordData.guide){case 0:C.default.instance.checkUIIsOpen(r.default)?v.default.instance.createEffect("guide",r.default.instance.getMenuPos(0)):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(3));break;case 1:C.default.instance.checkUIIsOpen(r.default)?(C.default.instance.LoadTipsByStr(w.default.GetText("\u6559\u7a0b\u63d0\u793a1")),v.default.instance.createEffect("guide",r.default.instance.getMenuPos(0))):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(3));break;case 2:case 3:C.default.instance.checkUIIsOpen(a.default)?v.default.instance.createEffect("guide",a.default.instance.getSeedPos()):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(2));break;case 4:y.default.instance.status==y.GameStatue.pause?v.default.instance.createEffect("guide",f.Utils.getNodeUsePos(l.default.instance._view.btnPause.node)):C.default.instance.LoadTipsByStr(w.default.GetText("\u6559\u7a0b\u63d0\u793a4"));break;case 5:v.default.instance.createEffect("guide",f.Utils.getNodeUsePos(l.default.instance._view.btnPlan.node));break;case 6:y.default.instance.status==y.GameStatue.pause?v.default.instance.createEffect("guide",f.Utils.getNodeUsePos(l.default.instance._view.btnPause.node)):C.default.instance.LoadTipsByStr(w.default.GetText("\u6559\u7a0b\u63d0\u793a6"));break;case 7:C.default.instance.checkUIIsOpen(r.default)?v.default.instance.createEffect("guide",r.default.instance.getMenuPos(3)):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(3));break;case 8:C.default.instance.checkUIIsOpen(r.default)?(C.default.instance.LoadTipsByStr(w.default.GetText("\u6559\u7a0b\u63d0\u793a8")),v.default.instance.createEffect("guide",r.default.instance.getMenuPos(3))):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(3));break;case 9:C.default.instance.checkUIIsOpen(r.default)?v.default.instance.createEffect("guide",r.default.instance.getMenuPos(2)):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(3));break;case 10:C.default.instance.LoadTipsByStr(w.default.GetText("\u6559\u7a0b\u63d0\u793a10"));break;case 11:C.default.instance.checkUIIsOpen(r.default)?v.default.instance.createEffect("guide",r.default.instance.getMenuPos(2)):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(3));break;case 12:C.default.instance.checkUIIsOpen(s.default)?v.default.instance.createEffect("guide",f.Utils.getNodeUsePos(s.default.instance._view.nodeContainer.children[0])):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(1));break;case 13:case 14:C.default.instance.checkUIIsOpen(r.default)?v.default.instance.createEffect("guide",r.default.instance.getMenuPos(4)):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(3));break;case 15:C.default.instance.checkUIIsOpen(o.default)?C.default.instance.LoadTipsByStr(w.default.GetText("\u6559\u7a0b\u63d0\u793a15")):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(0));break;case 16:C.default.instance.checkUIIsOpen(r.default)?v.default.instance.createEffect("guide",r.default.instance.getMenuPos(1)):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(3));break;case 17:C.default.instance.checkUIIsOpen(r.default)?v.default.instance.createEffect("guide",r.default.instance.getMenuPos(4)):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(3));break;case 18:case 20:case 21:C.default.instance.checkUIIsOpen(r.default)?v.default.instance.createEffect("guide",r.default.instance.getMenuPos(1)):v.default.instance.createEffect("guide",l.default.instance.getMenuPos(3));break;case 19:C.default.instance.LoadTipsByStr(w.default.GetText("\u6559\u7a0b\u63d0\u793a19"));break;case 22:C.default.instance.LoadTipsByStr(w.default.GetText("\u6559\u7a0b\u63d0\u793a22"))}},e._instance=null,e}();n.GuideMgr=S,function(e){e[e.dayby=4]="dayby",e[e.onFindDone=6]="onFindDone",e[e.upgrade=11]="upgrade",e[e.addEgg=18]="addEgg",e[e.eggBroken=19]="eggBroken",e[e.onFoodAnima=20]="onFoodAnima",e[e.animalProduct=22]="animalProduct"}(i=n.GuideStep||(n.GuideStep={})),cc._RF.pop()},{"../ui/field_ui":"field_ui","../ui/friend_ui":"friend_ui","../ui/ground_ui":"ground_ui","../ui/menu_ui":"menu_ui","../ui/sale_ui":"sale_ui","../ui/talk_ui":"talk_ui","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./audio_manager":"audio_manager","./build_manager":"build_manager","./dynamic_data_manager":"dynamic_data_manager","./effect_manager":"effect_manager","./game_manager":"game_manager","./json_manager":"json_manager","./language_manager":"language_manager","./ui_manager":"ui_manager"}],header_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"02760FmN6pCc45XTijLgyi0","header_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeProgress=null,this.itemMoney=null,this.itemPoint=null,this.btnSwitch=null,this.labWeather=null,this.labDate=null,this.sprSeason=null,this.sprDay=null}return e.prototype.initView=function(e){var t,n,i,a,o;this.content=cc.find("content",e),this.nodeProgress=cc.find("content/progressBar/nodeProgress",e),this.itemMoney=cc.find("content/itemMoney",e),this.itemPoint=cc.find("content/itemPoint",e),this.btnSwitch=null===(t=cc.find("content/btnSwitch",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labWeather=null===(n=cc.find("content/labWeather",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labDate=null===(i=cc.find("content/labDate",e))||void 0===i?void 0:i.getComponent(cc.Label),this.sprSeason=null===(a=cc.find("content/sprSeason",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprDay=null===(o=cc.find("content/sprDay",e))||void 0===o?void 0:o.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.content=null,this.nodeProgress=null,this.itemMoney=null,this.itemPoint=null,this.btnSwitch=null,this.labWeather=null,this.labDate=null,this.sprSeason=null,this.sprDay=null},e}();n.default=i,cc._RF.pop()},{}],header_ui:[function(e,t,n){"use strict";cc._RF.push(t,"f749dFgglVNqruMXaVluVE0","header_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/dynamic_data_manager"),l=e("../manager/game_manager"),s=e("../manager/language_manager"),c=e("../manager/resources_manager"),d=e("../ui_view/panel/header_ui_view"),u=e("../utils/emmiter"),h=e("../utils/enum"),p=e("../utils/message"),f=e("../utils/utils"),m=cc._decorator,g=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new d.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._bindEvent()},t.prototype._bindEvent=function(){u.Emitter.register(p.MessageType.moneyChange,this.refreshMoney,this),u.Emitter.register(p.MessageType.pointChange,this.refreshPoint,this),this._view.btnSwitch.node.on("click",this.onClickSwitch,this)},t.prototype.refreshDay=function(){var e=Math.floor(r.default.instance.day/30)%4,t=r.default.instance.day%30;this._view.labDate.string=s.default.GetText("\u7b2c\u51e0\u5e74",l.default.instance.getYear()+1)+"\n"+s.default.GetText(["\u6625\u5b63","\u590f\u5b63","\u79cb\u5b63","\u51ac\u5b63"][e])+(t+1)+s.default.GetText("\u5929");var n=s.default.GetText(3==e?"\u96ea":"\u96e8");this._view.labWeather.string=r.default.instance.rain?n:s.default.GetText("\u6674"),this.refreshMoney(),this.refreshPoint(),this._view.sprSeason.spriteFrame=c.default.instance.getSprite(h.ResType.main,["Icons-106_Dandelion","food-watermelon","food-wheat","food-fan-ramen"][e])},t.prototype.refreshMoney=function(){this._view.itemMoney.getChildByName("label").getComponent(cc.Label).string=Math.floor(r.default.instance.money)+""},t.prototype.refreshPoint=function(){this._view.itemPoint.getChildByName("label").getComponent(cc.Label).string=Math.floor(r.default.instance.point)+""},t.prototype.refreshProgressDay=function(){this._view.sprDay.spriteFrame=c.default.instance.getSprite(h.ResType.main,"timeSpr-timeSpr-"+Math.floor(36-r.default.instance.time/60*36))},t.prototype.getMoneyEffect=function(){return f.Utils.getNodeUsePos(this._view.itemMoney)},t.prototype.getPointEffect=function(){return f.Utils.getNodeUsePos(this._view.itemPoint)},t.prototype.onClickSwitch=function(){80==this._view.content.x?cc.tween(this._view.content).to(.5,{x:0},cc.easeInOut(2)).start():cc.tween(this._view.content).to(.5,{x:80},cc.easeInOut(2)).start()},t.instance=null,n=o([g],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../ui_view/panel/header_ui_view":"header_ui_view","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils"}],help_manager:[function(e,t,n){"use strict";cc._RF.push(t,"4fb25U8ptFL9KpBRbywe2ec","help_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.limitKeyType=void 0;var i=function(){function e(){this.limits={},this.debounceMap={}}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.rateLimit=function(e,t,n){var i=this;return void 0===n&&(n=1e3),function(){var a=Date.now(),o=i.limits[e];if(!o||a-o>=n)return i.limits[e]=a,t()}},e.prototype.debounce=function(e,t,n){var i=this;void 0===n&&(n=50),clearTimeout(this.debounceMap[e]),this.debounceMap[e]=setTimeout(function(){clearTimeout(i.debounceMap[e]),delete i.debounceMap[e],t()},n)},e.prototype.clearDebouncer=function(e){clearTimeout(this.debounceMap[e]),delete this.debounceMap[e]},e._instance=null,e}();n.default=i,function(e){e[e.fieldRefresh=1]="fieldRefresh",e[e.saleRefresh=2]="saleRefresh",e[e.marketRefresh=3]="marketRefresh",e[e.menuReddot=4]="menuReddot"}(n.limitKeyType||(n.limitKeyType={})),cc._RF.pop()},{}],help_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"e3d10rtKm9J17eZgrufTT/P","help_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodePageList=[],this.nodeReactList=[],this.nodeMask=null,this.nodePauseRedDot=null,this.nodeMask=null,this.nodeMask=null,this.nodeMask=null,this.nodeMask=null,this.nodeMask=null,this.nodeMask=null,this.nodeMask=null,this.btnMask=null,this.btnGo=null,this.labLanList=[],this.sprGo=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v,y,b,w,C;this.content=cc.find("content",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodePageList[2]=cc.find("content/nodePageList2",e),this.nodePageList[3]=cc.find("content/nodePageList3",e),this.nodePageList[4]=cc.find("content/nodePageList4",e),this.nodePageList[5]=cc.find("content/nodePageList5",e),this.nodePageList[6]=cc.find("content/nodePageList6",e),this.nodePageList[7]=cc.find("content/nodePageList7",e),this.nodeReactList[0]=cc.find("content/nodePageList0/nodeReactList0",e),this.nodeReactList[0]=cc.find("content/nodePageList1/nodeReactList0",e),this.nodeReactList[0]=cc.find("content/nodePageList2/nodeReactList0",e),this.nodeReactList[0]=cc.find("content/nodePageList3/nodeReactList0",e),this.nodeReactList[0]=cc.find("content/nodePageList4/nodeReactList0",e),this.nodeReactList[0]=cc.find("content/nodePageList5/nodeReactList0",e),this.nodeReactList[0]=cc.find("content/nodePageList6/nodeReactList0",e),this.nodeReactList[0]=cc.find("content/nodePageList7/nodeReactList0",e),this.nodeMask=cc.find("content/nodePageList0/nodeReactList0/nodeMask",e),this.nodePauseRedDot=cc.find("content/nodePageList0/btnGo/nodePauseRedDot",e),this.nodeMask=cc.find("content/nodePageList1/nodeReactList0/nodeMask",e),this.nodeMask=cc.find("content/nodePageList2/nodeReactList0/nodeMask",e),this.nodeMask=cc.find("content/nodePageList3/nodeReactList0/nodeMask",e),this.nodeMask=cc.find("content/nodePageList4/nodeReactList0/nodeMask",e),this.nodeMask=cc.find("content/nodePageList5/nodeReactList0/nodeMask",e),this.nodeMask=cc.find("content/nodePageList6/nodeReactList0/nodeMask",e),this.nodeMask=cc.find("content/nodePageList7/nodeReactList0/nodeMask",e),this.btnMask=null===(t=cc.find("content/btnMask",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnGo=null===(n=cc.find("content/nodePageList0/btnGo",e))||void 0===n?void 0:n.getComponent(cc.Button),this.labLanList[0]=null===(i=cc.find("content/nodePageList0/labLanList0",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labLanList[1]=null===(a=cc.find("content/nodePageList0/labLanList1",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labLanList[2]=null===(o=cc.find("content/nodePageList0/labLanList2",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labLanList[3]=null===(r=cc.find("content/nodePageList0/labLanList3",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[4]=null===(l=cc.find("content/nodePageList1/labLanList4",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[5]=null===(s=cc.find("content/nodePageList1/labLanList5",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[6]=null===(c=cc.find("content/nodePageList1/labLanList6",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[7]=null===(d=cc.find("content/nodePageList2/labLanList7",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[8]=null===(u=cc.find("content/nodePageList2/labLanList8",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[9]=null===(h=cc.find("content/nodePageList3/labLanList9",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labLanList[10]=null===(p=cc.find("content/nodePageList4/labLanList10",e))||void 0===p?void 0:p.getComponent(cc.Label),this.labLanList[11]=null===(f=cc.find("content/nodePageList4/labLanList11",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labLanList[12]=null===(m=cc.find("content/nodePageList5/labLanList12",e))||void 0===m?void 0:m.getComponent(cc.Label),this.labLanList[13]=null===(g=cc.find("content/nodePageList5/labLanList13",e))||void 0===g?void 0:g.getComponent(cc.Label),this.labLanList[14]=null===(_=cc.find("content/nodePageList5/labLanList14",e))||void 0===_?void 0:_.getComponent(cc.Label),this.labLanList[15]=null===(v=cc.find("content/nodePageList6/labLanList15",e))||void 0===v?void 0:v.getComponent(cc.Label),this.labLanList[16]=null===(y=cc.find("content/nodePageList6/labLanList16",e))||void 0===y?void 0:y.getComponent(cc.Label),this.labLanList[17]=null===(b=cc.find("content/nodePageList7/labLanList17",e))||void 0===b?void 0:b.getComponent(cc.Label),this.labLanList[18]=null===(w=cc.find("content/nodePageList7/labLanList18",e))||void 0===w?void 0:w.getComponent(cc.Label),this.sprGo=null===(C=cc.find("content/nodePageList0/btnGo/sprGo",e))||void 0===C?void 0:C.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.content=null,this.nodePageList=[],this.nodeReactList=[],this.nodeMask=null,this.nodePauseRedDot=null,this.nodeMask=null,this.nodeMask=null,this.nodeMask=null,this.nodeMask=null,this.nodeMask=null,this.nodeMask=null,this.nodeMask=null,this.btnMask=null,this.btnGo=null,this.labLanList=[],this.sprGo=null},e}();n.default=i,cc._RF.pop()},{}],help_ui:[function(e,t,n){"use strict";cc._RF.push(t,"e79a2DAi0dPzZNhV/Eoly3L","help_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/language_manager"),c=e("../ui_view/panel/help_ui_view"),d=cc._decorator,u=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new c.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){this._view.labLanList.forEach(function(e,t){e.string=s.default.GetText("\u5e2e\u52a9"+t)})},t.prototype._bindEvent=function(){this._view.btnMask.node.on("click",this.hideUI,this)},t.prototype.showUI=function(e){l.default.instance.playAudio("paper3"),r.default.instance.fadeShowDialog(this._view.content),this._view.nodePageList.forEach(function(e){return e.active=!1}),this._view.nodePageList[e].active=!0},t.prototype.hideUI=function(){l.default.instance.playAudio("paper2"),this._view.content.active=!1},t.instance=null,n=o([u],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/language_manager":"language_manager","../ui_view/panel/help_ui_view":"help_ui_view"}],holiday_data:[function(e,t,n){"use strict";cc._RF.push(t,"59aaarYbXZL7IDitPHDM0L7","holiday_data"),Object.defineProperty(n,"__esModule",{value:!0}),n.HolidayType=void 0,function(e){e[e.marketDay=1]="marketDay",e[e.bestChef=2]="bestChef",e[e.bestFarmer=4]="bestFarmer",e[e.floarr=5]="floarr",e[e.animalFight=6]="animalFight",e[e.anniversary=7]="anniversary",e[e.bestFisher=8]="bestFisher",e[e.time=9]="time",e[e.theBestChef=10]="theBestChef",e[e.theBestFarmer=11]="theBestFarmer",e[e.theChampion=12]="theChampion"}(n.HolidayType||(n.HolidayType={})),cc._RF.pop()},{}],holiday_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"0c28dM7CCxGhYzJ8nR2+hNZ","holiday_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.nodeSceneList=[],this.itemShop=null,this.itemShop=null,this.itemShop=null,this.itemShop=null,this.itemGift=null,this.itemGift=null,this.itemGift=null,this.itemGift=null,this.btnGameList=[],this.labLanList=[],this.sprBg=null,this.sprRole=null,this.sprRole=null,this.sprRole=null,this.sprRole=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeContainer=cc.find("content/nodeContainer",e),this.nodeSceneList[0]=cc.find("content/nodeSceneList0",e),this.nodeSceneList[1]=cc.find("content/nodeSceneList1",e),this.nodeSceneList[2]=cc.find("content/nodeSceneList2",e),this.nodeSceneList[3]=cc.find("content/nodeSceneList3",e),this.itemShop=cc.find("content/nodeContainer/itemShop",e),this.itemShop=cc.find("content/nodeContainer/itemShop",e),this.itemShop=cc.find("content/nodeContainer/itemShop",e),this.itemShop=cc.find("content/nodeContainer/itemShop",e),this.itemGift=cc.find("content/nodeSceneList0/itemGift",e),this.itemGift=cc.find("content/nodeSceneList1/itemGift",e),this.itemGift=cc.find("content/nodeSceneList2/itemGift",e),this.itemGift=cc.find("content/nodeSceneList3/itemGift",e),this.btnGameList[0]=null===(t=cc.find("content/nodeSceneList0/btnGameList0",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnGameList[1]=null===(n=cc.find("content/nodeSceneList1/btnGameList1",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnGameList[2]=null===(i=cc.find("content/nodeSceneList2/btnGameList2",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnGameList[3]=null===(a=cc.find("content/nodeSceneList3/btnGameList3",e))||void 0===a?void 0:a.getComponent(cc.Button),this.labLanList[0]=null===(o=cc.find("content/labLanList0",e))||void 0===o?void 0:o.getComponent(cc.Label),this.sprBg=null===(r=cc.find("content/sprBg",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprRole=null===(l=cc.find("content/nodeSceneList0/sprRole",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.sprRole=null===(s=cc.find("content/nodeSceneList1/sprRole",e))||void 0===s?void 0:s.getComponent(cc.Sprite),this.sprRole=null===(c=cc.find("content/nodeSceneList2/sprRole",e))||void 0===c?void 0:c.getComponent(cc.Sprite),this.sprRole=null===(d=cc.find("content/nodeSceneList3/sprRole",e))||void 0===d?void 0:d.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.nodeSceneList=[],this.itemShop=null,this.itemShop=null,this.itemShop=null,this.itemShop=null,this.itemGift=null,this.itemGift=null,this.itemGift=null,this.itemGift=null,this.btnGameList=[],this.labLanList=[],this.sprBg=null,this.sprRole=null,this.sprRole=null,this.sprRole=null,this.sprRole=null},e}();n.default=i,cc._RF.pop()},{}],holiday_ui:[function(e,t,n){"use strict";cc._RF.push(t,"e31adNQ7CVD2JknccL1/YNn","holiday_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_shop"),l=e("../manager/action_manager"),s=e("../manager/audio_manager"),c=e("../manager/dynamic_data_manager"),d=e("../manager/language_manager"),u=e("../manager/pool_manager"),h=e("../manager/resources_manager"),p=e("../manager/shop_manager"),f=e("../manager/ui_manager"),m=e("../ui_view/panel/holiday_ui_view"),g=e("../utils/config"),_=e("../utils/emmiter"),v=e("../utils/enum"),y=e("../utils/message"),b=e("./game_animal_ui"),w=e("./game_fish_ui"),C=e("./game_flower_ui"),S=e("./game_yang_ui"),L=e("./switch_mask_ui"),A=e("./talk_ui"),k=cc._decorator,T=k.ccclass,M=(k.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new m.default,t.festivalType=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u8282\u65e5\u5e86\u5178"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.btnGameList.forEach(function(t){s.default.instance.playAudio("click"),t.node.on("click",e.onClickGameBtn,e)})},t.prototype.showUI=function(e){var t=this;this.festivalType=e,l.default.instance.popOut(this._view.content,this._view.nodeMask),this.refreshShopList();var n=c.default.instance.recordData.donePlot,i=[];n.includes(2301)||0!=e||i.push(2301),n.includes(2401)||1!=e||i.push(2401),n.includes(2501)||2!=e||i.push(2501),n.includes(2601)||3!=e||i.push(2601),i.length>0&&f.default.instance.openUI(A.default,{name:g.Config.uiName.talkUI,param:i},301),h.default.instance.getBackGround("hefst ("+(e+1)+")").then(function(e){t._view.sprBg.spriteFrame=e}),this._view.nodeSceneList.forEach(function(t,n){t.active=n==e,t.getChildByName("sprRole").getComponent(cc.Sprite).spriteFrame=h.default.instance.getSprite(v.ResType.main,"role_"+c.default.instance.char)})},t.prototype.refreshShopList=function(){u.default.instance.removeObjByContainer(this._view.nodeContainer);for(var e=p.ShopMgr.instance.getFestivalShopItem(this.festivalType),t=0;t<e.length;t++)u.default.instance.createObjectByName("itemShop",this._view.nodeContainer).getComponent(r.default).init(t,e[t])},t.prototype.hideUI=function(){s.default.instance.playAudio("paper2"),this._view.content.active=!1,_.Emitter.fire(y.MessageType.gameDone)},t.prototype.onClickGameBtn=function(){var e=this;c.default.instance.festivalData.game.reward?f.default.instance.LoadTipsByStr(d.default.GetText("\u5df2\u7ecf\u73a9\u8fc7")):L.default.instance.onSwitch(function(){switch(e.festivalType){case 0:f.default.instance.openUI(C.default,{name:g.Config.uiName.gameFlowerUI});break;case 1:f.default.instance.openUI(b.default,{name:g.Config.uiName.gameAnimalUI});break;case 2:f.default.instance.openUI(S.default,{name:g.Config.uiName.gameYangUI});break;case 3:f.default.instance.openUI(w.default,{name:g.Config.uiName.gameFishUI})}L.default.instance.endSwitch()})},t.instance=null,n=o([T],t)}(cc.Component));n.default=M,cc._RF.pop()},{"../item/item_shop":"item_shop","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/shop_manager":"shop_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/holiday_ui_view":"holiday_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","./game_animal_ui":"game_animal_ui","./game_fish_ui":"game_fish_ui","./game_flower_ui":"game_flower_ui","./game_yang_ui":"game_yang_ui","./switch_mask_ui":"switch_mask_ui","./talk_ui":"talk_ui"}],i_entity:[function(e,t,n){"use strict";cc._RF.push(t,"1a0a2pX5qxIG56f/LZfr08/","i_entity"),Object.defineProperty(n,"__esModule",{value:!0}),n.IEntity=void 0;var i=e("../manager/friend_manager"),a=e("../manager/game_manager"),o=e("../manager/json_manager"),r=e("../ui/friend_ui"),l=function(){function e(e){this.id=0,this._hp=0,this._info=null,this.id=e,this.hp=this.getMaxHp()}return Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},set:function(e){e<0&&(e=0),e>this.getMaxHp()&&(e=this.getMaxHp()),this._hp=e},enumerable:!1,configurable:!0}),e.prototype.getAtk=function(){var e,t=100+a.default.instance.getValueByStr("atkRate");(null===(e=r.default.instance.getFirstFriend())||void 0===e?void 0:e.entity.id)==this.id&&(t+=a.default.instance.getValueByStr("firstAtk"));var n=1+i.FriendMgr.instance.getFriendAttr(this.id,1,!1);return this.hp<this.getMaxHp()/3.3&&(t+=a.default.instance.getValueByStr("Hp30AtkAdd")),123==o.default.instance.getDataByName("char")[this.id].skill&&(t+=500),n*t/100+a.default.instance.getValueByStr("moreAtk")},e.prototype.getMaxHp=function(){return 123==o.default.instance.getDataByName("char")[this.id].skill?1:5+2*i.FriendMgr.instance.getFriendAttr(this.id,2,!1)+a.default.instance.getValueByStr("friendMaxHp")},e.prototype.getHpProgress=function(){return this._hp/this.getMaxHp()},e.prototype.getAtkCold=function(){return 1/a.default.instance.getPrecentValueByStr("atkSpd")},e.prototype.onHeal=function(){this.hp+=2*i.FriendMgr.instance.getFriendAttr(this.id,3,!1)},e.prototype.onHealByPotion=function(e){void 0===e&&(e=1),this.hp+=2*(i.FriendMgr.instance.getFriendAttr(this.id,2,!1)+1)*e},e}();n.IEntity=l,cc._RF.pop()},{"../manager/friend_manager":"friend_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../ui/friend_ui":"friend_ui"}],i_monster:[function(e,t,n){"use strict";cc._RF.push(t,"7c16aS31ohA+ZKQKibHHOIx","i_monster");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.IMonster=void 0;var o=e("../manager/dynamic_data_manager"),r=e("../manager/game_manager"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getAtk=function(){return(o.default.instance.allFriendData.area-1+1)*r.default.instance.getPrecentValueByStr("dmgRate")},t.prototype.getMaxHp=function(){return 5+6*Math.pow(o.default.instance.allFriendData.area,2)},t.prototype.getAtkCold=function(){return(1.5-.05*(o.default.instance.allFriendData.area-1))/r.default.instance.getPrecentValueByStr("ememyAtkSpd")},t.prototype.onHeal=function(){},t}(e("./i_entity").IEntity);n.IMonster=l,cc._RF.pop()},{"../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","./i_entity":"i_entity"}],i_state:[function(e,t,n){"use strict";cc._RF.push(t,"0bd3dYHTfNAcomkEVFNdXu4","i_state"),Object.defineProperty(n,"__esModule",{value:!0}),n.IState=void 0;var i=function(){function e(e){this.item=null,this.timer=0,this.item=e}return e.prototype.onEnter=function(){},e.prototype.onExit=function(){},e.prototype.onUpdate=function(){},e}();n.IState=i,cc._RF.pop()},{}],infomation_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"e35c4a1Z1JOBakuf4cjgvBu","infomation_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.btnAvatar=null}return e.prototype.initView=function(e){var t;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.btnAvatar=null===(t=cc.find("content/btnAvatar",e))||void 0===t?void 0:t.getComponent(cc.Button)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.btnAvatar=null},e}();n.default=i,cc._RF.pop()},{}],infomation_ui:[function(e,t,n){"use strict";cc._RF.push(t,"c46fc514etIDYK/OCU9FXRT","infomation_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../ui_view/panel/infomation_ui_view"),c=cc._decorator,d=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new s.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent()},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this)},t.prototype.showUI=function(){l.default.instance.playAudio("paper3"),r.default.instance.popOut(this._view.content)},t.prototype.hideUI=function(){l.default.instance.playAudio("paper2"),this._view.content.active=!1},t.instance=null,n=o([d],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../ui_view/panel/infomation_ui_view":"infomation_ui_view"}],item_achievement_view:[function(e,t,n){"use strict";cc._RF.push(t,"d5777bE/yBGrp8LjylJV0ts","item_achievement_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.btnBuy=null,this.labLanList=[],this.labDec=null,this.labPrice=null,this.labDone=null,this.sprMain=null,this.barHealth=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l;this.btnBuy=null===(t=cc.find("btnBuy",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnBuy/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labDec=null===(i=cc.find("labDec",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labPrice=null===(a=cc.find("labPrice",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labDone=null===(o=cc.find("labDone",e))||void 0===o?void 0:o.getComponent(cc.Label),this.sprMain=null===(r=cc.find("sprMain",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.barHealth=null===(l=cc.find("barHealth",e))||void 0===l?void 0:l.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.btnBuy=null,this.labLanList=[],this.labDec=null,this.labPrice=null,this.labDone=null,this.sprMain=null,this.barHealth=null},e}();n.default=i,cc._RF.pop()},{}],item_achievement:[function(e,t,n){"use strict";cc._RF.push(t,"e7c618GNQxOwJx1VDkomt6S","item_achievement");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/json_manager"),s=e("../manager/language_manager"),c=e("../manager/quest_manager"),d=e("../manager/record_manager"),u=e("../manager/resources_manager"),h=e("../ui_view/item/item_achievement_view"),p=e("../utils/enum"),f=e("../utils/utils"),m=cc._decorator,g=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new h.default,t.id=-1,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnBuy.node.on("click",this.onClick,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList.concat(this._view.labDone),t=["\u9886\u53d6","\u5df2\u9886\u53d6"];e.forEach(function(e,n){e.string=s.default.GetText(t[n])})},t.prototype.init=function(e){this.id=e;var t=l.default.instance.getDataByName("achievement")[e];this._view.labDec.string=f.Utils.getText(s.default.GetText("achievement_name_"+e),t.target),this._view.labPrice.string="P "+t.point,this._view.sprMain.spriteFrame=u.default.instance.getSprite(p.ResType.main,t.sp);var n=d.default.instance.getAchievementProgress(e);this._view.barHealth.progress=n/t.target;var i=c.default.instance.getAchievementStatus(this.id);2==i?(this._view.btnBuy.node.active=!1,this._view.labDone.node.active=!0):(this._view.btnBuy.interactable=1==i,this._view.labDone.node.active=!1,this._view.btnBuy.node.active=!0)},t.prototype.onClick=function(){r.default.instance.playAudio("click_1"),c.default.instance.onRewardAchievement(this.id,this._view.btnBuy.node),this.init(this.id)},o([g],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/quest_manager":"quest_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../ui_view/item/item_achievement_view":"item_achievement_view","../utils/enum":"enum","../utils/utils":"utils"}],item_adventure_view:[function(e,t,n){"use strict";cc._RF.push(t,"6856doZmatJ8YtEdMhoMG98","item_adventure_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.btnMain=null,this.labBtn=null,this.labDec=null,this.labTalk=null,this.sprMain=null,this.rtLabel=null,this.rtDec=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l;this.btnMain=null===(t=cc.find("btnMain",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labBtn=null===(n=cc.find("btnMain/labBtn",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labDec=null===(i=cc.find("labDec",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labTalk=null===(a=cc.find("labTalk",e))||void 0===a?void 0:a.getComponent(cc.Label),this.sprMain=null===(o=cc.find("sprMain",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.rtLabel=null===(r=cc.find("rtLabel",e))||void 0===r?void 0:r.getComponent(cc.RichText),this.rtDec=null===(l=cc.find("rtDec",e))||void 0===l?void 0:l.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.btnMain=null,this.labBtn=null,this.labDec=null,this.labTalk=null,this.sprMain=null,this.rtLabel=null,this.rtDec=null},e}();n.default=i,cc._RF.pop()},{}],item_adventure:[function(e,t,n){"use strict";cc._RF.push(t,"0e155z5oMFPtrf6Sg+dxmQg","item_adventure");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/effect_manager"),c=e("../manager/friend_manager"),d=e("../manager/json_manager"),u=e("../manager/language_manager"),h=e("../manager/quest_manager"),p=e("../manager/resources_manager"),f=e("../ui/adventure_ui"),m=e("../ui_view/item/item_adventure_view"),g=e("../utils/enum"),_=e("../utils/game_config"),v=e("../utils/utils"),y=cc._decorator,b=y.ccclass,w=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new m.default,t.id=-1,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnMain.node.on("click",this.onClick,this),this._view.sprMain.node.on("click",this.onClickDetail,this)},t.prototype.onClickDetail=function(){},t.prototype.init=function(e){this.id=e;var t=l.default.instance.allFriendData.friendMap[this.id],n=d.default.instance.getDataByName("char")[e];this._view.rtLabel.string="<color="+_.GameConfig.QualityColor[t.quality]+"/>["+u.default.GetText("FriendlyStr"+t.quality)+"]</color>"+u.default.GetText("char_name_"+e),this._view.sprMain.spriteFrame=p.default.instance.getSprite(g.ResType.main,"char-char_"+e),this._view.labDec.string=c.FriendMgr.instance.getFriendSkillDec(this.id),this._view.rtDec.string="<img src='"+_.GameConfig.FriendAttrIcon[1]+"' />"+c.FriendMgr.instance.getFriendAttr(e,1)+"  <img src='"+_.GameConfig.FriendAttrIcon[2]+"' />"+c.FriendMgr.instance.getFriendAttr(e,2)+"  <img src='"+_.GameConfig.FriendAttrIcon[3]+"' />"+c.FriendMgr.instance.getFriendAttr(e,3)+" <img src='"+_.GameConfig.FindTypeIcon[n.findType]+"' /> ";var i=h.default.instance.getNextPayPoint(e);this._view.labTalk.string="  "+i,this._view.labTalk.node.color=l.default.instance.point>=i?cc.Color.BLACK:cc.Color.RED,0==t.quality?this._view.labBtn.string=u.default.GetText("\u8ba4\u8bc6"):this._view.labBtn.string=u.default.GetText("\u8bf7\u5ba2")},t.prototype.onClick=function(){s.default.instance.createPartical("love",v.Utils.getNodeUsePos(this._view.btnMain.node)),r.default.instance.playAudio("click_1"),h.default.instance.onPayFriend(this.id),f.default.instance.refreshFriendPage()},o([b],t)}(cc.Component));n.default=w,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/quest_manager":"quest_manager","../manager/resources_manager":"resources_manager","../ui/adventure_ui":"adventure_ui","../ui_view/item/item_adventure_view":"item_adventure_view","../utils/enum":"enum","../utils/game_config":"game_config","../utils/utils":"utils"}],item_amount_choose_view:[function(e,t,n){"use strict";cc._RF.push(t,"1fe9aUjon5CG4Ag9pPr7XZr","item_amount_choose_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeSlider=null,this.btnSale=null,this.labLanList=[],this.labPrice=null,this.labNum=null,this.sprQuality=null,this.sprMain=null,this.rtLabel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l;this.nodeSlider=cc.find("nodeSlider",e),this.btnSale=null===(t=cc.find("btnSale",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnSale/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labPrice=null===(i=cc.find("labPrice",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labNum=null===(a=cc.find("labNum",e))||void 0===a?void 0:a.getComponent(cc.Label),this.sprQuality=null===(o=cc.find("sprQuality",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprMain=null===(r=cc.find("sprMain",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.rtLabel=null===(l=cc.find("rtLabel",e))||void 0===l?void 0:l.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.nodeSlider=null,this.btnSale=null,this.labLanList=[],this.labPrice=null,this.labNum=null,this.sprQuality=null,this.sprMain=null,this.rtLabel=null},e}();n.default=i,cc._RF.pop()},{}],item_amount_choose:[function(e,t,n){"use strict";cc._RF.push(t,"8552cH9sgRN5ZeFaMV0Yc57","item_amount_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/friend_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/resources_manager"),u=e("../manager/sale_manager"),h=e("../ui/pop_text_ui"),p=e("../ui_view/item/item_amount_choose_view"),f=e("../utils/enum"),m=e("../utils/utils"),g=cc._decorator,_=g.ccclass,v=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new p.default,t.data=null,t.cb=null,t.curNum=1,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnSale.node.on("click",this.onClick,this),this._view.nodeSlider.on("slide",this.onSliderChange,this),this._view.sprQuality.node.on("click",this.onClickItem,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u9009\u62e9"];e.forEach(function(e,n){e.string=c.default.GetText(t[n])})},t.prototype.init=function(e,t){this.cb=t,this.data=e;var n=s.default.instance.getDataByName("item")[e.id];this._view.rtLabel.string=c.default.GetText("item_name_"+n.id)+" "+e.num+"\u4e2a",n.food&&n.food.expire&&(this._view.rtLabel.string+="("+n.food.expire+"%"+c.default.GetText("\u8fc7\u671f")+")"),this._view.nodeSlider.getComponent(cc.Slider).progress=0,this.curNum=1,this._view.labNum.string="x"+this.curNum,this._view.labPrice.string="\uffe5"+u.default.instance.getItemPrice(e),this._view.sprQuality.spriteFrame=d.default.instance.getSprite(f.ResType.main,"ui-quality_"+e.quality),this._view.sprMain.spriteFrame=d.default.instance.getSprite(f.ResType.main,m.Utils.getItemSpByAmount(e))},t.prototype.onClick=function(){r.default.instance.playAudio("click"),this.cb&&this.cb({id:this.data.id,quality:this.data.quality,num:this.curNum})},t.prototype.onSliderChange=function(e){e.progress<=0?this.curNum=1:this.curNum=Math.ceil(e.progress*this.data.num),this._view.labNum.string="x"+this.curNum},t.prototype.onClickItem=function(){var e=s.default.instance.getDataByName("item")[this.data.id],t=u.default.instance.getItemNeed(this.data),n=l.FriendMgr.instance.getItemdec(this.data.id,this.data);h.default.instance.showUI(m.Utils.getNodeUsePos(this._view.sprQuality.node),{spr:m.Utils.getItemSpByAmount(this.data),name:c.default.GetText("item_name_"+e.id),dec:n+"("+t.toFixed(0)+"%"+c.default.GetText("\u4eba\u6c14")+")"})},o([_],t)}(cc.Component));n.default=v,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_amount_choose_view":"item_amount_choose_view","../utils/enum":"enum","../utils/utils":"utils"}],item_amount:[function(e,t,n){"use strict";cc._RF.push(t,"d99aa8AprZGn7u3lbLkz9SM","item_amount"),Object.defineProperty(n,"__esModule",{value:!0}),n.RewardType=void 0,function(e){e[e.item=1]="item",e[e.animal=2]="animal",e[e.money=3]="money",e[e.point=4]="point",e[e.friend=5]="friend",e[e.recipe=6]="recipe"}(n.RewardType||(n.RewardType={})),cc._RF.pop()},{}],item_animal_choose_view:[function(e,t,n){"use strict";cc._RF.push(t,"2a7d4InJmlA1ZOOvrP3s+Yp","item_animal_choose_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeChoose=null,this.itemAnimalChooseItem=null,this.itemAnimalChooseItem=null,this.itemAnimalChooseItem=null,this.itemAnimalChooseItem=null,this.btnMain=null,this.labLanList=[],this.labName=null,this.labDec=null,this.labFood=null,this.sprQuality=null,this.sprMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l;this.nodeChoose=cc.find("nodeChoose",e),this.itemAnimalChooseItem=cc.find("nodeChoose/itemAnimalChooseItem",e),this.itemAnimalChooseItem=cc.find("nodeChoose/itemAnimalChooseItem",e),this.itemAnimalChooseItem=cc.find("nodeChoose/itemAnimalChooseItem",e),this.itemAnimalChooseItem=cc.find("nodeChoose/itemAnimalChooseItem",e),this.btnMain=null===(t=cc.find("btnMain",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnMain/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labName=null===(i=cc.find("labName",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labDec=null===(a=cc.find("labDec",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labFood=null===(o=cc.find("labFood",e))||void 0===o?void 0:o.getComponent(cc.Label),this.sprQuality=null===(r=cc.find("sprQuality",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprMain=null===(l=cc.find("sprMain",e))||void 0===l?void 0:l.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.nodeChoose=null,this.itemAnimalChooseItem=null,this.itemAnimalChooseItem=null,this.itemAnimalChooseItem=null,this.itemAnimalChooseItem=null,this.btnMain=null,this.labLanList=[],this.labName=null,this.labDec=null,this.labFood=null,this.sprQuality=null,this.sprMain=null},e}();n.default=i,cc._RF.pop()},{}],item_animal_choose:[function(e,t,n){"use strict";cc._RF.push(t,"89bff2uSdhI048h1KjVQe2W","item_animal_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/game_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/resources_manager"),h=e("../ui/animal_choose_ui"),p=e("../ui/pop_text_ui"),f=e("../ui_view/item/item_animal_choose_view"),m=e("../utils/enum"),g=e("../utils/utils"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new f.default,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._view.initView(this.node),this._view.btnMain.node.on("click",this.onClick,this),this._view.nodeChoose.children.forEach(function(t,n){t.on("click",function(){r.default.instance.playAudio("switch"),e.onClickChoose(t,n)},e)}),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u9009\u62e9"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype.init=function(e){this.id=e,this._view.sprMain.spriteFrame=u.default.instance.getSprite(m.ResType.main,"char-char_"+e);var t=c.default.instance.getDataByName("char")[e];this._view.sprQuality.spriteFrame=u.default.instance.getSprite(m.ResType.main,"ui-q ("+(t.animal.rare-1)+")"),this._view.labName.string=d.default.GetText("char_name_"+e)+"x"+l.default.instance.meadowData.animalDepot[e];var n=l.default.instance.findItem(e+1400)[0];n&&(this._view.labName.string+="("+d.default.GetText("\u86cb")+"x"+n.num+")"),this._view.labDec.string=d.default.GetText("char_dec_"+e),this._view.labFood.string=d.default.GetText("\u9972\u6599")+":"+t.animal.food+" "+d.default.GetText("\u4ea7\u671f")+":"+t.animal.time+d.default.GetText("\u5929"),this._view.nodeChoose.children.forEach(function(e,n){var i=t.animal.product[n];if(i){var a=s.default.instance.getValueByStr("animalProduct");e.active=!0,e.getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,"ui-quality_"+(i[2]||1)),e.getChildByName("sprIcon").getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount(l.default.instance.getItemAmountByArr(i))),e.getChildByName("labnum").getComponent(cc.Label).string="x"+(i[1]+a)}else e.active=!1})},t.prototype.onClick=function(){r.default.instance.playAudio("animal_"+g.Utils.getRandomNumber(6)),h.default.instance.onChoose(this.id)},t.prototype.onClickChoose=function(e,t){var n=c.default.instance.getDataByName("char")[this.id].animal.product[t],i=(c.default.instance.getDataByName("item")[n[0]],g.Utils.getItemSpByAmount(l.default.instance.getItemAmountByArr(n)));p.default.instance.showUI(g.Utils.getNodeUsePos(e),{spr:i,name:d.default.GetText("item_name_"+n),dec:d.default.GetText("item_dec_"+n)})},o([v],t)}(cc.Component));n.default=y,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../ui/animal_choose_ui":"animal_choose_ui","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_animal_choose_view":"item_animal_choose_view","../utils/enum":"enum","../utils/utils":"utils"}],item_animal_game:[function(e,t,n){"use strict";cc._RF.push(t,"e1dfaCdEtRAYLKN1caQlIB1","item_animal_game");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/pool_manager"),l=e("../manager/resources_manager"),s=e("../ui/game_animal_ui"),c=e("../utils/enum"),d=e("../utils/utils"),u=e("./item_food_animal"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=0,t.eatNum=0,t}var n;return a(t,e),n=t,t.prototype.init=function(e){this.id=e,this.eatNum=0,this.node.scale=1,this.node.getComponent(cc.Sprite).spriteFrame=l.default.instance.getSprite(c.ResType.main,"char-char_"+(100+this.id))},t.prototype.onEat=function(){this.eatNum++,this.node.scale=1+.1*this.eatNum,s.default.instance.onAddScore(1)},t.prototype.onDouble=function(){var e=this.id,t=r.default.instance.createObjectByName("itemAnimalGame",s.default.instance._view.nodeContainer);t.getComponent(n).init(e),t.setPosition(this.node.getPosition()),s.default.instance.onAddScore(2)},t.prototype.onNew=function(){var e=d.Utils.getRandomNumber(39)+1,t=r.default.instance.createObjectByName("itemAnimalGame",s.default.instance._view.nodeContainer);t.getComponent(n).init(e),t.setPosition(this.node.getPosition()),s.default.instance.onAddScore(3)},t.prototype.onHit=function(){r.default.instance.removeObject(this.node),s.default.instance.checkEnd(),s.default.instance.onAddScore(-3)},t.prototype.onUpdate=function(e){var t=this.node.getPosition().sub(s.default.instance._view.nodeTargetPos.getPosition()),n=35*(t=t.normalize()).x*e,i=35*t.y*e;this.node.x-=n,this.node.y-=i,this.node.scaleX=t.x<0?-1-.1*this.eatNum:1+.1*this.eatNum},t.prototype.onCollisionEnter=function(e){var t=e.node.getComponent(u.default);if(t)switch(t.onHit(),t.type){case 1:this.onHit();break;case 2:this.onEat();break;case 3:this.onDouble();break;case 4:this.onNew()}},n=o([p],t)}(cc.Component));n.default=f,cc._RF.pop()},{"../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../ui/game_animal_ui":"game_animal_ui","../utils/enum":"enum","../utils/utils":"utils","./item_food_animal":"item_food_animal"}],item_animal:[function(e,t,n){"use strict";cc._RF.push(t,"cce9fwkvR1FRaz6L1OjOMyN","item_animal");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../istate/animal_state"),l=e("../utils/enum"),s=e("../utils/utils"),c=cc._decorator,d=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=null,t.state={},t.currentState=null,t}return a(t,e),t.prototype.onLoad=function(){this.state[l.CharAnimaType.walk]=new r.AnimalMoveState(this),this.state[l.CharAnimaType.atk]=new r.AnimalRushState(this),this.state[l.CharAnimaType.idle]=new r.AnimalIdleState(this)},t.prototype.init=function(e){this.id=e,this.switchState(l.CharAnimaType.idle),this.node.setPosition(cc.v2(-58+s.Utils.getRandomNumber(116),-30+s.Utils.getRandomNumber(60)))},t.prototype.switchState=function(e){null!=this.currentState&&this.currentState.onExit(),this.currentState=this.state[e],this.currentState.onEnter()},t.prototype.getCurState=function(){for(var e in this.state)if(this.currentState==this.state[+e])return+e;return null},t.prototype.onFrameEvent=function(e){this.currentState&&this.currentState.onFrameEvent(e)},t.prototype.onUpdate=function(e){this.currentState&&this.currentState.onUpdate(e)},o([d],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../istate/animal_state":"animal_state","../utils/enum":"enum","../utils/utils":"utils"}],item_bag_view:[function(e,t,n){"use strict";cc._RF.push(t,"58e0dp7eWJK7rgP6bHfHm8S","item_bag_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.labNum=null,this.sprIcon=null}return e.prototype.initView=function(e){var t,n;this.labNum=null===(t=cc.find("labNum",e))||void 0===t?void 0:t.getComponent(cc.Label),this.sprIcon=null===(n=cc.find("sprIcon",e))||void 0===n?void 0:n.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.labNum=null,this.sprIcon=null},e}();n.default=i,cc._RF.pop()},{}],item_bag:[function(e,t,n){"use strict";cc._RF.push(t,"43cf9mihRlD2K5IcCt5+ubS","item_bag");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/json_manager"),s=e("../manager/resources_manager"),c=e("../manager/ui_manager"),d=e("../ui/item_detail_ui"),u=e("../ui_view/item/item_bag_view"),h=e("../utils/config"),p=e("../utils/enum"),f=e("../utils/utils"),m=cc._decorator,g=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new u.default,t.data=null,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this.node.on("click",this.onClick,this),cc.tween(this._view.sprIcon.node).repeatForever(cc.tween().to(.5,{y:1},cc.easeOut(2)).to(1,{y:-1},cc.easeInOut(2)).to(.5,{y:0},cc.easeIn(2))).start()},t.prototype.init=function(e,t){this.data=t,l.default.instance.getDataByName("item")[t.id],this._view.sprIcon.spriteFrame=s.default.instance.getSprite(p.ResType.main,f.Utils.getItemSpByAmount(t)),t.num&&t.num>1?this._view.labNum.string=t.num+"":this._view.labNum.string="",this.node.getComponent(cc.Sprite).spriteFrame=s.default.instance.getSprite(p.ResType.main,"ui-quality_"+t.quality)},t.prototype.onClick=function(){r.default.instance.playAudio("click"),c.default.instance.openUI(d.default,{name:h.Config.uiName.itemDetailUI,param:[this.data,1]})},o([g],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui/item_detail_ui":"item_detail_ui","../ui_view/item/item_bag_view":"item_bag_view","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils"}],item_buff:[function(e,t,n){"use strict";cc._RF.push(t,"1f883R/bAVIYJwpN22OCFc5","item_buff");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/dynamic_data_manager"),l=e("../manager/json_manager"),s=e("../manager/language_manager"),c=e("../manager/resources_manager"),d=e("../ui/pop_text_ui"),u=e("../utils/enum"),h=e("../utils/utils"),p=cc._decorator,f=p.ccclass,m=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=0,t}return a(t,e),t.prototype.onLoad=function(){this.node.on("click",this.onClick,this)},t.prototype.init=function(e){this.id=e;var t=l.default.instance.getDataByName("holiday")[e];this.node.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(u.ResType.main,t.sp)},t.prototype.onClick=function(){var e=l.default.instance.getDataByName("holiday")[this.id],t=s.default.GetText("holiday_dec_"+this.id);this.id<310&&this.id>300?t+=r.default.instance.allSaleData.saleBuff[this.id]:t+="("+r.default.instance.allSaleData.saleBuff[this.id]+s.default.GetText("\u5929")+")",d.default.instance.showUI(h.Utils.getNodeUsePos(this.node),{spr:e.sp,name:s.default.GetText("holiday_name_"+this.id),dec:t})},o([f],t)}(cc.Component));n.default=m,cc._RF.pop()},{"../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../ui/pop_text_ui":"pop_text_ui","../utils/enum":"enum","../utils/utils":"utils"}],item_building_view:[function(e,t,n){"use strict";cc._RF.push(t,"b0a6fLNsSpEsp+h4/II9C0G","item_building_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.btnBuild=null,this.labCostList=[],this.labName=null,this.sprCostList=[]}return e.prototype.initView=function(e){var t,n,i,a,o,r;this.btnBuild=null===(t=cc.find("btnBuild",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labCostList[1]=null===(n=cc.find("labCostList1",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labCostList[0]=null===(i=cc.find("labCostList0",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labName=null===(a=cc.find("labName",e))||void 0===a?void 0:a.getComponent(cc.Label),this.sprCostList[1]=null===(o=cc.find("sprCostList1",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprCostList[0]=null===(r=cc.find("sprCostList0",e))||void 0===r?void 0:r.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.btnBuild=null,this.labCostList=[],this.labName=null,this.sprCostList=[]},e}();n.default=i,cc._RF.pop()},{}],item_building:[function(e,t,n){"use strict";cc._RF.push(t,"b87df2zVDVJca8sYRkG0jEi","item_building");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/build_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/language_manager"),d=e("../manager/resources_manager"),u=e("../ui_view/item/item_building_view"),h=e("../utils/enum"),p=e("../utils/utils"),f=cc._decorator,m=f.ccclass,g=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new u.default,t.index=0,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnBuild.node.on("click",this.onClickBuild,this),this.setLanguage()},t.prototype.setLanguage=function(){this._view.btnBuild.node.getChildByName("label").getComponent(cc.Label).string=c.default.GetText("\u6269\u5efa")},t.prototype.init=function(e){this.index=e;var t=l.BuildMgr.instance.getExpandCost(e),n=l.BuildMgr.instance.getItemTotalNum(t[0].id);switch(this._view.labCostList[0].string=t[0].num+"/"+n,this._view.labCostList[0].node.color=n>=t[0].num?cc.Color.BLACK:cc.Color.RED,this._view.sprCostList[0].spriteFrame=d.default.instance.getSprite(h.ResType.main,p.Utils.getItemSpName(t[0].id)),this._view.labCostList[1].string="x"+t[1].num,this._view.labCostList[1].node.color=s.default.instance.money>=t[1].num?cc.Color.BLACK:cc.Color.RED,e){case h.BuildingExpandType.friend:this._view.labName.string=c.default.GetText("\u670b\u53cb\u5c0f\u5c4b\u6269\u5efa")+"\uff1a"+s.default.instance.allFriendData.friendMax+c.default.GetText("\u4eba")+" -> "+(s.default.instance.allFriendData.friendMax+1)+c.default.GetText("\u4eba")+" ";break;case h.BuildingExpandType.sale:this._view.labName.string=c.default.GetText("\u6446\u644a\u680f\u4f4d\u6269\u5efa")+"\uff1a"+s.default.instance.allSaleData.maxSale+c.default.GetText("\u4e2a")+" -> "+(s.default.instance.allSaleData.maxSale+1)+c.default.GetText("\u4e2a")+" ";break;case h.BuildingExpandType.field:this._view.labName.string=c.default.GetText("\u519c\u7530\u6269\u5efa")+"\uff1a"+s.default.instance.allFieldData.maxField+c.default.GetText("\u5757")+" -> "+(s.default.instance.allFieldData.maxField+1)+c.default.GetText("\u5757")+" ";break;case h.BuildingExpandType.meadow:this._view.labName.string=c.default.GetText("\u7267\u573a\u5c0f\u5c4b\u6269\u5efa")+"\uff1a"+s.default.instance.meadowData.maxNum+c.default.GetText("\u53ea")+" -> "+(s.default.instance.meadowData.maxNum+1)+c.default.GetText("\u53ea")+" ";break;case h.BuildingExpandType.shop:(s.default.instance.shopData.shopLv>=3||s.default.instance.recordData.load.filter(function(e){return 1!=e}).length<3)&&(this.node.active=!1),this._view.labName.string=c.default.GetText("\u5546\u5e97\u5347\u7ea7");break;case h.BuildingExpandType.adv:(s.default.instance.shopData.advLv>=3||s.default.instance.recordData.load.filter(function(e){return 1!=e}).length<3)&&(this.node.active=!1),this._view.labName.string=c.default.GetText("\u516c\u4f1a\u5347\u7ea7");break;case h.BuildingExpandType.home:(s.default.instance.shopData.homeLv>=2||s.default.instance.recordData.load.filter(function(e){return 1!=e}).length<2)&&(this.node.active=!1),this._view.labName.string=c.default.GetText("\u4fee\u7f2e\u5c0f\u5bb6");break;case h.BuildingExpandType.town:(s.default.instance.shopData.townLv>=5||s.default.instance.achievementData.questDone.length<15)&&(this.node.active=!1),this._view.labName.string=c.default.GetText("\u5c0f\u9547\u4fee\u5efa")}},t.prototype.onClickBuild=function(){r.default.instance.playAudio("usePosion"),l.BuildMgr.instance.onExpand(this.index)},o([m],t)}(cc.Component));n.default=g,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/build_manager":"build_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../ui_view/item/item_building_view":"item_building_view","../utils/enum":"enum","../utils/utils":"utils"}],item_char:[function(e,t,n){"use strict";cc._RF.push(t,"1a078G/s6xFtIiWRWlggElo","item_char");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../class/i_entity"),l=e("../istate/char_state"),s=e("../manager/audio_manager"),c=e("../manager/dynamic_data_manager"),d=e("../manager/effect_manager"),u=e("../manager/friend_manager"),h=e("../manager/game_manager"),p=e("../manager/json_manager"),f=e("../manager/language_manager"),m=e("../manager/resources_manager"),g=e("../manager/ui_manager"),_=e("../ui/friend_ui"),v=e("../utils/emmiter"),y=e("../utils/enum"),b=e("../utils/message"),w=e("../utils/utils"),C=cc._decorator,S=C.ccclass,L=C.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeAnima=null,t.barHp=null,t.barAction=null,t._beHitTime=0,t.entity=null,t.state={},t.currentState=null,t._isDeath=!1,t}return a(t,e),t.prototype.onLoad=function(){v.Emitter.register(b.MessageType.onKillMonster,this.onHeal,this),v.Emitter.register(b.MessageType.friendLevelup,this.checkIsSelfLevelup,this),this.nodeAnima.on("click",this.onClickChar,this)},t.prototype.init=function(e,t){this._beHitTime=0,this.state[y.CharAnimaType.walk]=new l.CharMoveState(this),this.state[y.CharAnimaType.atk]=new l.CharAtkState(this),this.state[y.CharAnimaType.hit]=new l.CharBehitState(this),this.state[y.CharAnimaType.defeat]=new l.CharDeathState(this),this.state[y.CharAnimaType.idle]=new l.CharIdleState(this),this.node.opacity=255,this.entity&&this.entity.id==e&&!this._isDeath?this.switchState(y.CharAnimaType.walk):t?(this.entity=new r.IEntity(e),this.entity.hp=t,this.barAction.progress=0,this._isDeath=!1,this.nodeAnima.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(y.ResType.main,"char-char_"+e),this.switchState(y.CharAnimaType.walk),this.barHp.progress=this.entity.getHpProgress()):(this.entity=new r.IEntity(e),this.barAction.progress=0,this._isDeath=!1,this.nodeAnima.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(y.ResType.main,"char-char_"+e),this.switchState(y.CharAnimaType.walk),this.barHp.progress=this.entity.getHpProgress())},t.prototype.onUpdate=function(e){this.currentState&&this.currentState.onUpdate(e),this.entity&&!this.isMonster()&&this.canAtk()&&(this.entity.hp+=this.entity.getMaxHp()*h.default.instance.getValueByStr("autoHeal")/100)},t.prototype.onDeath=function(){this._isDeath||(this._isDeath=!0,this.switchState(y.CharAnimaType.defeat))},t.prototype.switchState=function(e){null!=this.currentState&&this.currentState.onExit(),this.currentState=this.state[e],this.currentState.onEnter()},t.prototype.getCurState=function(){for(var e in this.state)if(this.currentState==this.state[+e])return+e;return null},t.prototype.onFrameEvent=function(e){this.currentState&&this.currentState.onFrameEvent(e)},t.prototype.onAtk=function(){var e,t=this,n=this.getTarget();if(this.entity.getAtk(),w.Utils.luckChance(h.default.instance.getValueByStr("doubleChance"))&&this.checkShowEffect()&&d.default.instance.createLabel(f.default.GetText("\u53cc\u500d"),w.Utils.getNodeUsePos(this.nodeAnima)),(null===(e=n[0])||void 0===e?void 0:e.entity.id)>100&&h.default.instance.getPrecentValueByStr("animalAtk"),n.forEach(function(e){e&&e.beAtk(t.entity.getAtk()/n.length)}),107==p.default.instance.getDataByName("char")[this.entity.id].skill){var i=_.default.instance.getAllFriend(),a=i[0];i.length>1&&i.forEach(function(e){e&&e.hp<a.hp&&(a=e)}),a&&(a.entity.hp+=h.default.instance.getValueByStr("atkHealLowest"),this.checkShowEffect()&&d.default.instance.createEffect("effect_57",w.Utils.getNodeUsePos(a.node)))}this.entity.hp+=h.default.instance.getValueByStr("atkSelfHeal")/100*this.entity.getMaxHp()},t.prototype.beAtk=function(e,t,n){var i,a=this;if(void 0===t&&(t=!0),void 0===n&&(n=!0),!this._isDeath)if(w.Utils.luckChance(h.default.instance.getValueByStr("dadgeChance")))this.checkShowEffect()&&d.default.instance.createLabel(f.default.GetText("\u95ea"),w.Utils.getNodeUsePos(this.nodeAnima));else{if(h.default.instance.checkHaveSkill(119)&&e>this.entity.getMaxHp()/10&&(this.checkShowEffect()&&d.default.instance.createLabel(f.default.GetText("\u9632\u5fa1"),w.Utils.getNodeUsePos(this.nodeAnima)),e=Math.max(this.entity.getMaxHp()/10,1)),h.default.instance.checkHaveSkill(124)&&n){var o=_.default.instance.getAllFriend();e/=o.length,o.forEach(function(t){t!=a&&t.beAtk(e,!1,!1)})}if(this.entity.hp-=e,this.barHp.progress=this.entity.getHpProgress(),this.entity.hp<=0){if(w.Utils.luckChance(h.default.instance.getValueByStr("resistDeathChance")))return this.checkShowEffect()&&d.default.instance.createLabel(f.default.GetText("\u62b5\u5fa1"),w.Utils.getNodeUsePos(this.nodeAnima)),void(this.entity.hp=1);this._isDeath=!0,this.switchState(y.CharAnimaType.defeat)}else if(t){this.switchState(y.CharAnimaType.hit);var r=h.default.instance.getValueByStr("backfire");r>0&&(null===(i=_.default.instance.getMonster())||void 0===i||i.beAtk(e*r/100,!1))}}},t.prototype.canAtk=function(){return!this._isDeath&&this.getCurState()!=y.CharAnimaType.walk},t.prototype.getTarget=function(){return[_.default.instance.getMonster()]},t.prototype.onRemove=function(){this.node.x=-125;var e=this.entity.id;this.entity=null,u.FriendMgr.instance.onDeath(e)},t.prototype.onHeal=function(){this.entity&&(this.checkShowEffect()&&this.barHp.progress<1&&u.FriendMgr.instance.getFriendAttr(this.entity.id,3)>0&&d.default.instance.createEffect("effect_57",w.Utils.getNodeUsePos(this.nodeAnima)),this.entity.onHeal(),this.barHp.progress=this.entity.getHpProgress())},t.prototype.isMonster=function(){if(this.entity)return p.default.instance.getDataByName("char")[this.entity.id].monster},t.prototype.onClickChar=function(){if(s.default.instance.playAudio("sclick_3"),!(this.barHp.progress>=1)){var e=c.default.instance.findItem(2001);e.length>0&&this.entity&&(this.checkShowEffect()&&d.default.instance.createEffect("effect_57",w.Utils.getNodeUsePos(this.nodeAnima)),this.entity.onHealByPotion(e[0].quality),this.barHp.progress=this.entity.getHpProgress(),c.default.instance.onCost({id:2001,quality:e[0].quality,num:1}))}},t.prototype.removeInstant=function(){this.currentState=null,this._isDeath=!0,this.node.opacity=0},t.prototype.checkShowEffect=function(){return!(this._isDeath||255!=this.node.opacity||!g.default.instance.checkUIIsOpen(_.default))},t.prototype.checkIsSelfLevelup=function(e,t){this.entity&&this.entity.id==t&&this.checkShowEffect()&&d.default.instance.createEffect("effect_65",w.Utils.getNodeUsePos(this.nodeAnima))},o([L(cc.Node)],t.prototype,"nodeAnima",void 0),o([L(cc.ProgressBar)],t.prototype,"barHp",void 0),o([L(cc.ProgressBar)],t.prototype,"barAction",void 0),o([S],t)}(cc.Component);n.default=A,cc._RF.pop()},{"../class/i_entity":"i_entity","../istate/char_state":"char_state","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/friend_manager":"friend_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui/friend_ui":"friend_ui","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils"}],item_choose_friend_view:[function(e,t,n){"use strict";cc._RF.push(t,"ebf21v1itVJ1bLp2D/SFqc6","item_choose_friend_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.btnDetail=null,this.btnSkill=null,this.btnMain=null,this.labLanList=[],this.labSalary=null,this.sprMain=null,this.sprSkillQua=null,this.rtName=null,this.rtAttr=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c;this.btnDetail=null===(t=cc.find("btnDetail",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnSkill=null===(n=cc.find("btnSkill",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnMain=null===(i=cc.find("btnMain",e))||void 0===i?void 0:i.getComponent(cc.Button),this.labLanList[0]=null===(a=cc.find("btnMain/labLanList0",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labSalary=null===(o=cc.find("labSalary",e))||void 0===o?void 0:o.getComponent(cc.Label),this.sprMain=null===(r=cc.find("sprMain",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprSkillQua=null===(l=cc.find("sprSkillQua",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.rtName=null===(s=cc.find("rtName",e))||void 0===s?void 0:s.getComponent(cc.RichText),this.rtAttr=null===(c=cc.find("rtAttr",e))||void 0===c?void 0:c.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.btnDetail=null,this.btnSkill=null,this.btnMain=null,this.labLanList=[],this.labSalary=null,this.sprMain=null,this.sprSkillQua=null,this.rtName=null,this.rtAttr=null},e}();n.default=i,cc._RF.pop()},{}],item_choose_friend:[function(e,t,n){"use strict";cc._RF.push(t,"ebdbfIoRmxDboHOkTO8hrSH","item_choose_friend");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/friend_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/resources_manager"),h=e("../manager/ui_manager"),p=e("../ui/friend_choose_ui"),f=e("../ui/friend_detail_ui"),m=e("../ui/pop_text_ui"),g=e("../ui_view/item/item_choose_friend_view"),_=e("../utils/config"),v=e("../utils/enum"),y=e("../utils/game_config"),b=e("../utils/utils"),w=cc._decorator,C=w.ccclass,S=(w.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnMain.node.on("click",this.onClick,this),this._view.btnDetail.node.on("click",this.onClickDetail,this),this._view.btnSkill.node.on("click",this.onClickSKill,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u9009\u62e9"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype.init=function(e){this.id=e;var t=l.default.instance.allFriendData.friendMap[e],n=c.default.instance.getDataByName("char")[e];this._view.sprMain.spriteFrame=u.default.instance.getSprite(v.ResType.main,"char-char_"+e),this._view.btnSkill.node.getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(v.ResType.main,"skill-skill_"+n.skill),this._view.rtName.string="<color="+y.GameConfig.QualityColor[t.quality]+"/>["+d.default.GetText("FriendlyStr"+t.quality)+"]</color>"+d.default.GetText("char_name_"+n.id),this._view.labSalary.string=d.default.GetText("\u65e5\u85aa")+":"+s.FriendMgr.instance.getDailySalary(e),this._view.rtAttr.string="lv."+t.lv+" <img src='"+y.GameConfig.FriendAttrIcon[1]+"' />"+s.FriendMgr.instance.getFriendAttr(e,1)+"  <img src='"+y.GameConfig.FriendAttrIcon[2]+"' />"+s.FriendMgr.instance.getFriendAttr(e,2)+"  <img src='"+y.GameConfig.FriendAttrIcon[3]+"' />"+s.FriendMgr.instance.getFriendAttr(e,3)+"   <img src='"+y.GameConfig.FindTypeIcon[n.findType]+"' /> ",this._view.btnDetail.node.getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(v.ResType.main,"ui-q ("+t.quality+")"),this._view.sprSkillQua.node.getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(v.ResType.main,"ui-q ("+t.quality+")")},t.prototype.onClick=function(){r.default.instance.playAudio("click"),p.default.instance.hideUI(),s.FriendMgr.instance.addFriendToWorkArr(this.id)},t.prototype.onClickDetail=function(){r.default.instance.playAudio("click"),h.default.instance.openUI(f.default,{name:_.Config.uiName.friendDetailUI,param:[this.id]},201)},t.prototype.onClickSKill=function(){var e=c.default.instance.getDataByName("char")[this.id],t=c.default.instance.getDataByName("skill")[e.skill];m.default.instance.showUI(b.Utils.getNodeUsePos(this._view.btnSkill.node),{spr:"skill-skill_"+t.id,name:d.default.GetText("skill_name_"+e.skill),dec:s.FriendMgr.instance.getFriendSkillDec(this.id)})},o([C],t)}(cc.Component));n.default=S,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui/friend_choose_ui":"friend_choose_ui","../ui/friend_detail_ui":"friend_detail_ui","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_choose_friend_view":"item_choose_friend_view","../utils/config":"config","../utils/enum":"enum","../utils/game_config":"game_config","../utils/utils":"utils"}],item_choose_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"90609P5KwNEapNbBqEu+9Xv","item_choose_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.itemChoose=null,this.itemChoose=null,this.itemChoose=null,this.itemChoose=null,this.itemChoose=null,this.itemChoose=null,this.btnMain=null,this.labTitle=null,this.labLanList=[],this.svBag=null}return e.prototype.initView=function(e){var t,n,i,a;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeContainer=cc.find("content/svBag/view/nodeContainer",e),this.itemChoose=cc.find("content/svBag/view/nodeContainer/itemChoose",e),this.itemChoose=cc.find("content/svBag/view/nodeContainer/itemChoose",e),this.itemChoose=cc.find("content/svBag/view/nodeContainer/itemChoose",e),this.itemChoose=cc.find("content/svBag/view/nodeContainer/itemChoose",e),this.itemChoose=cc.find("content/svBag/view/nodeContainer/itemChoose",e),this.itemChoose=cc.find("content/svBag/view/nodeContainer/itemChoose",e),this.btnMain=null===(t=cc.find("content/btnMain",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labTitle=null===(n=cc.find("content/labTitle",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labLanList[0]=null===(i=cc.find("content/btnMain/labLanList0",e))||void 0===i?void 0:i.getComponent(cc.Label),this.svBag=null===(a=cc.find("content/svBag",e))||void 0===a?void 0:a.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.itemChoose=null,this.itemChoose=null,this.itemChoose=null,this.itemChoose=null,this.itemChoose=null,this.itemChoose=null,this.btnMain=null,this.labTitle=null,this.labLanList=[],this.svBag=null},e}();n.default=i,cc._RF.pop()},{}],item_choose_ui:[function(e,t,n){"use strict";cc._RF.push(t,"87037Q1BYREr5BYOXn4Sodz","item_choose_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_choose"),l=e("../manager/action_manager"),s=e("../manager/audio_manager"),c=e("../manager/dynamic_data_manager"),d=e("../manager/language_manager"),u=e("../manager/pool_manager"),h=e("../ui_view/panel/item_choose_ui_view"),p=cc._decorator,f=p.ccclass,m=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new h.default,t._cb=null,t._needItem=null,t._curChoose=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this._view.btnMain.node.on("click",this.onCertain,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u786e\u8ba4"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this)},t.prototype.showUI=function(e,t,n){l.default.instance.popOut(this._view.content,this._view.nodeMask),this._needItem=e,this._cb=t,this._curChoose=n,this.refreshList()},t.prototype.refreshList=function(){var e=this;u.default.instance.removeObjByContainer(this._view.nodeContainer);var t=[];this._view.labTitle.string=d.default.GetText("\u7269\u54c1\u9009\u62e9")+"-",this._needItem.forEach(function(n,i){if(1==n[0]){var a=d.default.GetText("item_name_"+n[1]);e._view.labTitle.string+=a,t.push.apply(t,c.default.instance.findItem(n[1]))}else 2==n[0]?(e._view.labTitle.string+=d.default.GetText("ItemTypeName"+n[1]),t.push.apply(t,c.default.instance.findItemsByType(n[1]))):3==n[0]&&n[1].forEach(function(i,a){var o=d.default.GetText("item_name_"+i);e._view.labTitle.string+=o,n[1][a+1]&&(e._view.labTitle.string+="/"),t.push.apply(t,c.default.instance.findItem(i))});e._needItem[i+1]&&(e._view.labTitle.string+="/"),n[2]&&(t=t.filter(function(e){return e.num>=n[2]}),e._view.labTitle.string+="x"+n[2])});for(var n=0;n<t.length;n++){var i=u.default.instance.createObjectByName("itemChoose",this._view.nodeContainer);i.getComponent(r.default).initByItemAmont(n,t[n],this.onChooseItem.bind(this)),this._curChoose&&this._curChoose.id==t[n].id&&this._curChoose.quality==t[n].quality?i.getComponent(r.default).setSelect(!0):i.getComponent(r.default).setSelect(!1)}},t.prototype.onChooseItem=function(e,t){this._view.nodeContainer.children.forEach(function(t,n){t.getComponent(r.default).setSelect(n==e)}),this._curChoose=t},t.prototype.onCertain=function(){s.default.instance.playAudio("click"),this._curChoose&&this._cb&&this._cb(this._curChoose),this.hideUI()},t.prototype.hideUI=function(){s.default.instance.playAudio("paper2"),this._view.content.active=!1},t.instance=null,n=o([f],t)}(cc.Component));n.default=m,cc._RF.pop()},{"../item/item_choose":"item_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../ui_view/panel/item_choose_ui_view":"item_choose_ui_view"}],item_choose:[function(e,t,n){"use strict";cc._RF.push(t,"1cf67QhmSlPbbq6/a0tgiLL","item_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/item_amount"),l=e("../manager/resources_manager"),s=e("../utils/enum"),c=e("../utils/utils"),d=cc._decorator,u=d.ccclass,h=d.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=0,t.cb=null,t.sprMain=null,t.numLabel=null,t.selectNode=null,t}return a(t,e),t.prototype.onLoad=function(){this.node.on("click",this.onClick,this)},t.prototype.init=function(e,t,n,i){this.node.y=0,this.index=e,this.cb=i,this.sprMain.spriteFrame=l.default.instance.getSprite(s.ResType.main,t),this.numLabel.string="x"+n,this.setQualitySp(1),this.setSelect(!1)},t.prototype.onClick=function(){this.cb&&this.cb(this.index,this.data)},t.prototype.initByArr=function(e,t,n){this.data=t,this.index=e,this.cb=n;var i=c.Utils.getItemSpByAmount({id:t[0],quality:t[2]||1,num:1});this.numLabel.string="x"+t[1],this.sprMain.spriteFrame=l.default.instance.getSprite(s.ResType.main,i),this.setQualitySp(t[2]||1),this.setSelect(!1)},t.prototype.initByItemAmont=function(e,t,n){this.index=e,this.data=t,this.cb=n;var i=c.Utils.getItemSpByAmount(t);this.numLabel.string=t.num+"",this.sprMain.spriteFrame=l.default.instance.getSprite(s.ResType.main,i),this.setQualitySp(t.quality||1),this.setSelect(!1)},t.prototype.initByNormalAmont=function(e,t){this.data=e,this.cb=t;var n=c.Utils.getItemSpByAmount(e);e.type!=r.RewardType.friend?this.numLabel.string=e.num+"":this.numLabel.string="\u2665",this.sprMain.spriteFrame=l.default.instance.getSprite(s.ResType.main,n),this.setQualitySp(e.quality||1),this.setSelect(!1)},t.prototype.setQualitySp=function(e){this.node.getComponent(cc.Sprite).spriteFrame=l.default.instance.getSprite(s.ResType.main,"ui-quality_"+e)},t.prototype.setSelect=function(e){this.selectNode.active=e},o([h(cc.Sprite)],t.prototype,"sprMain",void 0),o([h(cc.Label)],t.prototype,"numLabel",void 0),o([h(cc.Node)],t.prototype,"selectNode",void 0),o([u],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../interface/item_amount":"item_amount","../manager/resources_manager":"resources_manager","../utils/enum":"enum","../utils/utils":"utils"}],item_collect_animal_view:[function(e,t,n){"use strict";cc._RF.push(t,"f8550FPOvFNcJyY1iR0lzj1","item_collect_animal_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeContainer=null,this.labGrow=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p;this.nodeContainer=cc.find("nodeContainer",e),this.labGrow=null===(t=cc.find("labGrow",e))||void 0===t?void 0:t.getComponent(cc.Label),this.sprQuality=null===(n=cc.find("nodeContainer/node/sprQuality",e))||void 0===n?void 0:n.getComponent(cc.Sprite),this.sprMain=null===(i=cc.find("nodeContainer/node/sprMain",e))||void 0===i?void 0:i.getComponent(cc.Sprite),this.sprQuality=null===(a=cc.find("nodeContainer/node/sprQuality",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprMain=null===(o=cc.find("nodeContainer/node/sprMain",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprQuality=null===(r=cc.find("nodeContainer/node/sprQuality",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprMain=null===(l=cc.find("nodeContainer/node/sprMain",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.sprQuality=null===(s=cc.find("nodeContainer/node/sprQuality",e))||void 0===s?void 0:s.getComponent(cc.Sprite),this.sprMain=null===(c=cc.find("nodeContainer/node/sprMain",e))||void 0===c?void 0:c.getComponent(cc.Sprite),this.sprQuality=null===(d=cc.find("nodeContainer/node/sprQuality",e))||void 0===d?void 0:d.getComponent(cc.Sprite),this.sprMain=null===(u=cc.find("nodeContainer/node/sprMain",e))||void 0===u?void 0:u.getComponent(cc.Sprite),this.sprQuality=null===(h=cc.find("nodeContainer/node/sprQuality",e))||void 0===h?void 0:h.getComponent(cc.Sprite),this.sprMain=null===(p=cc.find("nodeContainer/node/sprMain",e))||void 0===p?void 0:p.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.nodeContainer=null,this.labGrow=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null},e}();n.default=i,cc._RF.pop()},{}],item_collect_animal:[function(e,t,n){"use strict";cc._RF.push(t,"352beTRHZpC2IZVzzcHV0gT","item_collect_animal");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/resources_manager"),u=e("../ui/collection_ui"),h=e("../ui_view/item/item_collect_animal_view"),p=e("../utils/enum"),f=e("../utils/utils"),m=cc._decorator,g=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new h.default,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._view.initView(this.node),this._view.nodeContainer.children.forEach(function(t,n){t.on("click",function(){r.default.instance.playAudio("switch"),e.onClickChoose(t,n)},e)})},t.prototype.init=function(e){this.id=e;var t=e+1400,n=l.default.instance.collectionData.unlockItem[t],i=s.default.instance.getDataByName("item")[t];if(this.node.active=n>0,n){this.node.active=!0;var a=s.default.instance.getDataByName("char")[e];this._view.labGrow.string=c.default.GetText("char_name_"+e),this._view.nodeContainer.children.forEach(function(n,o){if(o>1){var r=a.animal.product[o-2];r?(n.active=!0,n.getChildByName("sprQuality").getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(p.ResType.main,"ui-quality_"+(r[2]||1)),n.getChildByName("sprMain").getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(p.ResType.main,f.Utils.getItemSpByAmount(l.default.instance.getItemAmountByArr(r)))):n.active=!1}else n.getChildByName("sprQuality").getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(p.ResType.main,"ui-quality_"+i.rare),0==o?n.getChildByName("sprMain").getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(p.ResType.main,f.Utils.getItemSpByAmount({id:t,quality:1,num:1})):1==o&&(n.getChildByName("sprMain").getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(p.ResType.main,"char-char_"+e))})}else this.node.active=!1},t.prototype.onClickChoose=function(e,t){switch(t){case 0:u.default.instance.refreshItemDetail(this.id+1400);break;case 1:u.default.instance.refreshCharDetail(this.id);break;default:var n=s.default.instance.getDataByName("char")[this.id].animal.product[t-2];u.default.instance.refreshItemDetail(n[0],n[2]||1)}},o([g],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../ui/collection_ui":"collection_ui","../ui_view/item/item_collect_animal_view":"item_collect_animal_view","../utils/enum":"enum","../utils/utils":"utils"}],item_collect_crop_view:[function(e,t,n){"use strict";cc._RF.push(t,"f5726TiP19NirOTQBzIqEuL","item_collect_crop_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeHave=null,this.nodeUnlock=null,this.nodeQuaContainer=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.labDec=null,this.labGrow=null,this.labHelp=null,this.sprQuality=null,this.sprMain=null,this.sprProductQuality=null,this.sprProductMain=null,this.rtSeason=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s;this.nodeHave=cc.find("nodeHave",e),this.nodeUnlock=cc.find("nodeUnlock",e),this.nodeQuaContainer=cc.find("nodeHave/nodeQuaContainer",e),this.itemQua=cc.find("nodeHave/nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeHave/nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeHave/nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeHave/nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeHave/nodeQuaContainer/itemQua",e),this.labDec=null===(t=cc.find("nodeHave/labDec",e))||void 0===t?void 0:t.getComponent(cc.Label),this.labGrow=null===(n=cc.find("nodeHave/labGrow",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labHelp=null===(i=cc.find("nodeUnlock/labHelp",e))||void 0===i?void 0:i.getComponent(cc.Label),this.sprQuality=null===(a=cc.find("nodeHave/sprQuality",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprMain=null===(o=cc.find("nodeHave/sprMain",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprProductQuality=null===(r=cc.find("nodeHave/sprProductQuality",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprProductMain=null===(l=cc.find("nodeHave/sprProductMain",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.rtSeason=null===(s=cc.find("nodeHave/rtSeason",e))||void 0===s?void 0:s.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.nodeHave=null,this.nodeUnlock=null,this.nodeQuaContainer=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.labDec=null,this.labGrow=null,this.labHelp=null,this.sprQuality=null,this.sprMain=null,this.sprProductQuality=null,this.sprProductMain=null,this.rtSeason=null},e}();n.default=i,cc._RF.pop()},{}],item_collect_crop:[function(e,t,n){"use strict";cc._RF.push(t,"45136688cFNj5kvC4+3JLHC","item_collect_crop");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/game_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/resources_manager"),h=e("../manager/sale_manager"),p=e("../ui/collection_ui"),f=e("../ui_view/item/item_collect_crop_view"),m=e("../utils/enum"),g=e("../utils/utils"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new f.default,t.id=0,t.data=null,t.curNum=1,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._view.initView(this.node),this._view.sprQuality.node.on("click",this.onClickProduct,this),this._view.sprProductQuality.node.on("click",this.onClickSeed,this),this._view.nodeQuaContainer.children.forEach(function(t,n){t.on("click",function(){r.default.instance.playAudio("click_1"),e.onClickQuality(n)},e)}),this.setLanguage()},t.prototype.setLanguage=function(){this._view.nodeQuaContainer.children.forEach(function(e,t){e.getChildByName("label").getComponent(cc.Label).string=d.default.GetText("QualityStr"+t)})},t.prototype.init=function(e){this.id=e,this._view.nodeHave.active=!1,this._view.nodeUnlock.active=!1;var t=l.default.instance.collectionData.unlockItem[e];t?(this._view.nodeHave.active=!0,this._view.nodeQuaContainer.children.forEach(function(e,n){e.active=n<t}),this.onClickQuality(0)):(this._view.nodeUnlock.active=!0,e<150?(this._view.labHelp.string="\u3010"+d.default.GetText("item_name_"+e+200)+"\u3011"+d.default.GetText("\u83b7\u5f97\u9014\u5f84")+"\uff1a",this._view.labHelp.string+=s.default.instance.getFromStr(e+200)):(this._view.labHelp.string="\u3010"+d.default.GetText("item_name_"+e)+"\u3011"+d.default.GetText("\u83b7\u5f97\u9014\u5f84")+"\uff1a",this._view.labHelp.string+=s.default.instance.getFromStr(e)))},t.prototype.refreshUI=function(){var e=this.data,t=(c.default.instance.getDataByName("item")[e.id],c.default.instance.getDataByName("item")[e.id+200]);this._view.labGrow.string=d.default.GetText("item_name_"+e.id),h.default.instance.checkHaveSaleReward(this.data.id)&&(this._view.labGrow.string+=" "+d.default.GetText("\u6709\u51fa\u8d27\u5956\u52b1")),this._view.sprQuality.spriteFrame=u.default.instance.getSprite(m.ResType.main,"ui-quality_"+e.quality),this._view.sprMain.spriteFrame=u.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount(e)),t?(this._view.rtSeason.string=g.Utils.getSeaonColorStr(t.seed.season)+(t.seed.continue?" <color=black>"+d.default.GetText("\u8fde\u7eed\u79cd\u690d")+"</color>":""),this._view.sprProductQuality.spriteFrame=u.default.instance.getSprite(m.ResType.main,"ui-quality_"+e.quality),this._view.sprProductMain.spriteFrame=u.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount({id:this.id+200,quality:e.quality,num:1})),this._view.labDec.string=d.default.GetText("\u751f\u957f\u65f6\u95f4")+": "+t.seed.time+d.default.GetText("\u5929")+" \n"+d.default.GetText("\u6c34")+"\uff1a"+t.seed.water):(this._view.sprProductQuality.spriteFrame=null,this._view.sprProductMain.spriteFrame=null,this._view.rtSeason.string=null,this._view.labDec.string=d.default.GetText("\u5728\u91ce\u5916\u91c7\u96c6"))},t.prototype.onClickQuality=function(e){this.data={id:this.id,quality:e+1,num:1},this.refreshUI(),this._view.nodeQuaContainer.children.forEach(function(t,n){t.color=e==n?cc.Color.YELLOW:cc.Color.WHITE})},t.prototype.onClickProduct=function(){r.default.instance.playAudio("click_1"),p.default.instance.refreshItemDetail(this.data.id,this.data.quality)},t.prototype.onClickSeed=function(){r.default.instance.playAudio("click_1"),p.default.instance.refreshItemDetail(this.data.id+200,this.data.quality)},o([v],t)}(cc.Component));n.default=y,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../ui/collection_ui":"collection_ui","../ui_view/item/item_collect_crop_view":"item_collect_crop_view","../utils/enum":"enum","../utils/utils":"utils"}],item_collect_food_view:[function(e,t,n){"use strict";cc._RF.push(t,"8be474jqIJHKY/pS0/toABO","item_collect_food_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeContainer=null,this.labGrow=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u;this.nodeContainer=cc.find("nodeContainer",e),this.labGrow=null===(t=cc.find("labGrow",e))||void 0===t?void 0:t.getComponent(cc.Label),this.sprQuality=null===(n=cc.find("nodeContainer/node/sprQuality",e))||void 0===n?void 0:n.getComponent(cc.Sprite),this.sprMain=null===(i=cc.find("nodeContainer/node/sprMain",e))||void 0===i?void 0:i.getComponent(cc.Sprite),this.sprQuality=null===(a=cc.find("nodeContainer/node/sprQuality",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprMain=null===(o=cc.find("nodeContainer/node/sprMain",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprQuality=null===(r=cc.find("nodeContainer/node/sprQuality",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprMain=null===(l=cc.find("nodeContainer/node/sprMain",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.sprQuality=null===(s=cc.find("nodeContainer/node/sprQuality",e))||void 0===s?void 0:s.getComponent(cc.Sprite),this.sprMain=null===(c=cc.find("nodeContainer/node/sprMain",e))||void 0===c?void 0:c.getComponent(cc.Sprite),this.sprQuality=null===(d=cc.find("nodeContainer/node/sprQuality",e))||void 0===d?void 0:d.getComponent(cc.Sprite),this.sprMain=null===(u=cc.find("nodeContainer/node/sprMain",e))||void 0===u?void 0:u.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.nodeContainer=null,this.labGrow=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null},e}();n.default=i,cc._RF.pop()},{}],item_collect_food:[function(e,t,n){"use strict";cc._RF.push(t,"954d9RJ+u5CcrYCkDwoaIOG","item_collect_food");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/resources_manager"),u=e("../manager/sale_manager"),h=e("../ui/collection_ui"),p=e("../ui_view/item/item_collect_food_view"),f=e("../utils/enum"),m=e("../utils/utils"),g=cc._decorator,_=g.ccclass,v=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new p.default,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._view.initView(this.node),this._view.nodeContainer.children.forEach(function(t,n){t.on("click",function(){r.default.instance.playAudio("switch"),e.onClickChoose(t,n)},e)})},t.prototype.init=function(e){this.id=e;var t=l.default.instance.collectionData.unlockItem[e];this.node.active=l.default.instance.allSaleData.recipeList.includes(e),l.default.instance.allSaleData.recipeList.includes(e)&&(this._view.nodeContainer.children.forEach(function(n,i){n.active=i<t,n.getChildByName("sprQuality").getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(f.ResType.main,"ui-quality_"+(i+1)),n.getChildByName("sprMain").getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(f.ResType.main,m.Utils.getItemSpByAmount({id:e,quality:i+1,num:1}))}),s.default.instance.getDataByName("item")[e],this._view.labGrow.string=c.default.GetText("item_name_"+e),u.default.instance.checkHaveSaleReward(e)&&(this._view.labGrow.string+=" "+c.default.GetText("\u6709\u51fa\u8d27\u5956\u52b1")))},t.prototype.onClickChoose=function(e,t){h.default.instance.refreshItemDetail(this.id,t+1)},o([_],t)}(cc.Component));n.default=v,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../ui/collection_ui":"collection_ui","../ui_view/item/item_collect_food_view":"item_collect_food_view","../utils/enum":"enum","../utils/utils":"utils"}],item_collect_friend_view:[function(e,t,n){"use strict";cc._RF.push(t,"1bfb97xG71Ja4KG2nKKLSGK","item_collect_friend_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.btnDetail=null,this.btnSkill=null,this.labSalary=null,this.sprMain=null,this.sprSkillQua=null,this.rtAttr=null,this.rtName=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l;this.btnDetail=null===(t=cc.find("btnDetail",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnSkill=null===(n=cc.find("btnSkill",e))||void 0===n?void 0:n.getComponent(cc.Button),this.labSalary=null===(i=cc.find("labSalary",e))||void 0===i?void 0:i.getComponent(cc.Label),this.sprMain=null===(a=cc.find("sprMain",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprSkillQua=null===(o=cc.find("sprSkillQua",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.rtAttr=null===(r=cc.find("rtAttr",e))||void 0===r?void 0:r.getComponent(cc.RichText),this.rtName=null===(l=cc.find("rtName",e))||void 0===l?void 0:l.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.btnDetail=null,this.btnSkill=null,this.labSalary=null,this.sprMain=null,this.sprSkillQua=null,this.rtAttr=null,this.rtName=null},e}();n.default=i,cc._RF.pop()},{}],item_collect_friend:[function(e,t,n){"use strict";cc._RF.push(t,"778f8JRzrdD1pTIWju5eDIx","item_collect_friend");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/friend_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/resources_manager"),h=e("../ui/collection_ui"),p=e("../ui/pop_text_ui"),f=e("../ui_view/item/item_collect_friend_view"),m=e("../utils/enum"),g=e("../utils/game_config"),_=e("../utils/utils"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new f.default,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnDetail.node.on("click",this.onClickDetail,this),this._view.btnSkill.node.on("click",this.onClickSKill,this)},t.prototype.init=function(e){this.id=e;var t=l.default.instance.allFriendData.friendMap[e];if(t){this.node.active=!0;var n=c.default.instance.getDataByName("char")[e];this._view.sprMain.spriteFrame=u.default.instance.getSprite(m.ResType.main,"char-char_"+e),this._view.btnSkill.node.getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,"skill-skill_"+n.skill),this._view.rtName.string="<color="+g.GameConfig.QualityColor[t.quality]+"/>["+d.default.GetText("FriendlyStr"+t.quality)+"]</color>"+d.default.GetText("char_name_"+n.id),this._view.labSalary.string="",this._view.rtAttr.string="lv."+t.lv+" <img src='"+g.GameConfig.FriendAttrIcon[1]+"' />"+s.FriendMgr.instance.getFriendAttr(e,1)+"  <img src='"+g.GameConfig.FriendAttrIcon[2]+"' />"+s.FriendMgr.instance.getFriendAttr(e,2)+"  <img src='"+g.GameConfig.FriendAttrIcon[3]+"' />"+s.FriendMgr.instance.getFriendAttr(e,3)+"   <img src='"+g.GameConfig.FindTypeIcon[n.findType]+"' /> ",this._view.btnDetail.node.getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,"ui-q ("+t.quality+")"),this._view.sprSkillQua.node.getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,"ui-q ("+t.quality+")")}else this.node.active=!1},t.prototype.onClickDetail=function(){r.default.instance.playAudio("click"),h.default.instance.refreshCharDetail(this.id)},t.prototype.onClickSKill=function(){var e=c.default.instance.getDataByName("char")[this.id],t=c.default.instance.getDataByName("skill")[e.skill];p.default.instance.showUI(_.Utils.getNodeUsePos(this._view.btnSkill.node),{spr:"skill-skill_"+t.id,name:d.default.GetText("skill_name_"+e.skill),dec:s.FriendMgr.instance.getFriendSkillDec(this.id)})},o([y],t)}(cc.Component));n.default=b,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../ui/collection_ui":"collection_ui","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_collect_friend_view":"item_collect_friend_view","../utils/enum":"enum","../utils/game_config":"game_config","../utils/utils":"utils"}],item_collection_view:[function(e,t,n){"use strict";cc._RF.push(t,"92ff3wfEG9L9KsE6SgqmrG2","item_collection_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeHave=null,this.nodeUnlock=null,this.nodeContainer=null,this.labGrow=null,this.labHelp=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h;this.nodeHave=cc.find("nodeHave",e),this.nodeUnlock=cc.find("nodeUnlock",e),this.nodeContainer=cc.find("nodeHave/nodeContainer",e),this.labGrow=null===(t=cc.find("nodeHave/labGrow",e))||void 0===t?void 0:t.getComponent(cc.Label),this.labHelp=null===(n=cc.find("nodeUnlock/labHelp",e))||void 0===n?void 0:n.getComponent(cc.Label),this.sprQuality=null===(i=cc.find("nodeHave/nodeContainer/node/sprQuality",e))||void 0===i?void 0:i.getComponent(cc.Sprite),this.sprMain=null===(a=cc.find("nodeHave/nodeContainer/node/sprMain",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprQuality=null===(o=cc.find("nodeHave/nodeContainer/node/sprQuality",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprMain=null===(r=cc.find("nodeHave/nodeContainer/node/sprMain",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprQuality=null===(l=cc.find("nodeHave/nodeContainer/node/sprQuality",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.sprMain=null===(s=cc.find("nodeHave/nodeContainer/node/sprMain",e))||void 0===s?void 0:s.getComponent(cc.Sprite),this.sprQuality=null===(c=cc.find("nodeHave/nodeContainer/node/sprQuality",e))||void 0===c?void 0:c.getComponent(cc.Sprite),this.sprMain=null===(d=cc.find("nodeHave/nodeContainer/node/sprMain",e))||void 0===d?void 0:d.getComponent(cc.Sprite),this.sprQuality=null===(u=cc.find("nodeHave/nodeContainer/node/sprQuality",e))||void 0===u?void 0:u.getComponent(cc.Sprite),this.sprMain=null===(h=cc.find("nodeHave/nodeContainer/node/sprMain",e))||void 0===h?void 0:h.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.nodeHave=null,this.nodeUnlock=null,this.nodeContainer=null,this.labGrow=null,this.labHelp=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null,this.sprQuality=null,this.sprMain=null},e}();n.default=i,cc._RF.pop()},{}],item_collection:[function(e,t,n){"use strict";cc._RF.push(t,"f716cITnuFH2qj5DPGrys2R","item_collection");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/game_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/resources_manager"),h=e("../manager/sale_manager"),p=e("../ui/collection_ui"),f=e("../ui_view/item/item_collection_view"),m=e("../utils/enum"),g=e("../utils/utils"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new f.default,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._view.initView(this.node),this._view.nodeContainer.children.forEach(function(t,n){t.on("click",function(){r.default.instance.playAudio("switch"),e.onClickChoose(t,n)},e)})},t.prototype.init=function(e){this.id=e;var t=l.default.instance.collectionData.unlockItem[e];this._view.nodeHave.active=!1,this._view.nodeUnlock.active=!1,c.default.instance.getDataByName("item")[e],t>0?(this._view.nodeHave.active=!0,this._view.nodeContainer.children.forEach(function(n,i){n.active=i<t,n.getChildByName("sprQuality").getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,"ui-quality_"+(i+1)),n.getChildByName("sprMain").getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount({id:e,quality:i+1,num:1}))}),this._view.labGrow.string=d.default.GetText("item_name_"+e)):(this._view.nodeUnlock.active=!0,this._view.labHelp.string="\u3010"+d.default.GetText("item_name_"+e)+"\u3011"+d.default.GetText("\u83b7\u5f97\u9014\u5f84")+"\uff1a"+s.default.instance.getFromStr(e)),h.default.instance.checkHaveSaleReward(e)&&(this._view.labGrow.string+=" "+d.default.GetText("\u6709\u51fa\u8d27\u5956\u52b1"))},t.prototype.onClickChoose=function(e,t){p.default.instance.refreshItemDetail(this.id,t+1)},o([v],t)}(cc.Component));n.default=y,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../ui/collection_ui":"collection_ui","../ui_view/item/item_collection_view":"item_collection_view","../utils/enum":"enum","../utils/utils":"utils"}],item_costomer_view:[function(e,t,n){"use strict";cc._RF.push(t,"167f6lyIpdIRJjAj+KyCtT5","item_costomer_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeAnima=null,this.sprEmo=null}return e.prototype.initView=function(e){var t;this.nodeAnima=cc.find("nodeAnima",e),this.sprEmo=null===(t=cc.find("sprEmo",e))||void 0===t?void 0:t.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.nodeAnima=null,this.sprEmo=null},e}();n.default=i,cc._RF.pop()},{}],item_costomer:[function(e,t,n){"use strict";cc._RF.push(t,"0d41fnsaUVKooPvAZO/08cU","item_costomer");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/pool_manager"),s=e("../manager/sale_manager"),c=e("../utils/enum"),d=e("../utils/utils"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeAnima=null,t.sprEmo=null,t._right=!0,t.id=0,t.speed=0,t._isBuy=!1,t.buyPos=-28,t}return a(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e,t){void 0===t&&(t=!0),this.id=e,this._right=t,this.speed=20+d.Utils.getRandomNumber(5),this.sprEmo.spriteFrame=null,this.node.scaleX=this._right?-1:1,t?(this.node.setPosition(-125,-25),this.node.zIndex=1):(this.node.setPosition(125,-20),this.node.zIndex=0),this._isBuy=!1,r.default.instance.playNpcAnimation(e,c.CharAnimaType.walk,this.nodeAnima),this.buyPos=-32+d.Utils.getRandomNumber(8)},t.prototype.onUpdate=function(e){var t=(this._right?1:-1)*e*this.speed;this._isBuy||(this._right?this.node.x>=this.buyPos&&this.onBuy():this.node.x<=this.buyPos&&this.onBuy()),this.node.x+=t,this._right&&this.node.x>125?l.default.instance.removeObject(this.node):!this._right&&this.node.x<-125&&l.default.instance.removeObject(this.node)},t.prototype.onBuy=function(){this._isBuy=!0,s.default.instance.onCostomerBuyItem(this)},o([p(cc.Node)],t.prototype,"nodeAnima",void 0),o([p(cc.Sprite)],t.prototype,"sprEmo",void 0),o([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/pool_manager":"pool_manager","../manager/sale_manager":"sale_manager","../utils/enum":"enum","../utils/utils":"utils"}],item_dairy_rt:[function(e,t,n){"use strict";cc._RF.push(t,"b8cbdv4JtlHE7nJt5m8jWFk","item_dairy_rt");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/holiday_data"),l=e("../interface/plan_data"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../utils/enum"),u=e("../utils/game_config"),h=e("../utils/utils"),p=cc._decorator,f=p.ccclass,m=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rt=null,t}return a(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e,t){var n=null;t&&t.id&&(n=s.default.instance.getDataByName("item")[t.id]);var i="";switch(e){case d.DairyRtType.newDay:var a=3==t.season?c.default.GetText("\u96ea"):c.default.GetText("\u96e8");this.rt.string="\u25a0 "+[c.default.GetText("\u6625"),c.default.GetText("\u590f"),c.default.GetText("\u79cb"),c.default.GetText("\u51ac")][t.season]+" \u2026 "+t.month+c.default.GetText("\u65e5")+" "+(t.water?a:c.default.GetText("\u6674"));break;case d.DairyRtType.autoWater:t.waterAll?this.rt.string=c.default.GetText("\u6d47\u6c34\u65e5\u8bb0"):this.rt.string=c.default.GetText("\u6d47\u6c34\u65e5\u8bb01",this.addDiz());break;case d.DairyRtType.animalReward:i=this.getRewardListStr(t.rewardList),this.rt.string=c.default.GetText("\u7267\u573a\u65e5\u8bb0")+i;break;case d.DairyRtType.planResult:switch(i=this.getRewardListStr(t.rewardList),t.planType){case l.PlanType.find:this.rt.string=c.default.GetText("\u65e5\u7a0b1")+i;break;case l.PlanType.logging:this.rt.string=c.default.GetText("\u65e5\u7a0b2")+i;break;case l.PlanType.field:this.rt.string=c.default.GetText("\u65e5\u7a0b3")+(t.field?c.default.GetText("\u65e5\u7a0b3-1",t.field)+this.addHappy():""),t.rewardList.length>0&&(this.rt.string+=c.default.GetText("\u65e5\u7a0b3-2")+i);break;case l.PlanType.fish:this.rt.string=c.default.GetText("\u65e5\u7a0b4")+i;break;case l.PlanType.mine:this.rt.string=c.default.GetText("\u65e5\u7a0b5")+i;break;case l.PlanType.relax:this.rt.string=c.default.GetText("\u65e5\u7a0b6")}break;case d.DairyRtType.friendPlanResult:i=this.getRewardListStr(t.rewardList);var o=c.default.GetText("char_name_"+t.id);switch(t.planType){case d.FindType.food:this.rt.string=o+c.default.GetText("\u65e5\u7a0b1")+i;break;case d.FindType.wood:this.rt.string=o+c.default.GetText("\u65e5\u7a0b2")+i;break;case d.FindType.fishing:this.rt.string=o+c.default.GetText("\u65e5\u7a0b4")+i;break;case d.FindType.mine:this.rt.string=o+c.default.GetText("\u65e5\u7a0b5")+i}break;case d.DairyRtType.onFoodExprie:this.rt.string=c.default.GetText("\u65e5\u7a0b7",c.default.GetText("item_name_"+t.id))+t.num+c.default.GetText("\u4e2a");break;case d.DairyRtType.planFail:this.rt.string=c.default.GetText("\u65e5\u7a0b8",c.default.GetText("PlanTypeName"+t.planType))+this.addAngry();break;case d.DairyRtType.noMeadowFood:this.rt.string=this.addTip()+c.default.GetText("\u7f3a\u7267\u8349\u65e5\u8bb0");break;case d.DairyRtType.noMoneyForFriend:this.rt.string=c.default.GetText("\u7f3a\u94b1\u65e5\u8bb0",this.addSad());break;case d.DairyRtType.autoFish:this.rt.string=c.default.GetText("\u6e14\u7f51\u65e5\u8bb0")+this.getRewardListStr(t.rewardList);break;case d.DairyRtType.festival:switch((n=s.default.instance.getDataByName("holiday")[t.id]).type){case r.HolidayType.bestChef:this.rt.string="\u2605 "+c.default.GetText("\u6599\u7406\u6bd4\u8d5b\u65e5\u8bb0")+this.addHappy();break;case r.HolidayType.bestFisher:this.rt.string="\u2605 "+c.default.GetText("\u519c\u573a\u8bc4\u9009\u65e5\u8bb0")+this.addHappy();break;case r.HolidayType.marketDay:this.rt.string="\u2605 "+c.default.GetText("\u96c6\u5e02\u65e5\u8bb0")+this.addHappy();break;default:this.rt.string="\u2605 "+c.default.GetText("\u8282\u65e5\u65e5\u8bb0",c.default.GetText("holiday_name_"+n.id))+this.addHappy()}break;case d.DairyRtType.friend:s.default.instance.getDataByName("char")[t.id],this.rt.string="\u2665 "+c.default.GetText("\u670b\u53cb\u4eb2\u5bc6\u65e5\u8bb0",c.default.GetText("char_name_"+t.id))+this.addHappy(),3==t.quality&&(this.rt.string+=c.default.GetText("\u4eb2\u5bc6\u793c\u7269\u65e5\u8bb0")+this.getRewardListStr(t.rewardList));break;case d.DairyRtType.giftFromShop:this.rt.string=c.default.GetText("\u5546\u5e97\u8d60\u793c\u65e5\u8bb0")+this.getRewardListStr(t.rewardList);break;case d.DairyRtType.giftFromAnimal:this.rt.string=c.default.GetText("\u91ce\u751f\u52a8\u7269\u65e5\u8bb0")+this.getRewardListStr(t.rewardList);break;case d.DairyRtType.giftFromAdv:this.rt.string=c.default.GetText("\u516c\u4f1a\u8d60\u793c\u65e5\u8bb0")+this.getRewardListStr(t.rewardList);break;case d.DairyRtType.giftFromFriend:this.rt.string=c.default.GetText("\u8fdc\u65b9\u670b\u53cb\u65e5\u8bb0")+this.getRewardListStr(t.rewardList);break;case d.DairyRtType.bestFarmer:this.rt.string=c.default.GetText("\u519c\u573a\u51a0\u519b\u65e5\u8bb0")+this.addHappy();break;case d.DairyRtType.newbFarmer:this.rt.string=c.default.GetText("\u519c\u573a\u8fdb\u6b65\u65e5\u8bb0")+this.addHappy();break;case d.DairyRtType.bestChef:this.rt.string=c.default.GetText("\u6599\u7406\u51a0\u519b\u65e5\u8bb0")+this.addHappy();break;case d.DairyRtType.eggBreak:this.rt.string=c.default.GetText("\u5b75\u5316\u6210\u529f\u65e5\u8bb0",c.default.GetText("char_name_"+t.id))+this.addPlay();break;case d.DairyRtType.skillLevelup:this.rt.string=""+this.addHappy()+c.default.GetText("PlanTypeName"+t.id)+c.default.GetText("\u6280\u80fd\u63d0\u5347\u65e5\u8bb0")+c.default.GetText("PlanLevelName"+t.lv);break;case d.DairyRtType.saleLevelup:switch(this.rt.string=""+this.addHappy()+c.default.GetText("char_name_"+n.id)+c.default.GetText("\u51fa\u552e\u8fbe\u6807\u65e5\u8bb0"),n.levelReward[0]){case 3:s.default.instance.getDataByName("item")[n.levelReward[1]],this.rt.string+=c.default.GetText("\u83b7\u5f97\u4e86")+c.default.GetText("item_name_"+n.levelReward[1]);break;case 4:s.default.instance.getDataByName("char")[n.levelReward[1]],this.rt.string+=c.default.GetText("\u8ba4\u8bc6\u4e86")+c.default.GetText("char_name_"+n.levelReward[1])}break;case d.DairyRtType.newMap:this.rt.string=this.addHappy()+c.default.GetText("\u63a2\u7d22\u5730\u56fe\u65e5\u8bb0");break;case d.DairyRtType.autoSell:this.rt.string=c.default.GetText("\u81ea\u52a8\u51fa\u552e\u65e5\u8bb0",t.num);break;case d.DairyRtType.autoEat:this.rt.string=c.default.GetText("\u81ea\u52a8\u5403\u996d\u65e5\u8bb0")+this.getRewardListStr(t.rewardList);break;case d.DairyRtType.workshop:this.rt.string=c.default.GetText("\u98ce\u8f66\u5de5\u623f\u65e5\u8bb0")+this.getRewardListStr(t.rewardList)}},t.prototype.getRewardListStr=function(e){for(var t="",n=0;n<e.length;n++)t+="<color="+u.GameConfig.QualityColor[e[n].quality||1]+">",t+=c.default.GetText("item_name_"+e[n].id),t+="x"+e[n].num,t+="</color>";return t},t.prototype.addPlay=function(){return"<img src='"+h.Utils.getArrRandomItem(["yummy","wink","sunglasses","starstruck","satisfied","quirky","calm","devil-smile","drool","eyeroll","ghost","kiss","love","mindful","quirky"])+"' />"},t.prototype.addHappy=function(){return"<img src='"+h.Utils.getArrRandomItem(["wholesome","smirk","smile","wink","angel","big-smile","flustered","happy","hearts","laugh-squinting","party","party1"])+"' />"},t.prototype.addAngry=function(){return"<img src='"+h.Utils.getArrRandomItem(["unamused","squinting","weary","angry","angry-yellow","fire","queasy"])+"' />"},t.prototype.addDiz=function(){return"<img src='"+h.Utils.getArrRandomItem(["woozy","wide","upside-down","injured","alien","expressionless","eybrow_raised","laughing","meh","mouthless","nervous"])+"' />"},t.prototype.addSad=function(){return"<img src='"+h.Utils.getArrRandomItem(["zipped","weary","sad","unamused","confused","dead","frown","pleading","sad-crying"])+"' />"},t.prototype.addTip=function(){return"<img src='"+h.Utils.getArrRandomItem(["warning","shocked","alert","exclamation","sick"])+"' />"},o([m(cc.RichText)],t.prototype,"rt",void 0),o([f],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../interface/holiday_data":"holiday_data","../interface/plan_data":"plan_data","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../utils/enum":"enum","../utils/game_config":"game_config","../utils/utils":"utils"}],item_data:[function(e,t,n){"use strict";cc._RF.push(t,"5a11fp+OalO56xQROIAO6jT","item_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],item_detail_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"cbbceV538JMSJCEgjGYIM0u","item_detail_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeTag=null,this.nodeDetail=null,this.nodeMenu=null,this.nodeSlider=null,this.nodeAutoSell=null,this.nodeAutoEat=null,this.nodeQuality=null,this.itemTag=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.btnSell=null,this.btnDown=null,this.btnUp=null,this.btnUSe=null,this.btnReseed=null,this.btnCheck=null,this.labLanList=[],this.labNum=null,this.labDec=null,this.sprMain=null,this.rtLabel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeTag=cc.find("content/nodeTag",e),this.nodeDetail=cc.find("content/nodeDetail",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodeSlider=cc.find("content/nodeSlider",e),this.nodeAutoSell=cc.find("content/nodeAutoSell",e),this.nodeAutoEat=cc.find("content/nodeAutoEat",e),this.nodeQuality=cc.find("content/nodeAutoSell/nodeQuality",e),this.itemTag=cc.find("content/nodeTag/itemTag",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.itemDec=cc.find("content/nodeDetail/itemDec",e),this.btnSell=null===(t=cc.find("content/nodeMenu/btnSell",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnDown=null===(n=cc.find("content/nodeMenu/btnDown",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnUp=null===(i=cc.find("content/nodeMenu/btnUp",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnUSe=null===(a=cc.find("content/nodeMenu/btnUSe",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnReseed=null===(o=cc.find("content/nodeMenu/btnReseed",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnCheck=null===(r=cc.find("content/nodeAutoEat/btnCheck",e))||void 0===r?void 0:r.getComponent(cc.Button),this.labLanList[0]=null===(l=cc.find("content/nodeMenu/btnSell/labLanList0",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[1]=null===(s=cc.find("content/nodeMenu/btnDown/labLanList1",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[2]=null===(c=cc.find("content/nodeMenu/btnUp/labLanList2",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[3]=null===(d=cc.find("content/nodeMenu/btnUSe/labLanList3",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[4]=null===(u=cc.find("content/nodeMenu/btnReseed/labLanList4",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labNum=null===(h=cc.find("content/nodeSlider/labNum",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labDec=null===(p=cc.find("content/labDec",e))||void 0===p?void 0:p.getComponent(cc.Label),this.labLanList[5]=null===(f=cc.find("content/labLanList5",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labLanList[6]=null===(m=cc.find("content/nodeAutoSell/labLanList6",e))||void 0===m?void 0:m.getComponent(cc.Label),this.labLanList[7]=null===(g=cc.find("content/nodeAutoEat/labLanList7",e))||void 0===g?void 0:g.getComponent(cc.Label),this.sprMain=null===(_=cc.find("content/sprMain",e))||void 0===_?void 0:_.getComponent(cc.Sprite),this.rtLabel=null===(v=cc.find("content/rtLabel",e))||void 0===v?void 0:v.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeTag=null,this.nodeDetail=null,this.nodeMenu=null,this.nodeSlider=null,this.nodeAutoSell=null,this.nodeAutoEat=null,this.nodeQuality=null,this.itemTag=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.btnSell=null,this.btnDown=null,this.btnUp=null,this.btnUSe=null,this.btnReseed=null,this.btnCheck=null,this.labLanList=[],this.labNum=null,this.labDec=null,this.sprMain=null,this.rtLabel=null},e}();n.default=i,cc._RF.pop()},{}],item_detail_ui:[function(e,t,n){"use strict";cc._RF.push(t,"0ffc9gecxVDjoISfDISn63V","item_detail_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ItemDetailMenuBtnType=n.ItemDetailUISceneType=void 0;var r,l,s=e("../interface/item_amount"),c=e("../item/item_tag"),d=e("../manager/action_manager"),u=e("../manager/audio_manager"),h=e("../manager/collection_manager"),p=e("../manager/dynamic_data_manager"),f=e("../manager/effect_manager"),m=e("../manager/friend_manager"),g=e("../manager/game_manager"),_=e("../manager/guide_manager"),v=e("../manager/json_manager"),y=e("../manager/language_manager"),b=e("../manager/plan_manager"),w=e("../manager/pool_manager"),C=e("../manager/resources_manager"),S=e("../manager/sale_manager"),L=e("../manager/shop_manager"),A=e("../manager/ui_manager"),k=e("../ui_view/panel/item_detail_ui_view"),T=e("../utils/config"),M=e("../utils/emmiter"),R=e("../utils/enum"),P=e("../utils/game_config"),D=e("../utils/message"),B=e("../utils/utils"),F=e("./bag_ui"),I=e("./menu_ui"),O=e("./open_chest_ui"),N=e("./open_recipe_ui"),x=e("./reward_tip_ui"),j=cc._decorator,U=j.ccclass;j.property,function(e){e[e.check=0]="check",e[e.bagUI=1]="bagUI",e[e.saleUI=10]="saleUI"}(r=n.ItemDetailUISceneType||(n.ItemDetailUISceneType={})),function(e){e[e.sell=0]="sell",e[e.use=3]="use",e[e.down=1]="down",e[e.up=2]="up",e[e.reseed=4]="reseed"}(l=n.ItemDetailMenuBtnType||(n.ItemDetailMenuBtnType={}));var E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new k.default,t.data=null,t.scene=r.check,t.param=null,t.curNum=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u4f4e\u4ef7\u51fa\u552e","\u4e0b\u67b6","\u4e0a\u67b6","\u4f7f\u7528","\u63d0\u53d6\u79cd\u5b50","\u7269\u54c1\u5c5e\u6027","\u81ea\u52a8\u4f4e\u4ef7\u51fa\u552e","\u81ea\u52a8\u98df\u7528"];e.forEach(function(e,n){e.string=y.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeMenu.children.forEach(function(t,n){t.on("click",function(){u.default.instance.playAudio("click_1"),e.onClickMenu(n)},e)}),this._view.nodeQuality.children.forEach(function(t,n){t.on("click",function(){e.onClickAutoSell(n)},e)}),this._view.nodeAutoEat.getChildByName("btnCheck").on("click",this.onClickAutoEat,this),this._view.nodeSlider.on("slide",this.onSliderChange,this)},t.prototype.showUI=function(e,t,n){this.param=n,this.data=e,this.scene=t,this._view.nodeAutoEat.active=!1,this._view.nodeAutoSell.active=!1,d.default.instance.popOut(this._view.content,this._view.nodeMask),this._view.nodeSlider.getComponent(cc.Slider).progress=0,this.refreshDetail()},t.prototype.refreshDetail=function(){var e=this;this.data;var t=v.default.instance.getDataByName("item")[this.data.id];if(this._view.rtLabel.string="<color="+P.GameConfig.QualityColor[this.data.quality]+"/>["+y.default.GetText("QualityStr"+this.data.quality)+"]</color>"+y.default.GetText("item_name_"+this.data.id)+" x"+this.data.num+" ",this._view.sprMain.spriteFrame=C.default.instance.getSprite(R.ResType.main,B.Utils.getItemSpByAmount(this.data)),this._view.labDec.string=m.FriendMgr.instance.getItemdec(this.data.id,this.data),0==this.scene){var n=p.default.instance.findItem(this.data.id,this.data.quality);n[0]&&(this._view.labDec.string+="("+y.default.GetText("\u5f53\u524d\u6570\u91cf",n[0].num)+")")}else if(858==this.data.id){var i=p.default.instance.itemDepot.find(function(t){return 857==t.id&&t.quality==e.data.quality});this._view.labDec.string+=i?"("+y.default.GetText("\u5bf9\u5e94\u94a5\u5319",i.num)+")":"("+y.default.GetText("\u65e0\u5bf9\u5e94\u94a5\u5319")+")"}if(853==this.data.id){var a=0;p.default.instance.allSaleData.recipeList.forEach(function(e){g.default.instance.foodRecipeList.includes(e)&&a++}),this._view.labDec.string+="("+a+"/"+g.default.instance.foodRecipeList.length+")"}if(860==this.data.id){var o=0;p.default.instance.allSaleData.recipeList.forEach(function(e){g.default.instance.rareRecipeList.includes(e)&&o++}),this._view.labDec.string+="("+o+"/"+g.default.instance.rareRecipeList.length+")"}if(w.default.instance.removeObjByContainer(this._view.nodeTag),t.type)for(var r=0;r<t.type.length;r++)w.default.instance.createObjectByName("itemTag",this._view.nodeTag).getComponent(c.default).init(t.type[r],this.onClickTag.bind(this));if(this._view.nodeDetail.children.forEach(function(e){e.active=!1}),this.refreshLabelContainer(),this.onSliderChange(this._view.nodeSlider.getComponent(cc.Slider)),this.refreshScene(),t.type&&t.type.includes(R.Itemtype.food)&&(this._view.nodeAutoEat.active=!0,this._view.nodeAutoEat.getChildByName("btnCheck").getChildByName("check").active=h.CollectionMgr.instance.isAutoEat(this.data.id)),t.price){this._view.nodeAutoSell.active=!0;var l=this._view.nodeAutoSell.getChildByName("nodeQuality"),s=h.CollectionMgr.instance.getAutoSellQua(this.data.id);l.children.forEach(function(e,t){e.getChildByName("check").active=t+1<=s})}},t.prototype.refreshLabelContainer=function(){var e=this._view.nodeDetail.children;e.forEach(function(e){e.active=!1}),e[11].active=!0,e[11].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u54c1\u8d28")+"\n"+y.default.GetText("QualityStr"+this.data.quality),e[11].getComponent(cc.Sprite).spriteFrame=C.default.instance.getSprite(R.ResType.main,"ui-quality_"+this.data.quality);var t=v.default.instance.getDataByName("item")[this.data.id];if(t.type){t.price&&(e[8].active=!0,e[8].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u4ef7\u503c")+"\n"+S.default.instance.getItemPrice(this.data));var n=p.default.instance.allSaleData.itemSaleData[this.data.id]||0;if(t.levelNeedNum&&n<t.levelNeedNum){if(e[9].active=!0,4==t.levelReward[0])e[9].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=C.default.instance.getSprite(R.ResType.main,"char-char_"+t.levelReward[1]),p.default.instance.allFriendData.friendMap[t.levelReward[1]]?e[9].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u552e\u5356\u597d\u611f",t.levelNeedNum):e[9].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u552e\u5356\u65b0\u4eba",t.levelNeedNum);else{var i={id:t.levelReward[1],quality:t.rare||1,num:1};e[9].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=C.default.instance.getSprite(R.ResType.main,B.Utils.getItemSpByAmount(i)),e[9].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u552e\u5356\u83b7\u5f97",t.levelNeedNum)+y.default.GetText("item_name_"+t.levelReward[1])}e[10].active=!0,e[10].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u552e\u5356")+"\n"+n+"/"+t.levelNeedNum}if(t.type.includes(R.Itemtype.food)&&(e[0].active=!0,e[0].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u4f53\u529b\u6062\u590d")+"\n"+g.default.instance.getFoodHealth(this.data),e[1].active=!0,e[1].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u8fc7\u671f\u901f\u5ea6")+"\n"+t.food.expire+"%",e[2].active=!0,e[2].getChildByName("rtLabel").getComponent(cc.RichText).string=y.default.GetText("\u4eba\u6c14")+"\n"+B.Utils.getSeaonColorStr(t.food.season),t.food.specialType)){e[7].active=!0;var a=t.food.specialNum+this.data.quality-1;switch(t.food.specialType){case R.FoodSpecialSkill.seasonDouble:e[7].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u5e94\u5b63\u98df\u7528")+"\n"+y.default.GetText("\u53cc\u500d\u4f53\u529b");break;case R.FoodSpecialSkill.addMaxHp:var o=Math.ceil((t.food.specialNum-50)*(.8+.2*this.data.quality)+50);e[7].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u589e\u52a0\u4f53\u529b\u6700\u5927")+o;break;case R.FoodSpecialSkill.speedup:e[7].getChildByName("label").getComponent(cc.Label).string=a+y.default.GetText("\u98df\u7269\u6548\u679c1");break;case R.FoodSpecialSkill.freePlan:e[7].getChildByName("label").getComponent(cc.Label).string=a+y.default.GetText("\u98df\u7269\u6548\u679c2");break;case R.FoodSpecialSkill.field:e[7].getChildByName("label").getComponent(cc.Label).string=a+y.default.GetText("\u98df\u7269\u6548\u679c3");break;case R.FoodSpecialSkill.find:e[7].getChildByName("label").getComponent(cc.Label).string=a+y.default.GetText("\u98df\u7269\u6548\u679c4");break;case R.FoodSpecialSkill.mine:e[7].getChildByName("label").getComponent(cc.Label).string=a+y.default.GetText("\u98df\u7269\u6548\u679c5");break;case R.FoodSpecialSkill.logging:e[7].getChildByName("label").getComponent(cc.Label).string=a+y.default.GetText("\u98df\u7269\u6548\u679c6");break;case R.FoodSpecialSkill.fish:e[7].getChildByName("label").getComponent(cc.Label).string=a+y.default.GetText("\u98df\u7269\u6548\u679c7")}}if(t.type.includes(R.Itemtype.seed)){e[3].active=!0,e[3].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u751f\u957f\u65f6\u95f4")+"\n"+t.seed.time+y.default.GetText("\u5929"),e[4].active=!0,e[4].getChildByName("rtLabel").getComponent(cc.RichText).string="\u5b63\u8282\u9002\u5e94\n"+B.Utils.getSeaonColorStr(t.seed.season),e[5].active=!0,e[5].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u8fde\u7eed\u6536\u83b7")+"\n"+y.default.GetText(t.seed.continue?"\u662f":"\u5426"),e[6].active=!0,e[6].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u6d47\u6c34\u91cf")+"\n"+t.seed.water;var r={id:t.seed.product,num:1,quality:this.data.quality},l=S.default.instance.getItemPrice(r);e[13].active=!0,e[13].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=C.default.instance.getSprite(R.ResType.main,B.Utils.getItemSpByAmount(r)),e[13].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u4f5c\u7269\u4ef7\u503c")+"\n"+l}if(t.type.includes(R.Itemtype.potion)){e[12].active=!0;var s=Math.floor(7*P.GameConfig.QualityDouble.effect[this.data.quality]);e[12].getChildByName("label").getComponent(cc.Label).string=y.default.GetText("\u65f6\u6548")+"\n"+s+y.default.GetText("\u5929")}}},t.prototype.refreshScene=function(){var e=[],t=v.default.instance.getDataByName("item")[this.data.id];switch(this.scene){case r.check:break;case r.bagUI:23==this.data.id?e=[l.use]:t.type&&t.type.includes(R.Itemtype.food)?e=[l.use]:([856,859,858,853,860,851,852].includes(this.data.id)||t.type&&t.type.includes(R.Itemtype.potion))&&(this.data.num,e=[l.use]),t.type&&t.type.includes(R.Itemtype.crop)&&g.default.instance.checkHaveSkill(26)&&e.push(l.reseed),L.ShopMgr.instance.getItemCanSell(this.data.id)&&(e.push(l.sell),-1!=S.default.instance.checkHaveFree()&&_.GuideMgr.instance.getFunctionIsOpen(R.FunctionType.sale)&&e.push(l.up));break;case r.saleUI:e=[l.down]}this._view.nodeMenu.children.forEach(function(t,n){t.active=e.includes(n)}),this._view.nodeSlider.active=e.some(function(e){return[l.use,l.up,l.reseed,l.sell].includes(e)})},t.prototype.onClickTag=function(){},t.prototype.onClickMenu=function(e){var t=this,n=[],i=[],a=[],o=v.default.instance.getDataByName("item")[this.data.id],r=this.curNum;switch(e){case l.use:if(856==this.data.id||859==this.data.id){for(var c=0;c<r;c++)n.push.apply(n,g.default.instance.getChestReward(this.data.id,this.data.quality));p.default.instance.config.skipChestAnima?(n=B.Utils.amountMerge(n),A.default.instance.openUI(x.default,{name:T.Config.uiName.rewardTipUI,param:[n,y.default.GetText("\u83b7\u5f97\u7269\u54c1")]},300)):A.default.instance.openUI(O.default,{name:T.Config.uiName.openChestUI,param:[!1,n]},300)}if(23==this.data.id){var d=(500+200*this.data.quality)*r;A.default.instance.LoadTipsByStr(y.default.GetText("\u83b7\u5f97\u70b9\u6570")+"x"+d),p.default.instance.point+=d}if(858==this.data.id){var u=p.default.instance.itemDepot.find(function(e){return 857==e.id&&e.quality==t.data.quality});if(!u)return void A.default.instance.LoadTipsByStr(y.default.GetText("\u6ca1\u6709\u94a5\u5319"));for(r=Math.min(u.num,r),c=0;c<r;c++)n.push.apply(n,g.default.instance.getChestReward(this.data.id,this.data.quality));p.default.instance.onCost({id:u.id,num:r,quality:u.quality}),p.default.instance.config.skipChestAnima?(n=B.Utils.amountMerge(n),A.default.instance.openUI(x.default,{name:T.Config.uiName.rewardTipUI,param:[n,y.default.GetText("\u83b7\u5f97\u7269\u54c1")]},300)):A.default.instance.openUI(O.default,{name:T.Config.uiName.openChestUI,param:[!0,n]},300)}if(853==this.data.id)for(c=0;c<2*r;c++)i.push(g.default.instance.getRandomNewRecipe(this.data.quality));if(860==this.data.id)for(c=0;c<r;c++)i.push(g.default.instance.getRandomRareRecipe(this.data.quality));if(851==this.data.id&&(p.default.instance.planData.skillPoint+=r,A.default.instance.LoadTipsByStr(y.default.GetText("\u83b7\u5f97\u6280\u80fd\u70b9",r)),M.Emitter.fire(D.MessageType.gainSkillPoint)),852==this.data.id){for(c=0;c<r;c++)b.PlanMgr.instance.addMaxPlanNum();A.default.instance.LoadTipsByStr(y.default.GetText("\u83b7\u5f97\u8ba1\u5212\u70b9",r))}if(o.type&&o.type.includes(R.Itemtype.food)&&(r=1,g.default.instance.onUseFood(this.data)),o.type&&o.type.includes(R.Itemtype.potion)){var h=Math.floor(7*P.GameConfig.QualityDouble.effect[this.data.quality])*r,m=this.data.id;S.default.instance.addBuff(m,h),A.default.instance.LoadTipsByStr(y.default.GetText("\u83b7\u5f97\u589e\u76ca")+":"+y.default.GetText("holiday_name_"+m)+"x"+h+y.default.GetText("\u5929"))}this.data.num<=r&&this.hideUI(),p.default.instance.onCost({id:this.data.id,num:r,quality:this.data.quality});break;case l.down:S.default.instance.onDownItemAmount(this.param.index),this.hideUI();break;case l.reseed:this.data.num==r&&this.hideUI();var _={id:this.data.id+200,num:3*r,quality:this.data.quality};I.default.instance.showReward(R.PageType.depot,[_],this._view.nodeMenu.children[l.reseed]),p.default.instance.onReward(_),p.default.instance.onCost({id:this.data.id,num:r,quality:this.data.quality});break;case l.sell:var w=p.default.instance.itemDepot.findIndex(function(e){return e==t.data});-1!=w&&(this.data.num==r&&this.hideUI(),L.ShopMgr.instance.onSellItem(w,r),f.default.instance.createRewardListEffect([{type:s.RewardType.money,num:r}],this._view.btnSell.node));break;case l.up:var C=S.default.instance.checkHaveFree();-1!=C&&(this.data.num==r&&this.hideUI(),S.default.instance.onUpItemAmount({id:this.data.id,num:r,quality:this.data.quality},C),A.default.instance.LoadTipsByStr(y.default.GetText("\u4e0a\u67b6\u6210\u529f")))}n.forEach(function(e){p.default.instance.onReward(e)}),i.length>0&&(a=i.map(function(e){return p.default.instance.allSaleData.recipeList.includes(e)}),A.default.instance.openUI(N.default,{name:T.Config.uiName.openRecipeUI,param:[i,a]},300),i.forEach(function(e){p.default.instance.allSaleData.recipeList.includes(e)||p.default.instance.allSaleData.recipeList.push(e)})),A.default.instance.checkUIIsOpen(F.default)&&(F.default.instance.refreshBag(),F.default.instance.refreshRecipeList()),this.refreshDetail()},t.prototype.hideUI=function(){u.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onSliderChange=function(e){e.progress<=0?this.curNum=1:this.curNum=Math.ceil(e.progress*this.data.num),this._view.labNum.string="x"+this.curNum},t.prototype.onClickAutoSell=function(e){u.default.instance.playAudio("click"),h.CollectionMgr.instance.setAutoSell(this.data.id,e+1),this.refreshDetail()},t.prototype.onClickAutoEat=function(){u.default.instance.playAudio("click"),h.CollectionMgr.instance.setAutoEat(this.data.id),this.refreshDetail()},t.instance=null,n=o([U],t)}(cc.Component);n.default=E,cc._RF.pop()},{"../interface/item_amount":"item_amount","../item/item_tag":"item_tag","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/collection_manager":"collection_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/friend_manager":"friend_manager","../manager/game_manager":"game_manager","../manager/guide_manager":"guide_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/plan_manager":"plan_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../manager/shop_manager":"shop_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/item_detail_ui_view":"item_detail_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","../utils/utils":"utils","./bag_ui":"bag_ui","./menu_ui":"menu_ui","./open_chest_ui":"open_chest_ui","./open_recipe_ui":"open_recipe_ui","./reward_tip_ui":"reward_tip_ui"}],item_drop:[function(e,t,n){"use strict";cc._RF.push(t,"a1b42rzEwdOSrE/+Dey2xGk","item_drop");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/item_amount"),l=e("../manager/json_manager"),s=e("../manager/pool_manager"),c=e("../manager/resources_manager"),d=e("../utils/enum"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeList=[],t.oriPos=null,t}return a(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e,t,n){switch(void 0===n&&(n=cc.v2(54,115)),this.node.children.forEach(function(e){e.active=!1}),this.oriPos=n,this.nodeList[e.type]&&(this.nodeList[e.type].active=!0),e.type){case r.RewardType.money:case r.RewardType.point:break;case r.RewardType.item:default:var i=l.default.instance.getDataByName("item")[e.id].sp;this.nodeList[e.type].getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(d.ResType.main,i)}this.showDropAnima(t)},t.prototype.showDropAnima=function(e){var t=this;this.node.setPosition(this.oriPos),this.node.scale=.3,this.node.opacity=100,this.node.angle=0,cc.tween(this.node).parallel(cc.tween().by(.3,{y:25},cc.easeOut(2)).by(.3,{y:-25},cc.easeIn(2)),cc.tween().to(.6,{angle:720,opacity:255,x:this.oriPos.x+e,scale:1})).delay(.5).by(.3,{y:15,opacity:0}).call(function(){s.default.instance.removeObject(t.node)}).start()},o([p(cc.Node)],t.prototype,"nodeList",void 0),o([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../interface/item_amount":"item_amount","../manager/json_manager":"json_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../utils/enum":"enum"}],item_field_view:[function(e,t,n){"use strict";cc._RF.push(t,"2ac620NJmhKiKJ7xD/R3D+7","item_field_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeNone=null,this.nodeHave=null,this.nodeBug=null,this.btnBug=null,this.labNone=null,this.labDec=null,this.sprSoild=null,this.sprPlant=null,this.rtLabelNone=null,this.rtName=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l;this.nodeNone=cc.find("nodeNone",e),this.nodeHave=cc.find("nodeHave",e),this.nodeBug=cc.find("nodeHave/btnBug/nodeBug",e),this.btnBug=null===(t=cc.find("nodeHave/btnBug",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labNone=null===(n=cc.find("nodeNone/labNone",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labDec=null===(i=cc.find("nodeHave/labDec",e))||void 0===i?void 0:i.getComponent(cc.Label),this.sprSoild=null===(a=cc.find("sprSoild",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprPlant=null===(o=cc.find("nodeHave/sprPlant",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.rtLabelNone=null===(r=cc.find("nodeNone/rtLabelNone",e))||void 0===r?void 0:r.getComponent(cc.RichText),this.rtName=null===(l=cc.find("nodeHave/rtName",e))||void 0===l?void 0:l.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.nodeNone=null,this.nodeHave=null,this.nodeBug=null,this.btnBug=null,this.labNone=null,this.labDec=null,this.sprSoild=null,this.sprPlant=null,this.rtLabelNone=null,this.rtName=null},e}();n.default=i,cc._RF.pop()},{}],item_field:[function(e,t,n){"use strict";cc._RF.push(t,"e128coy0zVCLIa/osVIOyIA","item_field");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/effect_manager"),d=e("../manager/field_manager"),u=e("../manager/game_manager"),h=e("../manager/json_manager"),p=e("../manager/language_manager"),f=e("../manager/resources_manager"),m=e("../manager/ui_manager"),g=e("../ui/field_detail_ui"),_=e("../ui/seed_choose_ui"),v=e("../ui_view/item/item_field_view"),y=e("../utils/config"),b=e("../utils/enum"),w=e("../utils/game_config"),C=e("../utils/utils"),S=cc._decorator,L=S.ccclass,A=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new v.default,t.index=0,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this.node.on("click",this.onClickDetail,this),this._view.sprSoild.node.on("click",this.onClickSoild,this),this._view.btnBug.node.on("click",this.onClickBug,this)},t.prototype.init=function(e){this.index=e,this._view.nodeHave.active=!1,this._view.nodeNone.active=!1;var t=s.default.instance.allFieldData.list[e];s.default.instance.config.minField?(this.node.anchorX=2.51,this.node.width=32,this._view.rtLabelNone.node.active=!1,this._view.labNone.node.active=!1,this._view.labDec.node.active=!1,this._view.rtName.node.active=!1):(this.node.anchorX=.5,this.node.width=160,this.node.x=0,this._view.rtLabelNone.node.active=!0,this._view.labNone.node.active=!0,this._view.labDec.node.active=!0,this._view.rtName.node.active=!0),t.seed?(this.refreshPlant(),this._view.nodeHave.active=!0,this._view.btnBug.node.active=t.bug>0,t.bug&&r.default.instance.playAnimation("bug_idle_"+t.bugId,this._view.nodeBug)):(this._view.nodeNone.active=!0,this._view.rtLabelNone.string=p.default.GetText("\u519c\u7530")+(this.index+1)+" "+p.default.GetText("\u672a\u79cd\u690d"),this._view.labNone.string="0/"+t.maxNum),this.refreshSoild()},t.prototype.refreshPlant=function(){var e=s.default.instance.allFieldData.list[this.index];if(e.seed){var t=h.default.instance.getDataByName("item")[e.seed.id];this._view.rtName.string="<color="+w.GameConfig.QualityColor[e.seed.quality]+"/>["+p.default.GetText("QualityStr"+e.seed.quality)+"]</color>"+p.default.GetText("item_name_"+e.seed.id)+" "+e.seed.num+"/"+e.maxNum,u.default.instance.checkIsInGoodSeason(t.seed.season)?this._view.rtName.string+=" <color="+w.GameConfig.ColorDefault[1]+"/>"+p.default.GetText("\u5e94\u5b63")+"</color>":u.default.instance.checkIsInBedSeason(t.seed.season)&&(this._view.rtName.string+=" <color="+w.GameConfig.ColorDefault[-1]+"/>"+p.default.GetText("\u53cd\u5b63")+"</color>");var n=t.seed.growSp;if(e.grow>=t.seed.time)this._view.sprPlant.spriteFrame=f.default.instance.getSprite(b.ResType.main,n[n.length-1]),this._view.labDec.string=""+d.FieldMgr.instance.getHarvestHealthCost(this.index).toFixed(1)+p.default.GetText("\u4f53\u529b\u6536\u83b7")+" "+e.seed.num+"/"+e.maxNum;else{var i=d.FieldMgr.instance.getGrowSpd(this.index),a=(t.seed.time-e.grow)/i;this._view.labDec.string=e.water?p.default.GetText("\u5df2\u6d47\u6c34"):d.FieldMgr.instance.getWaterHealthCost(this.index).toFixed(1)+p.default.GetText("\u4f53\u529b\u6d47\u6c34"),this._view.labDec.string+=p.default.GetText("\u9884\u8ba1\u6210\u719f",a>1?Math.round(a):Math.ceil(10*a)/10);for(var o=0;o<n.length;o++)if(e.grow<t.seed.time/(n.length-1)*o){this._view.sprPlant.spriteFrame=f.default.instance.getSprite(b.ResType.main,n[o-1]);break}}}},t.prototype.refreshSoild=function(){var e=s.default.instance.allFieldData.list[this.index],t="ui-misc-4";this.node.getComponent(cc.Button).normalSprite=f.default.instance.getSprite(b.ResType.main,"ui-Small Square Buttons-8"),this.node.getComponent(cc.Button).pressedSprite=f.default.instance.getSprite(b.ResType.main,"ui-Small Square Buttons-9"),this.node.getComponent(cc.Button).hoverSprite=f.default.instance.getSprite(b.ResType.main,"ui-Small Square Buttons-9"),e.seed&&e.water&&(t="ui-misc-5",this.node.getComponent(cc.Button).normalSprite=f.default.instance.getSprite(b.ResType.main,"ui-Small Square Buttons-12"),this.node.getComponent(cc.Button).pressedSprite=f.default.instance.getSprite(b.ResType.main,"ui-Small Square Buttons-13"),this.node.getComponent(cc.Button).hoverSprite=f.default.instance.getSprite(b.ResType.main,"ui-Small Square Buttons-9")),this._view.sprSoild.spriteFrame=f.default.instance.getSprite(b.ResType.main,t)},t.prototype.onUpdate=function(){this.refreshPlant()},t.prototype.onClickSoild=function(){s.default.instance.allFieldData.list[this.index].seed?d.FieldMgr.instance.isGrowUp(this.index)?(l.default.instance.playAudio("haverst"),d.FieldMgr.instance.onHarvest(this.index,!0)):(l.default.instance.playAudio("water"),d.FieldMgr.instance.onWater(this.index,!0)||m.default.instance.openUI(_.default,{name:y.Config.uiName.seedChooseUI,param:[{index:this.index}]})):(l.default.instance.playAudio("click"),m.default.instance.openUI(_.default,{name:y.Config.uiName.seedChooseUI,param:[{index:this.index}]})),this.init(this.index)},t.prototype.onClickDetail=function(){l.default.instance.playAudio("click"),m.default.instance.openUI(g.default,{name:y.Config.uiName.fieldDetailUI,param:[this.index]})},t.prototype.onClickBug=function(){var e=this;l.default.instance.playAudio("effect_2");var t=s.default.instance.allFieldData.list[this.index];r.default.instance.playAnimation("bug_die_"+t.bugId,this._view.nodeBug),c.default.instance.createEffect("effect_29",C.Utils.getNodeUsePos(this._view.nodeBug)),setTimeout(function(){e.node.activeInHierarchy&&(e._view.btnBug.node.active=!1)},600),d.FieldMgr.instance.onRemoveBug(this.index)},o([L],t)}(cc.Component));n.default=A,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/field_manager":"field_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui/field_detail_ui":"field_detail_ui","../ui/seed_choose_ui":"seed_choose_ui","../ui_view/item/item_field_view":"item_field_view","../utils/config":"config","../utils/enum":"enum","../utils/game_config":"game_config","../utils/utils":"utils"}],item_fish_pole:[function(e,t,n){"use strict";cc._RF.push(t,"a7b5fguPHtFE4fwkC7JmeBQ","item_fish_pole");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.PoleStateType=void 0;var r,l=e("../manager/audio_manager"),s=e("../manager/pool_manager"),c=e("../manager/resources_manager"),d=e("../ui/game_fish_ui"),u=e("../ui_view/item/item_pole_view"),h=e("../utils/enum"),p=e("../utils/utils"),f=cc._decorator,m=f.ccclass;f.property,function(e){e[e["\u7b49\u5f85\u629b\u7aff"]=1]="\u7b49\u5f85\u629b\u7aff",e[e["\u7b49\u5f85\u4e0a\u94a9"]=2]="\u7b49\u5f85\u4e0a\u94a9",e[e["\u6709\u4e0a\u94a9"]=3]="\u6709\u4e0a\u94a9",e[e["\u7ed3\u675f"]=10]="\u7ed3\u675f"}(r=n.PoleStateType||(n.PoleStateType={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new u.default,t.cx=0,t.cy=0,t.hookFish=null,t._barPro=1,t._holdClick=!1,t._moveClick=!1,t._statue=null,t._ropeLength=0,t.id=0,t}return a(t,e),Object.defineProperty(t.prototype,"status",{get:function(){return this._statue},set:function(e){this._statue=e,this.onStatueChange()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._view.initView(this.node),this.cx=25,this.cy=5,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.init=function(e){this.id=e,this._holdClick=!1,this.status=r.\u7b49\u5f85\u629b\u7aff,this._view.nodeFood.setPosition(0,0),this._view.nodeFood.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(h.ResType.main,"fish-hook ("+e+")"),this.hookFish=null,this._view.nodeClick.active=!1},t.prototype.onTouchStart=function(){this._holdClick||(this._holdClick=!0,this._moveClick=!1)},t.prototype.onTouchMove=function(e){[r.\u7b49\u5f85\u629b\u7aff,r.\u7b49\u5f85\u4e0a\u94a9].includes(this.status)&&this.onMovePole(e.getDelta());var t=e.getStartLocation().x-e.getLocation().x;Math.abs(t)>20&&(this._moveClick=!0)},t.prototype.onTouchEnd=function(){this._moveClick||this.onClick(),this._holdClick=!1,this._moveClick=!1},t.prototype.onMovePole=function(e){this.node.x+=e.x,this._view.nodeFood.x-=e.x},t.prototype.onClick=function(){switch(l.default.instance.playAudio("sclick_5"),this.status){case r.\u7b49\u5f85\u629b\u7aff:this.onThrow();break;case r.\u6709\u4e0a\u94a9:this.onDrawHook()}},t.prototype.update=function(e){this._view.nodeRope.getComponent(cc.Graphics).clear(),this._view.nodeRope.getComponent(cc.Graphics).moveTo(0,0),this._view.nodeRope.getComponent(cc.Graphics).quadraticCurveTo(this.cx,this.cy,this._view.nodeFood.x-this._view.nodeRope.getComponent(cc.Graphics).node.x,this._view.nodeFood.y-this._view.nodeRope.getComponent(cc.Graphics).node.y),this._view.nodeRope.getComponent(cc.Graphics).stroke(),this._view.barDistance.progress+=this._barPro*e,this._view.barDistance.progress<=0?this._barPro=1:this._view.barDistance.progress>=1&&(this._barPro=-1);var t=this._view.nodeFood.getPosition().mag();if(t>this._ropeLength){var n=t-this._ropeLength,i=this._view.nodeFood.getPosition().neg().normalize().mul(10*Math.sqrt(n));this._view.nodeFood.x+=i.x*e,this._view.nodeFood.y+=i.y*e}},t.prototype.onThrow=function(){var e=this,t=p.Utils.getRandomNumber(15)-12,n=35+200*this._view.barDistance.progress;this._ropeLength=n,this._view.nodeFood.stopAllActions(),cc.tween(this._view.nodeFood).bezierTo(.6,cc.v2(-15,-15),cc.v2(-15,-15),cc.v2(t,n)).call(function(){var t=d.default.instance.getAroundFish(p.Utils.getNodeUsePos(e._view.nodeFood));d.default.instance.addScore(2*t.length),e.status=r.\u7b49\u5f85\u4e0a\u94a9}).start()},t.prototype.onDrawHook=function(){l.default.instance.playAudio("sclick_3"),this.status==r.\u6709\u4e0a\u94a9?this.onSuccess():this.onFail()},t.prototype.onFail=function(){var e=this;this.status=r.\u7ed3\u675f,this._view.nodeFood.getComponent(cc.Sprite).spriteFrame=null,cc.tween(this._view.nodeFood).bezierTo(.6,cc.v2(200,200),cc.v2(100,100),cc.v2(0,0)).call(function(){s.default.instance.removeObject(e.node)}).start()},t.prototype.onSuccess=function(){var e=this,t=this.hookFish.getReward(0),n=Math.sqrt(this.hookFish.currentState.timer>1?2-this.hookFish.currentState.timer:this.hookFish.currentState.timer);s.default.instance.removeObject(this.hookFish.node),this.hookFish=null,this._view.nodeFood.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(h.ResType.main,"fish-fish ("+t.id+")"),this.status=r.\u7ed3\u675f,cc.tween(this._view.nodeFood).bezierTo(.6,cc.v2(50,50),cc.v2(25,25),cc.v2(0,0)).delay(.4).call(function(){d.default.instance.addScore(17*t.id*n),s.default.instance.removeObject(e.node)}).start()},t.prototype.onHook=function(e){l.default.instance.playAudio("sclick_4"),this.status=r.\u6709\u4e0a\u94a9,this.hookFish=e,this._view.nodeClick.active=!0},t.prototype.updateHook=function(e){this._view.nodeClick.scale=e,this._view.nodeClick.color=e>1?cc.Color.WHITE:cc.Color.RED},t.prototype.onEscape=function(){this.status=r.\u7b49\u5f85\u4e0a\u94a9,this.id=1,this._view.nodeFood.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(h.ResType.main,"fish-hook ("+this.id+")"),this.hookFish=null,this._view.nodeClick.active=!1},t.prototype.onStatueChange=function(){switch(this._view.barDistance.node.active=!1,this.status){case r.\u7b49\u5f85\u629b\u7aff:this._view.barDistance.node.active=!0;break;case r.\u7b49\u5f85\u4e0a\u94a9:case r.\u6709\u4e0a\u94a9:case r.\u7ed3\u675f:}},t.prototype.getBaitPos=function(){return p.Utils.getNodeUsePos(this._view.nodeFood)},o([m],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../ui/game_fish_ui":"game_fish_ui","../ui_view/item/item_pole_view":"item_pole_view","../utils/enum":"enum","../utils/utils":"utils"}],item_food_animal:[function(e,t,n){"use strict";cc._RF.push(t,"729d8ro1RdOub/NLFk00lP7","item_food_animal");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/pool_manager"),c=e("../manager/resources_manager"),d=e("../utils/enum"),u=e("../utils/utils"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arrType=0,t.type=0,t.spd=50,t.hp=3,t}return a(t,e),t.prototype.init=function(e){l.default.instance.festivalData.game.hard?(this.spd=65,this.type=u.Utils.getArrRandomItem([1,1,1,1,1,2,2,2,3,3,4])):(this.spd=45,this.type=u.Utils.getArrRandomItem([1,1,1,2,2,2,3,3,4])),this.arrType=e,this.hp=3,this.node.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(d.ResType.main,["Icons-086_Branch","Icons-174_Weed","food-onigiri","animal-egge (2)"][this.type-1])},t.prototype.onUpdate=function(e){switch(this.arrType){case 0:this.node.y-=e*this.spd;break;case 1:this.node.y-=e*this.spd/2*1.732,this.node.x-=e*this.spd/2;break;case 2:this.node.y-=e*this.spd/2*1.732,this.node.x+=e*this.spd/2;break;case 3:this.node.y-=e*this.spd*.75,this.node.x-=e*this.spd*.65;break;case 4:this.node.y-=e*this.spd*.75,this.node.x+=e*this.spd*.65}this.node.y<-240&&s.default.instance.removeObject(this.node)},t.prototype.onHit=function(){switch(this.hp--,this.type){case 1:r.default.instance.playAudio("died"),this.hp<=0&&s.default.instance.removeObject(this.node);break;default:r.default.instance.playAudio("effect_1"),s.default.instance.removeObject(this.node)}},o([p],t)}(cc.Component));n.default=f,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../utils/enum":"enum","../utils/utils":"utils"}],item_food_choose_view:[function(e,t,n){"use strict";cc._RF.push(t,"551f3eBC1JEsrPzl/bFoKv2","item_food_choose_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.itemTag=null,this.btnSale=null,this.labLanList=[],this.labGrow=null,this.labType=null,this.sprQuality=null,this.sprMain=null,this.rtLabel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l;this.itemTag=cc.find("itemTag",e),this.btnSale=null===(t=cc.find("btnSale",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnSale/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labGrow=null===(i=cc.find("labGrow",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labType=null===(a=cc.find("labType",e))||void 0===a?void 0:a.getComponent(cc.Label),this.sprQuality=null===(o=cc.find("sprQuality",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprMain=null===(r=cc.find("sprMain",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.rtLabel=null===(l=cc.find("rtLabel",e))||void 0===l?void 0:l.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.itemTag=null,this.btnSale=null,this.labLanList=[],this.labGrow=null,this.labType=null,this.sprQuality=null,this.sprMain=null,this.rtLabel=null},e}();n.default=i,cc._RF.pop()},{}],item_food_choose:[function(e,t,n){"use strict";cc._RF.push(t,"f8b71f4vLFJ/K9rUsa0RmBp","item_food_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/json_manager"),s=e("../manager/language_manager"),c=e("../manager/resources_manager"),d=e("../manager/sale_manager"),u=e("../ui_view/item/item_food_choose_view"),h=e("../utils/enum"),p=e("../utils/utils"),f=cc._decorator,m=f.ccclass,g=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new u.default,t.data=null,t.cb=null,t.curNum=1,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnSale.node.on("click",this.onClick,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u9009\u62e9"];e.forEach(function(e,n){e.string=s.default.GetText(t[n])})},t.prototype.init=function(e,t){this.cb=t,this.data=e;var n=l.default.instance.getDataByName("item")[e.id];this._view.itemTag.getChildByName("label").getComponent(cc.Label).string=n.type.includes(h.Itemtype.dsert)?s.default.GetText("\u751c\u54c1"):s.default.GetText("\u4e3b\u98df"),this._view.rtLabel.string=s.default.GetText("item_name_"+e.id)+s.default.GetText("\u603b")+e.num+s.default.GetText("\u4e2a"),this._view.sprQuality.spriteFrame=c.default.instance.getSprite(h.ResType.main,"ui-quality_"+e.quality),this._view.sprMain.spriteFrame=c.default.instance.getSprite(h.ResType.main,p.Utils.getItemSpByAmount(e)),this._view.labType.string=n.recipe.building?s.default.GetText("item_name_"+n.recipe.building)+s.default.GetText("\u6599\u7406"):"",this._view.labGrow.string=s.default.GetText("\u4eba\u6c14")+": "+d.default.instance.getItemNeed(this.data).toFixed(0)+"%  "+s.default.GetText("\u4ef7\u503c")+"\uff1a"+d.default.instance.getItemPrice(this.data).toFixed(0)},t.prototype.onClick=function(){r.default.instance.playAudio("click"),this.cb&&this.cb({id:this.data.id,quality:this.data.quality,num:1})},o([m],t)}(cc.Component));n.default=g,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../ui_view/item/item_food_choose_view":"item_food_choose_view","../utils/enum":"enum","../utils/utils":"utils"}],item_friend_view:[function(e,t,n){"use strict";cc._RF.push(t,"c898eZPpGRIYZ6KNeKPmawH","item_friend_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeHave=null,this.nodeNone=null,this.nodeAction=null,this.nodeChooseFriendContainer=null,this.btnDetail=null,this.btnSkill=null,this.btnNone=null,this.labNone=null,this.sprMain=null,this.sprSkillQua=null,this.rtName=null,this.rtAttr=null,this.barHealth=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c;this.nodeHave=cc.find("nodeHave",e),this.nodeNone=cc.find("nodeNone",e),this.nodeAction=cc.find("nodeHave/nodeAction",e),this.nodeChooseFriendContainer=cc.find("nodeNone/nodeChooseFriendContainer",e),this.btnDetail=null===(t=cc.find("nodeHave/btnDetail",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnSkill=null===(n=cc.find("nodeHave/btnSkill",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnNone=null===(i=cc.find("nodeNone/btnNone",e))||void 0===i?void 0:i.getComponent(cc.Button),this.labNone=null===(a=cc.find("nodeNone/labNone",e))||void 0===a?void 0:a.getComponent(cc.Label),this.sprMain=null===(o=cc.find("nodeHave/sprMain",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprSkillQua=null===(r=cc.find("nodeHave/sprSkillQua",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.rtName=null===(l=cc.find("nodeHave/rtName",e))||void 0===l?void 0:l.getComponent(cc.RichText),this.rtAttr=null===(s=cc.find("nodeHave/rtAttr",e))||void 0===s?void 0:s.getComponent(cc.RichText),this.barHealth=null===(c=cc.find("nodeHave/barHealth",e))||void 0===c?void 0:c.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.nodeHave=null,this.nodeNone=null,this.nodeAction=null,this.nodeChooseFriendContainer=null,this.btnDetail=null,this.btnSkill=null,this.btnNone=null,this.labNone=null,this.sprMain=null,this.sprSkillQua=null,this.rtName=null,this.rtAttr=null,this.barHealth=null},e}();n.default=i,cc._RF.pop()},{}],item_friend:[function(e,t,n){"use strict";cc._RF.push(t,"04b64d1Fb9GzI8obQQuNo4k","item_friend");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/friend_data"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/friend_manager"),d=e("../manager/json_manager"),u=e("../manager/language_manager"),h=e("../manager/pool_manager"),p=e("../manager/resources_manager"),f=e("../manager/ui_manager"),m=e("../ui/adventure_ui"),g=e("../ui/friend_choose_ui"),_=e("../ui/friend_detail_ui"),v=e("../ui/pop_text_ui"),y=e("../ui_view/item/item_friend_view"),b=e("../utils/config"),w=e("../utils/enum"),C=e("../utils/game_config"),S=e("../utils/utils"),L=cc._decorator,A=L.ccclass,k=(L.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new y.default,t.index=0,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._view.initView(this.node),this.node.on("click",this.onClickDetail,this),this._view.btnDetail.node.on("click",this.onClickDetail,this),this._view.btnSkill.node.on("click",this.onClickSKill,this),this._view.btnNone.node.on("click",this.onClickNone,this),this._view.nodeAction.children.forEach(function(t,n){t.on("click",function(){e.onClickAction(n)},e)}),this.setLanguage()},t.prototype.setLanguage=function(){var e=["\u6218\u6597","","\u5e2e\u5fd9","\u4f11\u606f"];this._view.nodeAction.children.forEach(function(t,n){t.getChildByName("label").getComponent(cc.Label).string=u.default.GetText(e[n])})},t.prototype.init=function(e){this.index=e;var t=s.default.instance.allFriendData.workArr[e];if(this.id=t,t){this._view.nodeHave.active=!0,this._view.nodeNone.active=!1;var n=s.default.instance.allFriendData.friendMap[t],i=d.default.instance.getDataByName("char")[t];this._view.sprMain.spriteFrame=p.default.instance.getSprite(w.ResType.main,"char-char_"+t),this._view.btnSkill.node.getComponent(cc.Sprite).spriteFrame=p.default.instance.getSprite(w.ResType.main,"skill-skill_"+i.skill),this._view.barHealth.progress=n.health/c.FriendMgr.instance.getFriendAttr(t,4),this._view.rtName.string="<color="+C.GameConfig.QualityColor[n.quality]+"/>["+u.default.GetText("FriendlyStr"+n.quality)+"]</color>"+u.default.GetText("char_name_"+t);var a=this._view.nodeAction.children[1].getChildByName("label").getComponent(cc.Label);a.string=u.default.GetText("FindTypeStr"+i.findType),this._view.rtAttr.string="lv."+n.lv+" <img src='"+C.GameConfig.FriendAttrIcon[1]+"' />"+c.FriendMgr.instance.getFriendAttr(t,1)+"  <img src='"+C.GameConfig.FriendAttrIcon[2]+"' />"+c.FriendMgr.instance.getFriendAttr(t,2)+"  <img src='"+C.GameConfig.FriendAttrIcon[3]+"' />"+c.FriendMgr.instance.getFriendAttr(t,3),this._view.btnDetail.node.getComponent(cc.Sprite).spriteFrame=p.default.instance.getSprite(w.ResType.main,"ui-q ("+n.quality+")"),this._view.sprSkillQua.node.getComponent(cc.Sprite).spriteFrame=p.default.instance.getSprite(w.ResType.main,"ui-q ("+n.quality+")"),this._view.nodeAction.children.forEach(function(e){e.width=32,e.color=cc.Color.WHITE}),n.relax?(this._view.nodeAction.children[3].width=50,this._view.nodeAction.children[3].color=cc.Color.YELLOW):(n.op==r.FriendOPType.find&&(a.string+=(n.findPro/.4).toFixed(0)+"%"),this._view.nodeAction.children[n.op-1].width=50,this._view.nodeAction.children[n.op-1].color=cc.Color.YELLOW)}else this._view.nodeHave.active=!1,this._view.nodeNone.active=!0,this.refreshNone()},t.prototype.onClickDetail=function(){l.default.instance.playAudio("click_1"),s.default.instance.allFriendData.workArr[this.index]?f.default.instance.openUI(_.default,{name:b.Config.uiName.friendDetailUI,param:[this.id]}):f.default.instance.openUI(m.default,{name:b.Config.uiName.adventureUI})},t.prototype.onClickSKill=function(){var e=d.default.instance.getDataByName("char")[this.id],t=d.default.instance.getDataByName("skill")[e.skill];v.default.instance.showUI(S.Utils.getNodeUsePos(this._view.btnSkill.node),{spr:"skill-skill_"+t.id,name:u.default.GetText("skill_name_"+e.skill),dec:c.FriendMgr.instance.getFriendSkillDec(this.id)})},t.prototype.refreshNone=function(){var e=c.FriendMgr.instance.getUnWorkList();0==e.length?(this._view.labNone.string=u.default.GetText("\u65e0\u4f19\u4f34"),this._view.btnNone.node.active=!1):(this._view.btnNone.node.active=!0,this._view.labNone.string=u.default.GetText("\u70b9\u51fb\u62db\u52df\u540c\u4f19")),h.default.instance.removeObjByContainer(this._view.nodeChooseFriendContainer);for(var t=S.Utils.getArrRandomItemsByNum(e,7),n=0;n<t.length;n++){var i=h.default.instance.createObjectByName("itemSp",this._view.nodeChooseFriendContainer);i.children.forEach(function(e){e.active=!1}),i.scale=1,i.y=0,i.getComponent(cc.Sprite).spriteFrame=p.default.instance.getSprite(w.ResType.main,"char-char_"+t[n])}},t.prototype.onClickNone=function(){l.default.instance.playAudio("click"),f.default.instance.openUI(g.default,{name:b.Config.uiName.friendChooseUI})},t.prototype.onClickAction=function(e){l.default.instance.playAudio("switch"),c.FriendMgr.instance.changeOpType(this.id,e+1)},o([A],t)}(cc.Component));n.default=k,cc._RF.pop()},{"../interface/friend_data":"friend_data","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui/adventure_ui":"adventure_ui","../ui/friend_choose_ui":"friend_choose_ui","../ui/friend_detail_ui":"friend_detail_ui","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_friend_view":"item_friend_view","../utils/config":"config","../utils/enum":"enum","../utils/game_config":"game_config","../utils/utils":"utils"}],item_furniture_craft_view:[function(e,t,n){"use strict";cc._RF.push(t,"1d284ye5L5Oqp1x4ehC7AQ8","item_furniture_craft_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.btnBuy=null,this.labLanList=[],this.labPrice=null,this.labPoint=null,this.sprIcon=null,this.rtLabel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r;this.btnBuy=null===(t=cc.find("btnBuy",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnBuy/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labPrice=null===(i=cc.find("labPrice",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labPoint=null===(a=cc.find("labPoint",e))||void 0===a?void 0:a.getComponent(cc.Label),this.sprIcon=null===(o=cc.find("sprIcon",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.rtLabel=null===(r=cc.find("rtLabel",e))||void 0===r?void 0:r.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.btnBuy=null,this.labLanList=[],this.labPrice=null,this.labPoint=null,this.sprIcon=null,this.rtLabel=null},e}();n.default=i,cc._RF.pop()},{}],item_furniture_craft:[function(e,t,n){"use strict";cc._RF.push(t,"afde6iLwAJLYrRqo//0Lyu6","item_furniture_craft");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/build_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/game_manager"),d=e("../manager/json_manager"),u=e("../manager/language_manager"),h=e("../manager/resources_manager"),p=e("../manager/ui_manager"),f=e("../manager/workshop_manager"),m=e("../ui/pop_text_ui"),g=e("../ui_view/item/item_furniture_craft_view"),_=e("../utils/enum"),v=e("../utils/utils"),y=cc._decorator,b=y.ccclass,w=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnBuy.node.on("click",this.onClick,this),this._view.sprIcon.node.on("click",this.onClickItem,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u8d2d\u4e70"];e.forEach(function(e,n){e.string=u.default.GetText(t[n])})},t.prototype.init=function(e){this.id=e;var t=d.default.instance.getDataByName("item")[e];this._view.sprIcon.spriteFrame=h.default.instance.getSprite(_.ResType.main,t.sp);var n=s.default.instance.findItem(e);this._view.rtLabel.string=u.default.GetText("item_name_"+e),n.length>0&&(this._view.rtLabel.string+=u.default.GetText("\u5bb6\u5177\u4e2a\u6570",n[0].num,f.WorkshopMgr.instance.getCanUseBuild(e)));var i=c.default.instance.getPrecentValueByStr("furnitureCost"),a=t.point*i,o=10*t.point*i;this._view.labPrice.string="\uffe5 "+o,this._view.labPrice.node.color=s.default.instance.money>=o?cc.Color.BLACK:cc.Color.RED,this._view.labPoint.string="P "+a,this._view.labPoint.node.color=s.default.instance.point>=a?cc.Color.BLACK:cc.Color.RED},t.prototype.onClick=function(){if(r.default.instance.playAudio("sclick_6"),610==this.id){var e=s.default.instance.findItem(this.id).length>0?s.default.instance.findItem(this.id)[0].num:0;if(c.default.instance.checkHaveSkill(42)){if(e>=10)return void p.default.instance.LoadTipsByStr(u.default.GetText("\u6e14\u7f51\u4e0a\u9650"))}else if(e>=3)return void p.default.instance.LoadTipsByStr(u.default.GetText("\u6e14\u7f51\u4e0a\u9650"))}l.BuildMgr.instance.onBuyFurniture(this.id,this._view.btnBuy.node),this.init(this.id)},t.prototype.onClickItem=function(){m.default.instance.showUI(v.Utils.getNodeUsePos(this._view.sprIcon.node),{spr:v.Utils.getItemSpName(this.id),name:u.default.GetText("item_name_"+this.id),dec:u.default.GetText("item_dec_"+this.id)})},o([b],t)}(cc.Component));n.default=w,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/build_manager":"build_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../manager/workshop_manager":"workshop_manager","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_furniture_craft_view":"item_furniture_craft_view","../utils/enum":"enum","../utils/utils":"utils"}],item_game_fish:[function(e,t,n){"use strict";cc._RF.push(t,"ba87fA/f/lLOp7P3IgU8BwW","item_game_fish");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../istate/fish_state"),l=e("../manager/resources_manager"),s=e("../ui/game_fish_ui"),c=e("../utils/enum"),d=e("../utils/utils"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spr=null,t.state={},t.currentState=null,t.targetPole=null,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){this.state[r.FishStateType.idle]=new r.FishIdleState(this),this.state[r.FishStateType.attract]=new r.FishAttractState(this),this.state[r.FishStateType.move]=new r.FishMoveState(this),this.state[r.FishStateType.escape]=new r.FishEscapeStat(this),this.state[r.FishStateType.bite]=new r.FishBiteState(this)},t.prototype.init=function(){this.currentState=null,this.id=s.default.instance.getFishId(),this.spr.spriteFrame=l.default.instance.getSprite(c.ResType.main,"fish-fish ("+this.id+")"),this.switchState(r.FishStateType.idle),this.node.opacity=100,this.node.color=cc.Color.BLACK,this.state[r.FishStateType.idle]=new r.FishIdleState(this),this.setOriPos()},t.prototype.setOriPos=function(){var e=1==d.Utils.getRandomNumber(1)?-100:100;this.node.setPosition(e,d.Utils.getRandomNumber(250)-50)},t.prototype.switchState=function(e){null!=this.currentState&&this.currentState.onExit(),this.currentState=this.state[e],this.currentState.onEnter()},t.prototype.getCurState=function(){for(var e in this.state)if(this.currentState==this.state[+e])return+e;return null},t.prototype.update=function(e){this.currentState&&this.currentState.onUpdate(e)},t.prototype.getReward=function(){return{id:this.id,q:1}},o([p(cc.Sprite)],t.prototype,"spr",void 0),o([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../istate/fish_state":"fish_state","../manager/resources_manager":"resources_manager","../ui/game_fish_ui":"game_fish_ui","../utils/enum":"enum","../utils/utils":"utils"}],item_kit_craft_view:[function(e,t,n){"use strict";cc._RF.push(t,"3a8273ofQ9GJq3S7k0G1gVo","item_kit_craft_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.btnBuy=null,this.labLanList=[],this.labPrice=null,this.labNum=null,this.sprCurQuality=null,this.sprCurMain=null,this.sprMeta=null,this.sprNextQuality=null,this.sprNextMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d;this.btnBuy=null===(t=cc.find("btnBuy",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnBuy/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labPrice=null===(i=cc.find("labPrice",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labLanList[1]=null===(a=cc.find("labLanList1",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labNum=null===(o=cc.find("labNum",e))||void 0===o?void 0:o.getComponent(cc.Label),this.sprCurQuality=null===(r=cc.find("sprCurQuality",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprCurMain=null===(l=cc.find("sprCurMain",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.sprMeta=null===(s=cc.find("sprMeta",e))||void 0===s?void 0:s.getComponent(cc.Sprite),this.sprNextQuality=null===(c=cc.find("sprNextQuality",e))||void 0===c?void 0:c.getComponent(cc.Sprite),this.sprNextMain=null===(d=cc.find("sprNextMain",e))||void 0===d?void 0:d.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.btnBuy=null,this.labLanList=[],this.labPrice=null,this.labNum=null,this.sprCurQuality=null,this.sprCurMain=null,this.sprMeta=null,this.sprNextQuality=null,this.sprNextMain=null},e}();n.default=i,cc._RF.pop()},{}],item_kit_craft:[function(e,t,n){"use strict";cc._RF.push(t,"a42b23hhCFJErZ3h/rRyZu6","item_kit_craft");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/build_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/resources_manager"),h=e("../ui/building_ui"),p=e("../ui/pop_text_ui"),f=e("../ui_view/item/item_kit_craft_view"),m=e("../utils/enum"),g=e("../utils/utils"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new f.default,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnBuy.node.on("click",this.onClick,this),this._view.sprCurMain.node.on("click",this.onClickAheadKit,this),this._view.sprNextMain.node.on("click",this.onClickBehindKit,this),this._view.sprMeta.node.on("click",this.onClickMet,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u6253\u9020","\u6d88\u8017"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype.init=function(e){this.id=e;var t=s.default.instance.findItem(e),n=t[0].quality,i=Math.floor(Math.pow(25,1+.2*n));this._view.labPrice.string="P "+i,this._view.labPrice.node.color=s.default.instance.point>=i?cc.Color.BLACK:cc.Color.RED,this._view.sprCurMain.spriteFrame=u.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount(t[0])),this._view.sprNextMain.spriteFrame=u.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount({id:t[0].id,quality:t[0].quality+1}));var a;a=e==m.ToolId.\u80cc\u5305?[1014,809,817,1008,1012][n]:[505,506,507,508,509][n];var o=[10,6,12,10,8,8,4][e-m.ToolId.\u6c34\u58f6];this._view.sprMeta.spriteFrame=u.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpName(a));var r=l.BuildMgr.instance.getItemTotalNum(a);this._view.labNum.string="x"+o,this._view.labNum.node.color=r>=o?cc.Color.WHITE:cc.Color.RED},t.prototype.onClick=function(){r.default.instance.playAudio("sclick_6"),l.BuildMgr.instance.upgradeKit(this.id,this._view.btnBuy.node),h.default.instance.refreshToolPage()},t.prototype.onClickAheadKit=function(){c.default.instance.getDataByName("item")[this.id];var e=s.default.instance.findItem(this.id)[0].quality,t={id:this.id,num:1,quality:e};p.default.instance.showUI(g.Utils.getNodeUsePos(this._view.sprCurMain.node),{name:d.default.GetText("item_name_"+this.id),dec:d.default.GetText("item_dec_"+this.id)+(0==e?d.default.GetText("\u5de5\u5177\u5931\u8d25"):""),spr:g.Utils.getItemSpByAmount(t)})},t.prototype.onClickBehindKit=function(){c.default.instance.getDataByName("item")[this.id];var e=s.default.instance.findItem(this.id)[0].quality,t={id:this.id,num:1,quality:e+1};p.default.instance.showUI(g.Utils.getNodeUsePos(this._view.sprNextMain.node),{name:d.default.GetText("item_name_"+this.id),dec:d.default.GetText("item_dec_"+this.id),spr:g.Utils.getItemSpByAmount(t)})},t.prototype.onClickMet=function(){var e,t=s.default.instance.findItem(this.id)[0].quality;e=this.id==m.ToolId.\u80cc\u5305?[1014,809,817,1008,1012][t]:[505,506,507,508,509][t],c.default.instance.getDataByName("item")[e],p.default.instance.showUI(g.Utils.getNodeUsePos(this._view.sprMeta.node),{name:d.default.GetText("item_name_"+e),dec:d.default.GetText("item_dec_"+e),spr:g.Utils.getItemSpName(e)})},o([v],t)}(cc.Component));n.default=y,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/build_manager":"build_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../ui/building_ui":"building_ui","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_kit_craft_view":"item_kit_craft_view","../utils/enum":"enum","../utils/utils":"utils"}],item_map_choose_view:[function(e,t,n){"use strict";cc._RF.push(t,"22022ZWVqFDrIqM2Bm+Ij8I","item_map_choose_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeArea=null,this.nodeSelect=null,this.nodeMonsterContainer=null,this.nodeReward=null,this.labArea=null,this.labDiff=null,this.sprBg=null}return e.prototype.initView=function(e){var t,n,i;this.nodeArea=cc.find("nodeArea",e),this.nodeSelect=cc.find("nodeSelect",e),this.nodeMonsterContainer=cc.find("nodeMonsterContainer",e),this.nodeReward=cc.find("nodeArea/nodeReward",e),this.labArea=null===(t=cc.find("nodeArea/labArea",e))||void 0===t?void 0:t.getComponent(cc.Label),this.labDiff=null===(n=cc.find("nodeArea/labDiff",e))||void 0===n?void 0:n.getComponent(cc.Label),this.sprBg=null===(i=cc.find("mask/sprBg",e))||void 0===i?void 0:i.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.nodeArea=null,this.nodeSelect=null,this.nodeMonsterContainer=null,this.nodeReward=null,this.labArea=null,this.labDiff=null,this.sprBg=null},e}();n.default=i,cc._RF.pop()},{}],item_map_choose:[function(e,t,n){"use strict";cc._RF.push(t,"91173u9eRlB8aEIq6N+L/LM","item_map_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/plan_manager"),h=e("../manager/resources_manager"),p=e("../ui/choose_map_ui"),f=e("../ui/friend_ui"),m=e("../ui/pop_text_ui"),g=e("../ui_view/item/item_map_choose_view"),_=e("../utils/enum"),v=e("../utils/utils"),y=cc._decorator,b=y.ccclass,w=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t.index=0,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._view.initView(this.node),cc.tween(this._view.nodeReward).repeatForever(cc.tween().to(.5,{y:1},cc.easeOut(2)).to(1,{y:-1},cc.easeInOut(2)).to(.5,{y:0},cc.easeIn(2))).start(),this._view.nodeMonsterContainer.children.forEach(function(t,n){t.on("click",function(){l.default.instance.playAudio("click"),e.onClickMonster(t,n)},e)}),this._view.nodeReward.children.forEach(function(t,n){t.on("click",function(){l.default.instance.playAudio("click"),e.onClickReward(t,n)},e)})},t.prototype.init=function(e){var t=this;this.index=e;var n=e+1,i=c.default.instance.getDataByName("map")[n];if(this._view.labArea.string=d.default.GetText("map_name_"+n),this.node.on("click",this.onClick,this),h.default.instance.getBackGround("battle_"+i.sp).then(function(e){t._view.sprBg.spriteFrame=e}),e<u.PlanMgr.instance.getMaxMap())this._view.sprBg.setMaterial(0,f.default.instance.normalMate),this._view.nodeMonsterContainer.active=!0,this._view.nodeReward.active=!0,this._view.nodeMonsterContainer.children.forEach(function(e,t){e.active=!!i.monster[t],i.monster[t]&&r.default.instance.playNpcAnimation(i.monster[t],_.CharAnimaType.walk,e)}),this._view.nodeReward.children.forEach(function(e,t){e.active=!!i.findReward[t],i.findReward[t]&&(e.getComponent(cc.Sprite).spriteFrame=h.default.instance.getSprite(_.ResType.main,v.Utils.getItemSpName(i.findReward[t])))}),this._view.labDiff.string=d.default.GetText("\u53ef\u91c7\u96c6\u7269\u54c1");else{this._view.sprBg.setMaterial(0,f.default.instance.greyMate),this._view.nodeMonsterContainer.active=!1,this._view.nodeReward.active=!1;var a=Math.floor(Math.sqrt(s.default.instance.planData.explore/100)),o=Math.pow(a+1,2),l=s.default.instance.planData.explore;a>0&&(o-=Math.pow(a,2),l=s.default.instance.planData.explore-100*Math.pow(a,2)),l/=o,this._view.labDiff.string=d.default.GetText("\u63a2\u7d22\u8fdb\u5ea6")+"\uff1a"+l.toFixed(0)+"%"}},t.prototype.showBgAnimation=function(){},t.prototype.onClick=function(){l.default.instance.playAudio("click"),p.default.instance.onChoose(this.index)},t.prototype.setSelect=function(e){this._view.nodeSelect.active=e},t.prototype.onClickMonster=function(e,t){var n=c.default.instance.getDataByName("map")[this.index+1],i=c.default.instance.getDataByName("char")[n.monster[t]],a=c.default.instance.getDataByName("item")[i.drop];m.default.instance.showUI(v.Utils.getNodeUsePos(e),{spr:v.Utils.getItemSpName(a.id),name:d.default.GetText("char_name_"+n.monster[t]),dec:d.default.GetText("char_dec_"+n.monster[t])+d.default.GetText("\u6218\u5229\u54c1\u6389\u843d",d.default.GetText("item_name_"+i.drop),i.dropChance)})},t.prototype.onClickReward=function(e,t){var n=c.default.instance.getDataByName("map")[this.index+1],i=c.default.instance.getDataByName("item")[n.findReward[t]];m.default.instance.showUI(v.Utils.getNodeUsePos(e),{spr:v.Utils.getItemSpName(i.id),name:d.default.GetText("item_name_"+n.findReward[t]),dec:d.default.GetText("item_dec_"+n.findReward[t])})},o([b],t)}(cc.Component));n.default=w,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/plan_manager":"plan_manager","../manager/resources_manager":"resources_manager","../ui/choose_map_ui":"choose_map_ui","../ui/friend_ui":"friend_ui","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_map_choose_view":"item_map_choose_view","../utils/enum":"enum","../utils/utils":"utils"}],item_market_view:[function(e,t,n){"use strict";cc._RF.push(t,"1b906w00PxE9ZOuDABPrH/2","item_market_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.btnBuy=null,this.labLanList=[],this.labPrice=null,this.labNum=null,this.sprMain=null}return e.prototype.initView=function(e){var t,n,i,a,o;this.btnBuy=null===(t=cc.find("btnBuy",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnBuy/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labPrice=null===(i=cc.find("labPrice",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labNum=null===(a=cc.find("labNum",e))||void 0===a?void 0:a.getComponent(cc.Label),this.sprMain=null===(o=cc.find("sprMain",e))||void 0===o?void 0:o.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.btnBuy=null,this.labLanList=[],this.labPrice=null,this.labNum=null,this.sprMain=null},e}();n.default=i,cc._RF.pop()},{}],item_market:[function(e,t,n){"use strict";cc._RF.push(t,"12803QQfihIebZcCQNK3EAT","item_market");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/effect_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/resources_manager"),h=e("../manager/shop_manager"),p=e("../manager/ui_manager"),f=e("../ui/item_detail_ui"),m=e("../ui/market_ui"),g=e("../utils/config"),_=e("../utils/enum"),v=e("../utils/utils"),y=cc._decorator,b=y.ccclass,w=y.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=0,t.data=null,t.sprMain=null,t.qualitySpr=null,t.priceLabel=null,t.leftLabel=null,t.buyLabel=null,t.buyBtn=null,t}return a(t,e),t.prototype.onLoad=function(){this.buyBtn.node.on("click",this.onClickBuy,this),this.node.on("click",this.onClickItem,this),cc.tween(this.sprMain.node).repeatForever(cc.tween().to(.5,{y:1},cc.easeOut(2)).to(1,{y:-1},cc.easeInOut(2)).to(.5,{y:0},cc.easeIn(2))).start(),this.setLanguage()},t.prototype.setLanguage=function(){this.buyLabel.string=d.default.GetText("\u8d2d\u4e70")},t.prototype.init=function(e,t,n){this.index=e,this.data=t;var i=c.default.instance.getDataByName("item")[t.id],a=Math.floor(t.maxNum*n/100)||1;this.num=a;var o=h.ShopMgr.instance.getShopPrice(t.id,t.maxQuality,t.priceRate)*a;this.priceLabel.string="\uffe5"+o.toFixed(0);var r=v.Utils.getItemSpByAmount({id:i.id,quality:t.maxQuality});this.sprMain.spriteFrame=u.default.instance.getSprite(_.ResType.main,r),this.qualitySpr.spriteFrame=u.default.instance.getSprite(_.ResType.main,"ui-quality_"+t.maxQuality),t.maxNum>0?(this.leftLabel.string=d.default.GetText("\u5269")+t.maxNum,this.buyBtn.node.active=!0):(this.leftLabel.string=d.default.GetText("\u552e\u7f44"),this.buyBtn.node.active=!1),l.default.instance.money>=o?this.priceLabel.node.color=cc.Color.WHITE:(this.priceLabel.node.color=cc.Color.RED,this.buyBtn.node.active=!1)},t.prototype.onClickItem=function(){r.default.instance.playAudio("click");var e={id:this.data.id,num:1,quality:this.data.maxQuality||1};p.default.instance.openUI(f.default,{name:g.Config.uiName.itemDetailUI,param:[e,0]},301)},t.prototype.onClickBuy=function(){r.default.instance.playAudio("earn_money"),h.ShopMgr.instance.onBuyMarket(this.index,this.num),m.default.instance.refreshShop(),s.default.instance.createRewardItemSp({id:this.data.id,quality:this.data.maxQuality,num:this.num},v.Utils.getNodeUsePos(this.buyBtn.node))},o([w(cc.Sprite)],t.prototype,"sprMain",void 0),o([w(cc.Sprite)],t.prototype,"qualitySpr",void 0),o([w(cc.Label)],t.prototype,"priceLabel",void 0),o([w(cc.Label)],t.prototype,"leftLabel",void 0),o([w(cc.Label)],t.prototype,"buyLabel",void 0),o([w(cc.Button)],t.prototype,"buyBtn",void 0),o([b],t)}(cc.Component);n.default=C,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/shop_manager":"shop_manager","../manager/ui_manager":"ui_manager","../ui/item_detail_ui":"item_detail_ui","../ui/market_ui":"market_ui","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils"}],item_meadow_view:[function(e,t,n){"use strict";cc._RF.push(t,"fdae6cuANBHJ5aM93C+j1rj","item_meadow_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeHave=null,this.nodeNone=null,this.btnRemove=null,this.labName=null,this.labDetail=null,this.sprQuality=null,this.sprMain=null,this.barProgress=null}return e.prototype.initView=function(e){var t,n,i,a,o,r;this.nodeHave=cc.find("nodeHave",e),this.nodeNone=cc.find("nodeNone",e),this.btnRemove=null===(t=cc.find("nodeHave/btnRemove",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labName=null===(n=cc.find("nodeHave/labName",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labDetail=null===(i=cc.find("nodeHave/labDetail",e))||void 0===i?void 0:i.getComponent(cc.Label),this.sprQuality=null===(a=cc.find("sprQuality",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprMain=null===(o=cc.find("nodeHave/sprMain",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.barProgress=null===(r=cc.find("nodeHave/barProgress",e))||void 0===r?void 0:r.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.nodeHave=null,this.nodeNone=null,this.btnRemove=null,this.labName=null,this.labDetail=null,this.sprQuality=null,this.sprMain=null,this.barProgress=null},e}();n.default=i,cc._RF.pop()},{}],item_meadow:[function(e,t,n){"use strict";cc._RF.push(t,"ccbcdw70+9JoaQUp6DCfAhd","item_meadow");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/effect_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/meadow_manager"),h=e("../manager/resources_manager"),p=e("../manager/ui_manager"),f=e("../ui/animal_choose_ui"),m=e("../ui/meadow_ui"),g=e("../utils/config"),_=e("../utils/enum"),v=e("../utils/utils"),y=cc._decorator,b=y.ccclass,w=y.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprMain=null,t.sprQuality=null,t.labName=null,t.labDec=null,t.haveNode=null,t.noneNode=null,t.btnRemove=null,t.barProgress=null,t}return a(t,e),t.prototype.onLoad=function(){this.node.on("click",this.onClick,this),this.noneNode.on("click",this.onClickNone,this),this.btnRemove.on("click",this.onClickRemove,this),this.setLanguage()},t.prototype.setLanguage=function(){this.noneNode.getChildByName("rt").getComponent(cc.RichText).string=d.default.GetText("\u672a\u653e\u7f6e"),this.noneNode.getChildByName("label").getComponent(cc.Label).string=d.default.GetText("\u70b9\u51fb\u653e\u7f6e")},t.prototype.init=function(e){this.index=e;var t=l.default.instance.meadowData.animalList[e];if(t.id){this.haveNode.active=!0,this.noneNode.active=!1;var n=c.default.instance.getDataByName("char")[t.id];this.sprQuality.spriteFrame=h.default.instance.getSprite(_.ResType.main,"ui-q ("+(n.animal.rare-1)+")"),this.labName.string=d.default.GetText("char_name_"+t.id),this.labDec.string=n.animal.food+d.default.GetText("\u9972\u6599")+" "+Math.ceil(n.animal.time-t.progress)+d.default.GetText("\u5929\u540e\u751f\u4ea7"),this.sprMain.spriteFrame=h.default.instance.getSprite(_.ResType.main,"char-char_"+t.id),this.barProgress.progress=t.progress/n.animal.time}else this.haveNode.active=!1,this.noneNode.active=!0,this.sprQuality.spriteFrame=null;m.default.instance.showNew&&this.index==l.default.instance.meadowData.maxNum-1&&this.playNewAnima()},t.prototype.onClickNone=function(){r.default.instance.playAudio("animal_"+v.Utils.getRandomNumber(6)),p.default.instance.openUI(f.default,{name:g.Config.uiName.animalChooseUI,param:[this.index]})},t.prototype.onClick=function(){},t.prototype.onClickRemove=function(){r.default.instance.playAudio("animal_"+v.Utils.getRandomNumber(6)),u.MeadowMgr.instance.putAnimalDown(this.index),this.init(this.index)},t.prototype.playNewAnima=function(){var e=this;m.default.instance.showNew=!1,setTimeout(function(){s.default.instance.createPartical("build",v.Utils.getNodeUsePos(e.sprMain.node))},50)},o([w(cc.Sprite)],t.prototype,"sprMain",void 0),o([w(cc.Sprite)],t.prototype,"sprQuality",void 0),o([w(cc.Label)],t.prototype,"labName",void 0),o([w(cc.Label)],t.prototype,"labDec",void 0),o([w(cc.Node)],t.prototype,"haveNode",void 0),o([w(cc.Node)],t.prototype,"noneNode",void 0),o([w(cc.Node)],t.prototype,"btnRemove",void 0),o([w(cc.ProgressBar)],t.prototype,"barProgress",void 0),o([b],t)}(cc.Component);n.default=C,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/meadow_manager":"meadow_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui/animal_choose_ui":"animal_choose_ui","../ui/meadow_ui":"meadow_ui","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils"}],item_monster:[function(e,t,n){"use strict";cc._RF.push(t,"d4e10FrvE9HMpd4oUvh5IuS","item_monster");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../class/i_monster"),l=e("../istate/char_state"),s=e("../manager/friend_manager"),c=e("../manager/json_manager"),d=e("../manager/resources_manager"),u=e("../ui/friend_ui"),h=e("../utils/enum"),p=e("./item_char"),f=cc._decorator,m=f.ccclass,g=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.entity=null,t}return a(t,e),t.prototype.init=function(e){this._beHitTime=0,this.state[h.CharAnimaType.walk]=new l.CharMoveState(this),this.state[h.CharAnimaType.atk]=new l.CharAtkState(this),this.state[h.CharAnimaType.hit]=new l.CharBehitState(this),this.state[h.CharAnimaType.defeat]=new l.CharDeathState(this),this.state[h.CharAnimaType.idle]=new l.CharIdleState(this),this.entity=new r.IMonster(e),this.nodeAnima.getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(h.ResType.main,"char-char_"+e),this.switchState(h.CharAnimaType.walk),this.barAction.progress=0,this.barHp.progress=1,this.node.opacity=255,this._isDeath=!1},t.prototype.getTarget=function(){var e,t=c.default.instance.getDataByName("char")[this.entity.id],n=u.default.instance.view.nodeCharList,i=[],a=null;switch(t.skill){default:if((a=u.default.instance.getFirstFriend())&&a.canAtk()){i.push(a);break}break;case 202:var o=-1;n[1].active?o=1:n[0].active?o=0:n[2].active&&(o=2),(null==(a=null===(e=n[o])||void 0===e?void 0:e.getComponent(p.default))?void 0:a.canAtk())&&i.push(a);break;case 203:for(var r=2;r>=0;r--)if(n[r].active){var l=n[r].getComponent(p.default);if(l.canAtk()){i.push(l);break}}break;case 204:if(n[1].active){var s=n[1].getComponent(p.default);s.canAtk()&&i.push(s)}if(n[0].active){var d=n[0].getComponent(p.default);d.canAtk()&&i.push(d)}break;case 205:i=u.default.instance.getAllFriend()}return i},t.prototype.onAtk=function(){var e=this,t=this.getTarget();t.forEach(function(n){n&&n.beAtk(e.entity.getAtk()/t.length)})},t.prototype.onRemove=function(){this._isDeath=!0,s.FriendMgr.instance.onMonsterDie(this.entity.id);var e=s.FriendMgr.instance.getAreaRandomMonsterId();this.node.x=125,this.init(e)},t.prototype.beAtk=function(e,t){void 0===t&&(t=!0),this._isDeath||(this.entity.hp-=e,this.barHp.progress=this.entity.getHpProgress(),this.entity.hp<=0?(this._isDeath=!0,this.switchState(h.CharAnimaType.defeat)):t&&(this._beHitTime++,this._beHitTime<3?this.switchState(h.CharAnimaType.hit):this._beHitTime=0))},t.prototype.onClickChar=function(){},o([m],t)}(p.default));n.default=g,cc._RF.pop()},{"../class/i_monster":"i_monster","../istate/char_state":"char_state","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/resources_manager":"resources_manager","../ui/friend_ui":"friend_ui","../utils/enum":"enum","./item_char":"item_char"}],item_need:[function(e,t,n){"use strict";cc._RF.push(t,"9ef5az6o0pApa+BItdkRg6C","item_need");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/build_manager"),s=e("../manager/language_manager"),c=e("../manager/resources_manager"),d=e("../utils/enum"),u=e("../utils/utils"),h=cc._decorator,p=h.ccclass,f=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=0,t.cb=null,t.needSp=null,t.haveSp=null,t.needLabel=null,t.numLabel=null,t.curItem=null,t}return a(t,e),t.prototype.onLoad=function(){this.node.on("click",this.onClick,this)},t.prototype.init=function(e,t,n,i){if(this.need=t,this.index=e,this.needSp.spriteFrame=null,this.haveSp.spriteFrame=null,this.needLabel.string="",this.curItem=i,t[2]?this.numLabel.string="x"+t[2]:this.numLabel.string="",i){var a=u.Utils.getItemSpByAmount(i);this.haveSp.spriteFrame=c.default.instance.getSprite(d.ResType.main,a),this.node.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(d.ResType.main,"ui-quality_"+i.quality)}else if(this.node.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(d.ResType.main,"ui-q (1)"),1==t[0])a=u.Utils.getItemSpName(t[1]),this.needSp.spriteFrame=c.default.instance.getSprite(d.ResType.main,a);else if(2==t[0])this.needLabel.string=s.default.GetText("ItemTypeName"+t[1]);else for(var o=0;o<t[1].length;o++)this.needLabel.string+=s.default.GetText("item_name_"+t[1][o]),t[1][o+1]&&(this.needLabel.string+="/");this.cb=n},t.prototype.initByShow=function(e,t){this.cb=null,this.index=e,this.needSp.spriteFrame=null,this.haveSp.spriteFrame=null,this.needLabel.string="",this.numLabel.string="x"+(t[2]||1),this.curItem=null,this.node.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(d.ResType.main,"ui-q (1)"),this.haveSp.spriteFrame=c.default.instance.getSprite(d.ResType.main,u.Utils.getItemSpName(t[1]))},t.prototype.initByNeed=function(e){this.cb=null,this.needSp.spriteFrame=null,this.haveSp.spriteFrame=null,this.needLabel.string="";var t=l.BuildMgr.instance.getItemTotalNum(e[1]);this.numLabel.string=t+"/"+(e[2]||1),this.curItem=null,this.node.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(d.ResType.main,"ui-q (1)"),this.haveSp.spriteFrame=c.default.instance.getSprite(d.ResType.main,u.Utils.getItemSpName(e[1]))},t.prototype.onClick=function(){r.default.instance.playAudio("click"),this.cb&&this.cb(this.index,this.curItem)},o([f(cc.Sprite)],t.prototype,"needSp",void 0),o([f(cc.Sprite)],t.prototype,"haveSp",void 0),o([f(cc.Label)],t.prototype,"needLabel",void 0),o([f(cc.Label)],t.prototype,"numLabel",void 0),o([p],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/build_manager":"build_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../utils/enum":"enum","../utils/utils":"utils"}],item_plan_field_choose_view:[function(e,t,n){"use strict";cc._RF.push(t,"bd5bcuWSpdMaYFgejM8DEmZ","item_plan_field_choose_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeField=null,this.nodeSelect=null,this.labField=null,this.labFieldNum=null,this.barProgress=null}return e.prototype.initView=function(e){var t,n,i;this.nodeField=cc.find("nodeField",e),this.nodeSelect=cc.find("nodeSelect",e),this.labField=null===(t=cc.find("nodeField/labField",e))||void 0===t?void 0:t.getComponent(cc.Label),this.labFieldNum=null===(n=cc.find("nodeField/labFieldNum",e))||void 0===n?void 0:n.getComponent(cc.Label),this.barProgress=null===(i=cc.find("nodeField/barProgress",e))||void 0===i?void 0:i.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.nodeField=null,this.nodeSelect=null,this.labField=null,this.labFieldNum=null,this.barProgress=null},e}();n.default=i,cc._RF.pop()},{}],item_plan_field_choose:[function(e,t,n){"use strict";cc._RF.push(t,"72500RJKRhFkqyrH2tvjqid","item_plan_field_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/field_manager"),c=e("../manager/language_manager"),d=e("../manager/plan_manager"),u=e("../ui/plan_ui"),h=e("../ui_view/item/item_plan_field_choose_view"),p=cc._decorator,f=p.ccclass,m=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new h.default,t.type=0,t.index=0,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this.node.on("click",this.onClickReward,this)},t.prototype.init=function(e,t){this.type=e,this.index=t,this._view.nodeField.active=!0,this._view.labFieldNum.string=t+1;var n=l.default.instance.allFieldData.list[t];this._view.barProgress.progress=n.progress/s.FieldMgr.instance.getNextFieldMaxProgress(t),this._view.labField.string=c.default.GetText("\u5730\u5757")+(t+1+" ")+n.maxNum+"m\xb2 ->"+(n.maxNum+1)+"m\xb2\n"+n.progress+"/"+s.FieldMgr.instance.getNextFieldMaxProgress(t),this._view.nodeSelect.active=!1},t.prototype.setSelect=function(e){this._view.nodeSelect.active=e},t.prototype.onClickReward=function(){r.default.instance.playAudio("snap"),d.PlanMgr.instance.changePlanTarget(this.type,this.index),u.default.instance.onOpenFiledChoosePage()},o([f],t)}(cc.Component));n.default=m,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/field_manager":"field_manager","../manager/language_manager":"language_manager","../manager/plan_manager":"plan_manager","../ui/plan_ui":"plan_ui","../ui_view/item/item_plan_field_choose_view":"item_plan_field_choose_view"}],item_plan_target_choose_view:[function(e,t,n){"use strict";cc._RF.push(t,"99234IWlEBIdJJI2SlIH5T+","item_plan_target_choose_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeField=null,this.nodeArea=null,this.nodeSelect=null,this.nodeReward=null,this.labNum=null,this.labField=null,this.labArea=null,this.sprArea=null,this.barProgress=null}return e.prototype.initView=function(e){var t,n,i,a,o;this.nodeField=cc.find("nodeField",e),this.nodeArea=cc.find("nodeArea",e),this.nodeSelect=cc.find("nodeSelect",e),this.nodeReward=cc.find("nodeArea/nodeReward",e),this.labNum=null===(t=cc.find("nodeField/ui-Small Square Buttons-9/labNum",e))||void 0===t?void 0:t.getComponent(cc.Label),this.labField=null===(n=cc.find("nodeField/labField",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labArea=null===(i=cc.find("nodeArea/labArea",e))||void 0===i?void 0:i.getComponent(cc.Label),this.sprArea=null===(a=cc.find("nodeArea/sprArea",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.barProgress=null===(o=cc.find("nodeField/barProgress",e))||void 0===o?void 0:o.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.nodeField=null,this.nodeArea=null,this.nodeSelect=null,this.nodeReward=null,this.labNum=null,this.labField=null,this.labArea=null,this.sprArea=null,this.barProgress=null},e}();n.default=i,cc._RF.pop()},{}],item_plan_target_choose:[function(e,t,n){"use strict";cc._RF.push(t,"ea4deb7rfBJR7gqt3iSl64R","item_plan_target_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/plan_data"),l=e("../manager/audio_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/plan_manager"),u=e("../manager/pool_manager"),h=e("../manager/resources_manager"),p=e("../ui/plan_ui"),f=e("../ui_view/item/item_plan_target_choose_view"),m=e("../utils/enum"),g=e("../utils/utils"),_=e("./item_choose"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new f.default,t.type=0,t.index=0,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this.node.on("click",this.onClickReward,this)},t.prototype.init=function(e,t){switch(this.type=e,this.index=t,this.type){case r.PlanType.field:break;default:this._view.nodeField.active=!1,this._view.nodeArea.active=!0;var n=s.default.instance.getDataByName("map")[t+1];this._view.sprArea.spriteFrame=h.default.instance.getSprite(m.ResType.main,"char-char_"+g.Utils.getArrRandomItem(n.monster)),this._view.labArea.string=c.default.GetText("map_name_"+(t+1)),u.default.instance.removeObjByContainer(this._view.nodeReward);for(var i=0;i<n.findReward.length;i++){var a=u.default.instance.createObjectByName("itemChoose",this._view.nodeReward);a.getComponent(_.default).init(i,g.Utils.getItemSpName(n.findReward[i]),1,this.onClickReward.bind(this)),a.y=0}}this._view.nodeSelect.active=!1},t.prototype.setSelect=function(e){this._view.nodeSelect.active=e},t.prototype.onClickReward=function(){l.default.instance.playAudio("snap"),d.PlanMgr.instance.changePlanTarget(this.type,this.index),p.default.instance.onOpenTargetList()},o([y],t)}(cc.Component));n.default=b,cc._RF.pop()},{"../interface/plan_data":"plan_data","../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/plan_manager":"plan_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../ui/plan_ui":"plan_ui","../ui_view/item/item_plan_target_choose_view":"item_plan_target_choose_view","../utils/enum":"enum","../utils/utils":"utils","./item_choose":"item_choose"}],item_plan_view:[function(e,t,n){"use strict";cc._RF.push(t,"49985kUcc1L9o8O3+YmZc9i","item_plan_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeBtnContainer=null,this.btnJoin=null,this.btnTarget=null,this.labName=null,this.labTarget=null,this.labExp=null,this.sprQuality=null,this.sprTool=null,this.barLevel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s;this.nodeBtnContainer=cc.find("nodeBtnContainer",e),this.btnJoin=null===(t=cc.find("nodeBtnContainer/btnJoin",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnTarget=null===(n=cc.find("nodeBtnContainer/btnTarget",e))||void 0===n?void 0:n.getComponent(cc.Button),this.labName=null===(i=cc.find("labName",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labTarget=null===(a=cc.find("labTarget",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labExp=null===(o=cc.find("barLevel/labExp",e))||void 0===o?void 0:o.getComponent(cc.Label),this.sprQuality=null===(r=cc.find("sprQuality",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprTool=null===(l=cc.find("sprTool",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.barLevel=null===(s=cc.find("barLevel",e))||void 0===s?void 0:s.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.nodeBtnContainer=null,this.btnJoin=null,this.btnTarget=null,this.labName=null,this.labTarget=null,this.labExp=null,this.sprQuality=null,this.sprTool=null,this.barLevel=null},e}();n.default=i,cc._RF.pop()},{}],item_plan:[function(e,t,n){"use strict";cc._RF.push(t,"14762YyGj9COrQ1iAvn5/Cq","item_plan");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/plan_data"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/game_manager"),d=e("../manager/json_manager"),u=e("../manager/language_manager"),h=e("../manager/plan_manager"),p=e("../manager/resources_manager"),f=e("../manager/ui_manager"),m=e("../ui/plan_ui"),g=e("../ui/pop_text_ui"),_=e("../ui_view/item/item_plan_view"),v=e("../utils/enum"),y=e("../utils/utils"),b=cc._decorator,w=b.ccclass,C=(b.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new _.default,t.type=null,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnJoin.node.on("click",this.onClickJoin,this),this._view.btnTarget.node.on("click",this.onClickTarget,this),this._view.sprQuality.node.on("click",this.onClickTool,this),this._view.btnJoin.node.getChildByName("label").getComponent(cc.Label).string=u.default.GetText("\u52a0\u5165\u65e5\u7a0b\u8868")},t.prototype.init=function(e){this.type=e;var t=[0,402,404,405,403,406],n=(d.default.instance.getDataByName("item")[t[e]],s.default.instance.findItem(t[e])[0]);this._view.sprTool.spriteFrame=p.default.instance.getSprite(v.ResType.main,y.Utils.getItemSpByAmount(n)),this._view.sprQuality.spriteFrame=p.default.instance.getSprite(v.ResType.main,"ui-quality_"+n.quality);var i=s.default.instance.planData.skillLv[e],a=h.PlanMgr.instance.getSkillNextExp(i);switch(-1!=a?(this._view.labExp.string="EXP:("+s.default.instance.planData.skillExp[e].toFixed(0)+"/"+a+")",this._view.barLevel.progress=s.default.instance.planData.skillExp[e]/a):(this._view.labExp.string="max",this._view.barLevel.progress=1),this._view.labName.node.color=cc.Color.BLACK,c.default.instance.checkHaveBuff(e+302)&&(i+=1,this._view.labName.node.color=(new cc.Color).fromHEX("#309C00")),this._view.labName.string=u.default.GetText("PlanLevelName"+i)+u.default.GetText("PlanTypeName"+e),e){case r.PlanType.field:this._view.labTarget.string=u.default.GetText("\u5730\u5757")+(s.default.instance.planData.planTarget[e]+1);break;case r.PlanType.find:var o=u.default.GetText("map_name_"+s.default.instance.planData.planTarget[e]+1);this._view.labTarget.string=o;break;case r.PlanType.fish:this._view.labTarget.string=[u.default.GetText("\u5c0f\u6cb3"),u.default.GetText("\u6e56"),u.default.GetText("\u5927\u6d77"),u.default.GetText("\u6c99\u6ee9")][s.default.instance.planData.planTarget[e]]}},t.prototype.onClickTool=function(){var e=Math.round(h.PlanMgr.instance.getPlanCost(this.type)),t=[0,402,404,405,403,406],n=s.default.instance.getToolUseTime(t[this.type]),i=u.default.GetText("\u5de5\u5177\u4f7f\u7528\u63cf\u8ff0",n,u.default.GetText("PlanTypeName"+this.type),e);0==s.default.instance.getToolLevel(t[this.type])&&(i+=u.default.GetText("\u7834\u65e7\u5de5\u5177\u63cf\u8ff0")),g.default.instance.showUI(y.Utils.getNodeUsePos(this._view.sprTool.node),{spr:this._view.sprTool.spriteFrame.name,name:u.default.GetText("PlanLevelName"+s.default.instance.planData.skillLv[this.type])+u.default.GetText("PlanTypeName"+this.type),dec:i})},t.prototype.onClickJoin=function(){l.default.instance.playAudio("click_2"),h.PlanMgr.instance.addPlanToList(this.type,!0),m.default.instance.onClickPlanPage()},t.prototype.onClickTarget=function(){l.default.instance.playAudio("click_2"),this.type==r.PlanType.find?m.default.instance.onOpenTargetList():this.type==r.PlanType.field?m.default.instance.onOpenFiledChoosePage():this.onSwitchFishArea()},t.prototype.onSwitchFishArea=function(){var e=s.default.instance.planData.skillLv[this.type],t=Math.floor(e),n=s.default.instance.planData.planTarget[this.type];t>=3&&(t=2),n++,0==t&&f.default.instance.LoadTipsByStr(u.default.GetText("\u9493\u9c7c\u89e3\u9501\u533a\u57df")),n>t&&(n=0),h.PlanMgr.instance.changePlanTarget(this.type,n),this._view.labTarget.string=[u.default.GetText("\u5c0f\u6cb3"),u.default.GetText("\u6e56"),u.default.GetText("\u5927\u6d77"),u.default.GetText("\u6c99\u6ee9")][s.default.instance.planData.planTarget[this.type]]},o([w],t)}(cc.Component));n.default=C,cc._RF.pop()},{"../interface/plan_data":"plan_data","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/plan_manager":"plan_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui/plan_ui":"plan_ui","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_plan_view":"item_plan_view","../utils/enum":"enum","../utils/utils":"utils"}],item_pole_view:[function(e,t,n){"use strict";cc._RF.push(t,"95bf6XjEphL/5JqWKKGvlP9","item_pole_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeRope=null,this.nodeClick=null,this.nodeFood=null,this.sprPole=null,this.barDistance=null}return e.prototype.initView=function(e){var t,n;this.nodeRope=cc.find("nodeRope",e),this.nodeClick=cc.find("nodeClick",e),this.nodeFood=cc.find("nodeFood",e),this.sprPole=null===(t=cc.find("sprPole",e))||void 0===t?void 0:t.getComponent(cc.Sprite),this.barDistance=null===(n=cc.find("barDistance",e))||void 0===n?void 0:n.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.nodeRope=null,this.nodeClick=null,this.nodeFood=null,this.sprPole=null,this.barDistance=null},e}();n.default=i,cc._RF.pop()},{}],item_product_choose:[function(e,t,n){"use strict";cc._RF.push(t,"e121a7lG8hPYKnmeR+0/BjQ","item_product_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/game_manager"),c=e("../manager/json_manager"),d=e("../manager/meadow_manager"),u=e("../manager/pool_manager"),h=e("../manager/resources_manager"),p=e("../utils/enum"),f=e("../utils/utils"),m=e("./item_choose"),g=cc._decorator,_=g.ccclass,v=g.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprMain=null,t.chooseList=null,t.sprQuality=null,t.index=0,t}return a(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e){this.index=e;var t=l.default.instance.meadowData.animalList[e];if(!t.id)return this.sprMain.spriteFrame=h.default.instance.getSprite(p.ResType.main,"Icons-Download"),u.default.instance.removeObjByContainer(this.chooseList),void(this.sprQuality.spriteFrame=null);var n=c.default.instance.getDataByName("char")[t.id],i=n.animal.product;this.sprMain.spriteFrame=h.default.instance.getSprite(p.ResType.main,"char-char_"+t.id),u.default.instance.removeObjByContainer(this.chooseList),this.sprQuality.spriteFrame=h.default.instance.getSprite(p.ResType.main,"ui-q ("+(n.animal.rare-1)+")");for(var a=s.default.instance.getValueByStr("animalProduct"),o=0;o<i.length;o++){var r=[i[o][0],i[o][1]+a,i[o][2]||1],d=u.default.instance.createObjectByName("itemChoose",this.chooseList);d.getComponent(m.default).initByArr(o,r,this.onChooseProduct.bind(this)),d.y=0,d.getComponent(m.default).setSelect(o==t.productIndex)}},t.prototype.onChooseProduct=function(e){r.default.instance.playAudio("animal_"+f.Utils.getRandomNumber(6)),d.MeadowMgr.instance.setAnimalProductIndex(this.index,e),this.init(this.index)},o([v(cc.Sprite)],t.prototype,"sprMain",void 0),o([v(cc.Node)],t.prototype,"chooseList",void 0),o([v(cc.Sprite)],t.prototype,"sprQuality",void 0),o([_],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/meadow_manager":"meadow_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../utils/enum":"enum","../utils/utils":"utils","./item_choose":"item_choose"}],item_quest_view:[function(e,t,n){"use strict";cc._RF.push(t,"dac7d09JM5AW6qF+AMJfMgU","item_quest_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeNeed=null,this.nodeReward=null,this.btnMain=null,this.labLanList=[],this.labDec=null,this.sprMain=null,this.rtLabel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l;this.nodeNeed=cc.find("nodeNeed",e),this.nodeReward=cc.find("nodeReward",e),this.btnMain=null===(t=cc.find("btnMain",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[2]=null===(n=cc.find("btnMain/labLanList2",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labDec=null===(i=cc.find("labDec",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labLanList[0]=null===(a=cc.find("labLanList0",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labLanList[1]=null===(o=cc.find("labLanList1",e))||void 0===o?void 0:o.getComponent(cc.Label),this.sprMain=null===(r=cc.find("sprMain",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.rtLabel=null===(l=cc.find("rtLabel",e))||void 0===l?void 0:l.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.nodeNeed=null,this.nodeReward=null,this.btnMain=null,this.labLanList=[],this.labDec=null,this.sprMain=null,this.rtLabel=null},e}();n.default=i,cc._RF.pop()},{}],item_quest:[function(e,t,n){"use strict";cc._RF.push(t,"d58dfgAkQZP45Z0e7tUyoYZ","item_quest");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/pool_manager"),u=e("../manager/quest_manager"),h=e("../manager/resources_manager"),p=e("../manager/ui_manager"),f=e("../ui/item_choose_ui"),m=e("../ui/quest_ui"),g=e("../ui_view/item/item_quest_view"),_=e("../utils/config"),v=e("../utils/enum"),y=e("../utils/utils"),b=e("./item_choose"),w=e("./item_need"),C=cc._decorator,S=C.ccclass,L=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t.index=-1,t.curChooseData=null,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnMain.node.on("click",this.onClick,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u9700\u8981","\u5956\u52b1","\u4ea4\u4ed8"];e.forEach(function(e,n){e.string=c.default.GetText(t[n])})},t.prototype.init=function(e){var t=this;this.curChooseData=null,this.index=e;var n=null;-1==e?(n=s.default.instance.getDataByName("quest")[l.default.instance.achievementData.curWeekQuest],this._view.rtLabel.string="<color=red>["+c.default.GetText("\u4e8b\u4ef6")+"]</color>"+c.default.GetText("quest_name_"+n.id),this._view.labDec.string=c.default.GetText("quest_dec_"+n.id)):(n=l.default.instance.achievementData.randomQuest[e],this._view.rtLabel.string=c.default.GetText("quest_name_"+n.id),this._view.labDec.string=c.default.GetText(y.Utils.getArrRandomItem(["\u4efb\u52a1\u63cf\u8ff0","\u4efb\u52a1\u63cf\u8ff01"]),this.getRewardListStr(n.need))),this._view.sprMain.spriteFrame=h.default.instance.getSprite(v.ResType.main,"char-char_"+n.charId),d.default.instance.removeObjByContainer(this._view.nodeNeed);for(var i=0;i<n.need.length;i++){var a=d.default.instance.createObjectByName("itemNeed",this._view.nodeNeed);1==n.need[i][0]?a.getComponent(w.default).initByNeed(n.need[i]):a.getComponent(w.default).init(i,n.need[i],function(e){p.default.instance.openUI(f.default,{name:_.Config.uiName.itemChooseUI,param:[[n.need[e]],t.onClickNeed.bind(t),t.curChooseData]},401)}),a.y=0}for(d.default.instance.removeObjByContainer(this._view.nodeReward),i=0;i<n.reward.length;i++)(a=d.default.instance.createObjectByName("itemChoose",this._view.nodeReward)).getComponent(b.default).initByNormalAmont(n.reward[i],function(){}),a.y=0},t.prototype.onClick=function(){r.default.instance.playAudio("click"),u.default.instance.onRewardQuest(this.index,this._view.btnMain.node,this.curChooseData),m.default.instance.refreshQuestPage()},t.prototype.onClickNeed=function(e){e&&(this.curChooseData=e);var t=s.default.instance.getDataByName("quest")[l.default.instance.achievementData.curWeekQuest];this._view.nodeNeed.children[0].getComponent(w.default).init(0,t.need[0],this.onClickNeed.bind(this),e)},t.prototype.getRewardListStr=function(e){for(var t="",n=0;n<e.length;n++)t+=c.default.GetText("item_name_"+e[n][1]),t+="x"+e[n][2],e.length[n+1]&&(t+=",");return t},o([S],t)}(cc.Component));n.default=L,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/quest_manager":"quest_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui/item_choose_ui":"item_choose_ui","../ui/quest_ui":"quest_ui","../ui_view/item/item_quest_view":"item_quest_view","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils","./item_choose":"item_choose","./item_need":"item_need"}],item_recipe_choose_view:[function(e,t,n){"use strict";cc._RF.push(t,"d868foOQNpIXLU+2zwaqBF/","item_recipe_choose_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeNeed=null,this.btnMake=null,this.labLanList=[],this.labName=null,this.sprBg=null,this.sprIcon=null,this.sprNeed=null}return e.prototype.initView=function(e){var t,n,i,a,o,r;this.nodeNeed=cc.find("nodeNeed",e),this.btnMake=null===(t=cc.find("btnMake",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnMake/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labName=null===(i=cc.find("labName",e))||void 0===i?void 0:i.getComponent(cc.Label),this.sprBg=null===(a=cc.find("sprBg",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprIcon=null===(o=cc.find("sprIcon",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprNeed=null===(r=cc.find("sprNeed",e))||void 0===r?void 0:r.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.nodeNeed=null,this.btnMake=null,this.labLanList=[],this.labName=null,this.sprBg=null,this.sprIcon=null,this.sprNeed=null},e}();n.default=i,cc._RF.pop()},{}],item_recipe_choose:[function(e,t,n){"use strict";cc._RF.push(t,"92dedn+evZD77oG5ehh/vMT","item_recipe_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/friend_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/pool_manager"),u=e("../manager/resources_manager"),h=e("../manager/workshop_manager"),p=e("../ui/pop_text_ui"),f=e("../ui/recipe_choose_ui"),m=e("../ui/workshop_ui"),g=e("../ui_view/item/item_recipe_choose_view"),_=e("../utils/enum"),v=e("../utils/utils"),y=e("./item_need"),b=cc._decorator,w=b.ccclass,C=(b.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t.id=0,t.curNum=1,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnMake.node.on("click",this.onClick,this),this._view.sprBg.node.on("click",this.onClickIcon,this),this._view.sprNeed.node.on("click",this.onClickBuild,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u9009\u62e9"];e.forEach(function(e,n){e.string=c.default.GetText(t[n])})},t.prototype.init=function(e){this.id=e;var t=s.default.instance.getDataByName("item")[this.id];this._view.labName.string=c.default.GetText("item_name_"+this.id),this._view.sprIcon.spriteFrame=u.default.instance.getSprite(_.ResType.main,v.Utils.getItemSpName(e)),t.recipe.building?this._view.sprNeed.spriteFrame=u.default.instance.getSprite(_.ResType.main,v.Utils.getItemSpName(t.recipe.building)):this._view.sprNeed.spriteFrame=null,d.default.instance.removeObjByContainer(this._view.nodeNeed);for(var n=0;n<t.recipe.need.length;n++)d.default.instance.createObjectByName("itemNeed",this._view.nodeNeed).getComponent(y.default).init(n,t.recipe.need[n],null)},t.prototype.onClick=function(){r.default.instance.playAudio("fire"),f.default.instance.hideUI(),h.WorkshopMgr.instance.onAddRecipe(this.id),m.default.instance.refreshWorkshopList()},t.prototype.onClickIcon=function(){s.default.instance.getDataByName("item")[this.id];var e=l.FriendMgr.instance.getItemdec(this.id);p.default.instance.showUI(v.Utils.getNodeUsePos(this._view.sprBg.node),{spr:this._view.sprIcon.spriteFrame.name,name:c.default.GetText("item_name_"+this.id),dec:e})},t.prototype.onClickBuild=function(){var e=s.default.instance.getDataByName("item")[this.id];s.default.instance.getDataByName("item")[e.recipe.building],p.default.instance.showUI(v.Utils.getNodeUsePos(this._view.sprNeed.node),{spr:this._view.sprNeed.spriteFrame.name,name:c.default.GetText("item_name_"+e.recipe.building),dec:c.default.GetText("item_dec_"+e.recipe.building)})},o([w],t)}(cc.Component));n.default=C,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/workshop_manager":"workshop_manager","../ui/pop_text_ui":"pop_text_ui","../ui/recipe_choose_ui":"recipe_choose_ui","../ui/workshop_ui":"workshop_ui","../ui_view/item/item_recipe_choose_view":"item_recipe_choose_view","../utils/enum":"enum","../utils/utils":"utils","./item_need":"item_need"}],item_recipe_view:[function(e,t,n){"use strict";cc._RF.push(t,"51c86UA/otMtpoY7GxsA+xX","item_recipe_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeSliderNumber=null,this.nodeNeed=null,this.btnMake=null,this.labLanList=[],this.labName=null,this.labNum=null,this.labProductNum=null,this.sprBg=null,this.sprIcon=null,this.sprNeed=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s;this.nodeSliderNumber=cc.find("nodeSliderNumber",e),this.nodeNeed=cc.find("nodeNeed",e),this.btnMake=null===(t=cc.find("btnMake",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnMake/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labName=null===(i=cc.find("labName",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labNum=null===(a=cc.find("labNum",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labProductNum=null===(o=cc.find("labProductNum",e))||void 0===o?void 0:o.getComponent(cc.Label),this.sprBg=null===(r=cc.find("sprBg",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprIcon=null===(l=cc.find("sprIcon",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.sprNeed=null===(s=cc.find("sprNeed",e))||void 0===s?void 0:s.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.nodeSliderNumber=null,this.nodeNeed=null,this.btnMake=null,this.labLanList=[],this.labName=null,this.labNum=null,this.labProductNum=null,this.sprBg=null,this.sprIcon=null,this.sprNeed=null},e}();n.default=i,cc._RF.pop()},{}],item_recipe:[function(e,t,n){"use strict";cc._RF.push(t,"eba99hpLd1KWJgcHwtHo+PP","item_recipe");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/friend_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/pool_manager"),h=e("../manager/resources_manager"),p=e("../manager/ui_manager"),f=e("../ui/bag_ui"),m=e("../ui/item_choose_ui"),g=e("../ui/pop_text_ui"),_=e("../ui_view/item/item_recipe_view"),v=e("../utils/config"),y=e("../utils/emmiter"),b=e("../utils/enum"),w=e("../utils/message"),C=e("../utils/utils"),S=e("./item_need"),L=cc._decorator,A=L.ccclass,k=(L.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new _.default,t.id=0,t.curNum=1,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnMake.node.on("click",this.onClick,this),y.Emitter.register(w.MessageType.onMakeup,this.checkEnought,this),this._view.nodeSliderNumber.on("slide",this.onChangeNum,this),this._view.sprBg.node.on("click",this.onClickIcon,this),this._view.sprNeed.node.on("click",this.onClickBuild,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u5408\u6210"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype.init=function(e){this.id=e;var t=c.default.instance.getDataByName("item")[this.id];this._view.labName.string=d.default.GetText("item_name_"+this.id),this._view.sprIcon.spriteFrame=h.default.instance.getSprite(b.ResType.main,C.Utils.getItemSpName(e)),t.recipe.building?this._view.sprNeed.spriteFrame=h.default.instance.getSprite(b.ResType.main,C.Utils.getItemSpName(t.recipe.building)):this._view.sprNeed.spriteFrame=null,u.default.instance.removeObjByContainer(this._view.nodeNeed);for(var n=0;n<t.recipe.need.length;n++)u.default.instance.createObjectByName("itemNeed",this._view.nodeNeed),this.autoFind(n);this.countProduct(),this.onChangeNum()},t.prototype.onClickNeed=function(e,t){var n=this,i=c.default.instance.getDataByName("item")[this.id];p.default.instance.openUI(m.default,{name:v.Config.uiName.itemChooseUI,param:[[i.recipe.need[e]],function(t){n._view.nodeNeed.children[e].getComponent(S.default).init(e,i.recipe.need[e],n.onClickNeed.bind(n),t),n.countProduct(),n.onChangeNum()},t]},401)},t.prototype.onClick=function(){var e=this;r.default.instance.playAudio("fire");var t=[],n=!0,i=c.default.instance.getDataByName("item")[this.id];!i.recipe.building||l.default.instance.checkHaveBuild(i.recipe.building)?(this._view.nodeNeed.children.forEach(function(e){var i=e.getComponent(S.default),a=i.curItem;a?t.push({id:a.id,num:i.need[2]||1,quality:a.quality}):n=!1}),n?l.default.instance.onMakeupRecipe(this.id,t,this.curNum,function(t,n){f.default.instance.createMakeupEffect(e.id,t,n,e.node),y.Emitter.fire(w.MessageType.onMakeup,e.id,e.curNum)}):p.default.instance.LoadTipsByStr(d.default.GetText("\u6ca1\u6709\u6ee1\u8db3\u6761\u4ef6\u7684\u7269\u54c1"))):p.default.instance.LoadTipsByStr(d.default.GetText("\u7f3a\u5c11\u5236\u4f5c\u73af\u5883"))},t.prototype.autoFind=function(e){var t=c.default.instance.getDataByName("item")[this.id],n=[];1==t.recipe.need[e][0]?n=l.default.instance.findItem(t.recipe.need[e][1]):2==t.recipe.need[e][0]?n=l.default.instance.findItemsByType(t.recipe.need[e][1]):3==t.recipe.need[e][0]&&t.recipe.need[e][1].forEach(function(e){n.push.apply(n,l.default.instance.findItem(e))}),t.recipe.need[e][2]&&(n=n.filter(function(n){return n.num>=t.recipe.need[e][2]})),n.length>=1?this._view.nodeNeed.children[e].getComponent(S.default).init(e,t.recipe.need[e],this.onClickNeed.bind(this),n[0]):this._view.nodeNeed.children[e].getComponent(S.default).init(e,t.recipe.need[e],this.onClickNeed.bind(this))},t.prototype.checkEnought=function(){var e=this;this._view.nodeNeed.children.forEach(function(t,n){var i=t.getComponent(S.default).curItem;i&&!l.default.instance.checkEnough(i)&&e.autoFind(n)}),this.onChangeNum(),this.countProduct()},t.prototype.onChangeNum=function(){var e=99,t=!0;this._view.nodeNeed.children.forEach(function(n){var i=n.getComponent(S.default);i.curItem?i.curItem.num<e&&(e=Math.floor(i.curItem.num/(i.need[2]||1))):t=!1}),t||(e=1);var n=this._view.nodeSliderNumber.getComponent(cc.Slider);n.progress<=0?this.curNum=1:this.curNum=Math.ceil(n.progress*e),this._view.labNum.string=this.curNum+""},t.prototype.countProduct=function(){var e=[];this._view.labProductNum.string="",this._view.sprIcon.spriteFrame=h.default.instance.getSprite(b.ResType.main,C.Utils.getItemSpName(this.id)),this._view.sprBg.spriteFrame=h.default.instance.getSprite(b.ResType.main,"ui-q (1)");var t=!0;if(this._view.nodeNeed.children.forEach(function(n){var i=n.getComponent(S.default);i.curItem?e.push({id:i.curItem.id,num:i.need[2]||1,quality:i.curItem.quality}):t=!1}),t){var n=l.default.instance.countProduct(this.id,e),i=n[0],a=n[1];i>1&&(this._view.labProductNum.string="x"+i),i>0&&(this._view.sprIcon.spriteFrame=h.default.instance.getSprite(b.ResType.main,C.Utils.getItemSpByAmount({id:this.id,num:1,quality:a})),this._view.sprBg.spriteFrame=h.default.instance.getSprite(b.ResType.main,"ui-quality_"+a))}},t.prototype.onClickIcon=function(){c.default.instance.getDataByName("item")[this.id];var e=s.FriendMgr.instance.getItemdec(this.id);g.default.instance.showUI(C.Utils.getNodeUsePos(this._view.sprBg.node),{spr:this._view.sprIcon.spriteFrame.name,name:d.default.GetText("item_name_"+this.id),dec:e})},t.prototype.onClickBuild=function(){var e=c.default.instance.getDataByName("item")[this.id];c.default.instance.getDataByName("item")[e.recipe.building],g.default.instance.showUI(C.Utils.getNodeUsePos(this._view.sprNeed.node),{spr:this._view.sprNeed.spriteFrame.name,name:d.default.GetText("item_name_"+e.recipe.building),dec:d.default.GetText("item_dec_"+e.recipe.building)})},o([A],t)}(cc.Component));n.default=k,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui/bag_ui":"bag_ui","../ui/item_choose_ui":"item_choose_ui","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_recipe_view":"item_recipe_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./item_need":"item_need"}],item_sale_choose_view:[function(e,t,n){"use strict";cc._RF.push(t,"5a350Xw/e9N9KhOHvt1naKU","item_sale_choose_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeSlider=null,this.nodeQuaContainer=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.btnSale=null,this.labLanList=[],this.labGrow=null,this.labPrice=null,this.labNum=null,this.labGift=null,this.sprQuality=null,this.sprMain=null,this.rtLabel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c;this.nodeSlider=cc.find("nodeSlider",e),this.nodeQuaContainer=cc.find("nodeQuaContainer",e),this.itemQua=cc.find("nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeQuaContainer/itemQua",e),this.btnSale=null===(t=cc.find("btnSale",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnSale/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labGrow=null===(i=cc.find("labGrow",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labPrice=null===(a=cc.find("labPrice",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labNum=null===(o=cc.find("labNum",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labGift=null===(r=cc.find("labGift",e))||void 0===r?void 0:r.getComponent(cc.Label),this.sprQuality=null===(l=cc.find("sprQuality",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.sprMain=null===(s=cc.find("sprMain",e))||void 0===s?void 0:s.getComponent(cc.Sprite),this.rtLabel=null===(c=cc.find("rtLabel",e))||void 0===c?void 0:c.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.nodeSlider=null,this.nodeQuaContainer=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.btnSale=null,this.labLanList=[],this.labGrow=null,this.labPrice=null,this.labNum=null,this.labGift=null,this.sprQuality=null,this.sprMain=null,this.rtLabel=null},e}();n.default=i,cc._RF.pop()},{}],item_sale_choose:[function(e,t,n){"use strict";cc._RF.push(t,"e66fe1wonNL36A7tKgST6Pt","item_sale_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/friend_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/resources_manager"),h=e("../manager/sale_manager"),p=e("../ui/pop_text_ui"),f=e("../ui_view/item/item_sale_choose_view"),m=e("../utils/enum"),g=e("../utils/utils"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new f.default,t.dataList=[],t.data=null,t.cb=null,t.curNum=1,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._view.initView(this.node),this._view.btnSale.node.on("click",this.onClick,this),this._view.nodeSlider.on("slide",this.onSliderChange,this),this._view.sprQuality.node.on("click",this.onClickItem,this),this._view.nodeQuaContainer.children.forEach(function(t,n){t.on("click",function(){e.onClickQuality(n)},e)}),this.setLanguage()},t.prototype.setLanguage=function(){this._view.nodeQuaContainer.children.forEach(function(e,t){e.getChildByName("label").getComponent(cc.Label).string=d.default.GetText("QualityStr"+t)});var e=this._view.labLanList,t=["\u9009\u62e9"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype.init=function(e,t){var n=this;this.cb=t,this.dataList=e.sort(function(e,t){return e.quality-t.quality});var i=0;this._view.nodeQuaContainer.children.forEach(function(e,t){e.active=!1,n.dataList.some(function(e){return e.quality==t+1})&&(e.active=!0,i=t)}),this.onClickQuality(i)},t.prototype.refreshUI=function(){var e=this.data,t=c.default.instance.getDataByName("item")[e.id];this._view.rtLabel.string=d.default.GetText("item_name_"+e.id)+" "+e.num+"\u4e2a",t.food&&t.food.expire&&(this._view.rtLabel.string+="("+t.food.expire+"%"+d.default.GetText("\u8fc7\u671f")+")"),this._view.nodeSlider.getComponent(cc.Slider).progress=0,this.curNum=1,this._view.labNum.string="x"+this.curNum,this._view.labPrice.string="\uffe5"+h.default.instance.getItemPrice(e),this._view.sprQuality.spriteFrame=u.default.instance.getSprite(m.ResType.main,"ui-quality_"+e.quality),this._view.sprMain.spriteFrame=u.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount(e));var n=h.default.instance.getItemNeed(e);this._view.labGrow.string="\u4eba\u6c14\uff1a"+n+"%  ",t.food&&t.food.expire?this._view.labGrow.string+=d.default.GetText("\u8fc7\u671f")+"\uff1a"+t.food.expire+"%":this._view.labGrow.string+=d.default.GetText("\u4e0d\u8fc7\u671f");var i=l.default.instance.allSaleData.itemSaleData[t.id]||0;if(!t.levelNeedNum||i>=t.levelNeedNum)this._view.labGift.string="";else{var a=t.levelNeedNum-i;this._view.labGift.string=d.default.GetText("\u518d\u5356\u4e2a",a)}},t.prototype.onClickQuality=function(e){this.data=this.dataList.find(function(t){return t.quality==e+1}),this._view.nodeQuaContainer.children.forEach(function(t,n){t.color=e==n?cc.Color.YELLOW:cc.Color.WHITE}),this.refreshUI()},t.prototype.onClick=function(){r.default.instance.playAudio("click"),this.cb&&this.cb({id:this.data.id,quality:this.data.quality,num:this.curNum})},t.prototype.onSliderChange=function(e){e.progress<=0?this.curNum=1:this.curNum=Math.ceil(e.progress*this.data.num),this._view.labNum.string="x"+this.curNum},t.prototype.onClickItem=function(){var e=s.FriendMgr.instance.getItemdec(this.data.id,this.data);p.default.instance.showUI(g.Utils.getNodeUsePos(this._view.sprQuality.node),{spr:g.Utils.getItemSpByAmount(this.data),name:d.default.GetText("item_name_"+this.data.id),dec:e})},o([v],t)}(cc.Component));n.default=y,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_sale_choose_view":"item_sale_choose_view","../utils/enum":"enum","../utils/utils":"utils"}],item_sale_view:[function(e,t,n){"use strict";cc._RF.push(t,"4be20XCY+ZNoZMgYF93DiF8","item_sale_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeNone=null,this.nodeHave=null,this.nodeLevel=null,this.nodeAutoUp=null,this.nodeEdit=null,this.btnUp=null,this.btnDetail=null,this.btnAutoUp=null,this.labPrice=null,this.labHot=null,this.labLevel=null,this.labAutoUp=null,this.sprQuality=null,this.sprMain=null,this.rtLabel=null,this.rtName=null,this.barExp=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h;this.nodeNone=cc.find("nodeNone",e),this.nodeHave=cc.find("nodeHave",e),this.nodeLevel=cc.find("nodeHave/nodeLevel",e),this.nodeAutoUp=cc.find("nodeHave/nodeAutoUp",e),this.nodeEdit=cc.find("nodeHave/nodeAutoUp/nodeEdit",e),this.btnUp=null===(t=cc.find("nodeNone/btnUp",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnDetail=null===(n=cc.find("nodeHave/btnDetail",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnAutoUp=null===(i=cc.find("nodeHave/nodeAutoUp/btnAutoUp",e))||void 0===i?void 0:i.getComponent(cc.Button),this.labPrice=null===(a=cc.find("nodeHave/labPrice",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labHot=null===(o=cc.find("nodeHave/labHot",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labLevel=null===(r=cc.find("nodeHave/nodeLevel/labLevel",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labAutoUp=null===(l=cc.find("nodeHave/nodeAutoUp/labAutoUp",e))||void 0===l?void 0:l.getComponent(cc.Label),this.sprQuality=null===(s=cc.find("sprQuality",e))||void 0===s?void 0:s.getComponent(cc.Sprite),this.sprMain=null===(c=cc.find("nodeHave/sprMain",e))||void 0===c?void 0:c.getComponent(cc.Sprite),this.rtLabel=null===(d=cc.find("nodeNone/rtLabel",e))||void 0===d?void 0:d.getComponent(cc.RichText),this.rtName=null===(u=cc.find("nodeHave/rtName",e))||void 0===u?void 0:u.getComponent(cc.RichText),this.barExp=null===(h=cc.find("nodeHave/nodeLevel/barExp",e))||void 0===h?void 0:h.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.nodeNone=null,this.nodeHave=null,this.nodeLevel=null,this.nodeAutoUp=null,this.nodeEdit=null,this.btnUp=null,this.btnDetail=null,this.btnAutoUp=null,this.labPrice=null,this.labHot=null,this.labLevel=null,this.labAutoUp=null,this.sprQuality=null,this.sprMain=null,this.rtLabel=null,this.rtName=null,this.barExp=null},e}();n.default=i,cc._RF.pop()},{}],item_sale:[function(e,t,n){"use strict";cc._RF.push(t,"04e30599sBBPaMsKktccJRn","item_sale");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/effect_manager"),c=e("../manager/friend_manager"),d=e("../manager/json_manager"),u=e("../manager/language_manager"),h=e("../manager/resources_manager"),p=e("../manager/sale_manager"),f=e("../manager/ui_manager"),m=e("../ui/item_detail_ui"),g=e("../ui/pop_text_ui"),_=e("../ui/sale_choose_ui"),v=e("../ui/sale_ui"),y=e("../ui_view/item/item_sale_view"),b=e("../utils/config"),w=e("../utils/enum"),C=e("../utils/game_config"),S=e("../utils/utils"),L=cc._decorator,A=L.ccclass,k=(L.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new y.default,t.index=0,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this.node.on("click",this.onClickDetail,this),this._view.btnDetail.node.on("click",this.onClickTip,this),this._view.btnUp.node.on("click",this.onClickUp,this),this._view.btnAutoUp.node.on("click",this.onClickAutoUp,this),this._view.nodeNone.getChildByName("rtLabel").getComponent(cc.RichText).string=u.default.GetText("\u672a\u4e0a\u67b6")},t.prototype.init=function(e){this.index=e;var t=l.default.instance.allSaleData.list[e];if(t&&t.item){this._view.nodeHave.active=!0,this._view.nodeNone.active=!1,this._view.labHot.string="";var n=t.item.id,i=d.default.instance.getDataByName("item")[n];if(this._view.nodeAutoUp.active=!1,this._view.nodeLevel.active=!1,i.levelNeedNum){var a=l.default.instance.allSaleData.itemSaleData[n]||0;a>=i.levelNeedNum?(this._view.nodeAutoUp.active=!0,this.refreshAutoNode()):(this._view.nodeLevel.active=!0,this._view.labLevel.string=(a/i.levelNeedNum*100).toFixed(0)+"%",this._view.barExp.progress=a/i.levelNeedNum)}else this._view.nodeAutoUp.active=!0,this.refreshAutoNode();var o=p.default.instance.getItemNeed(t.item,!0),r=[u.default.GetText("\u70ed\u5ea61"),u.default.GetText("\u70ed\u5ea62"),u.default.GetText("\u70ed\u5ea63"),u.default.GetText("\u70ed\u5ea64"),u.default.GetText("\u70ed\u5ea65"),u.default.GetText("\u70ed\u5ea66")],s=Math.floor(o/25);s>5&&(s=5),this._view.labHot.string=r[s],this._view.labPrice.string="\uffe5"+p.default.instance.getItemPrice(t.item),this._view.sprMain.spriteFrame=h.default.instance.getSprite(w.ResType.main,S.Utils.getItemSpByAmount(t.item)),this._view.rtName.string="<color="+C.GameConfig.QualityColor[t.item.quality]+"/>["+u.default.GetText("QualityStr"+t.item.quality)+"]</color>"+u.default.GetText("item_name_"+n)+" "+t.item.num+"\u4e2a",this._view.sprQuality.spriteFrame=h.default.instance.getSprite(w.ResType.main,"ui-quality_"+t.item.quality)}else this._view.nodeHave.active=!1,this._view.nodeNone.active=!0,this._view.sprQuality.spriteFrame=h.default.instance.getSprite(w.ResType.main,"ui-q (1)")},t.prototype.onClickTip=function(){var e=l.default.instance.allSaleData.list[this.index],t=(d.default.instance.getDataByName("item")[e.item.id],p.default.instance.getItemNeed(e.item,!0)),n=c.FriendMgr.instance.getItemdec(e.item.id,e.item);g.default.instance.showUI(S.Utils.getNodeUsePos(this._view.btnDetail.node),{spr:this._view.sprMain.spriteFrame.name,name:u.default.GetText("item_name_"+e.item.id),dec:n+"("+t.toFixed(0)+"%"+u.default.GetText("\u4eba\u6c14")+")"})},t.prototype.onClickDetail=function(){r.default.instance.playAudio("click_1");var e=l.default.instance.allSaleData.list[this.index];e.item?f.default.instance.openUI(m.default,{name:b.Config.uiName.itemDetailUI,param:[e.item,m.ItemDetailUISceneType.saleUI,{index:this.index}]}):this.onClickUp()},t.prototype.onClickUp=function(){r.default.instance.playAudio("click_1"),f.default.instance.openUI(_.default,{name:b.Config.uiName.saleChooseUI,param:[this.index]})},t.prototype.onSell=function(){cc.tween(this._view.sprMain.node).to(.2,{scale:.85}).to(.1,{scale:1}).start()},t.prototype.onSoldOut=function(){this._view.nodeNone.active=!0,s.default.instance.createEffect("effect_57",S.Utils.getNodeUsePos(this._view.sprMain.node).add(cc.v2(-7,0)),v.default.instance._view.nodeEffect)},t.prototype.refreshAutoNode=function(){var e=l.default.instance.allSaleData.list[this.index];this._view.btnAutoUp.node.getComponent(cc.Sprite).spriteFrame=h.default.instance.getSprite(w.ResType.main,e.autoUp?"ui-gui-Gui_12":"ui-gui-Gui_14"),this._view.nodeEdit.getComponent(cc.EditBox).string=e.autoNum?e.autoNum.toFixed(0):""},t.prototype.onAutoNumChange=function(){var e=this._view.nodeEdit.getComponent(cc.EditBox);e.string&&p.default.instance.onChangeAutoNum(this.index,+e.string),this.init(this.index)},t.prototype.onClickAutoUp=function(){r.default.instance.playAudio("switch"),p.default.instance.onChanceAuto(this.index),this.init(this.index)},o([A],t)}(cc.Component));n.default=k,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../manager/ui_manager":"ui_manager","../ui/item_detail_ui":"item_detail_ui","../ui/pop_text_ui":"pop_text_ui","../ui/sale_choose_ui":"sale_choose_ui","../ui/sale_ui":"sale_ui","../ui_view/item/item_sale_view":"item_sale_view","../utils/config":"config","../utils/enum":"enum","../utils/game_config":"game_config","../utils/utils":"utils"}],item_seed_choose_view:[function(e,t,n){"use strict";cc._RF.push(t,"b30ed5GZL1OKbxYh/8j730q","item_seed_choose_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeSlider=null,this.nodeQuaContainer=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.btnSale=null,this.labLanList=[],this.labNum=null,this.labGrow=null,this.sprQuality=null,this.sprMain=null,this.sprProductQuality=null,this.sprProductMain=null,this.rtSeason=null,this.rtLabel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d;this.nodeSlider=cc.find("nodeSlider",e),this.nodeQuaContainer=cc.find("nodeQuaContainer",e),this.itemQua=cc.find("nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeQuaContainer/itemQua",e),this.itemQua=cc.find("nodeQuaContainer/itemQua",e),this.btnSale=null===(t=cc.find("btnSale",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnSale/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labNum=null===(i=cc.find("labNum",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labGrow=null===(a=cc.find("labGrow",e))||void 0===a?void 0:a.getComponent(cc.Label),this.sprQuality=null===(o=cc.find("sprQuality",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprMain=null===(r=cc.find("sprMain",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprProductQuality=null===(l=cc.find("sprProductQuality",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.sprProductMain=null===(s=cc.find("sprProductMain",e))||void 0===s?void 0:s.getComponent(cc.Sprite),this.rtSeason=null===(c=cc.find("rtSeason",e))||void 0===c?void 0:c.getComponent(cc.RichText),this.rtLabel=null===(d=cc.find("rtLabel",e))||void 0===d?void 0:d.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.nodeSlider=null,this.nodeQuaContainer=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.itemQua=null,this.btnSale=null,this.labLanList=[],this.labNum=null,this.labGrow=null,this.sprQuality=null,this.sprMain=null,this.sprProductQuality=null,this.sprProductMain=null,this.rtSeason=null,this.rtLabel=null},e}();n.default=i,cc._RF.pop()},{}],item_seed_choose:[function(e,t,n){"use strict";cc._RF.push(t,"700c4EM0b1F5K0YH8sR8iTD","item_seed_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/resources_manager"),u=e("../manager/sale_manager"),h=e("../ui/pop_text_ui"),p=e("../ui/seed_choose_ui"),f=e("../ui_view/item/item_seed_choose_view"),m=e("../utils/enum"),g=e("../utils/utils"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new f.default,t.dataList=[],t.data=null,t.cb=null,t.curNum=1,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._view.initView(this.node),this._view.btnSale.node.on("click",this.onClick,this),this._view.nodeSlider.on("slide",this.onSliderChange,this),this._view.sprProductQuality.node.on("click",this.onClickProduct,this),this._view.nodeQuaContainer.children.forEach(function(t,n){t.on("click",function(){e.onClickQuality(n)},e)}),this.setLanguage()},t.prototype.setLanguage=function(){this._view.nodeQuaContainer.children.forEach(function(e,t){e.getChildByName("label").getComponent(cc.Label).string=c.default.GetText("QualityStr"+t)});var e=this._view.labLanList,t=["\u9009\u62e9"];e.forEach(function(e,n){e.string=c.default.GetText(t[n])})},t.prototype.init=function(e,t){var n=this;this.cb=t,this.dataList=e.sort(function(e,t){return e.quality-t.quality});var i=0;this._view.nodeQuaContainer.children.forEach(function(e,t){e.active=!1,n.dataList.some(function(e){return e.quality==t+1})&&(e.active=!0,i=t)}),this.onClickQuality(i)},t.prototype.refreshUI=function(){var e=this.data,t=s.default.instance.getDataByName("item")[e.id];this._view.rtLabel.string=c.default.GetText("item_name_"+e.id)+c.default.GetText("\u603b")+e.num+c.default.GetText("\u4e2a");var n=l.default.instance.allFieldData.list[p.default.instance.param.index].maxNum;this.curNum=Math.min(n,e.num),this._view.labNum.string="x"+this.curNum,this._view.nodeSlider.getComponent(cc.Slider).progress=1,this._view.sprQuality.spriteFrame=d.default.instance.getSprite(m.ResType.main,"ui-quality_"+e.quality),this._view.sprMain.spriteFrame=d.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount(e)),this._view.rtSeason.string=g.Utils.getSeaonColorStr(t.seed.season)+(t.seed.continue?" <color=black>"+c.default.GetText("\u8fde\u7eed\u79cd\u690d")+"</color>":""),this._view.sprProductQuality.spriteFrame=d.default.instance.getSprite(m.ResType.main,"ui-quality_"+e.quality),this._view.sprProductMain.spriteFrame=d.default.instance.getSprite(m.ResType.main,g.Utils.getItemSpByAmount({id:t.seed.product,quality:e.quality,num:1})),this._view.labGrow.string=c.default.GetText("\u751f\u957f\u65f6\u95f4")+": "+t.seed.time+c.default.GetText("\u5929")+" "+c.default.GetText("\u6c34")+"\uff1a"+t.seed.water},t.prototype.onClickQuality=function(e){this.data=this.dataList.find(function(t){return t.quality==e+1}),this._view.nodeQuaContainer.children.forEach(function(t,n){t.color=e==n?cc.Color.YELLOW:cc.Color.WHITE}),this.refreshUI()},t.prototype.onClick=function(){r.default.instance.playAudio("click"),this.cb&&this.cb({id:this.data.id,quality:this.data.quality,num:this.curNum})},t.prototype.onSliderChange=function(e){if(e.progress<=0)this.curNum=1;else{var t=this.data.num,n=l.default.instance.allFieldData.list[p.default.instance.param.index].maxNum;t>n&&(t=n),this.curNum=Math.ceil(e.progress*t)}this._view.labNum.string="x"+this.curNum},t.prototype.onClickProduct=function(){var e=s.default.instance.getDataByName("item")[this.data.id],t=(s.default.instance.getDataByName("item")[e.seed.product],{id:e.seed.product,num:1,quality:this.data.quality}),n=u.default.instance.getItemPrice(t),i=l.default.instance.findItem(this.data.id-200,this.data.quality);h.default.instance.showUI(g.Utils.getNodeUsePos(this._view.sprProductQuality.node),{name:c.default.GetText("item_name_"+e.seed.product),spr:g.Utils.getItemSpName(e.seed.product),dec:c.default.GetText("item_dec_"+e.seed.product)+"("+c.default.GetText("\u4f30\u503c")+n+")"+(i.length>0?"("+c.default.GetText("\u4ed3\u5e93\u6570\u91cf",i[0].num):"")})},o([v],t)}(cc.Component));n.default=y,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../ui/pop_text_ui":"pop_text_ui","../ui/seed_choose_ui":"seed_choose_ui","../ui_view/item/item_seed_choose_view":"item_seed_choose_view","../utils/enum":"enum","../utils/utils":"utils"}],item_seed_preview:[function(e,t,n){"use strict";cc._RF.push(t,"beb9dR+9mFM36UN3a93aoA1","item_seed_preview");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/json_manager"),l=e("../manager/language_manager"),s=e("../manager/pool_manager"),c=e("../manager/resources_manager"),d=e("../utils/enum"),u=e("../utils/utils"),h=cc._decorator,p=h.ccclass,f=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=null,t.labelName=null,t.seasonRt=null,t.id=0,t}return a(t,e),t.prototype.init=function(e){this.id=e+201;var t=r.default.instance.getDataByName("item")[this.id];s.default.instance.removeObjByContainer(this.container),this.labelName.string=l.default.GetText("item_name_"+this.id),this.seasonRt.string=u.Utils.getSeaonColorStr(t.seed.season);for(var n=0;n<t.seed.growSp.length;n++){var i=s.default.instance.createObjectByName("itemSp",this.container);i.y=0,i.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(d.ResType.main,t.seed.growSp[n])}},o([f(cc.Node)],t.prototype,"container",void 0),o([f(cc.Label)],t.prototype,"labelName",void 0),o([f(cc.RichText)],t.prototype,"seasonRt",void 0),o([p],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../utils/enum":"enum","../utils/utils":"utils"}],item_sell_view:[function(e,t,n){"use strict";cc._RF.push(t,"f88e2tzGl9BILxQhtbrAFi9","item_sell_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeMusicSlider=null,this.btnSell=null,this.labLanList=[],this.labPrice=null,this.labNum=null,this.sprQuality=null,this.sprMain=null,this.rtName=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l;this.nodeMusicSlider=cc.find("nodeMusicSlider",e),this.btnSell=null===(t=cc.find("btnSell",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnSell/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labPrice=null===(i=cc.find("labPrice",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labNum=null===(a=cc.find("labNum",e))||void 0===a?void 0:a.getComponent(cc.Label),this.sprQuality=null===(o=cc.find("sprQuality",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprMain=null===(r=cc.find("sprMain",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.rtName=null===(l=cc.find("rtName",e))||void 0===l?void 0:l.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.nodeMusicSlider=null,this.btnSell=null,this.labLanList=[],this.labPrice=null,this.labNum=null,this.sprQuality=null,this.sprMain=null,this.rtName=null},e}();n.default=i,cc._RF.pop()},{}],item_sell:[function(e,t,n){"use strict";cc._RF.push(t,"bd4bauva0FPBqzYUG5qx0hk","item_sell");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/item_amount"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/effect_manager"),d=e("../manager/json_manager"),u=e("../manager/language_manager"),h=e("../manager/resources_manager"),p=e("../manager/sale_manager"),f=e("../manager/shop_manager"),m=e("../ui/shop_ui"),g=e("../ui_view/item/item_sell_view"),_=e("../utils/enum"),v=e("../utils/game_config"),y=e("../utils/utils"),b=cc._decorator,w=b.ccclass,C=(b.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t.index=0,t.curNum=1,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnSell.node.on("click",this.onClickSell,this),this._view.nodeMusicSlider.on("slide",this.onSliderChange,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u51fa\u552e"];e.forEach(function(e,n){e.string=u.default.GetText(t[n])})},t.prototype.init=function(e){var t=s.default.instance.itemDepot[e];this.index=e,d.default.instance.getDataByName("item")[t.id],this._view.sprMain.spriteFrame=h.default.instance.getSprite(_.ResType.main,y.Utils.getItemSpByAmount(t)),this._view.sprQuality.spriteFrame=h.default.instance.getSprite(_.ResType.main,"ui-quality_"+t.quality),this._view.labNum.string="1",this._view.nodeMusicSlider.getComponent(cc.Slider).progress=0,this._view.rtName.string="<color="+v.GameConfig.QualityColor[t.quality]+"/>["+u.default.GetText("QualityStr"+t.quality)+"]</color>"+u.default.GetText("item_name_"+t.id)+" "+t.num+"\u4e2a",this.curNum=1,this._view.nodeMusicSlider.getComponent(cc.Slider).progress=0,this.refreshPrice()},t.prototype.onClickSell=function(){l.default.instance.playAudio("earn_money");var e=Math.floor(p.default.instance.getItemPrice(s.default.instance.itemDepot[this.index])*this.curNum/4);c.default.instance.createRewardListEffect([{type:r.RewardType.money,num:e}],this._view.btnSell.node),f.ShopMgr.instance.onSellItem(this.index,this.curNum),m.default.instance.refreshSellPage()},t.prototype.onSliderChange=function(e){var t=s.default.instance.itemDepot[this.index];e.progress<=0?this.curNum=1:this.curNum=Math.ceil(e.progress*t.num),this._view.labNum.string=this.curNum+"",this.refreshPrice()},t.prototype.refreshPrice=function(){var e=s.default.instance.itemDepot[this.index],t=d.default.instance.getDataByName("item")[e.id];this._view.labPrice.string="\uffe5"+Math.floor(t.price/4*v.GameConfig.QualityDouble.sale[e.quality||0]*this.curNum)},o([w],t)}(cc.Component));n.default=C,cc._RF.pop()},{"../interface/item_amount":"item_amount","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../manager/shop_manager":"shop_manager","../ui/shop_ui":"shop_ui","../ui_view/item/item_sell_view":"item_sell_view","../utils/enum":"enum","../utils/game_config":"game_config","../utils/utils":"utils"}],item_shop_view:[function(e,t,n){"use strict";cc._RF.push(t,"7b0dbARx5BJZ6DoipkDxXV/","item_shop_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.btnBuy=null,this.labLanList=[],this.labPrice=null,this.sprMain=null}return e.prototype.initView=function(e){var t,n,i,a;this.btnBuy=null===(t=cc.find("btnBuy",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("btnBuy/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labPrice=null===(i=cc.find("labPrice",e))||void 0===i?void 0:i.getComponent(cc.Label),this.sprMain=null===(a=cc.find("sprMain",e))||void 0===a?void 0:a.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.btnBuy=null,this.labLanList=[],this.labPrice=null,this.sprMain=null},e}();n.default=i,cc._RF.pop()},{}],item_shop:[function(e,t,n){"use strict";cc._RF.push(t,"f3d8bmyCOpFMI5G7KTmeGgo","item_shop");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/all_shop_data"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/resources_manager"),h=e("../manager/shop_manager"),p=e("../manager/ui_manager"),f=e("../ui/item_detail_ui"),m=e("../ui/num_choose_ui"),g=e("../utils/config"),_=e("../utils/enum"),v=e("../utils/utils"),y=cc._decorator,b=y.ccclass,w=y.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=0,t.data=null,t.sprMain=null,t.qualitySpr=null,t.priceLabel=null,t.labBuy=null,t.buyBtn=null,t}return a(t,e),t.prototype.onLoad=function(){this.buyBtn.node.on("click",this.onClickBuy,this),this.node.on("click",this.onClickItem,this),cc.tween(this.sprMain.node).repeatForever(cc.tween().to(.5,{y:1},cc.easeOut(2)).to(1,{y:-1},cc.easeInOut(2)).to(.5,{y:0},cc.easeIn(2))).start(),this.setLanguage()},t.prototype.setLanguage=function(){this.labBuy.string=d.default.GetText("\u8d2d\u4e70")},t.prototype.init=function(e,t){this.index=e,this.data=t;var n=c.default.instance.getDataByName("item")[t.id],i=0;switch(this.buyBtn.node.active=!0,t.shopCurrency){case r.CurrencyType.point:i=h.ShopMgr.instance.getAdvShopPoint(t.id,1),this.priceLabel.string="P "+i.toFixed(0),s.default.instance.point>=i?this.priceLabel.node.color=cc.Color.WHITE:(this.priceLabel.node.color=cc.Color.RED,this.buyBtn.node.active=!1);break;default:case r.CurrencyType.money:i=h.ShopMgr.instance.getShopPrice(t.id,1,t.priceRate),this.priceLabel.string="\uffe5"+i.toFixed(0),s.default.instance.money>=i?this.priceLabel.node.color=cc.Color.WHITE:(this.priceLabel.node.color=cc.Color.RED,this.buyBtn.node.active=!1)}var a=v.Utils.getItemSpName(n.id);this.sprMain.spriteFrame=u.default.instance.getSprite(_.ResType.main,a)},t.prototype.onClickItem=function(){l.default.instance.playAudio("click");var e={id:this.data.id,num:1,quality:1};p.default.instance.openUI(f.default,{name:g.Config.uiName.itemDetailUI,param:[e,0]},301)},t.prototype.onClickBuy=function(){l.default.instance.playAudio("click_1"),p.default.instance.openUI(m.default,{name:g.Config.uiName.numChooseUI,param:[this.data]},300)},o([w(cc.Sprite)],t.prototype,"sprMain",void 0),o([w(cc.Sprite)],t.prototype,"qualitySpr",void 0),o([w(cc.Label)],t.prototype,"priceLabel",void 0),o([w(cc.Label)],t.prototype,"labBuy",void 0),o([w(cc.Button)],t.prototype,"buyBtn",void 0),o([b],t)}(cc.Component);n.default=C,cc._RF.pop()},{"../interface/all_shop_data":"all_shop_data","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/shop_manager":"shop_manager","../manager/ui_manager":"ui_manager","../ui/item_detail_ui":"item_detail_ui","../ui/num_choose_ui":"num_choose_ui","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils"}],item_skill_choose_view:[function(e,t,n){"use strict";cc._RF.push(t,"b6365i+EVRAEIjevDnVKOjw","item_skill_choose_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeLeft=null,this.nodeRight=null,this.btnJoinList=[],this.labChooseList=[],this.labDecList=[],this.labNameList=[],this.sprSpriteList=[]}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d;this.nodeLeft=cc.find("nodeLeft",e),this.nodeRight=cc.find("nodeRight",e),this.btnJoinList[0]=null===(t=cc.find("nodeLeft/btnJoinList0",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnJoinList[1]=null===(n=cc.find("nodeRight/btnJoinList1",e))||void 0===n?void 0:n.getComponent(cc.Button),this.labChooseList[0]=null===(i=cc.find("nodeLeft/labChooseList0",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labDecList[0]=null===(a=cc.find("nodeLeft/labDecList0",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labNameList[0]=null===(o=cc.find("nodeLeft/labNameList0",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labChooseList[1]=null===(r=cc.find("nodeRight/labChooseList1",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labDecList[1]=null===(l=cc.find("nodeRight/labDecList1",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labNameList[1]=null===(s=cc.find("nodeRight/labNameList1",e))||void 0===s?void 0:s.getComponent(cc.Label),this.sprSpriteList[0]=null===(c=cc.find("nodeLeft/sprSpriteList0",e))||void 0===c?void 0:c.getComponent(cc.Sprite),this.sprSpriteList[1]=null===(d=cc.find("nodeRight/sprSpriteList1",e))||void 0===d?void 0:d.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.nodeLeft=null,this.nodeRight=null,this.btnJoinList=[],this.labChooseList=[],this.labDecList=[],this.labNameList=[],this.sprSpriteList=[]},e}();n.default=i,cc._RF.pop()},{}],item_skill_choose:[function(e,t,n){"use strict";cc._RF.push(t,"9b4d8P70QJGU4vQm4odKdcx","item_skill_choose");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/effect_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/plan_manager"),u=e("../manager/resources_manager"),h=e("../ui_view/item/item_skill_choose_view"),p=e("../utils/enum"),f=e("../utils/utils"),m=cc._decorator,g=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new h.default,t.type=0,t.index=0,t.ids=[],t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._view.initView(this.node),this._view.btnJoinList.forEach(function(t,n){t.node.on("click",function(){r.default.instance.playAudio("effect_1"),l.default.instance.createPartical("luck",f.Utils.getNodeUsePos(t.node)),e.onChooseSkill(n)},e)})},t.prototype.init=function(e,t){this.type=e,this.index=t;var n=d.PlanMgr.instance.getSkillIdsByTypeAndIndex(e,t);this.ids=n;for(var i=0;i<n.length;i++){var a=s.default.instance.getDataByName("skill")[n[i]];switch(this._view.sprSpriteList[i].spriteFrame=u.default.instance.getSprite(p.ResType.main,"skill-skill_"+a.id),this._view.labNameList[i].string=c.default.GetText("skill_name_"+n[i]),this._view.labDecList[i].string=c.default.GetText("skill_dec_"+n[i]),d.PlanMgr.instance.checkSkillCanLearn(e,t,n[i])){case 0:this._view.btnJoinList[i].node.active=!0,this._view.labChooseList[i].string=c.default.GetText("\u770b\u5e7f\u544a");break;case 1:this._view.labChooseList[i].string=c.default.GetText("\u53ef\u5b66\u4e60"),this._view.btnJoinList[i].node.active=!0;break;case-1:this._view.labChooseList[i].string=c.default.GetText("\u5df2\u5b66\u4e60"),this._view.btnJoinList[i].node.active=!1;break;case-2:this._view.labChooseList[i].string="",this._view.btnJoinList[i].node.active=!1}}},t.prototype.onChooseSkill=function(e){d.PlanMgr.instance.onChooseSkill(this.type,this.index,this.ids[e])},o([g],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/effect_manager":"effect_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/plan_manager":"plan_manager","../manager/resources_manager":"resources_manager","../ui_view/item/item_skill_choose_view":"item_skill_choose_view","../utils/enum":"enum","../utils/utils":"utils"}],item_skill_view:[function(e,t,n){"use strict";cc._RF.push(t,"905934IzOZIV4xNYBQpGUIw","item_skill_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeBtnContainer=null,this.sprQuality=null,this.sprTool=null,this.barLevel=null}return e.prototype.initView=function(e){var t,n,i;this.nodeBtnContainer=cc.find("nodeBtnContainer",e),this.sprQuality=null===(t=cc.find("sprQuality",e))||void 0===t?void 0:t.getComponent(cc.Sprite),this.sprTool=null===(n=cc.find("sprTool",e))||void 0===n?void 0:n.getComponent(cc.Sprite),this.barLevel=null===(i=cc.find("barLevel",e))||void 0===i?void 0:i.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.nodeBtnContainer=null,this.sprQuality=null,this.sprTool=null,this.barLevel=null},e}();n.default=i,cc._RF.pop()},{}],item_tag:[function(e,t,n){"use strict";cc._RF.push(t,"91ea0M45NRMSJHDhssFz1TJ","item_tag");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/language_manager"),l=cc._decorator,s=l.ccclass,c=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.tagType=null,t.cb=null,t}return a(t,e),t.prototype.onLoad=function(){this.node.on("click",this.onClick,this)},t.prototype.init=function(e,t){this.tagType=e,this.cb=t,this.label.string=r.default.GetText("ItemTypeName"+e)},t.prototype.onClick=function(){this.cb&&this.cb(this.tagType)},o([c(cc.Label)],t.prototype,"label",void 0),o([s],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../manager/language_manager":"language_manager"}],item_talk_sys:[function(e,t,n){"use strict";cc._RF.push(t,"a243f4ihsBIbanYXpkEKtGu","item_talk_sys");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/language_manager"),s=e("../ui/talk_ui"),c=cc._decorator,d=c.ccclass,u=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.anima=null,t.richText=null,t.id=0,t}return a(t,e),t.prototype.onLoad=function(){this.richText.string="",this.node.on("click",this.onClick,this)},t.prototype.init=function(e){var t=this;this.richText.string="",this.anima.play(),setTimeout(function(){t.node.activeInHierarchy&&(t.richText.string=l.default.GetText(e+""))},600)},t.prototype.onClick=function(){r.default.instance.playAudio("snap"),s.default.instance.onClickNext()},o([u(cc.Animation)],t.prototype,"anima",void 0),o([u(cc.RichText)],t.prototype,"richText",void 0),o([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/language_manager":"language_manager","../ui/talk_ui":"talk_ui"}],item_talk_view:[function(e,t,n){"use strict";cc._RF.push(t,"8dfae9JfRVOx7UG406ou8rq","item_talk_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeLeft=null,this.nodeRight=null,this.nodeTalk=null,this.nodeTalkRight=null,this.labName=null,this.labNameRight=null,this.sprAvatar=null,this.sprAvatarRight=null,this.rtLabel=null,this.rtLabelRight=null}return e.prototype.initView=function(e){var t,n,i,a,o,r;this.nodeLeft=cc.find("nodeLeft",e),this.nodeRight=cc.find("nodeRight",e),this.nodeTalk=cc.find("nodeLeft/nodeTalk",e),this.nodeTalkRight=cc.find("nodeRight/nodeTalkRight",e),this.labName=null===(t=cc.find("nodeLeft/labName",e))||void 0===t?void 0:t.getComponent(cc.Label),this.labNameRight=null===(n=cc.find("nodeRight/labNameRight",e))||void 0===n?void 0:n.getComponent(cc.Label),this.sprAvatar=null===(i=cc.find("nodeLeft/sprAvatar",e))||void 0===i?void 0:i.getComponent(cc.Sprite),this.sprAvatarRight=null===(a=cc.find("nodeRight/sprAvatarRight",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.rtLabel=null===(o=cc.find("nodeLeft/rtLabel",e))||void 0===o?void 0:o.getComponent(cc.RichText),this.rtLabelRight=null===(r=cc.find("nodeRight/rtLabelRight",e))||void 0===r?void 0:r.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.nodeLeft=null,this.nodeRight=null,this.nodeTalk=null,this.nodeTalkRight=null,this.labName=null,this.labNameRight=null,this.sprAvatar=null,this.sprAvatarRight=null,this.rtLabel=null,this.rtLabelRight=null},e}();n.default=i,cc._RF.pop()},{}],item_talk:[function(e,t,n){"use strict";cc._RF.push(t,"555fbBpyTFAiah22yLZNRCn","item_talk");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/resources_manager"),u=e("../ui/talk_ui"),h=e("../ui_view/item/item_talk_view"),p=e("../utils/enum"),f=e("../utils/utils"),m=cc._decorator,g=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new h.default,t.richText=null,t.id=0,t.typerTimer=null,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this.node.on("click",this.onClickDialog,this)},t.prototype.init=function(e,t){void 0===t&&(t=!1),this.id=e;var n=s.default.instance.getDataByName("plot")[e];this._view.nodeLeft.active=!n.right,this._view.nodeRight.active=n.right,n.right?this.richText=this._view.rtLabelRight:this.richText=this._view.rtLabel,t?(this._view.nodeTalk.active=!1,this._view.nodeTalkRight.active=!1,this.richText.string=this.getDec()):(this._view.nodeTalk.active=!0,this._view.nodeTalkRight.active=!0,this.richText.string="",this.makeRichTextTyper(this.getDec())),n.char?(s.default.instance.getDataByName("char")[n.char],this._view.sprAvatar.spriteFrame=d.default.instance.getSprite(p.ResType.main,"avatar-avatar_"+n.char),this._view.sprAvatarRight.spriteFrame=d.default.instance.getSprite(p.ResType.main,"avatar-avatar_"+n.char),this._view.labName.string=c.default.GetText("char_name_"+n.char),this._view.labNameRight.string=c.default.GetText("char_name_"+n.char)):(this._view.sprAvatar.spriteFrame=d.default.instance.getSprite(p.ResType.main,"avatar-player_"+l.default.instance.char),this._view.sprAvatarRight.spriteFrame=d.default.instance.getSprite(p.ResType.main,"avatar-player_"+l.default.instance.char),this._view.labName.string=c.default.GetText("\u4f60"),this._view.labNameRight.string=c.default.GetText("\u4f60"))},t.prototype.onClickDialog=function(){r.default.instance.playAudio("Coffee"+(f.Utils.getRandomNumber(1)+1)),u.default.instance.isTalk?(this.onSkipCur(),u.default.instance.onTalkDone()):u.default.instance.onClickNext()},t.prototype.onSkipCur=function(){this.typerTimer&&(clearInterval(this.typerTimer),this.typerTimer=null),s.default.instance.getDataByName("plot")[this.id],this.richText.string=this.getDec(),this._view.nodeTalk.active=!1,this._view.nodeTalkRight.active=!1},t.prototype.makeRichTextTyper=function(e){for(var t=this,n=/<.+?\/?>/g,i=e.match(n),a=["\u2701","\u2702","\u2703","\u2704","\u273a","\u273b","\u273c","\u2744","\u2745","\u2746","\u2747","\u2748","\u2749","\u274a"].find(function(t){return-1==e.indexOf(t)}),o=e.replace(n,a),r=[],l=[],s={},c=0,d=0;d<o.length;d++)o[d]==a&&(l.push(d),l.length>=2?(s.endStr=i[2*r.length+1],s.endtIdx=d-c,r.push(s),l=[],s={}):(s.startIdx=d-c,s.startStr=i[2*r.length]),c+=1);var h=e.replace(n,"").split(""),p=[];for(d=1;d<=h.length;d++){for(var f=h.join("").slice(0,d),m=0,g=0;g<r.length;g++){var _=r[g],v=_.startIdx,y=_.endtIdx;d>v&&d<=y?(f=f.slice(0,v+m)+_.startStr+f.slice(v+m)+_.endStr,m+=_.startStr.length+_.endStr.length):d>y&&(f=f.slice(0,v+m)+_.startStr+f.slice(v+m,y+m)+_.endStr+f.slice(y+m),m+=_.startStr.length+_.endStr.length)}p.unshift(f)}this.typerTimer&&clearInterval(this.typerTimer),this.typerTimer=setInterval(function(){p.length?t.richText.string=p.pop():t.typerTimer&&(clearInterval(t.typerTimer),t.typerTimer=null,t._view.nodeTalk.active=!1,t._view.nodeTalkRight.active=!1,u.default.instance.onTalkDone())},50)},t.prototype.getDec=function(){var e=c.default.GetText(this.id+"");switch(this.id){case 2201:var t=c.default.GetText("item_name_"+l.default.instance.festivalData.foodMatch.food.id);return f.Utils.getText(e,t);case 1381:return f.Utils.getText(e,l.default.instance.festivalData.farmMatch.level);default:return e}},o([g],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../ui/talk_ui":"talk_ui","../ui_view/item/item_talk_view":"item_talk_view","../utils/enum":"enum","../utils/utils":"utils"}],item_translate_view:[function(e,t,n){"use strict";cc._RF.push(t,"80030tfUcpBa6dIbQlva9QJ","item_translate_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.btnChange=null,this.sprQuaAhead=null,this.sprIconList=[],this.sprQuaNext=null,this.sprIcon3=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l;this.btnChange=null===(t=cc.find("btnChange",e))||void 0===t?void 0:t.getComponent(cc.Button),this.sprQuaAhead=null===(n=cc.find("sprQuaAhead",e))||void 0===n?void 0:n.getComponent(cc.Sprite),this.sprIconList[0]=null===(i=cc.find("sprIconList0",e))||void 0===i?void 0:i.getComponent(cc.Sprite),this.sprIconList[1]=null===(a=cc.find("sprIconList1",e))||void 0===a?void 0:a.getComponent(cc.Sprite),this.sprIconList[2]=null===(o=cc.find("sprIconList2",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprQuaNext=null===(r=cc.find("sprQuaNext",e))||void 0===r?void 0:r.getComponent(cc.Sprite),this.sprIcon3=null===(l=cc.find("sprIcon3",e))||void 0===l?void 0:l.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.btnChange=null,this.sprQuaAhead=null,this.sprIconList=[],this.sprQuaNext=null,this.sprIcon3=null},e}();n.default=i,cc._RF.pop()},{}],item_translate:[function(e,t,n){"use strict";cc._RF.push(t,"0aed4d8c8xBOKweni1WU0YY","item_translate");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/dynamic_data_manager"),s=e("../manager/effect_manager"),c=e("../manager/json_manager"),d=e("../manager/language_manager"),u=e("../manager/resources_manager"),h=e("../manager/workshop_manager"),p=e("../ui/alchemy_ui"),f=e("../ui/pop_text_ui"),m=e("../ui_view/item/item_translate_view"),g=e("../utils/enum"),_=e("../utils/utils"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=0,t.quality=0,t._view=new m.default,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.btnChange.node.on("click",this.onClick,this),this._view.sprQuaAhead.node.on("click",this.onClickAhead,this),this._view.sprQuaNext.node.on("click",this.onClickNext,this)},t.prototype.init=function(e,t){this.id=e,this.quality=t,this.node.y=0;var n={id:e,quality:t,num:1},i={id:e,quality:t+1,num:1};[505,506,507,508,501,503].includes(e)&&(i.id+=1,i.quality=1),this._view.sprIconList.forEach(function(e){e.spriteFrame=u.default.instance.getSprite(g.ResType.main,_.Utils.getItemSpByAmount(n))}),this._view.sprIcon3.spriteFrame=u.default.instance.getSprite(g.ResType.main,_.Utils.getItemSpByAmount(i)),this._view.sprQuaAhead.spriteFrame=u.default.instance.getSprite(g.ResType.main,"ui-quality_"+t),this._view.sprQuaNext.spriteFrame=u.default.instance.getSprite(g.ResType.main,"ui-quality_"+i.quality);var a=h.WorkshopMgr.instance.getChangePrice(e,t);this._view.btnChange.node.getChildByName("label").getComponent(cc.Label).string=a.toFixed(0)+" "+d.default.GetText("\u53d8")+"!"},t.prototype.onClick=function(){r.default.instance.playAudio("click"),h.WorkshopMgr.instance.onChangeItem(this.id,this.quality);var e={id:this.id,quality:this.quality+1,num:1};[505,506,507,508,501,503].includes(this.id)&&(e.id+=1,e.quality=1),s.default.instance.createRewardItemSp(e,_.Utils.getNodeUsePos(this._view.btnChange.node)),p.default.instance.onClickChangeBtn()},t.prototype.onClickAhead=function(){var e=l.default.instance.findItem(this.id,this.quality);e[0]&&f.default.instance.showUI(_.Utils.getNodeUsePos(this._view.sprQuaAhead.node),{spr:this._view.sprIconList[0].spriteFrame.name,name:d.default.GetText("item_name_"+this.id),dec:d.default.GetText("item_dec_"+this.id)+"("+d.default.GetText("\u62e5\u6709\u6570\u91cf",e[0].num)+")"})},t.prototype.onClickNext=function(){var e={id:this.id,quality:this.quality+1,num:1};[505,506,507,508,501,503].includes(this.id)&&(e.id+=1,e.quality=1);var t=l.default.instance.findItem(e.id,e.quality);t[0]&&(c.default.instance.getDataByName("item")[e.id],f.default.instance.showUI(_.Utils.getNodeUsePos(this._view.sprQuaNext.node),{spr:this._view.sprIcon3.spriteFrame.name,name:d.default.GetText("item_name_"+e.id),dec:d.default.GetText("item_dec_"+e.id)+"("+d.default.GetText("\u62e5\u6709\u6570\u91cf",t[0].num)+")"}))},o([y],t)}(cc.Component));n.default=b,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/workshop_manager":"workshop_manager","../ui/alchemy_ui":"alchemy_ui","../ui/pop_text_ui":"pop_text_ui","../ui_view/item/item_translate_view":"item_translate_view","../utils/enum":"enum","../utils/utils":"utils"}],item_workshop_view:[function(e,t,n){"use strict";cc._RF.push(t,"beca9IxejZCnqv7hrudh0IH","item_workshop_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.nodeNeed=null,this.nodeEdit=null,this.btnClose=null,this.btnSwitch=null,this.labLanList=[],this.labProductNum=null,this.sprBg=null,this.sprIcon=null,this.sprNeed=null,this.rtLabel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d;this.nodeNeed=cc.find("nodeNeed",e),this.nodeEdit=cc.find("nodeEdit",e),this.btnClose=null===(t=cc.find("btnClose",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnSwitch=null===(n=cc.find("btnSwitch",e))||void 0===n?void 0:n.getComponent(cc.Button),this.labLanList[1]=null===(i=cc.find("labLanList1",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labProductNum=null===(a=cc.find("labProductNum",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labLanList[2]=null===(o=cc.find("nodeEdit/labLanList2",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labLanList[0]=null===(r=cc.find("nodeEdit/labLanList0",e))||void 0===r?void 0:r.getComponent(cc.Label),this.sprBg=null===(l=cc.find("sprBg",e))||void 0===l?void 0:l.getComponent(cc.Sprite),this.sprIcon=null===(s=cc.find("sprIcon",e))||void 0===s?void 0:s.getComponent(cc.Sprite),this.sprNeed=null===(c=cc.find("sprNeed",e))||void 0===c?void 0:c.getComponent(cc.Sprite),this.rtLabel=null===(d=cc.find("rtLabel",e))||void 0===d?void 0:d.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.nodeNeed=null,this.nodeEdit=null,this.btnClose=null,this.btnSwitch=null,this.labLanList=[],this.labProductNum=null,this.sprBg=null,this.sprIcon=null,this.sprNeed=null,this.rtLabel=null},e}();n.default=i,cc._RF.pop()},{}],item_workshop:[function(e,t,n){"use strict";cc._RF.push(t,"52819aYyhpCNo5yEXgHgvNo","item_workshop");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/dynamic_data_manager"),l=e("../manager/friend_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/pool_manager"),u=e("../manager/resources_manager"),h=e("../manager/ui_manager"),p=e("../manager/workshop_manager"),f=e("../ui/item_choose_ui"),m=e("../ui/pop_text_ui"),g=e("../ui/workshop_ui"),_=e("../ui_view/item/item_workshop_view"),v=e("../utils/config"),y=e("../utils/enum"),b=e("../utils/utils"),w=e("./item_need"),C=cc._decorator,S=C.ccclass,L=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new _.default,t.planData=null,t.index=0,t.curNum=1,t}return a(t,e),t.prototype.onLoad=function(){this._view.initView(this.node),this._view.sprBg.node.on("click",this.onClickIcon,this),this._view.sprNeed.node.on("click",this.onClickBuild,this),this._view.btnClose.node.on("click",this.onClickRemove,this),this._view.btnSwitch.node.on("click",this.onClickSwitch,this),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u8ba1\u5212\u751f\u4ea7","\u6301\u7eed\u751f\u4ea7","\u8f93\u5165"];e.forEach(function(e,n){e.string=c.default.GetText(t[n])})},t.prototype.init=function(e,t){var n=r.default.instance.workShopData;this.planData=e,this.index=t;var i=s.default.instance.getDataByName("item")[this.planData.id];this._view.rtLabel.string=c.default.GetText("item_name_"+this.planData.id),this._view.sprIcon.spriteFrame=u.default.instance.getSprite(y.ResType.main,b.Utils.getItemSpName(this.planData.id)),i.recipe.building?this._view.sprNeed.spriteFrame=u.default.instance.getSprite(y.ResType.main,b.Utils.getItemSpName(i.recipe.building)):this._view.sprNeed.spriteFrame=null,d.default.instance.removeObjByContainer(this._view.nodeNeed);for(var a=0;a<i.recipe.need.length;a++)d.default.instance.createObjectByName("itemNeed",this._view.nodeNeed),this.autoFind(a);-1==n.planList[n.curPlan][this.index].max?this._view.nodeEdit.active=!1:(this._view.nodeEdit.active=!0,this.curNum=n.planList[n.curPlan][this.index].max,this._view.nodeEdit.getComponent(cc.EditBox).string=this.curNum+""),this._view.btnSwitch.node.getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(y.ResType.main,-1==n.planList[n.curPlan][this.index].max?"ui-new-switch_open":"ui-new-switch_close"),this.countProduct()},t.prototype.onClickNeed=function(e,t){var n=this,i=s.default.instance.getDataByName("item")[this.planData.id];h.default.instance.openUI(f.default,{name:v.Config.uiName.itemChooseUI,param:[[i.recipe.need[e]],function(t){n._view.nodeNeed.children[e].getComponent(w.default).init(e,i.recipe.need[e],n.onClickNeed.bind(n),t),p.WorkshopMgr.instance.onChooseRecipeDetail(n.index,e,t),n.countProduct()},t]},401)},t.prototype.autoFind=function(e){var t=s.default.instance.getDataByName("item")[this.planData.id],n=r.default.instance.workShopData,i=n.recipeList[n.curPlan][this.index][e];if(i)this._view.nodeNeed.children[e].getComponent(w.default).init(e,t.recipe.need[e],this.onClickNeed.bind(this),{id:i[0],quality:i[1],num:t.recipe.need[e][2]||1});else{var a=[];1==t.recipe.need[e][0]?a=r.default.instance.findItem(t.recipe.need[e][1]):2==t.recipe.need[e][0]?a=r.default.instance.findItemsByType(t.recipe.need[e][1]):3==t.recipe.need[e][0]&&t.recipe.need[e][1].forEach(function(e){a.push.apply(a,r.default.instance.findItem(e))}),t.recipe.need[e][2]&&(a=a.filter(function(n){return n.num>=t.recipe.need[e][2]})),a.length>=1?(this._view.nodeNeed.children[e].getComponent(w.default).init(e,t.recipe.need[e],this.onClickNeed.bind(this),a[0]),p.WorkshopMgr.instance.onChooseRecipeDetail(this.index,e,a[0])):this._view.nodeNeed.children[e].getComponent(w.default).init(e,t.recipe.need[e],this.onClickNeed.bind(this))}},t.prototype.countProduct=function(){var e=[];this._view.labProductNum.string="",this._view.sprIcon.spriteFrame=u.default.instance.getSprite(y.ResType.main,b.Utils.getItemSpName(this.planData.id)),this._view.sprBg.spriteFrame=u.default.instance.getSprite(y.ResType.main,"ui-q (1)");var t=!0;if(this._view.nodeNeed.children.forEach(function(n){var i=n.getComponent(w.default);i.curItem?e.push({id:i.curItem.id,num:i.need[2]||1,quality:i.curItem.quality}):t=!1}),t){var n=r.default.instance.countProduct(this.planData.id,e),i=n[0],a=n[1];i>1&&(this._view.labProductNum.string="x"+i),i>0&&(this._view.sprIcon.spriteFrame=u.default.instance.getSprite(y.ResType.main,b.Utils.getItemSpByAmount({id:this.planData.id,num:1,quality:a})),this._view.sprBg.spriteFrame=u.default.instance.getSprite(y.ResType.main,"ui-quality_"+a))}},t.prototype.onClickIcon=function(){s.default.instance.getDataByName("item")[this.planData.id];var e=l.FriendMgr.instance.getItemdec(this.planData.id);m.default.instance.showUI(b.Utils.getNodeUsePos(this._view.sprBg.node),{spr:this._view.sprIcon.spriteFrame.name,name:c.default.GetText("item_name_"+this.planData.id),dec:e})},t.prototype.onClickBuild=function(){var e=s.default.instance.getDataByName("item")[this.planData.id];s.default.instance.getDataByName("item")[e.recipe.building],m.default.instance.showUI(b.Utils.getNodeUsePos(this._view.sprNeed.node),{spr:this._view.sprNeed.spriteFrame.name,name:c.default.GetText("item_name_"+e.recipe.building),dec:c.default.GetText("item_dec_"+e.recipe.building)})},t.prototype.onClickRemove=function(){p.WorkshopMgr.instance.onRemoveRecipe(this.index),g.default.instance.onClickListBtn()},t.prototype.onClickSwitch=function(){var e=r.default.instance.workShopData;-1==e.planList[e.curPlan][this.index].max?e.planList[e.curPlan][this.index].max=0:e.planList[e.curPlan][this.index].max=-1,-1==e.planList[e.curPlan][this.index].max?this._view.nodeEdit.active=!1:(this._view.nodeEdit.active=!0,this.curNum=e.planList[e.curPlan][this.index].max,this._view.nodeEdit.getComponent(cc.EditBox).string=this.curNum+""),this._view.btnSwitch.node.getComponent(cc.Sprite).spriteFrame=u.default.instance.getSprite(y.ResType.main,-1==e.planList[e.curPlan][this.index].max?"ui-new-switch_open":"ui-new-switch_close")},t.prototype.onEditBoxChange=function(){var e=+this._view.nodeEdit.getComponent(cc.EditBox).string;e<0&&(e=0),this.curNum=Math.ceil(e),this._view.nodeEdit.getComponent(cc.EditBox).string=this.curNum+"";var t=r.default.instance.workShopData;t.planList[t.curPlan][this.index].max=e},o([S],t)}(cc.Component));n.default=L,cc._RF.pop()},{"../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../manager/workshop_manager":"workshop_manager","../ui/item_choose_ui":"item_choose_ui","../ui/pop_text_ui":"pop_text_ui","../ui/workshop_ui":"workshop_ui","../ui_view/item/item_workshop_view":"item_workshop_view","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils","./item_need":"item_need"}],item_yang_card:[function(e,t,n){"use strict";cc._RF.push(t,"47364OoaQlNxqRK2Zw90MZt","item_yang_card");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/audio_manager"),l=e("../manager/resources_manager"),s=e("../ui/game_yang_ui"),c=e("../utils/enum"),d=e("../utils/utils"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clickable=!0,t.index=-1,t.val=1,t}return a(t,e),t.prototype.onLoad=function(){this.node.on("click",this.onClick,this)},t.prototype.init=function(e,t){this.index=e,this.val=t,this.node.getComponent(cc.Sprite).spriteFrame=l.default.instance.getSprite(c.ResType.main,"ui-gui-qua_"+this.val),this.node.getChildByName("sprMain").getComponent(cc.Sprite).spriteFrame=l.default.instance.getSprite(c.ResType.main,d.Utils.getItemSpName(s.default.instance.rewardItemId[t-1]))},t.prototype.setClickable=function(e){this.clickable=e,this.node.getComponent(cc.Sprite).node.color=this.clickable?new cc.Color(255,255,255,255):new cc.Color(150,137,137,255)},t.prototype.onClick=function(){r.default.instance.playAudio("sclick_0"),this.clickable&&s.default.instance.cardClick(this)},o([p(cc.Boolean)],t.prototype,"clickable",void 0),o([p(cc.Integer)],t.prototype,"val",void 0),o([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/resources_manager":"resources_manager","../ui/game_yang_ui":"game_yang_ui","../utils/enum":"enum","../utils/utils":"utils"}],item_yang_door:[function(e,t,n){"use strict";cc._RF.push(t,"16a33RSrKZCC7NZ+hCxW2Mh","item_yang_door");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=.5,t.isOpen=!1,t}return a(t,e),t.prototype.closeDoor=function(){var e=this;cc.tween(this.node).to(this.time,{position:new cc.Vec3(0,0,0)}).call(function(){e.isOpen=!1}).start()},t.prototype.openDoor=function(){var e=this;cc.tween(this.node).to(this.time,{position:new cc.Vec3(720,0,0)}).call(function(){e.isOpen=!0}).start()},o([l],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],json_manager:[function(e,t,n){"use strict";cc._RF.push(t,"189c2ibPEVOko47mJcopbhd","json_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../utils/emmiter"),l=e("../utils/message"),s=e("../utils/config"),c=e("./resources_manager"),d=cc._decorator,u=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._Data=[],t}var n;return a(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){for(var e=0;e<s.Config.resConfig.jsonArr.length;e++)this._Data[e]=c.default.instance._Json[e].json;r.Emitter.fire(l.MessageType.jsonLoaded)},t.prototype.getDataByName=function(e){var t=s.Config.resConfig.jsonArr.indexOf(e);if(-1!=t)return this._Data[t];console.log("\u586b\u5199\u4e86\u9519\u8bef\u7684name",e)},t.prototype.getConfig=function(e){return this._Data[0][1][e]},t._instance=null,n=o([u],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../utils/config":"config","../utils/emmiter":"emmiter","../utils/message":"message","./resources_manager":"resources_manager"}],language_manager:[function(e,t,n){"use strict";cc._RF.push(t,"28c00UcyplIz6edAoySiCUv","language_manager"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./dynamic_data_manager"),a=e("./json_manager"),o=e("./resources_manager"),r=cc._decorator,l=(r.ccclass,r.property,new(function(){function e(){}return Object.defineProperty(e.prototype,"langData",{get:function(){return 3==o.default.instance.loading?a.default.instance.getDataByName("language"):{}},enumerable:!1,configurable:!0}),e.prototype.GetText=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.langData[e]){var a=["CN","EN"],o=a[i.default.instance.config.lang?i.default.instance.config.lang:0];if(0==t.length)return this.langData[e][o];if(1==t.length)return this.langData[e][o].format(t[0]);if(2==t.length)return this.langData[e][o].format(t[0],t[1]);if(3==t.length)return this.langData[e][o].format(t[0],t[1],t[2]);if(4==t.length)return this.langData[e][o].format(t[0],t[1],t[2],t[3])}return"NO KEY:"+e},e.prototype.init=function(){},e.prototype.dataLoadedCallback=function(){},e.prototype.setStringFormat=function(){String.prototype.format=function(){var e=arguments;return this.replace(/\{(\d+)\}/g,function(t,n){return e[n]})}},e}()));l.setStringFormat(),n.default=l,cc._RF.pop()},{"./dynamic_data_manager":"dynamic_data_manager","./json_manager":"json_manager","./resources_manager":"resources_manager"}],login_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"9f480x4YPxMg7vPck19Dir+","login_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeCesi=null,this.nodeLogo=null,this.nodeTaptap=null,this.nodeCheck=null,this.nodeMask=null,this.btnStart=null,this.btnLogin=null,this.btnYinsi=null,this.btnYinsiJump=null,this.btnKnow=null,this.labLoading=null}return e.prototype.initView=function(e){var t,n,i,a,o,r;this.content=cc.find("content",e),this.nodeCesi=cc.find("content/nodeCesi",e),this.nodeLogo=cc.find("content/nodeLogo",e),this.nodeTaptap=cc.find("content/btnLogin/nodeTaptap",e),this.nodeCheck=cc.find("content/btnYinsi/nodeCheck",e),this.nodeMask=cc.find("content/nodeCesi/nodeMask",e),this.btnStart=null===(t=cc.find("content/btnStart",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnLogin=null===(n=cc.find("content/btnLogin",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnYinsi=null===(i=cc.find("content/btnYinsi",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnYinsiJump=null===(a=cc.find("content/btnYinsiJump",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnKnow=null===(o=cc.find("content/nodeCesi/btnKnow",e))||void 0===o?void 0:o.getComponent(cc.Button),this.labLoading=null===(r=cc.find("content/switchMask/labLoading",e))||void 0===r?void 0:r.getComponent(cc.Label)},e.prototype.onDestroy=function(){this.content=null,this.nodeCesi=null,this.nodeLogo=null,this.nodeTaptap=null,this.nodeCheck=null,this.nodeMask=null,this.btnStart=null,this.btnLogin=null,this.btnYinsi=null,this.btnYinsiJump=null,this.btnKnow=null,this.labLoading=null},e}();n.default=i,cc._RF.pop()},{}],login_ui:[function(e,t,n){"use strict";cc._RF.push(t,"a44084qgyxN7b0beML0DdEE","login_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/language_manager"),c=e("../manager/main_manager"),d=e("../manager/sdk_mananger"),u=e("../manager/storage_manager"),h=e("../manager/ui_manager"),p=e("../ui_view/panel/login_ui_view"),f=e("./switch_mask_ui"),m=cc._decorator,g=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=new p.default,t._agree=!0,t.curTime=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this.view.initView(this.node),n.instance=this,this._bindEvent(),this.view.content.active=!0,this.view.nodeLogo.active=!0,this.view.btnStart.node.active=!1,this.view.nodeTaptap.active=!1,this.view.nodeTaptap.active=!1,this.view.labLoading.string=s.default.GetText("\u52a0\u8f7d\u4e2d"),u.default.instance.loadDataByKey("agree")?(d.default.getInatance().initSdk(),this.view.nodeCesi.active=!1):d.default.getInatance().across||(this.view.nodeCesi.active=!0),l.default.instance.playBGM("open")},t.prototype._bindEvent=function(){var e=this;this.view.btnLogin.node.on("click",this.onClickLogin,this),this.view.btnYinsi.node.on("click",function(){l.default.instance.playAudio("click"),r.default.instance.popOut(e.view.nodeCesi)},this),this.view.btnYinsiJump.node.on("click",function(){cc.sys.openURL("https://zhuanlan.zhihu.com/p/675893118")},this),this.view.btnKnow.node.on("click",this.onClickKnow,this)},t.prototype.showUI=function(){r.default.instance.fadeShowDialog(this.view.content)},t.prototype.onClickLogin=function(){var e=this;l.default.instance.playAudio("sclick_4"),-1!=d.default.getInatance().login?0==d.default.getInatance().login?d.default.getInatance().userLogin():1==d.default.getInatance().login?f.default.instance.onSwitch(function(){e.hideUI(),c.default.instance.onEnterGame(),f.default.instance.endSwitch()}):h.default.instance.LoadTipsByStr(s.default.GetText("\u767b\u9646\u4e2d\u7a0d\u7b49")):h.default.instance.LoadTipsByStr(s.default.GetText("\u521d\u59cb\u5316\u4e2d"))},t.prototype.resLoadShowUI=function(){this.view.labLoading.string=s.default.GetText("\u70b9\u51fb\u5f00\u59cb")},t.prototype.update=function(e){this.curTime>=0&&(this.curTime+=e),this.curTime>2&&(this.view.nodeLogo.active=!1)},t.prototype.hideUI=function(){this.view.content.active=!1},t.prototype.onClickKnow=function(){u.default.instance.saveDataByKey("agree",1),l.default.instance.playAudio("switch"),this.view.nodeCesi.active=!1,d.default.getInatance().initSdk()},t.instance=null,n=o([g],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/language_manager":"language_manager","../manager/main_manager":"main_manager","../manager/sdk_mananger":"sdk_mananger","../manager/storage_manager":"storage_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/login_ui_view":"login_ui_view","./switch_mask_ui":"switch_mask_ui"}],main_manager:[function(e,t,n){"use strict";cc._RF.push(t,"728c1gEes1M5JAJuMOv2r5A","main_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../ui/create_role_ui"),l=e("../ui/header_ui"),s=e("../ui/login_ui"),c=e("../ui/menu_ui"),d=e("../utils/config"),u=e("../utils/enum"),h=e("../utils/game_config"),p=e("./dynamic_data_manager"),f=e("./game_manager"),m=e("./guide_manager"),g=e("./json_manager"),_=e("./language_manager"),v=e("./record_manager"),y=e("./resources_manager"),b=e("./sdk_mananger"),w=e("./storage_manager"),C=e("./ui_manager"),S=cc._decorator,L=S.ccclass,A=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t.heightLong=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){n.instance=this,this.setDesignResolution(),cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,y.default.instance.init()},t.prototype.resLoaded=function(){console.log("\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6bd5"),f.default.instance.initData(),s.default.instance.resLoadShowUI(),b.default.getInatance().init(),v.default.instance.init(),m.GuideMgr.instance.init(),C.default.instance.preLoadUI(),c.default.instance.setLanguage()},t.prototype.onEnterGame=function(){var e=w.default.instance.loadDataByKey("config");e?(p.default.instance.config=e,"v1.0.1"==p.default.instance.config.version&&(p.default.instance.config.timeSpdUpTimes+=200,p.default.instance.config.refreshTimes+=50),w.default.instance.loadDataByKey("userdata")?(w.default.instance.loadPlayerData(),p.default.instance.onLoadDataDone()):C.default.instance.openUI(r.default,{name:d.Config.uiName.createRoleUI})):(C.default.instance.openUI(r.default,{name:d.Config.uiName.createRoleUI}),w.default.instance.saveDataByKey("config",p.default.instance.config)),b.default._instance.init()},t.prototype.setDesignResolution=function(){var e=cc.find("Canvas").getComponent(cc.Canvas),t=cc.winSize;window.winSize=t,t.width/t.height>160/330?(e.fitWidth=!1,e.fitHeight=!0):(e.fitWidth=!0,e.fitHeight=!1,t.width/t.height<=160/350?setTimeout(function(){l.default.instance.node.getComponent(cc.Widget).top=39}):setTimeout(function(){var e=t.height/(t.width/160)-330;l.default.instance.node.getComponent(cc.Widget).top=19+e}))},t.prototype.getSvY=function(){},t.prototype.getSvHeight=function(){},t.prototype.fixValue=function(){for(var e in g.default.instance.getDataByName("item")){var t=g.default.instance.getDataByName("item")[e],n=15-Math.sqrt(t.price/10);if(n<2&&(n=2),n/=100,t.price,t.levelNeedNum,t&&t.type&&t.type.includes(u.Itemtype.seed)){var i=1.5;(p=g.default.instance.getDataByName("item")[t.seed.product]).type.includes(u.Itemtype.fruit)?i=1.1:p.type.includes(u.Itemtype.flower)&&(i=1.3);for(var a=0;a<t.seed.season.length;a++)1==t.seed.season[a]?i-=.1:-1==t.seed.season[a]&&(i+=.1);var o=t.price*(1+t.seed.time*n)+10*Math.pow(t.seed.time/2,i)*t.seed.water;t.seed.continue&&(o=o/4+10*Math.pow(t.seed.continue,2)*t.seed.water+t.price*t.seed.continue*n)}if(t&&t.type&&t.type.includes(u.Itemtype.food),+e<2500&&+e>2e3){o=0;var r=0;for(a=0;a<t.recipe.need.length;a++){switch(t.recipe.need[a][0]){case 1:r=g.default.instance.getDataByName("item")[t.recipe.need[a][1]].price;break;case 2:r=3==t.recipe.need[a][2]?200:13==t.recipe.need[a][2]?300:100;break;case 3:r=200}o+=r*(t.recipe.need[a][2]||1)}Math.sqrt(o);if(Math.sqrt(t.recipe.health),t.recipe.health,t.recipe.building){var l=g.default.instance.getDataByName("item")[t.recipe.building];Math.sqrt(l.point)}}if(t.levelNeedNum){var s=0;switch(t.levelReward[0]){case 1:s=1e4/t.price;break;case 2:s=6e3/t.price;break;case 3:s=3500/t.price;break;case 4:s=15e3/t.price}s<10&&(s=10),s>100&&(s=100)}}var c={};for(var e in g.default.instance.getDataByName("char")){if((t=g.default.instance.getDataByName("char")[e]).animal){var d=0;for(a=0;a<t.animal.product.length;a++)d<(o=(p=g.default.instance.getDataByName("item")[t.animal.product[a][0]]).price*h.GameConfig.QualityDouble.sale[t.animal.product[a][2]||1])&&(_.default.GetText("item_name_"+t.animal.product[a][0]),d=o);for(Math.ceil(d/10/t.animal.rare/t.animal.food/Math.sqrt(6-t.rare)),a=0;a<t.animal.product.length;a++){var p;o=(p=g.default.instance.getDataByName("item")[t.animal.product[a][0]]).price*h.GameConfig.QualityDouble.sale[t.animal.product[a][2]||1],c[p.id]?c[p.id].push(t.animal.product[a][2]||1):c[p.id]=[t.animal.product[a][2]||1]}}if(t.monster){var f=g.default.instance.getDataByName("item")[t.drop];t.diff,f.price}}for(var e in g.default.instance.getDataByName("map")){var m=g.default.instance.getDataByName("map")[e],v=Math.pow(100*+e,.8),y=[];for(a=0;a<m.findReward.length;a++){var b=g.default.instance.getDataByName("item")[m.findReward[a]];if(b.price)y.push(Math.round(v/b.price*10));else{r=0;var w=m.findReward[a];856==w?r=1e3:858==w?r=2500:855==w&&(r=350),y.push(Math.round(v/r*10))}}}},t.instance=null,n=o([L],t)}(cc.Component));n.default=A,cc._RF.pop()},{"../ui/create_role_ui":"create_role_ui","../ui/header_ui":"header_ui","../ui/login_ui":"login_ui","../ui/menu_ui":"menu_ui","../utils/config":"config","../utils/enum":"enum","../utils/game_config":"game_config","./dynamic_data_manager":"dynamic_data_manager","./game_manager":"game_manager","./guide_manager":"guide_manager","./json_manager":"json_manager","./language_manager":"language_manager","./record_manager":"record_manager","./resources_manager":"resources_manager","./sdk_mananger":"sdk_mananger","./storage_manager":"storage_manager","./ui_manager":"ui_manager"}],map_data:[function(e,t,n){"use strict";cc._RF.push(t,"71e33rktCZB3aEguuZJxsLI","map_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],market_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"f1842rSU4lP0rBG8jgqq4Jk","market_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeShopOwner=null,this.nodeMarket=null,this.nodeNumSlider=null,this.nodeContainer=null,this.btnRefresh=null,this.labLanList=[],this.labPro=null}return e.prototype.initView=function(e){var t,n,i,a;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeShopOwner=cc.find("content/nodeShopOwner",e),this.nodeMarket=cc.find("content/nodeMarket",e),this.nodeNumSlider=cc.find("content/nodeNumSlider",e),this.nodeContainer=cc.find("content/scrollview/view/nodeContainer",e),this.btnRefresh=null===(t=cc.find("content/btnRefresh",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("content/btnRefresh/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labLanList[1]=null===(i=cc.find("content/labLanList1",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labPro=null===(a=cc.find("content/nodeNumSlider/labPro",e))||void 0===a?void 0:a.getComponent(cc.Label)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeShopOwner=null,this.nodeMarket=null,this.nodeNumSlider=null,this.nodeContainer=null,this.btnRefresh=null,this.labLanList=[],this.labPro=null},e}();n.default=i,cc._RF.pop()},{}],market_ui:[function(e,t,n){"use strict";cc._RF.push(t,"0bcd0NtYZ9A/JmJs0rr4bJh","market_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_market"),l=e("../manager/action_manager"),s=e("../manager/ad_manager"),c=e("../manager/audio_manager"),d=e("../manager/dynamic_data_manager"),u=e("../manager/game_manager"),h=e("../manager/help_manager"),p=e("../manager/language_manager"),f=e("../manager/pool_manager"),m=e("../manager/record_manager"),g=e("../manager/shop_manager"),_=e("../manager/storage_manager"),v=e("../manager/ui_manager"),y=e("../ui_view/panel/market_ui_view"),b=e("../utils/emmiter"),w=e("../utils/enum"),C=e("../utils/message"),S=cc._decorator,L=S.ccclass,A=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new y.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u5237\u65b0","\u884c\u5546\u5546\u5e97"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this),this._view.btnRefresh.node.on("click",this.onClickRefresh,this),b.Emitter.register(C.MessageType.moneyChange,this.refreshMoneyNeedLabel,this),this._view.nodeNumSlider.on("slide",this.onSliderChange,this)},t.prototype.showUI=function(){l.default.instance.popOut(this._view.content,this._view.nodeMask),m.default.instance.onOpenPage(w.PageType.marketDay),this._view.nodeNumSlider.getComponent(cc.Slider).progress=0,this.onSliderChange()},t.prototype.hideUI=function(){c.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.refreshShop=function(){f.default.instance.removeObjByContainer(this._view.nodeContainer);for(var e=d.default.instance.shopData.marketDataList,t=0;t<e.length;t++){var n=f.default.instance.createObjectByName("itemMarket",this._view.nodeContainer),i=Math.floor(100*this._view.nodeNumSlider.getComponent(cc.Slider).progress);i<=0&&(i=1),n.getComponent(r.default).init(t,e[t],i)}},t.prototype.onClickRefresh=function(){c.default.instance.playAudio("click"),d.default.instance.config.refreshTimes>0?(d.default.instance.config.refreshTimes--,g.ShopMgr.instance.refreshMarketList(),this.refreshShop(),_.default.instance.saveConfig()):v.default.instance.LoadMessageBox(p.default.GetText("\u5237\u65b0\u6b21\u6570\u4e0d\u8db3"),p.default.GetText("\u5237\u65b0\u4e0d\u8db3\u63d0\u793a"),function(e){e&&s.default.getInatance().showAndroidAd(function(){v.default.instance.LoadTipsByStr(p.default.GetText("\u5e7f\u544a\u589e\u52a0\u5237\u65b0")),d.default.instance.config.refreshTimes+=10})})},t.prototype.refreshMoneyNeedLabel=function(){u.default.instance.getYear()},t.prototype.onClickMoneyRefresh=function(){c.default.instance.playAudio("click");var e=5e3*u.default.instance.getYear()+3e3;d.default.instance.money>=e?(d.default.instance.money-=e,g.ShopMgr.instance.refreshMarketList(),this.refreshShop()):v.default.instance.LoadTipsByStr(p.default.GetText("\u91d1\u94b1\u4e0d\u8db3"))},t.prototype.onSliderChange=function(){var e=Math.floor(100*this._view.nodeNumSlider.getComponent(cc.Slider).progress);e<=0&&(e=1),this._view.labPro.string=e+"%"+p.default.GetText("\u6570\u91cf\u6bd4\u4f8b\u8d2d\u4e70"),h.default.instance.debounce(h.limitKeyType.marketRefresh,this.refreshShop.bind(this))},t.instance=null,n=o([L],t)}(cc.Component));n.default=A,cc._RF.pop()},{"../item/item_market":"item_market","../manager/action_manager":"action_manager","../manager/ad_manager":"ad_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/help_manager":"help_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/record_manager":"record_manager","../manager/shop_manager":"shop_manager","../manager/storage_manager":"storage_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/market_ui_view":"market_ui_view","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message"}],meadow_data:[function(e,t,n){"use strict";cc._RF.push(t,"62959NiP2NCiLrD+j/j3uLY","meadow_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],meadow_manager:[function(e,t,n){"use strict";cc._RF.push(t,"8cff7ET1sJKBZzDh99grqZ1","meadow_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.MeadowMgr=void 0;var i=e("../ui/meadow_ui"),a=e("../utils/emmiter"),o=e("../utils/enum"),r=e("../utils/game_config"),l=e("../utils/message"),s=e("../utils/utils"),c=e("./dynamic_data_manager"),d=e("./game_manager"),u=e("./guide_manager"),h=e("./json_manager"),p=e("./language_manager"),f=e("./ui_manager"),m=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(e){void 0===e&&(e=0),c.default.instance.meadowData={maxNum:e,animalDepot:{},curEgg:null,eggDay:0,food:0,animalList:[],breed:!1};for(var t=0;t<c.default.instance.meadowData.maxNum;t++)c.default.instance.meadowData.animalList.push({id:null,index:t,productIndex:0,hungry:0,progress:0})},e.prototype.onUpdate=function(){},e.prototype.onDayStart=function(){var e=this,t=0,n=c.default.instance.meadowData;if(n.curEgg){n.eggDay+=d.default.instance.getPrecentValueByStr("eggSpd");var i=h.default.instance.getDataByName("item")[n.curEgg];n.eggDay>=i.egg&&this.onEggBroke()}var r=[],p=!1;n.animalList.forEach(function(i,a){if(i.id){var o=h.default.instance.getDataByName("char")[i.id];n.food>=o.animal.food?(n.food-=o.animal.food,t++,i.progress+=d.default.instance.getPrecentValueByStr("animalProductSpd"),r.push(e.checkGetProduct(a)),n.food<=0&&(p=!0)):(e.putAnimalDown(a),p=!0)}}),(r=r.filter(function(e){if(e)return e})).forEach(function(e){s.Utils.luckChance(d.default.instance.getValueByStr("productQua"))&&e[2]<=4&&e[2]++});for(var f=d.default.instance.getValueByStr("animalProduct"),m=0;m<r.length;m++)if(r[m]){var g=[r[m][0],r[m][1],r[m][2]||1];g[1]=(g[1]||1)+f,g[2]>5&&(g[2]=5),c.default.instance.onReward(c.default.instance.getItemAmountByArr(g)),a.Emitter.fire(l.MessageType.onAnimalProduct,0,g[2])}if(r.length>0){a.Emitter.fire(l.MessageType.doneGuideByType,u.GuideStep.animalProduct);var _=s.Utils.amountMerge(r.map(function(e){return c.default.instance.getItemAmountByArr(e)}));a.Emitter.fire(l.MessageType.addDairy,o.DairyRtType.animalReward,{rewardList:_})}n.food<this.getDailyFoodCostNum()&&(p=!0),p&&a.Emitter.fire(l.MessageType.addDairy,o.DairyRtType.noMeadowFood),d.default.instance.checkHaveSkill(31)&&t>0&&(c.default.instance.money+=10*t)},e.prototype.checkGetProduct=function(e){var t=c.default.instance.meadowData.animalList[e],n=h.default.instance.getDataByName("char")[t.id];if(t.progress>=n.animal.time){t.progress-=n.animal.time;var i=n.animal.product[t.productIndex];return[i[0],i[1],i[2]||1]}return null},e.prototype.addEgg=function(e){c.default.instance.onCost({id:e.id,num:1,quality:e.quality}),c.default.instance.meadowData.curEgg=e.id,c.default.instance.meadowData.eggDay=0,a.Emitter.fire(l.MessageType.doneGuideByType,u.GuideStep.addEgg)},e.prototype.removeEgg=function(){c.default.instance.onReward({id:c.default.instance.meadowData.curEgg,num:1,quality:1}),c.default.instance.meadowData.curEgg=null},e.prototype.onEggBroke=function(){var e=c.default.instance.meadowData.curEgg-1400;c.default.instance.meadowData.curEgg=null,this.addAnimal(e),a.Emitter.fire(l.MessageType.addDairy,o.DairyRtType.eggBreak,{id:e}),a.Emitter.fire(l.MessageType.doneGuideByType,u.GuideStep.eggBroken)},e.prototype.addFood=function(e){var t=h.default.instance.getDataByName("item")[e.id],n=0;t.type.includes(o.Itemtype.grass)?n=Math.floor((7+3*e.quality)*e.num*d.default.instance.getPrecentValueByStr("grassRate")):t.type.includes(o.Itemtype.fruit)&&(n=Math.floor(Math.pow(t.price*r.GameConfig.QualityDouble.sale[e.quality]*e.num,.9)/18*d.default.instance.getPrecentValueByStr("grassRate"))),c.default.instance.meadowData.food+=n,c.default.instance.onCost(e),f.default.instance.LoadTipsByStr(p.default.GetText("\u9972\u6599\u8f6c\u5316",p.default.GetText("item_name_"+e.id),e.num,n)),a.Emitter.fire(l.MessageType.doneGuideByType,u.GuideStep.onFoodAnima)},e.prototype.addAnimal=function(e){c.default.instance.meadowData.animalDepot[e]?c.default.instance.meadowData.animalDepot[e]++:c.default.instance.meadowData.animalDepot[e]=1,a.Emitter.fire(l.MessageType.checkGuide)},e.prototype.removeAnimal=function(e){c.default.instance.meadowData.animalDepot[e]&&c.default.instance.meadowData.animalDepot[e]--},e.prototype.putAnimalOn=function(e,t){this.removeAnimal(t),c.default.instance.meadowData.animalList[e].id=t,c.default.instance.meadowData.animalList[e].hungry=0,c.default.instance.meadowData.animalList[e].progress=0,c.default.instance.meadowData.animalList[e].productIndex=0,i.default.instance.refreshList()},e.prototype.putAnimalDown=function(e){var t=c.default.instance.meadowData.animalList[e].id;this.addAnimal(t),c.default.instance.meadowData.animalList[e].id=null},e.prototype.setAnimalProductIndex=function(e,t){c.default.instance.meadowData.animalList[e].productIndex=t},e.prototype.getDailyFoodCostNum=function(){for(var e=0,t=0;t<c.default.instance.meadowData.animalList.length;t++){var n=c.default.instance.meadowData.animalList[t];n.id&&(e+=h.default.instance.getDataByName("char")[n.id].animal.food||0)}return e},e.prototype.getDailyProductReward=function(){for(var e=[],t=0;t<c.default.instance.meadowData.animalList.length;t++){var n=c.default.instance.meadowData.animalList[t];if(n.id){var i=h.default.instance.getDataByName("char")[n.id];if(n.progress+1>=i.animal.time){var a=i.animal.product[n.productIndex],o=d.default.instance.getValueByStr("animalProduct"),r=[a[0],a[1]+o,a[2]||1];e.push(r)}}}return e},e._instance=null,e}();n.MeadowMgr=m,cc._RF.pop()},{"../ui/meadow_ui":"meadow_ui","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","../utils/utils":"utils","./dynamic_data_manager":"dynamic_data_manager","./game_manager":"game_manager","./guide_manager":"guide_manager","./json_manager":"json_manager","./language_manager":"language_manager","./ui_manager":"ui_manager"}],meadow_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"b4036fCmJNKrbzF3YZ4x+4Z","meadow_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodeContainer=null,this.nodeDaliyProductContainer=null,this.nodeListContainer=null,this.nodeProductContainer=null,this.btnAddEgg=null,this.btnHelp=null,this.btnAddFood=null,this.btnMain=null,this.btnHome=null,this.btnProduct=null,this.labLanList=[],this.labFood=null,this.labDailyFood=null,this.labEgg=null,this.sprEgg=null,this.svMain=null,this.svMain=null,this.barEgg=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v,y,b;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodePageList[2]=cc.find("content/nodePageList2",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodeContainer=cc.find("content/nodePageList0/meadowBg/nodeContainer",e),this.nodeDaliyProductContainer=cc.find("content/nodePageList0/scrollview/view/nodeDaliyProductContainer",e),this.nodeListContainer=cc.find("content/nodePageList1/svMain/view/nodeListContainer",e),this.nodeProductContainer=cc.find("content/nodePageList2/svMain/view/nodeProductContainer",e),this.btnAddEgg=null===(t=cc.find("content/nodePageList0/meadowBg/btnAddEgg",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnHelp=null===(n=cc.find("content/nodePageList0/btnHelp",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnAddFood=null===(i=cc.find("content/nodePageList0/btnAddFood",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnMain=null===(a=cc.find("content/nodeMenu/btnMain",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnHome=null===(o=cc.find("content/nodeMenu/btnHome",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnProduct=null===(r=cc.find("content/nodeMenu/btnProduct",e))||void 0===r?void 0:r.getComponent(cc.Button),this.labLanList[0]=null===(l=cc.find("content/nodePageList0/btnAddFood/labLanList0",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labFood=null===(s=cc.find("content/nodePageList0/labFood",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labDailyFood=null===(c=cc.find("content/nodePageList0/labDailyFood",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[1]=null===(d=cc.find("content/nodePageList0/labLanList1",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[2]=null===(u=cc.find("content/nodePageList0/labLanList2",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labEgg=null===(h=cc.find("content/nodePageList0/labEgg",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labLanList[3]=null===(p=cc.find("content/labLanList3",e))||void 0===p?void 0:p.getComponent(cc.Label),this.labLanList[4]=null===(f=cc.find("content/labLanList4",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labLanList[5]=null===(m=cc.find("content/labLanList5",e))||void 0===m?void 0:m.getComponent(cc.Label),this.labLanList[6]=null===(g=cc.find("content/labLanList6",e))||void 0===g?void 0:g.getComponent(cc.Label),this.sprEgg=null===(_=cc.find("content/nodePageList0/meadowBg/btnAddEgg/sprEgg",e))||void 0===_?void 0:_.getComponent(cc.Sprite),this.svMain=null===(v=cc.find("content/nodePageList1/svMain",e))||void 0===v?void 0:v.getComponent(cc.ScrollView),this.svMain=null===(y=cc.find("content/nodePageList2/svMain",e))||void 0===y?void 0:y.getComponent(cc.ScrollView),this.barEgg=null===(b=cc.find("content/nodePageList0/barEgg",e))||void 0===b?void 0:b.getComponent(cc.ProgressBar)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodeContainer=null,this.nodeDaliyProductContainer=null,this.nodeListContainer=null,this.nodeProductContainer=null,this.btnAddEgg=null,this.btnHelp=null,this.btnAddFood=null,this.btnMain=null,this.btnHome=null,this.btnProduct=null,this.labLanList=[],this.labFood=null,this.labDailyFood=null,this.labEgg=null,this.sprEgg=null,this.svMain=null,this.svMain=null,this.barEgg=null},e}();n.default=i,cc._RF.pop()},{}],meadow_ui:[function(e,t,n){"use strict";cc._RF.push(t,"31e91bOxYNDwpzqFLKFzAH7","meadow_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_animal"),l=e("../item/item_choose"),s=e("../item/item_meadow"),c=e("../item/item_product_choose"),d=e("../manager/action_manager"),u=e("../manager/audio_manager"),h=e("../manager/dynamic_data_manager"),p=e("../manager/json_manager"),f=e("../manager/language_manager"),m=e("../manager/meadow_manager"),g=e("../manager/pool_manager"),_=e("../manager/record_manager"),v=e("../manager/resources_manager"),y=e("../manager/ui_manager"),b=e("../ui_view/panel/meadow_ui_view"),w=e("../utils/config"),C=e("../utils/emmiter"),S=e("../utils/enum"),L=e("../utils/message"),A=e("../utils/utils"),k=e("./amount_choose_ui"),T=e("./help_ui"),M=cc._decorator,R=M.ccclass,P=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new b.default,t._page=0,t.showNew=!1,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u6dfb\u52a0\u9972\u6599","\u9884\u8ba1\u4ea7\u51fa","\u5b75\u5316\u8fdb\u5ea6","\u7267\u573a","\u603b\u89c8","\u680f\u4f4d","\u6307\u5b9a\u4ea7\u51fa"];e.forEach(function(e,n){e.string=f.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeMenu.children.forEach(function(t,n){t.on("click",function(){u.default.instance.playAudio("switch"),e.onClickPageBtn(n)},e)}),this._view.btnAddFood.node.on("click",this.onClickAddFood,this),this._view.btnAddEgg.node.on("click",this.onClickAddEgg,this),this._view.btnHelp.node.on("click",this.onClickHelp,this)},t.prototype.showUI=function(e){void 0===e&&(e=!1),d.default.instance.popOut(this._view.content,this._view.nodeMask),_.default.instance.onOpenPage(S.PageType.meadow),this.showNew=e,this.onClickPageBtn(e?1:0)},t.prototype.refreshAnimals=function(){g.default.instance.removeObjByContainer(this._view.nodeContainer);for(var e=0;e<h.default.instance.meadowData.animalList.length;e++){var t=h.default.instance.meadowData.animalList[e];t.id&&g.default.instance.createObjectByName("itemAnimal",this._view.nodeContainer).getComponent(r.default).init(t.id)}},t.prototype.refreshList=function(){g.default.instance.removeObjByContainer(this._view.nodeListContainer);for(var e=0;e<h.default.instance.meadowData.maxNum;e++)g.default.instance.createObjectByName("itemMeadow",this._view.nodeListContainer).getComponent(s.default).init(e)},t.prototype.refreshMeadowDetail=function(){if(h.default.instance.meadowData.curEgg){var e=p.default.instance.getDataByName("item")[h.default.instance.meadowData.curEgg];this._view.sprEgg.spriteFrame=v.default.instance.getSprite(S.ResType.main,A.Utils.getItemSpName(e.id)),this._view.labEgg.string=f.default.GetText("\u5b75\u5316\u4e2d")+"\uff1a"+f.default.GetText("item_name_"+h.default.instance.meadowData.curEgg),this._view.barEgg.progress=h.default.instance.meadowData.eggDay/e.egg}else this._view.sprEgg.spriteFrame=null,this._view.labEgg.string=f.default.GetText("\u672a\u5b75\u5316\u86cb"),this._view.barEgg.progress=0;this._view.labFood.string=f.default.GetText("\u9972\u6599\u603b\u6570")+"\uff1a"+h.default.instance.meadowData.food,this._view.labDailyFood.string=f.default.GetText("\u9972\u6599\u6d88\u8017")+"\uff1a"+m.MeadowMgr.instance.getDailyFoodCostNum()+"/"+f.default.GetText("\u5929"),g.default.instance.removeObjByContainer(this._view.nodeDaliyProductContainer);for(var t=m.MeadowMgr.instance.getDailyProductReward(),n=0;n<t.length;n++)g.default.instance.createObjectByName("itemChoose",this._view.nodeDaliyProductContainer).getComponent(l.default).initByArr(n,t[n],null);this.refreshAnimals()},t.prototype.refreshAnimalProducts=function(){g.default.instance.removeObjByContainer(this._view.nodeProductContainer);for(var e=0;e<h.default.instance.meadowData.animalList.length;e++)g.default.instance.createObjectByName("itemProductChoose",this._view.nodeProductContainer).getComponent(c.default).init(e)},t.prototype.update=function(e){this._view.nodeContainer.children.forEach(function(t){t.getComponent(r.default).onUpdate(e)})},t.prototype.hideUI=function(){u.default.instance.playAudio("paper2"),this._view.content.active=!1,C.Emitter.fire(L.MessageType.checkGuide)},t.prototype.onClickPageBtn=function(e){switch(this._page=e,this._view.nodePageList.forEach(function(t,n){t.active=n==e}),this._view.nodeMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=v.default.instance.getSprite(S.ResType.main,n==e?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")}),e){case 0:this.refreshMeadowDetail();break;case 1:this.refreshList();break;case 2:this.refreshAnimalProducts()}},t.prototype.onClickAddFood=function(){var e=this;u.default.instance.playAudio("click"),y.default.instance.openUI(k.default,{name:w.Config.uiName.amountChooseUI,param:[{scene:3,cb:function(t){m.MeadowMgr.instance.addFood(t),e._view.labFood.string=f.default.GetText("\u9972\u6599\u603b\u6570")+"\uff1a"+h.default.instance.meadowData.food}}]},300)},t.prototype.onClickAddEgg=function(){var e=this;u.default.instance.playAudio("click"),h.default.instance.meadowData.curEgg?y.default.instance.LoadMessageBox(f.default.GetText("\u662f\u5426\u79fb\u9664\u86cb"),f.default.GetText("\u79fb\u9664\u86cb\u63d0\u793a"),function(t){t&&(m.MeadowMgr.instance.removeEgg(),e.refreshMeadowDetail())}):y.default.instance.openUI(k.default,{name:w.Config.uiName.amountChooseUI,param:[{scene:2,cb:this.onChooseEgg.bind(this)}]},300)},t.prototype.onChooseEgg=function(e){m.MeadowMgr.instance.addEgg(e),this.refreshMeadowDetail()},t.prototype.onClickHelp=function(){y.default.instance.openUI(T.default,{name:w.Config.uiName.helpUI,param:[7]},301)},t.instance=null,n=o([R],t)}(cc.Component));n.default=P,cc._RF.pop()},{"../item/item_animal":"item_animal","../item/item_choose":"item_choose","../item/item_meadow":"item_meadow","../item/item_product_choose":"item_product_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/meadow_manager":"meadow_manager","../manager/pool_manager":"pool_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/meadow_ui_view":"meadow_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./amount_choose_ui":"amount_choose_ui","./help_ui":"help_ui"}],menu_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"1721f83/tRKlbFHLStpCiGh","menu_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMenu=null,this.nodeDiary=null,this.nodeEffectContainer=null,this.nodeBG=null,this.nodeEat=null,this.nodeRedDotList=[],this.nodeBgAnima=null,this.nodeHealth=null,this.nodeAction=null,this.nodePlan=null,this.nodePlanReddot=null,this.nodeFestivalReddot=null,this.nodePauseRedDot=null,this.nodeDairyRtContainer=null,this.btnFriend=null,this.btnSale=null,this.btnField=null,this.btnGround=null,this.btnDepot=null,this.btnPlan=null,this.btnGuide=null,this.btnDiary=null,this.btnSummary=null,this.btnFestival=null,this.btnEvent=null,this.btnGo=null,this.btnPauseTitle=null,this.btnPause=null,this.btnSetting=null,this.btnEatCertain=null,this.btnEatCancel=null,this.btnVip=null,this.labLanList=[],this.labPlan=null,this.labEat=null,this.sprIcon=null,this.sprIcon=null,this.sprIcon=null,this.sprIcon=null,this.sprIcon=null,this.sprAvatar=null,this.sprGo=null,this.sprPause=null,this.sprFood=null,this.rtGuideLabel=null,this.svDiary=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v,y,b,w,C,S,L,A,k,T,M,R,P,D,B,F,I,O,N,x,j,U,E,G;this.content=cc.find("content",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodeDiary=cc.find("content/nodeDiary",e),this.nodeEffectContainer=cc.find("content/nodeEffectContainer",e),this.nodeBG=cc.find("content/nodeDiary/nodeBG",e),this.nodeEat=cc.find("content/nodeDiary/nodeEat",e),this.nodeRedDotList[0]=cc.find("content/nodeMenu/btnFriend/nodeRedDotList0",e),this.nodeRedDotList[1]=cc.find("content/nodeMenu/btnSale/nodeRedDotList1",e),this.nodeRedDotList[2]=cc.find("content/nodeMenu/btnField/nodeRedDotList2",e),this.nodeRedDotList[3]=cc.find("content/nodeMenu/btnGround/nodeRedDotList3",e),this.nodeBgAnima=cc.find("content/nodeDiary/nodeBG/nodeBgAnima",e),this.nodeHealth=cc.find("content/nodeDiary/btnPlan/nodeHealth",e),this.nodeAction=cc.find("content/nodeDiary/btnPlan/nodeAction",e),this.nodePlan=cc.find("content/nodeDiary/btnPlan/nodePlan",e),this.nodePlanReddot=cc.find("content/nodeDiary/btnPlan/nodePlanReddot",e),this.nodeFestivalReddot=cc.find("content/nodeDiary/btnFestival/nodeFestivalReddot",e),this.nodePauseRedDot=cc.find("content/nodeDiary/btnGo/nodePauseRedDot",e),this.nodeDairyRtContainer=cc.find("content/nodeDiary/nodeBG/svDiary/view/nodeDairyRtContainer",e),this.btnFriend=null===(t=cc.find("content/nodeMenu/btnFriend",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnSale=null===(n=cc.find("content/nodeMenu/btnSale",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnField=null===(i=cc.find("content/nodeMenu/btnField",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnGround=null===(a=cc.find("content/nodeMenu/btnGround",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnDepot=null===(o=cc.find("content/nodeMenu/btnDepot",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnPlan=null===(r=cc.find("content/nodeDiary/btnPlan",e))||void 0===r?void 0:r.getComponent(cc.Button),this.btnGuide=null===(l=cc.find("content/nodeDiary/btnGuide",e))||void 0===l?void 0:l.getComponent(cc.Button),this.btnDiary=null===(s=cc.find("content/nodeDiary/btnDiary",e))||void 0===s?void 0:s.getComponent(cc.Button),this.btnSummary=null===(c=cc.find("content/nodeDiary/btnSummary",e))||void 0===c?void 0:c.getComponent(cc.Button),this.btnFestival=null===(d=cc.find("content/nodeDiary/btnFestival",e))||void 0===d?void 0:d.getComponent(cc.Button),this.btnEvent=null===(u=cc.find("content/nodeDiary/btnEvent",e))||void 0===u?void 0:u.getComponent(cc.Button),this.btnGo=null===(h=cc.find("content/nodeDiary/btnGo",e))||void 0===h?void 0:h.getComponent(cc.Button),this.btnPauseTitle=null===(p=cc.find("content/nodeDiary/btnGo/node/btnPauseTitle",e))||void 0===p?void 0:p.getComponent(cc.Button),this.btnPause=null===(f=cc.find("content/nodeDiary/btnPause",e))||void 0===f?void 0:f.getComponent(cc.Button),this.btnSetting=null===(m=cc.find("content/nodeDiary/btnSetting",e))||void 0===m?void 0:m.getComponent(cc.Button),this.btnEatCertain=null===(g=cc.find("content/nodeDiary/nodeEat/btnEatCertain",e))||void 0===g?void 0:g.getComponent(cc.Button),this.btnEatCancel=null===(_=cc.find("content/nodeDiary/nodeEat/btnEatCancel",e))||void 0===_?void 0:_.getComponent(cc.Button),this.btnVip=null===(v=cc.find("content/nodeDiary/btnVip",e))||void 0===v?void 0:v.getComponent(cc.Button),this.labLanList[0]=null===(y=cc.find("content/nodeMenu/btnFriend/labLanList0",e))||void 0===y?void 0:y.getComponent(cc.Label),this.labLanList[1]=null===(b=cc.find("content/nodeMenu/btnSale/labLanList1",e))||void 0===b?void 0:b.getComponent(cc.Label),this.labLanList[2]=null===(w=cc.find("content/nodeMenu/btnField/labLanList2",e))||void 0===w?void 0:w.getComponent(cc.Label),this.labLanList[3]=null===(C=cc.find("content/nodeMenu/btnGround/labLanList3",e))||void 0===C?void 0:C.getComponent(cc.Label),this.labLanList[4]=null===(S=cc.find("content/nodeMenu/btnDepot/labLanList4",e))||void 0===S?void 0:S.getComponent(cc.Label),this.labPlan=null===(L=cc.find("content/nodeDiary/btnPlan/nodePlan/labPlan",e))||void 0===L?void 0:L.getComponent(cc.Label),this.labLanList[5]=null===(A=cc.find("content/nodeDiary/btnDiary/labLanList5",e))||void 0===A?void 0:A.getComponent(cc.Label),this.labLanList[6]=null===(k=cc.find("content/nodeDiary/btnSummary/labLanList6",e))||void 0===k?void 0:k.getComponent(cc.Label),this.labLanList[7]=null===(T=cc.find("content/nodeDiary/btnFestival/labLanList7",e))||void 0===T?void 0:T.getComponent(cc.Label),this.labLanList[8]=null===(M=cc.find("content/nodeDiary/btnEvent/labLanList8",e))||void 0===M?void 0:M.getComponent(cc.Label),this.labLanList[9]=null===(R=cc.find("content/nodeDiary/btnGo/labLanList9",e))||void 0===R?void 0:R.getComponent(cc.Label),this.labEat=null===(P=cc.find("content/nodeDiary/nodeEat/labEat",e))||void 0===P?void 0:P.getComponent(cc.Label),this.sprIcon=null===(D=cc.find("content/nodeMenu/btnFriend/sprIcon",e))||void 0===D?void 0:D.getComponent(cc.Sprite),this.sprIcon=null===(B=cc.find("content/nodeMenu/btnSale/sprIcon",e))||void 0===B?void 0:B.getComponent(cc.Sprite),this.sprIcon=null===(F=cc.find("content/nodeMenu/btnField/sprIcon",e))||void 0===F?void 0:F.getComponent(cc.Sprite),this.sprIcon=null===(I=cc.find("content/nodeMenu/btnGround/sprIcon",e))||void 0===I?void 0:I.getComponent(cc.Sprite),this.sprIcon=null===(O=cc.find("content/nodeMenu/btnDepot/sprIcon",e))||void 0===O?void 0:O.getComponent(cc.Sprite),this.sprAvatar=null===(N=cc.find("content/nodeDiary/btnPlan/sprAvatar",e))||void 0===N?void 0:N.getComponent(cc.Sprite),this.sprGo=null===(x=cc.find("content/nodeDiary/btnGo/sprGo",e))||void 0===x?void 0:x.getComponent(cc.Sprite),this.sprPause=null===(j=cc.find("content/nodeDiary/btnPause/sprPause",e))||void 0===j?void 0:j.getComponent(cc.Sprite),this.sprFood=null===(U=cc.find("content/nodeDiary/nodeEat/sprFood",e))||void 0===U?void 0:U.getComponent(cc.Sprite),this.rtGuideLabel=null===(E=cc.find("content/nodeDiary/btnGuide/rtGuideLabel",e))||void 0===E?void 0:E.getComponent(cc.RichText),this.svDiary=null===(G=cc.find("content/nodeDiary/nodeBG/svDiary",e))||void 0===G?void 0:G.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMenu=null,this.nodeDiary=null,this.nodeEffectContainer=null,this.nodeBG=null,this.nodeEat=null,this.nodeRedDotList=[],this.nodeBgAnima=null,this.nodeHealth=null,this.nodeAction=null,this.nodePlan=null,this.nodePlanReddot=null,this.nodeFestivalReddot=null,this.nodePauseRedDot=null,this.nodeDairyRtContainer=null,this.btnFriend=null,this.btnSale=null,this.btnField=null,this.btnGround=null,this.btnDepot=null,this.btnPlan=null,this.btnGuide=null,this.btnDiary=null,this.btnSummary=null,this.btnFestival=null,this.btnEvent=null,this.btnGo=null,this.btnPauseTitle=null,this.btnPause=null,this.btnSetting=null,this.btnEatCertain=null,this.btnEatCancel=null,this.btnVip=null,this.labLanList=[],this.labPlan=null,this.labEat=null,this.sprIcon=null,this.sprIcon=null,this.sprIcon=null,this.sprIcon=null,this.sprIcon=null,this.sprAvatar=null,this.sprGo=null,this.sprPause=null,this.sprFood=null,this.rtGuideLabel=null,this.svDiary=null},e}();n.default=i,cc._RF.pop()},{}],menu_ui:[function(e,t,n){"use strict";cc._RF.push(t,"37bd9paO+hFM7e3Jt9Y+Vz5","menu_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/holiday_data"),l=e("../interface/item_amount"),s=e("../interface/plan_data"),c=e("../item/item_dairy_rt"),d=e("../manager/action_manager"),u=e("../manager/audio_manager"),h=e("../manager/dynamic_data_manager"),p=e("../manager/effect_manager"),f=e("../manager/game_manager"),m=e("../manager/guide_manager"),g=e("../manager/help_manager"),_=e("../manager/json_manager"),v=e("../manager/language_manager"),y=e("../manager/pool_manager"),b=e("../manager/record_manager"),w=e("../manager/reddot_manager"),C=e("../manager/resources_manager"),S=e("../manager/ui_manager"),L=e("../ui_view/panel/menu_ui_view"),A=e("../utils/config"),k=e("../utils/emmiter"),T=e("../utils/enum"),M=e("../utils/message"),R=e("../utils/utils"),P=e("./bag_ui"),D=e("./canvas_ui"),B=e("./farm_match_ui"),F=e("./field_ui"),I=e("./food_match_ui"),O=e("./friend_ui"),N=e("./ground_ui"),x=e("./holiday_ui"),j=e("./market_ui"),U=e("./plan_ui"),E=e("./sale_ui"),G=e("./season_result_ui"),V=e("./setting_ui"),H=e("./talk_ui"),q=e("./vip_ui"),Q=cc._decorator,J=Q.ccclass,K=(Q.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new L.default,t._diaryTween=null,t._btnTween=null,t._curPage=0,t._curChooseFood=0,t.guideTimer=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._bindEvent(),this._view.nodePlan.active=!1},t.prototype._bindEvent=function(){var e=this;this._view.btnDiary.node.on("click",this.onClickDiarybtn.bind(this),this),this._view.nodeMenu.children.forEach(function(t,n){t.on("click",function(){u.default.instance.playAudio("click_2"),e.onClickMenuBtn(n)},e)}),this._view.btnPlan.node.on("click",this.onClickPlanBtn.bind(this),this),this._view.btnSetting.node.on("click",this.onClickSettingBtn.bind(this),this),this._view.btnGo.node.on("click",this.onClickSwitchBtn,this),this._view.btnPauseTitle.node.on("click",this.onClickSwitchBtn,this),this._view.btnPause.node.on("click",this.onClickSwitchBtn,this),this._view.btnSummary.node.on("click",this.onClickSummary,this),this._view.btnEvent.node.on("click",this.onClickEvent,this),this._view.btnGuide.node.on("click",this.onClickGuide,this),this._view.btnVip.node.on("click",this.onClickVip,this),k.Emitter.register(M.MessageType.healthChange,this.refreshHealth,this),k.Emitter.register(M.MessageType.curPlanChange,this.onPlanChange,this),k.Emitter.register(M.MessageType.addDairy,this.onAddDairyItem,this),k.Emitter.register(M.MessageType.onPayLoad,this.refreshGuide,this),k.Emitter.register(M.MessageType.newDay,this.refreshUI,this),k.Emitter.register(M.MessageType.onDonePlot,function(){e.onDonePlotRefresh(),e.refreshPosReddot(),e.refreshMenuReddot(),e.refreshPlanReddot(),e.refreshGuide()},this),k.Emitter.register(M.MessageType.doneGuide,function(){e.refreshGuide()},this),k.Emitter.register(M.MessageType.gainSkillPoint,this.refreshPlanReddot,this),k.Emitter.register(M.MessageType.skillLevelup,this.refreshPlanReddot,this),k.Emitter.register(M.MessageType.onDonePlot,this.refreshMenuReddot,this),k.Emitter.register(M.MessageType.onDoneAchievement,this.refreshMenuReddot,this),this._view.btnEatCertain.node.on("click",this.onClickEatCertain,this),this._view.btnEatCancel.node.on("click",this.onClickEatCancel,this),this._view.btnFestival.node.on("click",this.onClickFestival,this),k.Emitter.register(M.MessageType.onItemChangeAlert,this.refreshHealth,this),k.Emitter.register(M.MessageType.gameDone,function(){e.refreshMenuReddot(),e.refreshFestivalReddot()},this),k.Emitter.register(M.MessageType.onItemChangeAlert,this.refreshMenuReddot,this),k.Emitter.register(M.MessageType.fieldAlert,this.refreshMenuReddot,this)},t.prototype.setLanguage=function(){var e=this._view.labLanList.concat(this._view.btnPauseTitle.node.getComponent(cc.Label)),t=["\u4f19\u4f34","\u6446\u644a","\u79cd\u7530","\u5e7f\u573a","\u4ed3\u5e93","\u65e5\u8bb0","\u8d26\u5355","\u8282\u65e5","\u5267\u60c5","\u8fdb\u884c","\u6682\u505c\u4e2d"];e.forEach(function(e,n){e.string=v.default.GetText(t[n])})},t.prototype.showUI=function(){this._view.content.active=!0,this.refreshUI(),n.instance.onClickMenuBtn(2),n.instance.initDairy(),this.refreshPosReddot(),this.refreshMenuReddot(),this.refreshPlanReddot(),this.refreshFestivalReddot()},t.prototype.refreshUI=function(){this._view.btnSummary.node.active=h.default.instance.day%30==29,this._view.btnFestival.node.active=!1;for(var e=1;e<=16;e++){var t=_.default.instance.getDataByName("holiday")[e];if(h.default.instance.day%120+1==t.day){this._view.btnFestival.node.active=!0;break}}this.onDonePlotRefresh(),this.refreshFestivalReddot(),this.refreshGuide()},t.prototype.refreshHealth=function(){this._view.nodeHealth.getComponent(cc.Sprite).fillRange=h.default.instance.health/h.default.instance.maxHealth,h.default.instance.health/h.default.instance.maxHealth<.33?(this.findEatFood(),this._curChooseFood&&this.onShowEatDialog()):this._view.nodeEat.active=!1},t.prototype.hideUI=function(){this._view.content.active=!1},t.prototype.onDonePlotRefresh=function(){m.GuideMgr.instance.getFunctionIsOpen(T.FunctionType.adventure)?(this._view.btnFriend.interactable=!0,this._view.btnFriend.node.getChildByName("sprIcon").getComponent(cc.Sprite).spriteFrame=C.default.instance.getSprite(T.ResType.main,"Icons-Team")):(this._view.btnFriend.interactable=!1,this._view.btnFriend.node.getChildByName("sprIcon").getComponent(cc.Sprite).spriteFrame=C.default.instance.getSprite(T.ResType.main,"Icons-Locked")),m.GuideMgr.instance.getFunctionIsOpen(T.FunctionType.sale)?(this._view.btnSale.interactable=!0,this._view.btnSale.node.getChildByName("sprIcon").getComponent(cc.Sprite).spriteFrame=C.default.instance.getSprite(T.ResType.main,"Icons-Waffles")):(this._view.btnSale.interactable=!1,this._view.btnSale.node.getChildByName("sprIcon").getComponent(cc.Sprite).spriteFrame=C.default.instance.getSprite(T.ResType.main,"Icons-Locked"));var e=b.default.instance.getAllCanTalk();this._view.btnEvent.node.active=e.length>0,this._view.btnVip.node.active=m.GuideMgr.instance.getFunctionIsOpen(T.FunctionType.vip)},t.prototype.closeOtherPage=function(e){switch(e!=T.PageType.friend&&O.default.instance.hideUI(),e!=T.PageType.sale&&E.default.instance.hideUI(),e!=T.PageType.field&&F.default.instance.hideUI(),e!=T.PageType.ground&&N.default.instance.hideUI(),e!=T.PageType.depot&&P.default.instance.hideUI(),e){case T.PageType.friend:O.default.instance.showUI();break;case T.PageType.sale:E.default.instance.showUI();break;case T.PageType.field:F.default.instance.showUI();break;case T.PageType.ground:N.default.instance.showUI();break;case T.PageType.depot:P.default.instance.showUI()}this.changeEmotion()},t.prototype.playBtnAnima=function(){this._btnTween&&this._btnTween.stop(),this._view.nodeMenu.children.forEach(function(e){e.getChildByName("sprIcon").y=-4,e.getComponent(cc.Button).normalSprite=C.default.instance.getSprite(T.ResType.main,"ui-Small Square Buttons-6"),e.getComponent(cc.Button).pressedSprite=C.default.instance.getSprite(T.ResType.main,"ui-Small Square Buttons-5"),e.getComponent(cc.Button).hoverSprite=C.default.instance.getSprite(T.ResType.main,"ui-Small Square Buttons-5")}),this._view.nodeMenu.children[this._curPage].getComponent(cc.Button).normalSprite=C.default.instance.getSprite(T.ResType.main,"ui-Small Square Buttons-3"),this._view.nodeMenu.children[this._curPage].getComponent(cc.Button).pressedSprite=C.default.instance.getSprite(T.ResType.main,"ui-Small Square Buttons-2"),this._view.nodeMenu.children[this._curPage].getComponent(cc.Button).hoverSprite=C.default.instance.getSprite(T.ResType.main,"ui-Small Square Buttons-2"),this._btnTween=cc.tween(this._view.nodeMenu.children[this._curPage].getChildByName("sprIcon")).to(.2,{y:1},cc.easeElasticOut(1)).call(function(){}).start()},t.prototype.onClickMenuBtn=function(e){this._curPage!=e&&(this._curPage=e,this.playBtnAnima(),this.closeOtherPage(e))},t.prototype.onClickPlanBtn=function(){u.default.instance.playAudio("click"),S.default.instance.openUI(U.default,{name:A.Config.uiName.planUI})},t.prototype.onClickSwitchBtn=function(){u.default.instance.playAudio("click_2"),f.default.instance.status==f.GameStatue.go?f.default.instance.status=f.GameStatue.pause:f.default.instance.status==f.GameStatue.pause&&(f.default.instance.status=f.GameStatue.go),this.refreshGameStateBtn()},t.prototype.onClickDiarybtn=function(){u.default.instance.playAudio("click_2"),1==this._view.nodeBG.active?this.onCloseDiaryUI():this.onOpenDiaryUI()},t.prototype.onClickSettingBtn=function(){u.default.instance.playAudio("click"),S.default.instance.openUI(V.default,{name:A.Config.uiName.settingUI})},t.prototype.onClickEvent=function(){u.default.instance.playAudio("click_2");var e=b.default.instance.getAllCanTalk();S.default.instance.openUI(H.default,{name:A.Config.uiName.talkUI,param:[e[0]]},301)},t.prototype.onOpenDiaryUI=function(){var e=this;this._view.nodeBG.active=!0,k.Emitter.fire(M.MessageType.dairyOpen),d.default.instance.playAnimation("book_open",this._view.nodeBgAnima),this._diaryTween=cc.tween(this._view.nodeDiary).to(.2,{y:0},cc.easeElasticOut(1)).call(function(){e._view.svDiary.scrollToBottom(.1),e.refreshGuide()}).start()},t.prototype.onCloseDiaryUI=function(){var e=this;this._view.nodeBG.opacity=255,d.default.instance.playAnimation("book_close",this._view.nodeBgAnima),this._diaryTween=cc.tween(this._view.nodeDiary).to(.12,{y:-100},cc.easeOut(1)).call(function(){k.Emitter.fire(M.MessageType.dairyClose),e._view.nodeBG.active=!1,e.refreshGuide()}).start()},t.prototype.changeEmotion=function(){d.default.instance.playAnimation("char_avatar_idle_"+h.default.instance.char,this._view.sprAvatar.node)},t.prototype.onPlanChange=function(e,t){switch(this._view.nodePlan.active=!0,t){case s.PlanType.none:this._view.nodePlan.active=!1;break;case s.PlanType.field:this._view.labPlan.string=v.default.GetText("\u5f00\u57a6\u519c\u7530");break;case s.PlanType.find:this._view.labPlan.string=v.default.GetText("\u91c7\u96c6\u98df\u6750");break;case s.PlanType.fish:this._view.labPlan.string=v.default.GetText("\u9493\u9c7c\u4e2d");break;case s.PlanType.logging:this._view.labPlan.string=v.default.GetText("\u780d\u4f10\u6728\u6750");break;case s.PlanType.mine:this._view.labPlan.string=v.default.GetText("\u6316\u6398\u77ff\u77f3");break;case s.PlanType.relax:h.default.instance.health>=h.default.instance.maxHealth?this._view.labPlan.string=v.default.GetText("\u70b9\u6b64\u5b89\u6392"):this._view.labPlan.string=v.default.GetText("\u4f11\u606f\u4e2d")}},t.prototype.showReward=function(e,t,n){if(!h.default.instance.config.skipEffect&&(!n||this.checkNodeInScreen(n)))switch(e){case T.PageType.friend:S.default.instance.checkUIIsOpen(O.default)&&n.activeInHierarchy?t.forEach(function(e){p.default.instance.createRewardItemSp(e,R.Utils.getNodeUsePos(n))}):this.showMenuReward(e,t);break;case T.PageType.sale:S.default.instance.checkUIIsOpen(E.default)&&n.activeInHierarchy?p.default.instance.createRewardItemSp(t[0],R.Utils.getNodeUsePos(n)):this.showMenuReward(e,t);break;case T.PageType.field:S.default.instance.checkUIIsOpen(F.default)&&n.activeInHierarchy?t.forEach(function(e){p.default.instance.createRewardItemSp(e,R.Utils.getNodeUsePos(n))}):this.showMenuReward(e,t);break;case T.PageType.ground:break;case T.PageType.depot:S.default.instance.checkUIIsOpen(P.default)?t.forEach(function(e){p.default.instance.createRewardItemSp(e,R.Utils.getNodeUsePos(n))}):this.showMenuReward(e,t)}},t.prototype.showMenuReward=function(e,t){var n=this.getMenuPos(e);t.forEach(function(e){var t=y.default.instance.createObjectByName("itemSp",D.default.instance.effectContainer);switch(t.children.forEach(function(e){return e.active=!1}),t.scale=.5,t.setPosition(n.add(cc.v2(10,R.Utils.getRandomNumber(16)-8))),t.getComponent(cc.Sprite).spriteFrame=null,e.type){case l.RewardType.money:t.getChildByName("nodeMoney").active=!0;break;case l.RewardType.point:t.getChildByName("nodePoint").active=!0;break;case l.RewardType.item:default:t.getComponent(cc.Sprite).spriteFrame=C.default.instance.getSprite(T.ResType.main,R.Utils.getItemSpName(e.id))}cc.tween(t).by(.5,{y:10},cc.easeOut(1)).call(function(){y.default.instance.removeObject(t)}).start()})},t.prototype.showPlanReward=function(e){var t=this;e.forEach(function(e){p.default.instance.createRewardItemSp(e,R.Utils.getNodeUsePos(t._view.sprAvatar.node))})},t.prototype.getMenuPos=function(e){return R.Utils.getNodeUsePos(this._view.nodeMenu.children[e])},t.prototype.initDairy=function(){y.default.instance.removeObjByContainer(this._view.nodeDairyRtContainer);for(var e=h.default.instance.recordData.dairyList,t=0;t<e.length;t++)y.default.instance.createObjectByName("itemDairyRt",this._view.nodeDairyRtContainer).getComponent(c.default).init(e[t][0],e[t][1]),this._view.svDiary.scrollToBottom(.1)},t.prototype.onAddDairyItem=function(e,t,n){h.default.instance.recordData.dairyList.push([t,n]),h.default.instance.recordData.dairyList.length>30&&h.default.instance.recordData.dairyList.shift(),y.default.instance.createObjectByName("itemDairyRt",this._view.nodeDairyRtContainer).getComponent(c.default).init(t,n),this._view.svDiary.scrollToBottom(.1),this._view.nodeDairyRtContainer.children.length>50&&y.default.instance.removeObject(this._view.nodeDairyRtContainer.children[0])},t.prototype.onClickSummary=function(){u.default.instance.playAudio("click_2"),S.default.instance.openUI(G.default,{name:A.Config.uiName.seasonResultUI})},t.prototype.findEatFood=function(){if(this._curChooseFood&&0==h.default.instance.findItem(this._curChooseFood).length&&(this._curChooseFood=0),!this._curChooseFood){var e=h.default.instance.itemDepot.filter(function(e){return!!_.default.instance.getDataByName("item")[e.id].type.includes(T.Itemtype.food)});this._curChooseFood=0,e.length>1&&(e.sort(function(e,t){var n=f.default.instance.getFoodHealth(e),i=f.default.instance.getFoodHealth(t);return Math.abs(n-h.default.instance.maxHealth/2)-Math.abs(i-h.default.instance.maxHealth/2)}),this._curChooseFood=e[0].id)}},t.prototype.onShowEatDialog=function(){var e=h.default.instance.findItem(this._curChooseFood)[0];this._view.nodeEat.active=!0,this._view.sprFood.spriteFrame=C.default.instance.getSprite(T.ResType.main,R.Utils.getItemSpByAmount(e)),this._view.labEat.string=f.default.instance.getFoodHealth(e)+"\n"+v.default.GetText("\u4f53\u529b")},t.prototype.onClickEatCertain=function(){u.default.instance.playAudio("click");var e=h.default.instance.findItem(this._curChooseFood)[0];this._curChooseFood=0,f.default.instance.onUseFood(e),h.default.instance.onCost({id:e.id,quality:e.quality,num:1}),this._view.nodeEat.active=!1},t.prototype.onClickEatCancel=function(){u.default.instance.playAudio("click"),this._curChooseFood=0,this._view.nodeEat.active=!1},t.prototype.refreshGameStateBtn=function(){f.default.instance.status==f.GameStatue.go?(this._view.btnGo.node.active=!1,this._view.btnPause.node.active=!0):f.default.instance.status==f.GameStatue.pause&&(this._view.btnGo.node.active=!0,this._view.btnPause.node.active=!1),h.default.instance.config.timeSpdUp?(this._view.btnGo.normalSprite=C.default.instance.getSprite(T.ResType.main,"ui-new-btn-20"),this._view.btnGo.pressedSprite=C.default.instance.getSprite(T.ResType.main,"ui-new-btn-21"),this._view.btnGo.hoverSprite=C.default.instance.getSprite(T.ResType.main,"ui-new-btn-21")):(this._view.btnGo.normalSprite=C.default.instance.getSprite(T.ResType.main,"ui-new-btn-16"),this._view.btnGo.pressedSprite=C.default.instance.getSprite(T.ResType.main,"ui-new-btn-17"),this._view.btnGo.hoverSprite=C.default.instance.getSprite(T.ResType.main,"ui-new-btn-17"))},t.prototype.onClickFestival=function(){u.default.instance.playAudio("click_2");for(var e=null,t=1;t<=16;t++){var n=_.default.instance.getDataByName("holiday")[t];if(h.default.instance.day%120+1==n.day){e=n;break}}switch(e.type){case r.HolidayType.marketDay:S.default.instance.openUI(j.default,{name:A.Config.uiName.marketUI});break;case r.HolidayType.bestChef:S.default.instance.openUI(I.default,{name:A.Config.uiName.foodMatchUI});break;case r.HolidayType.bestFarmer:S.default.instance.openUI(B.default,{name:A.Config.uiName.farmMatchUI});break;default:S.default.instance.openUI(x.default,{name:A.Config.uiName.holidayUI,param:[e.type-5]})}},t.prototype.refreshMenuReddot=function(){g.default.instance.debounce(g.limitKeyType.menuReddot,this.realRefreshReddot.bind(this))},t.prototype.realRefreshReddot=function(){for(var e=0;e<this._view.nodeRedDotList.length;e++){var t=this._view.nodeRedDotList[e];switch(e){case 0:t.active=w.ReddotMgr.instance.getFriendReddot();break;case 1:t.active=w.ReddotMgr.instance.getSaleRedDot();break;case 2:t.active=w.ReddotMgr.instance.getFieldReddot();break;case 3:t.active=w.ReddotMgr.instance.getGroundReddot()}}},t.prototype.refreshPlanReddot=function(){this._view.nodePlanReddot.active=w.ReddotMgr.instance.getPlanBtnRed()},t.prototype.refreshPosReddot=function(){this._view.nodePauseRedDot.active=w.ReddotMgr.instance.getPauseReddot()},t.prototype.refreshFestivalReddot=function(){this._view.nodeFestivalReddot.active=w.ReddotMgr.instance.getFestivalReddot()},t.prototype.refreshGuide=function(){var e=m.GuideMgr.instance.getGuideStr();this._view.nodeBG.active?this._view.btnGuide.node.active=!1:e?(this._view.btnGuide.node.active=!0,this._view.rtGuideLabel.string=e):this._view.btnGuide.node.active=!1},t.prototype.onClickGuide=function(){var e=this;if(m.GuideMgr.instance.isInGuide())if(this.guideTimer){var t=v.default.GetText("\u8df3\u8fc7\u6559\u7a0b");22==h.default.instance.recordData.guide&&(t=v.default.GetText("\u8df3\u8fc7\u6559\u7a0b1")),S.default.instance.LoadMessageBox(v.default.GetText("\u8df3\u8fc7\u76ee\u6807"),t,function(e){e&&m.GuideMgr.instance.onSkipGuide()})}else this.guideTimer=setTimeout(function(){e.guideTimer=null},500),m.GuideMgr.instance.showGuide();else S.default.instance.LoadTipsByStr(v.default.GetText("\u8fd8\u6b3e\u8be6\u60c5"))},t.prototype.onClickVip=function(){u.default.instance.playAudio("click_2"),S.default.instance.openUI(q.default,{name:A.Config.uiName.vipUI})},t.prototype.checkNodeInScreen=function(e){var t=R.Utils.getNodeUsePos(e);return cc.rect(-75,-165,150,330).contains(t)},t.instance=null,n=o([J],t)}(cc.Component));n.default=K,cc._RF.pop()},{"../interface/holiday_data":"holiday_data","../interface/item_amount":"item_amount","../interface/plan_data":"plan_data","../item/item_dairy_rt":"item_dairy_rt","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/game_manager":"game_manager","../manager/guide_manager":"guide_manager","../manager/help_manager":"help_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/record_manager":"record_manager","../manager/reddot_manager":"reddot_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/menu_ui_view":"menu_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./bag_ui":"bag_ui","./canvas_ui":"canvas_ui","./farm_match_ui":"farm_match_ui","./field_ui":"field_ui","./food_match_ui":"food_match_ui","./friend_ui":"friend_ui","./ground_ui":"ground_ui","./holiday_ui":"holiday_ui","./market_ui":"market_ui","./plan_ui":"plan_ui","./sale_ui":"sale_ui","./season_result_ui":"season_result_ui","./setting_ui":"setting_ui","./talk_ui":"talk_ui","./vip_ui":"vip_ui"}],message_box_ui_manager:[function(e,t,n){"use strict";cc._RF.push(t,"7af9309irJGNpBUbb9H+PTH","message_box_ui_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/language_manager"),c=cc._decorator,d=c.ccclass,u=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiNode=null,t.maskNode=null,t.labelTitle=null,t.labelDesc=null,t.buttonCancel=null,t.buttonConfirm=null,t.labelCancel=null,t.labelConfirm=null,t.curCallBack=null,t.curParam=null,t._isClick=!1,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){n.instance=this,this.buttonCancel.node.on("click",this.cancel,this),this.buttonConfirm.node.on("click",this.confirm,this),this.uiNode.active&&(this.uiNode.active=!1)},t.prototype.showUI=function(e,t,n,i,a,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=!0),void 0===o&&(o=null),this.uiNode.active||r.default.instance.popOut(this.uiNode,this.maskNode),o?(this.labelCancel.string=o[1],this.labelConfirm.string=o[2]):(this.labelCancel.string=s.default.GetText("\u53d6\u6d88"),this.labelConfirm.string=s.default.GetText("\u786e\u5b9a")),this.labelTitle.string=e,this.labelDesc.string=t,this.curCallBack=null!=n?n:null,this.curParam=i,this.buttonCancel.node.active=!!a},t.prototype.cancel=function(){l.default.instance.playAudio("click"),null!=this.curCallBack&&this.curCallBack(!1,this.curParam),this.hideUI()},t.prototype.confirm=function(){l.default.instance.playAudio("click"),this._isClick||(this._isClick=!0,this.scheduleOnce(function(){this._isClick=!1},.2),null!=this.curCallBack&&this.curCallBack(!0,this.curParam),this.hideUI())},t.prototype.hideUI=function(){this.uiNode.active=!1},t.instance=null,o([u(cc.Node)],t.prototype,"uiNode",void 0),o([u(cc.Node)],t.prototype,"maskNode",void 0),o([u(cc.Label)],t.prototype,"labelTitle",void 0),o([u(cc.RichText)],t.prototype,"labelDesc",void 0),o([u(cc.Button)],t.prototype,"buttonCancel",void 0),o([u(cc.Button)],t.prototype,"buttonConfirm",void 0),o([u(cc.Label)],t.prototype,"labelCancel",void 0),o([u(cc.Label)],t.prototype,"labelConfirm",void 0),n=o([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/language_manager":"language_manager"}],message:[function(e,t,n){"use strict";cc._RF.push(t,"9409782j2xJ3r81PJt1K2jq","message"),Object.defineProperty(n,"__esModule",{value:!0}),n.MessageType=void 0,function(e){e[e.atlasLoaded=0]="atlasLoaded",e[e.poolLoaded=1]="poolLoaded",e[e.jsonLoaded=2]="jsonLoaded",e[e.dairyOpen=3]="dairyOpen",e[e.dairyClose=4]="dairyClose",e[e.newDay=5]="newDay",e[e.moneyChange=6]="moneyChange",e[e.pointChange=7]="pointChange",e[e.healthChange=8]="healthChange",e[e.curPlanChange=9]="curPlanChange",e[e.addDairy=10]="addDairy",e[e.onMakeup=11]="onMakeup",e[e.addRecord=12]="addRecord",e[e.onFoodExprie=13]="onFoodExprie",e[e.onDonePlot=14]="onDonePlot",e[e.onKillMonster=15]="onKillMonster",e[e.onSaleItem=16]="onSaleItem",e[e.onHarvest=17]="onHarvest",e[e.onAnimalProduct=18]="onAnimalProduct",e[e.onBuySeed=19]="onBuySeed",e[e.onDoneQuest=20]="onDoneQuest",e[e.onPlanDone=21]="onPlanDone",e[e.onComeCostomer=22]="onComeCostomer",e[e.friendAlert=23]="friendAlert",e[e.onItemChangeAlert=24]="onItemChangeAlert",e[e.buffAlert=25]="buffAlert",e[e.friendLevelup=26]="friendLevelup",e[e.gainSkillPoint=27]="gainSkillPoint",e[e.skillLevelup=28]="skillLevelup",e[e.onDoneAchievement=29]="onDoneAchievement",e[e.gameDone=30]="gameDone",e[e.fieldAlert=31]="fieldAlert",e[e.doneGuide=32]="doneGuide",e[e.checkGuide=33]="checkGuide",e[e.doneGuideByType=34]="doneGuideByType",e[e.onPayLoad=35]="onPayLoad"}(n.MessageType||(n.MessageType={})),cc._RF.pop()},{}],num_choose_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"f09a4KAsp9JxrBZzQwrulng","num_choose_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeNumSlider=null,this.nodeQualityContainer=null,this.nodeChoose=null,this.nodeEdit=null,this.itemBag=null,this.btnCancel=null,this.btnBuy=null,this.labLanList=[],this.labMin=null,this.labMax=null,this.labDec=null,this.labPrice=null,this.rtLabel=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeNumSlider=cc.find("content/nodeNumSlider",e),this.nodeQualityContainer=cc.find("content/nodeQualityContainer",e),this.nodeChoose=cc.find("content/nodeChoose",e),this.nodeEdit=cc.find("content/nodeNumSlider/Handle/nodeEdit",e),this.itemBag=cc.find("content/itemBag",e),this.btnCancel=null===(t=cc.find("content/btnCancel",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnBuy=null===(n=cc.find("content/btnBuy",e))||void 0===n?void 0:n.getComponent(cc.Button),this.labLanList[0]=null===(i=cc.find("content/btnCancel/labLanList0",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labLanList[1]=null===(a=cc.find("content/btnBuy/labLanList1",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labMin=null===(o=cc.find("content/labMin",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labMax=null===(r=cc.find("content/labMax",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labDec=null===(l=cc.find("content/labDec",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[2]=null===(s=cc.find("content/labLanList2",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labPrice=null===(c=cc.find("content/labPrice",e))||void 0===c?void 0:c.getComponent(cc.Label),this.rtLabel=null===(d=cc.find("content/rtLabel",e))||void 0===d?void 0:d.getComponent(cc.RichText)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeNumSlider=null,this.nodeQualityContainer=null,this.nodeChoose=null,this.nodeEdit=null,this.itemBag=null,this.btnCancel=null,this.btnBuy=null,this.labLanList=[],this.labMin=null,this.labMax=null,this.labDec=null,this.labPrice=null,this.rtLabel=null},e}();n.default=i,cc._RF.pop()},{}],num_choose_ui:[function(e,t,n){"use strict";cc._RF.push(t,"52bbdEzitVOw586jvSN5V3K","num_choose_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/all_shop_data"),l=e("../manager/action_manager"),s=e("../manager/audio_manager"),c=e("../manager/dynamic_data_manager"),d=e("../manager/effect_manager"),u=e("../manager/friend_manager"),h=e("../manager/json_manager"),p=e("../manager/language_manager"),f=e("../manager/resources_manager"),m=e("../manager/shop_manager"),g=e("../ui_view/panel/num_choose_ui_view"),_=e("../utils/enum"),v=e("../utils/utils"),y=cc._decorator,b=y.ccclass,w=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new g.default,t.data=null,t.curQua=0,t.curNum=0,t.curQuaMaxNum=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u53d6\u6d88","\u786e\u8ba4","\u6570\u91cf\u9009\u62e9"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])}),this._view.nodeQualityContainer.children.forEach(function(e,t){e.getChildByName("lab").getComponent(cc.Label).string=p.default.GetText("QualityStr"+(t+1))})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeQualityContainer.children.forEach(function(t,n){t.on("click",function(){s.default.instance.playAudio("switch"),e.onChooseQuality(n)},e)}),this._view.btnCancel.node.on("click",this.onClickCancel,this),this._view.btnBuy.node.on("click",this.onClickCertain,this),this._view.nodeNumSlider.on("slide",this.onSliderChange,this)},t.prototype.showUI=function(e){this.data=e,l.default.instance.popOut(this._view.content,this._view.nodeMask),this._view.nodeQualityContainer.children.forEach(function(t,n){t.active=n<e.maxQuality}),this.curQua=e.maxQuality-1,this.onChooseQuality(e.maxQuality-1),this._view.rtLabel.string=p.default.GetText("item_name_"+this.data.id),this._view.nodeNumSlider.getComponent(cc.Slider).progress=0,this.onSliderChange(this._view.nodeNumSlider.getComponent(cc.Slider))},t.prototype.onChooseQuality=function(e){var t=this;switch(this.curQua=e,this._view.labMin.string="1",this.data.shopCurrency){case r.CurrencyType.point:this.curQuaMaxNum=Math.floor(c.default.instance.point/m.ShopMgr.instance.getAdvShopPoint(this.data.id,e+1));break;case r.CurrencyType.money:default:this.curQuaMaxNum=Math.floor(c.default.instance.money/m.ShopMgr.instance.getShopPrice(this.data.id,e+1,this.data.priceRate))}this.curQuaMaxNum=Math.min(9999,this.curQuaMaxNum),this._view.labMax.string=this.curQuaMaxNum+"",setTimeout(function(){t._view.nodeChoose.x=t._view.nodeQualityContainer.children[e].x},100),this._view.itemBag.getChildByName("sprIcon").getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(_.ResType.main,v.Utils.getItemSpByAmount({id:this.data.id,num:1,quality:this.curQua+1})),this._view.itemBag.getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(_.ResType.main,"ui-quality_"+(this.curQua+1));var n=h.default.instance.getDataByName("item")[this.data.id],i=c.default.instance.findItem(this.data.id,this.curQua+1);if(i.length>0?this._view.labDec.string=u.FriendMgr.instance.getItemdec(this.data.id,{id:this.data.id,num:1,quality:this.curQua})+"("+p.default.GetText("\u4ed3\u5e93\u5df2\u6709")+":"+i[0].num+")":this._view.labDec.string=u.FriendMgr.instance.getItemdec(this.data.id,{id:this.data.id,num:1,quality:this.curQua}),n.type&&n.type.includes(_.Itemtype.seed)){var a=this.data.id-200,o=c.default.instance.findItem(a,this.curQua+1);o.length>0&&(this._view.labDec.string+="("+p.default.GetText("\u4ed3\u5e93\u4ea7\u7269")+":"+o[0].num+")")}this.refreshPrice()},t.prototype.onSliderChange=function(e){e.progress<=0?this.curNum=1:this.curNum=Math.ceil(e.progress*this.curQuaMaxNum),this._view.nodeEdit.getComponent(cc.EditBox).string=this.curNum+"",this.refreshPrice()},t.prototype.onEditBoxChange=function(){var e=+this._view.nodeEdit.getComponent(cc.EditBox).string;e<1&&(e=1),e>this.curQuaMaxNum&&(e=this.curQuaMaxNum),this.curNum=Math.floor(e);var t=this._view.nodeNumSlider.getComponent(cc.Slider);t.progress=this.curNum/this.curQuaMaxNum,this.onSliderChange(t)},t.prototype.refreshPrice=function(){switch(h.default.instance.getDataByName("item")[this.data.id],this.data.shopCurrency){case r.CurrencyType.point:this._view.labPrice.string="P "+m.ShopMgr.instance.getAdvShopPoint(this.data.id,this.curQua+1)*this.curNum;break;default:case r.CurrencyType.money:this._view.labPrice.string="\uffe5"+(m.ShopMgr.instance.getShopPrice(this.data.id,this.curQua+1,this.data.priceRate)*this.curNum).toFixed(0)}},t.prototype.onClickCertain=function(){s.default.instance.playAudio("earn_money");var e={id:this.data.id,num:this.curNum,quality:this.curQua+1};m.ShopMgr.instance.onShopBuy(e,this.data.shopCurrency==r.CurrencyType.point,this.data.priceRate);for(var t=Math.min(25,Math.sqrt(this.curNum)),n=0;n<t;n++)d.default.instance.createRewardListEffect([e],this._view.btnBuy.node);this.hideUI()},t.prototype.onClickCancel=function(){s.default.instance.playAudio("click"),this.hideUI()},t.prototype.hideUI=function(){s.default.instance.playAudio("paper2"),this._view.content.active=!1},t.instance=null,n=o([b],t)}(cc.Component));n.default=w,cc._RF.pop()},{"../interface/all_shop_data":"all_shop_data","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/shop_manager":"shop_manager","../ui_view/panel/num_choose_ui_view":"num_choose_ui_view","../utils/enum":"enum","../utils/utils":"utils"}],open_chest_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"9fcb8Xzs+RO9IQ0OFsRddaZ","open_chest_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeAnima=null,this.nodeContainer=null,this.itemChestReward=null}return e.prototype.initView=function(e){this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeAnima=cc.find("content/nodeAnima",e),this.nodeContainer=cc.find("content/nodeContainer",e),this.itemChestReward=cc.find("content/nodeContainer/itemChestReward",e)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeAnima=null,this.nodeContainer=null,this.itemChestReward=null},e}();n.default=i,cc._RF.pop()},{}],open_chest_ui:[function(e,t,n){"use strict";cc._RF.push(t,"5118duMa0BOTayzuCXp/ymp","open_chest_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/item_amount"),l=e("../manager/action_manager"),s=e("../manager/audio_manager"),c=e("../manager/pool_manager"),d=e("../manager/resources_manager"),u=e("../ui_view/panel/open_chest_ui_view"),h=e("../utils/enum"),p=e("../utils/utils"),f=cc._decorator,m=f.ccclass,g=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new u.default,t.isClose=!1,t.gold=!1,t.showTimer=null,t.moneyTimer=null,t.pointTimer=null,t.itemTimer=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent()},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.onClose,this)},t.prototype.showUI=function(e,t){var n=this;this.gold=e,this._view.content.opacity=255,this._view.content.active=!0;var i=e?"gold_chest_open":"brown_chest_open";l.default.instance.playAnimation(i,this._view.nodeAnima),this.isClose=!1,c.default.instance.removeObjByContainer(this._view.nodeContainer),clearTimeout(this.showTimer),this.showTimer=setTimeout(function(){n.showReward(t)},500)},t.prototype.showReward=function(e){var t=this,n=0,i=0,a=0;clearTimeout(this.moneyTimer),clearTimeout(this.pointTimer),clearTimeout(this.itemTimer);for(var o=function(o){switch(e[o].type){case r.RewardType.money:for(var s=0;s<Math.sqrt(e[o].num/2);s++)n++,l.moneyTimer=setTimeout(function(){if(t._view.content.activeInHierarchy){var e=c.default.instance.createObjectByName("itemChestReward",t._view.nodeContainer);e.children.forEach(function(e){return e.active=!1}),e.getChildByName("nodeMoney").active=!0,e.setPosition(p.Utils.getRandomNumber(10)-5,65),e.zIndex=1}},30*n);break;case r.RewardType.point:for(s=0;s<Math.sqrt(e[o].num);s++)i++,l.pointTimer=setTimeout(function(){if(t._view.content.activeInHierarchy){var e=c.default.instance.createObjectByName("itemChestReward",t._view.nodeContainer);e.children.forEach(function(e){return e.active=!1}),e.getChildByName("nodePoint").active=!0,e.setPosition(p.Utils.getRandomNumber(10)-5,65),e.zIndex=0}},45*i);break;default:a++,l.itemTimer=setTimeout(function(){if(t._view.content.activeInHierarchy){var n=c.default.instance.createObjectByName("itemChestReward",t._view.nodeContainer);n.children.forEach(function(e){return e.active=!1}),n.getChildByName("nodeSpr").active=!0,n.getChildByName("nodeSpr").getComponent(cc.Sprite).spriteFrame=d.default.instance.getSprite(h.ResType.main,p.Utils.getItemSpByAmount(e[o])),n.setPosition(p.Utils.getRandomNumber(10)-5,65),n.zIndex=-1}},60*a)}},l=this,s=0;s<e.length;s++)o(s)},t.prototype.onClose=function(){if(!this.isClose){s.default.instance.playAudio("paper2"),this._view.nodeAnima.getComponent(cc.Animation).resume();var e=this.gold?"gold_chest_close":"brown_chest_close";l.default.instance.playAnimation(e,this._view.nodeAnima),this.isClose=!0,l.default.instance.fadeHideDialog(this._view.content,.6)}},t.prototype.hideUI=function(){s.default.instance.playAudio("paper2"),this._view.content.active=!1},t.instance=null,n=o([m],t)}(cc.Component));n.default=g,cc._RF.pop()},{"../interface/item_amount":"item_amount","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../ui_view/panel/open_chest_ui_view":"open_chest_ui_view","../utils/enum":"enum","../utils/utils":"utils"}],open_recipe_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"9b1ffVhN7xGl5tW8LUew06z","open_recipe_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeAnima=null,this.nodeContainer=null,this.itemOpenRecipe=null,this.svMain=null}return e.prototype.initView=function(e){var t;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeAnima=cc.find("content/nodeAnima",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.itemOpenRecipe=cc.find("content/svMain/view/nodeContainer/itemOpenRecipe",e),this.svMain=null===(t=cc.find("content/svMain",e))||void 0===t?void 0:t.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeAnima=null,this.nodeContainer=null,this.itemOpenRecipe=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],open_recipe_ui:[function(e,t,n){"use strict";cc._RF.push(t,"1fcc2Scx5xAGaocxyg7ecpk","open_recipe_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/json_manager"),c=e("../manager/language_manager"),d=e("../manager/pool_manager"),u=e("../ui_view/panel/open_recipe_ui_view"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new u.default,t.isClose=!1,t.timer=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent()},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.onClose,this)},t.prototype.showUI=function(e,t){var n=this;this._view.content.active=!0,this._view.nodeAnima.getComponent(cc.Animation).resume(),r.default.instance.playAnimation("recipe_open",this._view.nodeAnima),this.isClose=!1,this._view.svMain.node.active=!1,clearTimeout(this.timer),this.timer=setTimeout(function(){n._view.svMain.node.active=!0,n.refreshList(e,t)},800)},t.prototype.refreshList=function(e,t){d.default.instance.removeObjByContainer(this._view.nodeContainer);for(var n=0;n<e.length;n++){var i=d.default.instance.createObjectByName("itemOpenRecipe",this._view.nodeContainer),a=s.default.instance.getDataByName("item")[e[n]];if(t[n]?i.getChildByName("rtLabel").getComponent(cc.RichText).string="<color=#000000>["+c.default.GetText("\u5df2\u6709")+"]</c>"+c.default.GetText("item_name_"+e[n]):i.getChildByName("rtLabel").getComponent(cc.RichText).string="<color=#00ff00>["+c.default.GetText("\u65b0")+"]</c>"+c.default.GetText("item_name_"+e[n]),a.recipe.building){var o=c.default.GetText("item_name_"+a.recipe.building);i.getChildByName("labBuild").getComponent(cc.Label).string=c.default.GetText("\u5728\u6709\u7684\u60c5\u51b5\u4e0b",o)}else i.getChildByName("labBuild").getComponent(cc.Label).string="";for(var r="",l=0;l<a.recipe.need.length;l++){var u=a.recipe.need[l][0];if(1==u)r+=c.default.GetText("item_name_"+a.recipe.need[l][1]);else if(2==u)r+=c.default.GetText("ItemTypeName"+a.recipe.need[l][1]);else if(3==u)for(var h=0;h<a.recipe.need[l][1].length;h++)r+=c.default.GetText("item_name_"+a.recipe.need[l][1][h]),a.recipe.need[l][1][h+1]&&(r+="/");a.recipe.need[l][2]&&a.recipe.need[l][2]>1&&(r+="x"+a.recipe.need[l][2]),a.recipe.need[l+1]&&(r+=",")}i.getChildByName("labDec").getComponent(cc.Label).string=c.default.GetText("\u52a0\u5165\u5236\u4f5c\u5373\u53ef",r)}},t.prototype.onClose=function(){var e=this;this.isClose||(this._view.nodeAnima.getComponent(cc.Animation).resume(),r.default.instance.playAnimation("recipe_cose",this._view.nodeAnima),this._view.svMain.node.active=!1,setTimeout(function(){e.hideUI()},600),this.isClose=!0)},t.prototype.hideUI=function(){l.default.instance.playAudio("paper2"),this._view.content.active=!1},t.instance=null,n=o([p],t)}(cc.Component));n.default=f,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../ui_view/panel/open_recipe_ui_view":"open_recipe_ui_view"}],plan_data:[function(e,t,n){"use strict";cc._RF.push(t,"b5378PcJ1JAq74kqU2RxS0e","plan_data"),Object.defineProperty(n,"__esModule",{value:!0}),n.PlanType=void 0,function(e){e[e.none=-1]="none",e[e.relax=0]="relax",e[e.field=1]="field",e[e.find=2]="find",e[e.logging=3]="logging",e[e.mine=4]="mine",e[e.fish=5]="fish"}(n.PlanType||(n.PlanType={})),cc._RF.pop()},{}],plan_manager:[function(e,t,n){"use strict";cc._RF.push(t,"79f53yZngFGJI87xpA66wdr","plan_manager");var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,l=o.length;r<l;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0}),n.PlanMgr=void 0;var a=e("../interface/item_amount"),o=e("../interface/plan_data"),r=e("../ui/menu_ui"),l=e("../ui/plan_ui"),s=e("../utils/emmiter"),c=e("../utils/enum"),d=e("../utils/game_config"),u=e("../utils/message"),h=e("../utils/utils"),p=e("./ad_manager"),f=e("./dynamic_data_manager"),m=e("./field_manager"),g=e("./game_manager"),_=e("./guide_manager"),v=e("./json_manager"),y=e("./language_manager"),b=e("./shop_manager"),w=e("./ui_manager"),C=function(){function e(){this.planNum=0,this.curPlan=o.PlanType.none}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(){f.default.instance.planData={skillLv:[0,0,0,0,0,0],skillExp:[0,0,0,0,0,0],planTarget:[0,0,0,0,0,0],maxPlanNum:1,planList:[0],haveDone:[],explore:0,specialSkill:[[],[],[]],adSkill:[],skillPoint:0}},e.prototype.getSkillNextExp=function(e){return[30,200,999,-1,-1,-1][e]},e.prototype.onUpdate=function(){if(this.planNum>0){var e=f.default.instance.planData.haveDone[this.planNum-1];void 0!==e&&this.onDonePlan(e)}this.planNum<f.default.instance.planData.maxPlanNum?this.onStartPlan(f.default.instance.planData.planList[this.planNum]):s.Emitter.fire(u.MessageType.curPlanChange,o.PlanType.none),this.planNum++},e.prototype.onStartPlan=function(t){if(t!=o.PlanType.relax){var n=e.instance.getPlanCost(t);f.default.instance.health<Math.abs(n)&&(t=o.PlanType.relax)}f.default.instance.planData.haveDone.push(t),s.Emitter.fire(u.MessageType.curPlanChange,t)},e.prototype.onDonePlan=function(t){var n=[],i=0,l=f.default.instance.planData.skillLv[t],d=l;f.default.instance.planData.skillExp[t]+=g.default.instance.getPrecentValueByStr("planSkillExp");var p=e.instance.getPlanCost(t);if(g.default.instance.checkHaveBuff(301)&&(p<0?i+=1:p*=2,g.default.instance.onCostBuff(301)),p<0&&g.default.instance.checkHaveBuff(302)&&(p=0,g.default.instance.onCostBuff(302)),g.default.instance.checkHaveBuff(t+302)&&t>0&&(d+=1,g.default.instance.onCostBuff(t+302)),f.default.instance.health+=p,s.Emitter.fire(u.MessageType.doneGuideByType,_.GuideStep.onFindDone),t>0&&0==f.default.instance.getToolLevel([0,402,404,405,403,406][t])&&!h.Utils.luckChance(66))s.Emitter.fire(u.MessageType.addDairy,c.DairyRtType.planFail,{planType:t});else{var v=-1;switch(t){case o.PlanType.relax:break;case o.PlanType.field:var y=f.default.instance.allFieldData.list[f.default.instance.planData.planTarget[t]];i+=f.default.instance.getToolUseTime(402),y.progress+=i;var b=m.FieldMgr.instance.getNextFieldMaxProgress(f.default.instance.planData.planTarget[t]);if(y.progress>=b){v=f.default.instance.planData.planTarget[t],y.progress-=b,y.maxNum++;var w=(y.maxNum-1)/y.maxNum;y.quality*=w,y.saveWater*=w,y.growSpeed*=w,y.defenceBug*=w}n=this.onExpandDone(i,l),s.Emitter.fire(u.MessageType.onPlanDone);break;case o.PlanType.find:i+=f.default.instance.getToolUseTime(404),n=this.onFindDone(i,d),s.Emitter.fire(u.MessageType.onPlanDone);break;case o.PlanType.logging:i+=f.default.instance.getToolUseTime(405),n=this.onLoggingDone(i,d),s.Emitter.fire(u.MessageType.onPlanDone);break;case o.PlanType.mine:i+=f.default.instance.getToolUseTime(403),n=this.onMineDone(i,d),s.Emitter.fire(u.MessageType.onPlanDone);break;case o.PlanType.fish:i+=f.default.instance.getToolUseTime(406),n=this.onfishingDone(i,d),s.Emitter.fire(u.MessageType.onPlanDone)}for(var C=h.Utils.amountMerge(n),S=0;S<C.length;S++)f.default.instance.onReward(C[S]);var L=C.map(function(e){return{id:e.id,type:a.RewardType.item,num:e.num,quality:e.quality||1}});r.default.instance.showPlanReward(L),s.Emitter.fire(u.MessageType.addDairy,c.DairyRtType.planResult,{rewardList:L,planType:t,field:v+1}),this.checkSkillLevelUp()}},e.prototype.checkSkillLevelUp=function(){for(var e=0;e<f.default.instance.planData.skillExp.length;e++){var t=f.default.instance.planData.skillLv[e],n=this.getSkillNextExp(t);f.default.instance.planData.skillExp[e]>=n&&t<3&&(f.default.instance.planData.skillExp[e]=0,f.default.instance.planData.skillLv[e]++,f.default.instance.planData.skillPoint++,s.Emitter.fire(u.MessageType.addDairy,c.DairyRtType.skillLevelup,{id:e,lv:f.default.instance.planData.skillLv[e]}),s.Emitter.fire(u.MessageType.gainSkillPoint))}},e.prototype.onDayStart=function(){this.planNum=0,f.default.instance.planData.haveDone=[];var e=f.default.instance.maxHealth;e<100&&(e=100);var t=100*d.GameConfig.defaultParam.\u6bcf\u65e5\u4f53\u529b\u6062\u590d\u6bd4\u4f8b+g.default.instance.getValueByStr("daliyHealth");2==f.default.instance.shopData.homeLv&&(t+=8),f.default.instance.health+=e*(t/100),s.Emitter.fire(u.MessageType.curPlanChange,o.PlanType.none),this.onAutoFish()},e.prototype.addMaxPlanNum=function(){f.default.instance.planData.maxPlanNum+=1,f.default.instance.planData.planList.push(0)},e.prototype.addPlanToList=function(e,t){void 0===t&&(t=!1);var n=f.default.instance.planData.planList.indexOf(o.PlanType.relax);-1==n?t&&w.default.instance.LoadTipsByStr(y.default.GetText("\u6ca1\u6709\u66f4\u591a\u4f4d\u7f6e")):f.default.instance.planData.planList[n]=e},e.prototype.removePlan=function(e,t){void 0===t&&(t=!1),e>=f.default.instance.planData.maxPlanNum?t&&w.default.instance.LoadTipsByStr(y.default.GetText("\u5f53\u524d\u672a\u89e3\u9501")):f.default.instance.planData.planList[e]!=o.PlanType.relax?f.default.instance.planData.planList[e]=o.PlanType.relax:t&&w.default.instance.LoadTipsByStr(y.default.GetText("\u8bf7\u52a0\u5165\u8ba1\u5212"))},e.prototype.changePlanTarget=function(e,t){f.default.instance.planData.planTarget[e]=t},e.prototype.getPlanTargetList=function(e){var t=[];switch(e){case o.PlanType.field:for(var n=0;n<f.default.instance.allFieldData.list.length;n++)t.push(n);break;case o.PlanType.find:for(n=0;n<this.getMaxMap();n++)t.push(n)}return t},e.prototype.getMaxMap=function(){var e=Math.floor(Math.sqrt(f.default.instance.planData.explore/66))+1;return e>20&&(e=20),e},e.prototype.onExpandDone=function(e,t){var n=[];if(g.default.instance.checkHaveSkill(7)&&h.Utils.luckChance(50)){var i=h.Utils.getArrRandomItem(b.ShopMgr.instance.getShopList(0)).id,a={id:i,num:1,quality:f.default.instance.shopData.maxQuality[i]||1};n.push(a)}return h.Utils.luckChance(5+t)&&n.push({id:511,quality:f.default.instance.getRandomQuality(),num:1}),h.Utils.luckChance(10+t)&&n.push({id:162,quality:f.default.instance.getRandomQuality(),num:1}),n},e.prototype.onFindDone=function(e,t){var n=t+h.Utils.getRandomNumber(1),i=g.default.instance.getValueByStr("lucky"),a=[],r=g.default.instance.getValueByStr("exploreQuality")>0,l=v.default.instance.getDataByName("map")[f.default.instance.planData.planTarget[o.PlanType.find]+1],s=l.chance.map(function(e){return e+n}),c=f.default.instance.findItem(855);if(c.length&&h.Utils.luckChance(10*c.length+5*(e-1))){var u=Math.random()>.5?858:856;a.push({id:u,quality:c[0].quality,num:1}),f.default.instance.onCost({id:c[0].id,quality:c[0].quality,num:1})}for(var p=0;p<e;p++)for(var m=0;m<s.length;m++){var _=Math.floor(s[m]/100);h.Utils.luckChance(s[m]%100)&&_++,_>0&&a.push({id:l.findReward[m],num:_,quality:f.default.instance.getRandomQuality(i,r)})}return 0==a.length&&a.push({id:h.Utils.getArrRandomItem(d.GameConfig.PlanReward.LoggingSeasonReward[g.default.instance.getSeason()]),num:1,quality:f.default.instance.getRandomQuality(i,r)}),a},e.prototype.onLoggingDone=function(e,t){for(var n=t+h.Utils.getRandomNumber(1),i=g.default.instance.getValueByStr("lucky"),a=[],o=0;o<e;o++)h.Utils.luckChance(75+5*n)&&a.push({id:501,num:1,quality:1}),h.Utils.luckChance(60+3*n)&&a.push({id:501,num:1,quality:1}),g.default.instance.checkHaveSkill(47)&&a.push({id:501,num:1,quality:1}),h.Utils.luckChance(30+2*n)&&a.push({id:502,num:1,quality:1});for(o=0;o<3;o++)if(h.Utils.luckChance(30+2*n+g.default.instance.getValueByStr("logFoodChance"))){var r=d.GameConfig.PlanReward.LoggingSeasonReward[g.default.instance.getSeason()];a.push({id:h.Utils.getArrRandomItem(r),num:1,quality:f.default.instance.getRandomQuality(i)})}return a},e.prototype.onMineDone=function(e,t){for(var n=t+h.Utils.getRandomNumber(1),i=g.default.instance.getValueByStr("lucky"),a=[],o=0;o<e;o++)if(h.Utils.luckChance(n+g.default.instance.getValueByStr("mineDiamondChance"))&&a.push({id:510,num:1,quality:f.default.instance.getRandomQuality(i,i>=2)}),h.Utils.luckChance(30+2*n)&&a.push({id:504,num:1,quality:1}),h.Utils.luckChance(80+3*n)&&a.push({id:503,num:1,quality:1}),h.Utils.luckChance(50+2*n)){var r=d.GameConfig.PlanReward.MineChange.map(function(e){return e+n});a.push({id:d.GameConfig.PlanReward.MineReward[h.Utils.getArrRandomIndex(r)],num:1,quality:1})}return 0==a.length&&a.push({id:162,num:1,quality:f.default.instance.getRandomQuality()}),10==f.default.instance.recordData.guide&&a.push({id:505,num:1,quality:1}),a},e.prototype.onfishingDone=function(e,t,n){void 0===n&&(n=!1);var i=t+h.Utils.getRandomNumber(1),a=g.default.instance.getValueByStr("lucky"),r=[],l=g.default.instance.getValueByStr("fishQuality")>0,s=[[751,755,754],[752,756,758,754],[753,757,760,759],[755,756,757,754]][f.default.instance.planData.planTarget[o.PlanType.fish]];n&&(s=[755,756,757,754]);for(var c=0;c<e;c++)!n&&h.Utils.luckChance(30+i+g.default.instance.getValueByStr("fishChestChance"+a))&&(h.Utils.luckChance(2+a)&&r.push({id:858,num:1,quality:f.default.instance.getRandomQuality(a,l)}),h.Utils.luckChance(5+a)&&r.push({id:856,num:1,quality:f.default.instance.getRandomQuality(a,l)}),h.Utils.luckChance(50+a)&&r.push({id:754,num:1,quality:f.default.instance.getRandomQuality(a,l)})),h.Utils.luckChance(80+i)&&s[0]&&r.push({id:s[0],num:1,quality:f.default.instance.getRandomQuality(a,l)}),h.Utils.luckChance(50+i)&&s[0]&&r.push({id:s[0],num:1,quality:f.default.instance.getRandomQuality(a,l)}),h.Utils.luckChance(30+i)&&s[1]&&r.push({id:s[1],num:1,quality:f.default.instance.getRandomQuality(a,l)}),h.Utils.luckChance(10+i)&&s[2]&&r.push({id:s[2],num:1,quality:f.default.instance.getRandomQuality(a,l)}),h.Utils.luckChance(3+i)&&s[3]&&r.push({id:s[3],num:1,quality:f.default.instance.getRandomQuality(a,l)});return r},e.prototype.getTypeOfSkillMaxIndex=function(e){var t=0;for(var n in v.default.instance.getDataByName("skill")){var i=v.default.instance.getDataByName("skill")[n];i.type&&i.type==e&&i.index>t&&(t=i.index)}return t},e.prototype.getSkillIdsByTypeAndIndex=function(e,t){var n=[];for(var i in v.default.instance.getDataByName("skill")){var a=v.default.instance.getDataByName("skill")[i];a.type&&a.type==e&&a.index-1==t&&n.push(+i)}return n},e.prototype.onChooseSkill=function(e,t,n){switch(this.checkSkillCanLearn(e,t,n)){case 0:this.onWatchingAd(n),l.default.instance.onClickSkillPage();break;case 1:f.default.instance.planData.specialSkill[e-1][t]=n,f.default.instance.planData.skillPoint--,s.Emitter.fire(u.MessageType.skillLevelup),l.default.instance.onClickSkillPage();break;case-1:w.default.instance.LoadTipsByStr(y.default.GetText("\u6280\u80fd\u5df2\u5b66"));break;case-2:w.default.instance.LoadTipsByStr(y.default.GetText("\u6280\u80fd\u70b9\u4e0d\u8db3"))}},e.prototype.checkSkillCanLearn=function(e,t,n){return f.default.instance.planData.specialSkill[e-1].length>=t?f.default.instance.planData.specialSkill[e-1].length==t?f.default.instance.planData.skillPoint>0?1:-2:f.default.instance.planData.specialSkill[e-1][t]==n||f.default.instance.planData.adSkill.includes(n)?-1:0:-2},e.prototype.onWatchingAd=function(e){p.default.getInatance().showAndroidAd(function(){f.default.instance.planData.adSkill.push(e),w.default.instance.LoadTipsByStr(y.default.GetText("\u5e7f\u544a\u5b66\u6280\u80fd"))})},e.prototype.getPlanCost=function(e){var t=0,n=f.default.instance.planData.skillLv[e];switch(g.default.instance.checkHaveBuff(e+302)&&(n+=1),e){case o.PlanType.relax:return(t=f.default.instance.maxHealth*d.GameConfig.defaultParam.\u4f11\u606f\u6062\u590d\u4f53\u529b\u6bd4\u4f8b)<10&&(t=10),Math.floor(t*g.default.instance.getPrecentValueByStr("relaxHealth"));case o.PlanType.field:t=f.default.instance.getToolLevel(402);break;case o.PlanType.find:t=f.default.instance.getToolLevel(404);break;case o.PlanType.logging:t=f.default.instance.getToolLevel(405);break;case o.PlanType.mine:t=f.default.instance.getToolLevel(403);break;case o.PlanType.fish:t=f.default.instance.getToolLevel(406)}return-1*[10,10,18,25,31,36][t]*[1,.95,.9,.85,.8,.75][n]},e.prototype.getAllLearnSkill=function(){for(var e=i(f.default.instance.planData.adSkill),t=0;t<f.default.instance.planData.specialSkill.length;t++){var n=f.default.instance.planData.specialSkill[t];e.push.apply(e,n)}return e},e.prototype.checkSkillIsLearn=function(e){return this.getAllLearnSkill().includes(e)},e.prototype.onAutoFish=function(){var e=f.default.instance.findItem(610);if(e.length>0){for(var t=e[0].num,n=0,i=0;i<t;i++)h.Utils.luckChance(33)&&n++;if(n>0){var a=this.onfishingDone(n,g.default.instance.checkHaveSkill(41)?3:0,!0);a.forEach(function(e){f.default.instance.onReward(e)});var o=h.Utils.amountMerge(a);s.Emitter.fire(u.MessageType.addDairy,c.DairyRtType.autoFish,{rewardList:o})}}},e._instance=null,e}();n.PlanMgr=C,cc._RF.pop()},{"../interface/item_amount":"item_amount","../interface/plan_data":"plan_data","../ui/menu_ui":"menu_ui","../ui/plan_ui":"plan_ui","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","../utils/utils":"utils","./ad_manager":"ad_manager","./dynamic_data_manager":"dynamic_data_manager","./field_manager":"field_manager","./game_manager":"game_manager","./guide_manager":"guide_manager","./json_manager":"json_manager","./language_manager":"language_manager","./shop_manager":"shop_manager","./ui_manager":"ui_manager"}],plan_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"6779fpW8HNENKzQ2MDcVxPs","plan_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeChoosePage=null,this.nodeChooseFieldPage=null,this.nodeMenu=null,this.nodeContainer=null,this.nodeTodo=null,this.nodeSubMenu=null,this.nodeChooseMask=null,this.nodeChooseFieldMask=null,this.nodeSkillReddot=null,this.nodeSkillContainer=null,this.nodeChooseContainer=null,this.nodeChooseFieldContainer=null,this.itemPlan=null,this.itemPlan=null,this.itemPlan=null,this.itemPlan=null,this.itemPlan=null,this.btnHelp=null,this.btnTodo=null,this.btnTodo=null,this.btnTodo=null,this.btnTodo=null,this.btnTodo=null,this.btnHelp2=null,this.btnPlan=null,this.btnSkill=null,this.btnSkill=null,this.btnPlan=null,this.btnSkill=null,this.labNum=null,this.labNum=null,this.labNum=null,this.labNum=null,this.labNum=null,this.labHealth=null,this.labLanList=[],this.labSkillPoint=null,this.svMain=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v,y,b,w,C,S,L,A,k,T,M,R,P,D;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodeChoosePage=cc.find("content/nodeChoosePage",e),this.nodeChooseFieldPage=cc.find("content/nodeChooseFieldPage",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodeContainer=cc.find("content/nodePageList0/nodeContainer",e),this.nodeTodo=cc.find("content/nodePageList0/nodeTodo",e),this.nodeSubMenu=cc.find("content/nodePageList1/nodeSubMenu",e),this.nodeChooseMask=cc.find("content/nodeChoosePage/nodeChooseMask",e),this.nodeChooseFieldMask=cc.find("content/nodeChooseFieldPage/nodeChooseFieldMask",e),this.nodeSkillReddot=cc.find("content/nodeMenu/btnSkill/nodeSkillReddot",e),this.nodeSkillContainer=cc.find("content/nodePageList1/scrollview/view/nodeSkillContainer",e),this.nodeChooseContainer=cc.find("content/nodeChoosePage/svMain/view/nodeChooseContainer",e),this.nodeChooseFieldContainer=cc.find("content/nodeChooseFieldPage/svMain/view/nodeChooseFieldContainer",e),this.itemPlan=cc.find("content/nodePageList0/nodeContainer/itemPlan",e),this.itemPlan=cc.find("content/nodePageList0/nodeContainer/itemPlan",e),this.itemPlan=cc.find("content/nodePageList0/nodeContainer/itemPlan",e),this.itemPlan=cc.find("content/nodePageList0/nodeContainer/itemPlan",e),this.itemPlan=cc.find("content/nodePageList0/nodeContainer/itemPlan",e),this.btnHelp=null===(t=cc.find("content/nodePageList0/btnHelp",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnTodo=null===(n=cc.find("content/nodePageList0/nodeTodo/btnTodo",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnTodo=null===(i=cc.find("content/nodePageList0/nodeTodo/btnTodo",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnTodo=null===(a=cc.find("content/nodePageList0/nodeTodo/btnTodo",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnTodo=null===(o=cc.find("content/nodePageList0/nodeTodo/btnTodo",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnTodo=null===(r=cc.find("content/nodePageList0/nodeTodo/btnTodo",e))||void 0===r?void 0:r.getComponent(cc.Button),this.btnHelp2=null===(l=cc.find("content/nodePageList1/btnHelp2",e))||void 0===l?void 0:l.getComponent(cc.Button),this.btnPlan=null===(s=cc.find("content/nodePageList1/nodeSubMenu/btnPlan",e))||void 0===s?void 0:s.getComponent(cc.Button),this.btnSkill=null===(c=cc.find("content/nodePageList1/nodeSubMenu/btnSkill",e))||void 0===c?void 0:c.getComponent(cc.Button),this.btnSkill=null===(d=cc.find("content/nodePageList1/nodeSubMenu/btnSkill",e))||void 0===d?void 0:d.getComponent(cc.Button),this.btnPlan=null===(u=cc.find("content/nodeMenu/btnPlan",e))||void 0===u?void 0:u.getComponent(cc.Button),this.btnSkill=null===(h=cc.find("content/nodeMenu/btnSkill",e))||void 0===h?void 0:h.getComponent(cc.Button),this.labNum=null===(p=cc.find("content/nodePageList0/nodeTodo/btnTodo/labNum",e))||void 0===p?void 0:p.getComponent(cc.Label),this.labNum=null===(f=cc.find("content/nodePageList0/nodeTodo/btnTodo/labNum",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labNum=null===(m=cc.find("content/nodePageList0/nodeTodo/btnTodo/labNum",e))||void 0===m?void 0:m.getComponent(cc.Label),this.labNum=null===(g=cc.find("content/nodePageList0/nodeTodo/btnTodo/labNum",e))||void 0===g?void 0:g.getComponent(cc.Label),this.labNum=null===(_=cc.find("content/nodePageList0/nodeTodo/btnTodo/labNum",e))||void 0===_?void 0:_.getComponent(cc.Label),this.labHealth=null===(v=cc.find("content/nodePageList0/labHealth",e))||void 0===v?void 0:v.getComponent(cc.Label),this.labLanList[0]=null===(y=cc.find("content/nodePageList0/labLanList0",e))||void 0===y?void 0:y.getComponent(cc.Label),this.labLanList[1]=null===(b=cc.find("content/nodePageList0/labLanList1",e))||void 0===b?void 0:b.getComponent(cc.Label),this.labSkillPoint=null===(w=cc.find("content/nodePageList1/labSkillPoint",e))||void 0===w?void 0:w.getComponent(cc.Label),this.labLanList[2]=null===(C=cc.find("content/nodePageList1/labLanList2",e))||void 0===C?void 0:C.getComponent(cc.Label),this.labLanList[3]=null===(S=cc.find("content/nodePageList1/labLanList3",e))||void 0===S?void 0:S.getComponent(cc.Label),this.labLanList[4]=null===(L=cc.find("content/nodePageList1/labLanList4",e))||void 0===L?void 0:L.getComponent(cc.Label),this.labLanList[5]=null===(A=cc.find("content/nodeChoosePage/labLanList5",e))||void 0===A?void 0:A.getComponent(cc.Label),this.labLanList[6]=null===(k=cc.find("content/nodeChooseFieldPage/labLanList6",e))||void 0===k?void 0:k.getComponent(cc.Label),this.labLanList[7]=null===(T=cc.find("content/labLanList7",e))||void 0===T?void 0:T.getComponent(cc.Label),this.labLanList[8]=null===(M=cc.find("content/labLanList8",e))||void 0===M?void 0:M.getComponent(cc.Label),this.labLanList[9]=null===(R=cc.find("content/labLanList9",e))||void 0===R?void 0:R.getComponent(cc.Label),this.svMain=null===(P=cc.find("content/nodeChoosePage/svMain",e))||void 0===P?void 0:P.getComponent(cc.ScrollView),this.svMain=null===(D=cc.find("content/nodeChooseFieldPage/svMain",e))||void 0===D?void 0:D.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeChoosePage=null,this.nodeChooseFieldPage=null,this.nodeMenu=null,this.nodeContainer=null,this.nodeTodo=null,this.nodeSubMenu=null,this.nodeChooseMask=null,this.nodeChooseFieldMask=null,this.nodeSkillReddot=null,this.nodeSkillContainer=null,this.nodeChooseContainer=null,this.nodeChooseFieldContainer=null,this.itemPlan=null,this.itemPlan=null,this.itemPlan=null,this.itemPlan=null,this.itemPlan=null,this.btnHelp=null,this.btnTodo=null,this.btnTodo=null,this.btnTodo=null,this.btnTodo=null,this.btnTodo=null,this.btnHelp2=null,this.btnPlan=null,this.btnSkill=null,this.btnSkill=null,this.btnPlan=null,this.btnSkill=null,this.labNum=null,this.labNum=null,this.labNum=null,this.labNum=null,this.labNum=null,this.labHealth=null,this.labLanList=[],this.labSkillPoint=null,this.svMain=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],plan_ui:[function(e,t,n){"use strict";cc._RF.push(t,"dd9beNpgQhICIC2CwogxmO1","plan_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/plan_data"),l=e("../item/item_plan"),s=e("../item/item_plan_field_choose"),c=e("../item/item_plan_target_choose"),d=e("../item/item_skill_choose"),u=e("../manager/action_manager"),h=e("../manager/audio_manager"),p=e("../manager/dynamic_data_manager"),f=e("../manager/language_manager"),m=e("../manager/plan_manager"),g=e("../manager/pool_manager"),_=e("../manager/record_manager"),v=e("../manager/reddot_manager"),y=e("../manager/resources_manager"),b=e("../manager/ui_manager"),w=e("../ui_view/panel/plan_ui_view"),C=e("../utils/config"),S=e("../utils/emmiter"),L=e("../utils/enum"),A=e("../utils/message"),k=e("./help_ui"),T=cc._decorator,M=T.ccclass,R=(T.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new w.default,t.curTagrteIndex=0,t.curSkillType=1,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u4eca\u65e5\u8ba1\u5212","\u70b9\u51fb\u53d6\u6d88","\u79cd\u5730","\u63a2\u7d22","\u5176\u4ed6","\u9009\u62e9\u5730\u56fe","\u9009\u62e9\u5730\u5757","\u8ba1\u5212","\u6280\u80fd","\u8ba1\u5212"];e.forEach(function(e,n){e.string=f.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeChooseMask.on("click",this.hideChooseUI,this),this._view.nodeChooseFieldMask.on("click",this.hideChooseFieldUI,this),this._view.btnPlan.node.on("click",this.onClickPlanPage,this),this._view.btnSkill.node.on("click",this.onClickSkillPage,this),S.Emitter.register(A.MessageType.gainSkillPoint,this.refreshSkillReddot,this),S.Emitter.register(A.MessageType.skillLevelup,this.refreshSkillReddot,this),this._view.btnHelp.node.on("click",this.onClickHelp,this),this._view.btnHelp2.node.on("click",this.onClickHelp2,this),this._view.nodeTodo.children.forEach(function(t,n){t.on("click",function(){e.onRemovePlan(n)},e)}),this._view.nodeSubMenu.children.forEach(function(t,n){t.on("click",function(){e.curSkillType=n+1,e.onClickSkillPage()},e)})},t.prototype.showUI=function(){_.default.instance.onOpenPage(L.PageType.plan),u.default.instance.popOut(this._view.content,this._view.nodeMask),this._view.nodeChoosePage.active=!1,this._view.nodeChooseFieldPage.active=!1,this.onClickPlanPage(),this.refreshSkillReddot()},t.prototype.hideUI=function(){h.default.instance.playAudio("paper2"),this._view.content.active=!1,S.Emitter.fire(A.MessageType.checkGuide)},t.prototype.setPageIndex=function(e){this._view.nodePageList[0].active=0==e,this._view.nodePageList[1].active=1==e,this._view.btnSkill.node.getComponent(cc.Sprite).spriteFrame=y.default.instance.getSprite(L.ResType.main,0==e?"ui-UI_Flat_Slot_01_Selected":"ui-UI_Flat_Slot_02_Available"),this._view.btnPlan.node.getComponent(cc.Sprite).spriteFrame=y.default.instance.getSprite(L.ResType.main,1==e?"ui-UI_Flat_Slot_01_Selected":"ui-UI_Flat_Slot_02_Available")},t.prototype.onClickPlanPage=function(){h.default.instance.playAudio("switch"),this.setPageIndex(0),this._view.nodeContainer.children.forEach(function(e,t){e.getComponent(l.default).init(t+1)}),this._view.nodeTodo.children.forEach(function(e,t){var n=p.default.instance.planData.planList[t];void 0!==n?(e.getChildByName("label").getComponent(cc.Label).string=f.default.GetText("PlanTypeName"+n),e.getChildByName("labNum").getComponent(cc.Label).string=Math.round(m.PlanMgr.instance.getPlanCost(n))+"",e.getComponent(cc.Sprite).spriteFrame=0==n?y.default.instance.getSprite(L.ResType.main,"ui-UI_Flat_Frame_01_Lite"):y.default.instance.getSprite(L.ResType.main,"ui-UI_Flat_Frame_02_Lite")):(e.getChildByName("labNum").getComponent(cc.Label).string="",e.getComponent(cc.Sprite).spriteFrame=y.default.instance.getSprite(L.ResType.main,"ui-UI_Flat_Slot_01_Unavailable"),e.getChildByName("label").getComponent(cc.Label).string=f.default.GetText("\u9501\u5b9a"))}),this._view.labHealth.string=f.default.GetText("\u4f53\u529b")+":"+Math.floor(p.default.instance.health)+"    "+f.default.GetText("\u6700\u5927\u4f53\u529b")+"\uff1a"+Math.floor(p.default.instance._maxHealth);var e=p.default.instance.maxHealth-p.default.instance._maxHealth;e>0&&(this._view.labHealth.string+="(+"+Math.floor(e)+")")},t.prototype.onClickSkillPage=function(){var e=this;h.default.instance.playAudio("switch"),this.setPageIndex(1),this._view.nodeSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=y.default.instance.getSprite(L.ResType.main,n==e.curSkillType-1?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")}),this._view.labSkillPoint.string=f.default.GetText("\u6280\u80fd\u70b9")+":"+p.default.instance.planData.skillPoint,g.default.instance.removeObjByContainer(this._view.nodeSkillContainer);for(var t=m.PlanMgr.instance.getTypeOfSkillMaxIndex(this.curSkillType),n=0;n<t;n++)g.default.instance.createObjectByName("itemSkillChoose",this._view.nodeSkillContainer).getComponent(d.default).init(this.curSkillType,n)},t.prototype.onOpenFiledChoosePage=function(){var e=r.PlanType.field;this.curTagrteIndex=p.default.instance.planData.planTarget[e],this._view.nodeChooseFieldPage.active=!0;var t=m.PlanMgr.instance.getPlanTargetList(e);g.default.instance.removeObjByContainer(this._view.nodeChooseFieldContainer);for(var n=0;n<t.length;n++){var i=g.default.instance.createObjectByName("itemPlanFieldChoose",this._view.nodeChooseFieldContainer).getComponent(s.default);i.init(e,n),i.setSelect(n==this.curTagrteIndex)}},t.prototype.onOpenTargetList=function(){var e=r.PlanType.find;this.curTagrteIndex=p.default.instance.planData.planTarget[e],this._view.nodeChoosePage.active=!0;var t=m.PlanMgr.instance.getPlanTargetList(e);g.default.instance.removeObjByContainer(this._view.nodeChooseContainer);for(var n=0;n<t.length;n++){var i=g.default.instance.createObjectByName("itemPlanTargetChoose",this._view.nodeChooseContainer).getComponent(c.default);i.init(e,n),i.setSelect(n==this.curTagrteIndex)}},t.prototype.hideChooseUI=function(){this.onClickPlanPage(),this._view.nodeChoosePage.active=!1},t.prototype.hideChooseFieldUI=function(){this.onClickPlanPage(),this._view.nodeChooseFieldPage.active=!1},t.prototype.onRemovePlan=function(e){m.PlanMgr.instance.removePlan(e),this.onClickPlanPage()},t.prototype.refreshSkillReddot=function(){this._view.nodeSkillReddot.active=v.ReddotMgr.instance.getSkillRed()},t.prototype.onClickHelp=function(){b.default.instance.openUI(k.default,{name:C.Config.uiName.helpUI,param:[2]},301)},t.prototype.onClickHelp2=function(){b.default.instance.openUI(k.default,{name:C.Config.uiName.helpUI,param:[3]},301)},t.instance=null,n=o([M],t)}(cc.Component));n.default=R,cc._RF.pop()},{"../interface/plan_data":"plan_data","../item/item_plan":"item_plan","../item/item_plan_field_choose":"item_plan_field_choose","../item/item_plan_target_choose":"item_plan_target_choose","../item/item_skill_choose":"item_skill_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/plan_manager":"plan_manager","../manager/pool_manager":"pool_manager","../manager/record_manager":"record_manager","../manager/reddot_manager":"reddot_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/plan_ui_view":"plan_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","./help_ui":"help_ui"}],plot_data:[function(e,t,n){"use strict";cc._RF.push(t,"c54eae3OUlJJoArgDVA7kJV","plot_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],pool_manager:[function(e,t,n){"use strict";cc._RF.push(t,"aed2cn0W9dKzYg7d8+s8AJB","pool_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../utils/config"),l=e("../utils/emmiter"),s=e("../utils/message"),c=e("./resources_manager"),d=cc._decorator,u=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._Pool=[],t}var n;return a(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){for(var e=0;e<r.Config.resConfig.prefabArr.length;e++){this._Pool[e]=new cc.NodePool;var t=cc.instantiate(c.default.instance._Prefab[e]);this._Pool[e].put(t)}l.Emitter.fire(s.MessageType.poolLoaded)},t.prototype.createObjectByName=function(e,t){var n=r.Config.resConfig.prefabArr.indexOf(e);if(-1!=n){var i,a=c.default.instance._Prefab[n],o=this._Pool[n];return null!=o&&(i=o.size()>0?o.get():cc.instantiate(a),t&&(i.parent=t)),i}console.log("\u586b\u5199\u4e86\u9519\u8bef\u7684name",e)},t.prototype.removeObject=function(e){var t=e.name,n=r.Config.resConfig.prefabArr.indexOf(t);if(-1!=n){e.removeFromParent(!1);var i=this._Pool[n];null!=i?i.put(e):console.error("no this pool:"+t)}else console.log("\u586b\u5199\u4e86\u9519\u8bef\u7684name",t)},t.prototype.removeObjByContainer=function(e){for(var t=e.children.length-1;t>=0;t--){var n=e.children[t];this.removeObject(n)}},t.prototype.destoryObjByContainer=function(e){for(var t=e.children.length-1;t>=0;t--)e.children[t].destroy()},t._instance=null,n=o([u],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../utils/config":"config","../utils/emmiter":"emmiter","../utils/message":"message","./resources_manager":"resources_manager"}],pop_text_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"ed1313Wkq1M5K7d1xfaWkvf","pop_text_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeLeft=null,this.nodeRight=null,this.labNameL=null,this.labDecL=null,this.labNameR=null,this.labDecR=null,this.sprMainL=null,this.sprMainR=null}return e.prototype.initView=function(e){var t,n,i,a,o,r;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeLeft=cc.find("content/nodeLeft",e),this.nodeRight=cc.find("content/nodeRight",e),this.labNameL=null===(t=cc.find("content/nodeLeft/labNameL",e))||void 0===t?void 0:t.getComponent(cc.Label),this.labDecL=null===(n=cc.find("content/nodeLeft/labDecL",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labNameR=null===(i=cc.find("content/nodeRight/labNameR",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labDecR=null===(a=cc.find("content/nodeRight/labDecR",e))||void 0===a?void 0:a.getComponent(cc.Label),this.sprMainL=null===(o=cc.find("content/nodeLeft/sprMainL",e))||void 0===o?void 0:o.getComponent(cc.Sprite),this.sprMainR=null===(r=cc.find("content/nodeRight/sprMainR",e))||void 0===r?void 0:r.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeLeft=null,this.nodeRight=null,this.labNameL=null,this.labDecL=null,this.labNameR=null,this.labDecR=null,this.sprMainL=null,this.sprMainR=null},e}();n.default=i,cc._RF.pop()},{}],pop_text_ui:[function(e,t,n){"use strict";cc._RF.push(t,"a7574SHHjtBNJNt8J54BAsI","pop_text_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/resources_manager"),c=e("../ui_view/panel/pop_text_ui_view"),d=e("../utils/enum"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new c.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent()},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this)},t.prototype.showUI=function(e,t){l.default.instance.playAudio("sclick_4"),this.node.zIndex=999,this.node.setPosition(e),this._view.nodeLeft.active=!1,this._view.nodeRight.active=!1,e.x<0?(this._view.nodeLeft.active=!0,this._view.sprMainL.spriteFrame=s.default.instance.getSprite(d.ResType.main,t.spr),this._view.labDecL.string=t.dec,this._view.labNameL.string=t.name):(this._view.nodeRight.active=!0,this._view.sprMainR.spriteFrame=s.default.instance.getSprite(d.ResType.main,t.spr),this._view.labDecR.string=t.dec,this._view.labNameR.string=t.name),r.default.instance.popOut(this._view.content)},t.prototype.hideUI=function(){l.default.instance.playAudio("sclick_2"),this._view.content.active=!1},t.instance=null,n=o([h],t)}(cc.Component));n.default=p,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/resources_manager":"resources_manager","../ui_view/panel/pop_text_ui_view":"pop_text_ui_view","../utils/enum":"enum"}],quest_manager:[function(e,t,n){"use strict";cc._RF.push(t,"8d551rRT65PNI3Z3EpW2Nwu","quest_manager");var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,l=o.length;r<l;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../interface/item_amount"),o=e("../ui/talk_ui"),r=e("../utils/config"),l=e("../utils/emmiter"),s=e("../utils/enum"),c=e("../utils/message"),d=e("../utils/utils"),u=e("./build_manager"),h=e("./dynamic_data_manager"),p=e("./effect_manager"),f=e("./friend_manager"),m=e("./game_manager"),g=e("./json_manager"),_=e("./language_manager"),v=e("./plan_manager"),y=e("./record_manager"),b=e("./shop_manager"),w=e("./ui_manager"),C=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(){this.refreshRandomQuest(),h.default.instance.achievementData.curWeekQuest=1,h.default.instance.achievementData.charList=[3,4,10]},e.prototype.onMonthBy=function(){this.refreshRandomQuest(),h.default.instance.achievementData.charList=this.refreshFriendList(3)},e.prototype.onDayBy=function(){},e.prototype.refreshRandomQuest=function(){h.default.instance.achievementData.randomQuest=[];var e=5+2*m.default.instance.getValueByStr("questNum")+m.default.instance.getYear();e=Math.min(15,e);for(var t=function(e){var t=[],n=0,o=d.Utils.getRandomNumber(2);h.default.instance.day<30&&1==o&&(o=0);var r=1+Math.floor(m.default.instance.getYear()/2);switch(o){case 0:var l=b.ShopMgr.instance.getShopList(0);r>l.length&&(r=l.length),r+=Math.floor(h.default.instance.allFieldData.list.length/4),0==m.default.instance.getYear()&&(r=1);var c=[];h.default.instance.allFieldData.list.forEach(function(e){c.push(e.maxNum)}),0==c.length&&c.push(1),t=l.map(function(e){return[g.default.instance.getDataByName("item")[e.id].seed.product,Math.min(9,d.Utils.getArrRandomItem(c))]});break;case 1:var u=h.default.instance.allSaleData.recipeList.filter(function(e){return!!g.default.instance.getDataByName("item")[e].type.includes(s.Itemtype.food)});t=u.map(function(e){return[e,d.Utils.getRandomNumber(h.default.instance.allSaleData.maxSale)+1]});break;case 2:i(v.PlanMgr.instance.onFindDone(3,0),v.PlanMgr.instance.onLoggingDone(3,0),v.PlanMgr.instance.onMineDone(3,0),v.PlanMgr.instance.onfishingDone(3,0)).forEach(function(e){t.push([e.id,d.Utils.getRandomNumber(h.default.instance.allFriendData.friendMax)+1])}),h.default.instance.meadowData.animalList.forEach(function(e){if(e.id){var n=g.default.instance.getDataByName("char")[e.id];t.push(n.animal.product[d.Utils.getRandomNumber(3)])}}),g.default.instance.getDataByName("map")[h.default.instance.allFriendData.area].monster.forEach(function(e){var n=g.default.instance.getDataByName("char")[e];n.animal||t.push([n.drop,Math.ceil(n.dropChance/3)])})}t=d.Utils.needMerge(t),r>5&&(r=5),t=d.Utils.getArrRandomItemsByNum(t,r);var p=0;t.forEach(function(e){var t=g.default.instance.getDataByName("item")[e[0]];p+=t.price*e[1]}),0==p&&(p=1e3),p*=m.default.instance.getPrecentValueByStr("questReward");var f=null;d.Utils.luckChance(Math.min(8*m.default.instance.getYear(),64))?n=d.Utils.getArrRandomItem([853,853,853,853,853,857,857,857,855,855,857,859,859,859,859,859,859,859,859,860,860,856,856,856,858]):d.Utils.luckChance(33)?n=d.Utils.getArrRandomItem([501,501,501,502,503,503,503,504]):d.Utils.luckChance(15)?n=[1014,809,817,1008,1012][t.length-1]:(n=505,p>1e3&&(n=506),p>3e3&&(n=507),p>5e3&&(n=508),p>1e4&&(n=509));var y=Object.keys(h.default.instance.allFriendData.friendMap).map(function(e){return+e}),w=d.Utils.getArrRandomItem(y),C=g.default.instance.getDataByName("item")[n];f={type:a.RewardType.item,id:n,num:Math.ceil(Math.pow(p/2/C.price,.55)),quality:1},(!C.price||n<=860&&n>850)&&(f.num=1,f.quality=h.default.instance.getRandomQuality(0,!0)),h.default.instance.achievementData.randomQuest.push({charId:w,index:e,name:_.default.GetText("char_name_"+w)+_.default.GetText("\u7684\u59d4\u6258"),dec:"",need:t.map(function(e){return[1,e[0],e[1]]}),reward:[{type:a.RewardType.money,num:Math.round(1.1*p)},f,Math.random()>.5&&h.default.instance.allFriendData.friendMap[w].quality<5?{type:a.RewardType.friend,id:w,num:50}:{type:a.RewardType.point,num:Math.ceil(Math.pow(p/10,.65))}]})},n=0;n<e;n++)t(n)},e.prototype.checkCanHandleQuest=function(e){var t=null;t=h.default.instance.achievementData.randomQuest[e];var n=!0;return t.need.forEach(function(e){1==e[0]&&u.BuildMgr.instance.getItemTotalNum(e[1])<e[2]&&(n=!1)}),!!n||(w.default.instance.LoadTipsByStr(_.default.GetText("\u7269\u54c1\u4e0d\u8db3")),!1)},e.prototype.onRewardQuest=function(e,t,n){var i=null;i=-1==e?g.default.instance.getDataByName("quest")[h.default.instance.achievementData.curWeekQuest]:h.default.instance.achievementData.randomQuest[e];var a=!0;if(i.need.forEach(function(e){1==e[0]?u.BuildMgr.instance.getItemTotalNum(e[1])<e[2]&&(a=!1):n||(a=!1)}),a){if(i.need.forEach(function(e){1==e[0]?u.BuildMgr.instance.costItemTotalNum(e[1],e[2]):2==e[0]&&h.default.instance.onCost({id:n.id,num:e[2],quality:n.quality})}),-1==e)for(var s in i.talk&&w.default.instance.openUI(o.default,{name:r.Config.uiName.talkUI,param:[i.talk]},301),h.default.instance.achievementData.questDone.push(h.default.instance.achievementData.curWeekQuest),h.default.instance.achievementData.curWeekQuest=0,g.default.instance.getDataByName("quest"))h.default.instance.achievementData.questDone.includes(+s)||+s<20&&!h.default.instance.achievementData.curWeekQuest&&(h.default.instance.achievementData.curWeekQuest=+s);else h.default.instance.achievementData.randomQuest.splice(e,1);for(var d=0;d<i.reward.length;d++)h.default.instance.onReward(i.reward[d]);t&&p.default.instance.createRewardListEffect(i.reward,t),l.Emitter.fire(c.MessageType.onDoneQuest)}else w.default.instance.LoadTipsByStr(_.default.GetText("\u7269\u54c1\u4e0d\u8db3"))},e.prototype.getAchievementStatus=function(e){var t=g.default.instance.getDataByName("achievement")[e];return h.default.instance.achievementData.achievementDone.includes(e)?2:y.default.instance.getAchievementProgress(e)/t.target>=1?1:0},e.prototype.onRewardAchievement=function(e,t){var n=this.getAchievementStatus(e);if(0!=n)if(2!=n){var i=g.default.instance.getDataByName("achievement")[e];h.default.instance.achievementData.achievementDone.push(e),t&&p.default.instance.createRewardListEffect([{type:a.RewardType.point,num:i.point}],t),h.default.instance.point+=i.point,l.Emitter.fire(c.MessageType.onDoneAchievement)}else w.default.instance.LoadTipsByStr(_.default.GetText("\u5df2\u5b8c\u6210"));else w.default.instance.LoadTipsByStr(_.default.GetText("\u672a\u6ee1\u8db3\u6761\u4ef6"))},e.prototype.getMaxGetRole=function(){var e=[];for(var t in g.default.instance.getDataByName("char"))g.default.instance.getDataByName("char")[t].friend&&h.default.instance.allFriendData.friendMap[t]&&h.default.instance.allFriendData.friendMap[t].love<2500&&e.push(+t);return e.length},e.prototype.refreshFriendList=function(e){var t=[],n=[];for(var i in e=Math.min(e,this.getMaxGetRole()),g.default.instance.getDataByName("char")){var a=g.default.instance.getDataByName("char")[i];a.friend&&h.default.instance.allFriendData.friendMap[i]&&h.default.instance.allFriendData.friendMap[i].love<2500&&(t.push(+i),n.push(4-a.rare))}for(var o=0;o<t.length;o++)for(var r=o+1;r<t.length;r++)t[o]==t[r]&&(t.splice(r,1),r--);for(var l=[];l.length<e;)(i=t[d.Utils.getArrRandomIndex(n)])&&!l.includes(i)&&l.push(i);return l},e.prototype.getNextPayPoint=function(e){var t=h.default.instance.allFriendData.friendMap[e],n=100*Math.pow(t.quality+1,2)-t.love;return n<0&&(n=0),Math.ceil(n)},e.prototype.onPayFriend=function(t){var n=e.instance.getNextPayPoint(t);if(h.default.instance.point<n)w.default.instance.LoadTipsByStr(_.default.GetText("\u70b9\u6570\u4e0d\u8db3"));else{h.default.instance.point-=n;var i=h.default.instance.achievementData.charList.findIndex(function(e){return t==e});h.default.instance.achievementData.charList.splice(i,1),f.FriendMgr.instance.onAddFriendLove(t,n)}},e._instance=null,e}();n.default=C,cc._RF.pop()},{"../interface/item_amount":"item_amount","../ui/talk_ui":"talk_ui","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./build_manager":"build_manager","./dynamic_data_manager":"dynamic_data_manager","./effect_manager":"effect_manager","./friend_manager":"friend_manager","./game_manager":"game_manager","./json_manager":"json_manager","./language_manager":"language_manager","./plan_manager":"plan_manager","./record_manager":"record_manager","./shop_manager":"shop_manager","./ui_manager":"ui_manager"}],quest_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"aa838qKvXFJV4ZA8TduNZEt","quest_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodeQuestReddot=null,this.nodeAchievementReddot=null,this.nodeQuestContainer=null,this.nodeAchievementContainer=null,this.btnRefresh=null,this.btnAct=null,this.btnMain=null,this.btnHome=null,this.labLanList=[],this.svMain=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodePageList[2]=cc.find("content/nodePageList2",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodeQuestReddot=cc.find("content/nodeMenu/btnMain/nodeQuestReddot",e),this.nodeAchievementReddot=cc.find("content/nodeMenu/btnHome/nodeAchievementReddot",e),this.nodeQuestContainer=cc.find("content/nodePageList1/svMain/view/nodeQuestContainer",e),this.nodeAchievementContainer=cc.find("content/nodePageList2/svMain/view/nodeAchievementContainer",e),this.btnRefresh=null===(t=cc.find("content/nodePageList1/btnRefresh",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnAct=null===(n=cc.find("content/nodeMenu/btnAct",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnMain=null===(i=cc.find("content/nodeMenu/btnMain",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnHome=null===(a=cc.find("content/nodeMenu/btnHome",e))||void 0===a?void 0:a.getComponent(cc.Button),this.labLanList[0]=null===(o=cc.find("content/nodePageList1/btnRefresh/labLanList0",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labLanList[1]=null===(r=cc.find("content/nodePageList1/btnRefresh/labLanList1",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[2]=null===(l=cc.find("content/labLanList2",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[3]=null===(s=cc.find("content/labLanList3",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[4]=null===(c=cc.find("content/labLanList4",e))||void 0===c?void 0:c.getComponent(cc.Label),this.svMain=null===(d=cc.find("content/nodePageList1/svMain",e))||void 0===d?void 0:d.getComponent(cc.ScrollView),this.svMain=null===(u=cc.find("content/nodePageList2/svMain",e))||void 0===u?void 0:u.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodeQuestReddot=null,this.nodeAchievementReddot=null,this.nodeQuestContainer=null,this.nodeAchievementContainer=null,this.btnRefresh=null,this.btnAct=null,this.btnMain=null,this.btnHome=null,this.labLanList=[],this.svMain=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],quest_ui:[function(e,t,n){"use strict";cc._RF.push(t,"2a25c0hHnFNGbjjG5vR23re","quest_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_achievement"),l=e("../item/item_quest"),s=e("../manager/action_manager"),c=e("../manager/ad_manager"),d=e("../manager/audio_manager"),u=e("../manager/dynamic_data_manager"),h=e("../manager/guide_manager"),p=e("../manager/language_manager"),f=e("../manager/pool_manager"),m=e("../manager/quest_manager"),g=e("../manager/record_manager"),_=e("../manager/reddot_manager"),v=e("../manager/resources_manager"),y=e("../manager/storage_manager"),b=e("../manager/ui_manager"),w=e("../ui_view/panel/quest_ui_view"),C=e("../utils/emmiter"),S=e("../utils/enum"),L=e("../utils/message"),A=cc._decorator,k=A.ccclass,T=(A.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new w.default,t._page=0,t.achievementTimer=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u4e0b\u6708\u5237\u65b0","\u7acb\u5373\u5237\u65b0","\u59d4\u6258","\u6210\u5c31","\u59d4\u6258"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeMenu.children.forEach(function(t,n){t.on("click",function(){d.default.instance.playAudio("switch"),e.onClickPageBtn(n)},e)}),this._view.btnRefresh.node.on("click",this.onRefresh,this),C.Emitter.register(L.MessageType.onDonePlot,this.refreshReddot,this),C.Emitter.register(L.MessageType.onDoneQuest,this.refreshReddot,this),C.Emitter.register(L.MessageType.onDoneAchievement,this.refreshReddot,this)},t.prototype.showUI=function(){s.default.instance.popOut(this._view.content,this._view.nodeMask),g.default.instance.onOpenPage(S.PageType.quest),this.refreshReddot(),this.onClickPageBtn(1)},t.prototype.hideUI=function(){d.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onClickPageBtn=function(e){switch(this._page=e,this._view.nodePageList.forEach(function(t,n){t.active=n==e}),this._view.nodeMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=v.default.instance.getSprite(S.ResType.main,n==e?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")}),e){case 0:this.refreshActivityPage();break;case 1:this.refreshQuestPage();break;case 2:this.refreshAchievementPage()}},t.prototype.refreshActivityPage=function(){},t.prototype.refreshQuestPage=function(){f.default.instance.removeObjByContainer(this._view.nodeQuestContainer),u.default.instance.achievementData.curWeekQuest&&!h.GuideMgr.instance.isInGuide()&&f.default.instance.createObjectByName("itemQuest",this._view.nodeQuestContainer).getComponent(l.default).init(-1);for(var e=0;e<u.default.instance.achievementData.randomQuest.length;e++)f.default.instance.createObjectByName("itemQuest",this._view.nodeQuestContainer).getComponent(l.default).init(e)},t.prototype.refreshAchievementPage=function(){var e=this;f.default.instance.removeObjByContainer(this._view.nodeAchievementContainer),this.achievementTimer&&clearInterval(this.achievementTimer);var t=1;this.achievementTimer=setInterval(function(){if(b.default.instance.checkUIIsOpen(n)&&e._view.nodeAchievementContainer.activeInHierarchy){var i=f.default.instance.createObjectByName("itemAchievement",e._view.nodeAchievementContainer);i.getComponent(r.default).init(+t),1==m.default.instance.getAchievementStatus(+t)?i.zIndex=0:i.zIndex=1}++t>55&&clearInterval(e.achievementTimer)},20)},t.prototype.onRefresh=function(){d.default.instance.playAudio("click"),u.default.instance.config.refreshTimes>0?(u.default.instance.config.refreshTimes--,m.default.instance.refreshRandomQuest(),this.refreshQuestPage(),y.default.instance.saveConfig()):b.default.instance.LoadMessageBox(p.default.GetText("\u5237\u65b0\u6b21\u6570\u4e0d\u8db3"),p.default.GetText("\u5237\u65b0\u4e0d\u8db3\u63d0\u793a"),function(e){e&&c.default.getInatance().showAndroidAd(function(){b.default.instance.LoadTipsByStr(p.default.GetText("\u5e7f\u544a\u589e\u52a0\u5237\u65b0")),u.default.instance.config.refreshTimes+=10})})},t.prototype.refreshReddot=function(){this._view.nodeAchievementReddot.active=_.ReddotMgr.instance.getAchievementReddot(),this._view.nodeQuestReddot.active=_.ReddotMgr.instance.getQuestReddot()},t.instance=null,n=o([k],t)}(cc.Component));n.default=T,cc._RF.pop()},{"../item/item_achievement":"item_achievement","../item/item_quest":"item_quest","../manager/action_manager":"action_manager","../manager/ad_manager":"ad_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/guide_manager":"guide_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/quest_manager":"quest_manager","../manager/record_manager":"record_manager","../manager/reddot_manager":"reddot_manager","../manager/resources_manager":"resources_manager","../manager/storage_manager":"storage_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/quest_ui_view":"quest_ui_view","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message"}],recipe_choose_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"5a2a4X/lMFJ6KoNyZzulKxu","recipe_choose_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.btnHome=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnMain=null,this.btnOrder=null,this.labOrder=null,this.labLanList=[],this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeSubMenu=cc.find("content/nodeSubMenu",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.btnHome=null===(t=cc.find("content/nodeSubMenu/btnHome",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnHome=null===(n=cc.find("content/nodeSubMenu/btnHome",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnHome=null===(i=cc.find("content/nodeSubMenu/btnHome",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnMain=null===(a=cc.find("content/nodeSubMenu/btnMain",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnMain=null===(o=cc.find("content/nodeSubMenu/btnMain",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnOrder=null===(r=cc.find("content/btnOrder",e))||void 0===r?void 0:r.getComponent(cc.Button),this.labOrder=null===(l=cc.find("content/btnOrder/labOrder",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[0]=null===(s=cc.find("content/labLanList0",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[1]=null===(c=cc.find("content/labLanList1",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[2]=null===(d=cc.find("content/labLanList2",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[3]=null===(u=cc.find("content/labLanList3",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[4]=null===(h=cc.find("content/labLanList4",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labLanList[5]=null===(p=cc.find("content/labLanList5",e))||void 0===p?void 0:p.getComponent(cc.Label),this.svMain=null===(f=cc.find("content/svMain",e))||void 0===f?void 0:f.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.btnHome=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnMain=null,this.btnOrder=null,this.labOrder=null,this.labLanList=[],this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],recipe_choose_ui:[function(e,t,n){"use strict";cc._RF.push(t,"76ef9wMhutKBrmaNevbz3WE","recipe_choose_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_recipe_choose"),l=e("../manager/action_manager"),s=e("../manager/audio_manager"),c=e("../manager/dynamic_data_manager"),d=e("../manager/language_manager"),u=e("../manager/pool_manager"),h=e("../manager/resources_manager"),p=e("../ui_view/panel/recipe_choose_ui_view"),f=e("../utils/enum"),m=cc._decorator,g=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new p.default,t.curType=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u914d\u65b9\u9009\u62e9","\u4e3b\u98df","\u751c\u54c1","\u8c03\u6599","\u6b66\u5668","\u836f\u6c34"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeSubMenu.children.forEach(function(t,n){t.on("click",function(){s.default.instance.playAudio("switch"),e.onChooseType(n)},e)})},t.prototype.showUI=function(){l.default.instance.popOut(this._view.content,this._view.nodeMask),this.onChooseType(0)},t.prototype.refreshList=function(){var e=this;u.default.instance.removeObjByContainer(this._view.nodeContainer),this._view.nodeSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=h.default.instance.getSprite(f.ResType.main,n==e.curType?"ui-UI_Flat_Slot_01_Selected":"ui-UI_Flat_Slot_02_Available")});var t=c.default.instance.allSaleData.recipeList;t.sort(function(e,t){var n=c.default.instance.collectionData.recipeCollect.includes(e)?1:0;return(c.default.instance.collectionData.recipeCollect.includes(t)?1:0)-n});for(var n=[],i=0;i<t.length;i++)switch(this.curType){case 0:c.default.instance.checkItemIsType(t[i],f.Itemtype.meal)&&n.push(t[i]);break;case 1:c.default.instance.checkItemIsType(t[i],f.Itemtype.dsert)&&n.push(t[i]);break;case 2:(c.default.instance.checkItemIsType(t[i],f.Itemtype.seasoning)||c.default.instance.checkItemIsType(t[i],f.Itemtype.fertilizer))&&n.push(t[i]);break;case 3:c.default.instance.checkItemIsType(t[i],f.Itemtype.weapon)&&n.push(t[i]);break;case 3:c.default.instance.checkItemIsType(t[i],f.Itemtype.potion)&&n.push(t[i])}n.forEach(function(t){u.default.instance.createObjectByName("itemRecipeChoose",e._view.nodeContainer).getComponent(r.default).init(t)})},t.prototype.onChoose=function(){this.hideUI()},t.prototype.hideUI=function(){s.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onChooseType=function(e){this.curType=e,this.refreshList()},t.instance=null,n=o([g],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../item/item_recipe_choose":"item_recipe_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../ui_view/panel/recipe_choose_ui_view":"recipe_choose_ui_view","../utils/enum":"enum"}],record_data:[function(e,t,n){"use strict";cc._RF.push(t,"78d95pyWWJH64fGRj9uZv7t","record_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],record_manager:[function(e,t,n){"use strict";cc._RF.push(t,"d5876a9MjFHTq1IW4wagi0v","record_manager"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../ui/talk_ui"),a=e("../utils/config"),o=e("../utils/emmiter"),r=e("../utils/enum"),l=e("../utils/message"),s=e("../utils/utils"),c=e("./dynamic_data_manager"),d=e("./friend_manager"),u=e("./game_manager"),h=e("./json_manager"),p=e("./plan_manager"),f=e("./sale_manager"),m=e("./ui_manager"),g=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(){c.default.instance.achievementData={achievementDone:[],questDone:[],curWeekQuest:1,randomQuest:[],charList:[]},c.default.instance.recordData={talkList:[],killMonster:0,dayKillMonster:0,daySaleEarned:0,daycostomerNum:0,saleEarned:0,harvestNum:0,makeupRecipe:0,animalsProduct:0,buySeed:0,doneQuest:0,rewardPoint:0,planNum:0,unlockRecipe:[],load:[1,1,1],historyRecord:{money:[],monthSaleEarned:[],monthHarvestNum:[],friendSalary:[],monthKillMonster:[],monthMeadowProduct:[],yearScore:[],rank:[]},rank:0,final:!1,monthSaleEarned:0,monthHarvestNum:0,monthMeadowProduct:0,monthKillMonster:0,donePlot:[],yearScore:0,dairyList:[],guide:0}},e.prototype.init=function(){o.Emitter.register(l.MessageType.onKillMonster,this.onKillMonster,this),o.Emitter.register(l.MessageType.onComeCostomer,this.onComeCostomer,this),o.Emitter.register(l.MessageType.onSaleItem,this.onSaleItem,this),o.Emitter.register(l.MessageType.onHarvest,this.onHarvest,this),o.Emitter.register(l.MessageType.onMakeup,this.onMakeupNum,this),o.Emitter.register(l.MessageType.onAnimalProduct,this.onAnimalProduct,this),o.Emitter.register(l.MessageType.onBuySeed,this.onBuySeed,this),o.Emitter.register(l.MessageType.onDoneQuest,this.onDoneQuest,this),o.Emitter.register(l.MessageType.onPlanDone,this.onPlanDone,this),o.Emitter.register(l.MessageType.pointChange,this.onRewardPoint,this)},e.prototype.onKillMonster=function(){c.default.instance.recordData.killMonster++,c.default.instance.recordData.dayKillMonster++,c.default.instance.recordData.monthKillMonster++},e.prototype.onRewardPoint=function(e,t,n){c.default.instance.recordData&&n>t&&(c.default.instance.recordData.rewardPoint+=n-t)},e.prototype.onSaleItem=function(e,t,n,i,a){if(c.default.instance.recordData.saleEarned+=i,c.default.instance.recordData.daySaleEarned+=i,c.default.instance.recordData.monthSaleEarned+=i,c.default.instance.allSaleData.itemSaleData[t]?c.default.instance.allSaleData.itemSaleData[t]+=n:c.default.instance.allSaleData.itemSaleData[t]=n,c.default.instance.shopData.maxQuality[t]?c.default.instance.shopData.maxQuality[t]=Math.max(c.default.instance.shopData.maxQuality[t],a):c.default.instance.shopData.maxQuality[t]=a,t<150){var o=t+200;c.default.instance.shopData.maxQuality[o]?c.default.instance.shopData.maxQuality[o]=Math.max(c.default.instance.shopData.maxQuality[o],a):c.default.instance.shopData.maxQuality[o]=a}},e.prototype.onComeCostomer=function(){c.default.instance.recordData.daycostomerNum++},e.prototype.onHarvest=function(e,t,n){c.default.instance.recordData.harvestNum+=n,c.default.instance.recordData.monthHarvestNum+=n},e.prototype.onMakeupNum=function(e,t,n){c.default.instance.recordData.makeupRecipe+=n},e.prototype.onAnimalProduct=function(e,t,n){c.default.instance.recordData.animalsProduct+=n,c.default.instance.recordData.monthMeadowProduct+=n},e.prototype.onBuySeed=function(e,t,n){c.default.instance.recordData.buySeed+=n},e.prototype.onDoneQuest=function(){c.default.instance.recordData.doneQuest++},e.prototype.onPlanDone=function(){c.default.instance.recordData.planNum++},e.prototype.getAchievementProgress=function(e){var t=h.default.instance.getDataByName("achievement")[e],n=0;switch(t.type){case 1:return c.default.instance.recordData.killMonster;case 2:return c.default.instance.recordData.saleEarned;case 3:return c.default.instance.recordData.harvestNum;case 4:return u.default.instance.getYear();case 5:var i=0;for(var a in c.default.instance.allFriendData.friendMap)c.default.instance.allFriendData.friendMap[a].quality>0&&i++;return i;case 6:return c.default.instance.recordData.makeupRecipe;case 7:for(var o in c.default.instance.meadowData.animalDepot)n+=c.default.instance.meadowData.animalDepot[o];return c.default.instance.meadowData.animalList.forEach(function(e){e.id&&n++}),n;case 8:return c.default.instance.recordData.animalsProduct;case 9:return c.default.instance.recordData.buySeed;case 10:return c.default.instance.recordData.doneQuest;case 11:return c.default.instance.recordData.rewardPoint;case 12:for(var r=0;r<c.default.instance.planData.specialSkill.length;r++)n+=c.default.instance.planData.specialSkill[r].length;return n+=c.default.instance.planData.adSkill.length;case 13:return c.default.instance.recordData.planNum;case 14:return p.PlanMgr.instance.getMaxMap();case 15:return c.default.instance.allSaleData.recipeList.length;case 16:return c.default.instance.recordData.load.filter(function(e){return 1!=e}).length;case 17:return c.default.instance.recordData.historyRecord.rank.some(function(e){return 1==e})?1:0;case 18:return c.default.instance.shopData.townLv;case 19:return[601,602,603,604,605,606,607,608,609].filter(function(e){return c.default.instance.findItem(e).length>0}).length;case 20:return c.default.instance.allFriendData.friendMax;case 21:return c.default.instance.allSaleData.maxSale;case 22:for(r=0;r<c.default.instance.allFieldData.list.length;r++)n+=c.default.instance.allFieldData.list[r].maxNum;return n;case 23:return Object.keys(c.default.instance.allSaleData.itemSaleData).length;case 24:for(var l in c.default.instance.allSaleData.itemSaleData){var s=h.default.instance.getDataByName("item")[l];s.levelNeedNum&&c.default.instance.allSaleData.itemSaleData[l]>=s.levelNeedNum&&n++}return n;case 25:return c.default.instance.achievementData.achievementDone.length}},e.prototype.onDayBy=function(){c.default.instance.recordData.dayKillMonster=0,c.default.instance.recordData.daySaleEarned=0,c.default.instance.recordData.daycostomerNum=0,this.checkAddFarmScore()},e.prototype.onMonthBy=function(){var e=c.default.instance.recordData;e.yearScore+=this.getMonthScore(),e.historyRecord.money.push(c.default.instance.money),e.historyRecord.monthSaleEarned.push(e.monthSaleEarned),e.monthSaleEarned=0,e.historyRecord.monthKillMonster.push(e.monthKillMonster),e.monthKillMonster=0,e.historyRecord.monthHarvestNum.push(e.monthHarvestNum),e.monthHarvestNum=0,e.historyRecord.monthMeadowProduct.push(e.monthMeadowProduct),e.monthMeadowProduct=0},e.prototype.onYearBy=function(){var e=c.default.instance.recordData;e.historyRecord.rank.push(e.rank),e.historyRecord.yearScore.push(e.yearScore),c.default.instance.festivalData.endOfYear=!1,e.yearScore=0,e.rank=0},e.prototype.onOpenPage=function(e){var t=c.default.instance.recordData.donePlot;switch(e){case r.PageType.field:t.includes(1)||m.default.instance.openUI(i.default,{name:a.Config.uiName.talkUI,param:[1]});break;case r.PageType.shop:t.includes(101)||m.default.instance.openUI(i.default,{name:a.Config.uiName.talkUI,param:[101]},300);break;case r.PageType.meadow:t.includes(201)||m.default.instance.openUI(i.default,{name:a.Config.uiName.talkUI,param:[201]},300);break;case r.PageType.building:t.includes(301)||m.default.instance.openUI(i.default,{name:a.Config.uiName.talkUI,param:[301]},300);break;case r.PageType.quest:t.includes(401)||m.default.instance.openUI(i.default,{name:a.Config.uiName.talkUI,param:[401]},300);break;case r.PageType.adventure:t.includes(501)||m.default.instance.openUI(i.default,{name:a.Config.uiName.talkUI,param:[501]},300);break;case r.PageType.plan:break;case r.PageType.bestFarmer:t.includes(1301)||m.default.instance.openUI(i.default,{name:a.Config.uiName.talkUI,param:[1301]},301),c.default.instance.allFriendData.friendMap[95]||d.FriendMgr.instance.addFriend(95);break;case r.PageType.bestChef:t.includes(2101)||m.default.instance.openUI(i.default,{name:a.Config.uiName.talkUI,param:[2101]},301),c.default.instance.allFriendData.friendMap[97]||d.FriendMgr.instance.addFriend(97);break;case r.PageType.marketDay:t.includes(2001)||m.default.instance.openUI(i.default,{name:a.Config.uiName.talkUI,param:[2001]},301);break;case r.PageType.collection:}},e.prototype.checkCondition=function(e){h.default.instance.getDataByName("polt")[e]},e.prototype.getAllCanTalk=function(){var e=[],t=c.default.instance.recordData.donePlot;t.includes(2301)||c.default.instance.day%120!=4||e.push(2301),t.includes(2401)||c.default.instance.day%120!=39||e.push(2401),t.includes(2501)||c.default.instance.day%120!=76||e.push(2501),t.includes(2601)||c.default.instance.day%120!=118||e.push(2601),t.includes(2101)||c.default.instance.day%30!=19||e.push(2101),t.includes(1301)||c.default.instance.day%30!=28||e.push(1301),t.includes(2001)||c.default.instance.day%30!=14||e.push(2001);for(var n=0;n<u.default.instance.needCheckPlot.length;n++){var i=u.default.instance.needCheckPlot[n];if(!c.default.instance.recordData.donePlot.includes(i)){var a=h.default.instance.getDataByName("plot")[i];a.fristTime&&c.default.instance.allFriendData.friendMap[a.fristTime]?e.push(i):a.unlockChar&&a.needChar.every(function(e){var t=c.default.instance.allFriendData.friendMap[e];return!!(t&&t.quality>=2)})&&e.push(i)}}return!t.includes(30901)&&c.default.instance.recordData.historyRecord.rank.some(function(e){return 1==e})&&e.push(30901),e},e.prototype.checkOnEndOfYear=function(){if(c.default.instance.day%120==119&&!c.default.instance.festivalData.endOfYear){c.default.instance.festivalData.endOfYear=!0;for(var e=[],t=0;t<17;t++)e.push(1351+t);e=s.Utils.getArrRandomItemsByNum(e,2);var n=this.getYearRank(c.default.instance.recordData.yearScore+this.getMonthScore());c.default.instance.festivalData.farmMatch.level=n,c.default.instance.recordData.rank=n;var d=1381;if(n<=30&&n>=2&&c.default.instance.recordData.historyRecord.rank.every(function(e){return e>30||1==e}))c.default.instance.onReward({id:852,num:1,quality:1}),e[0]=1371,d=1401,f.default.instance.addBuff(115,7),o.Emitter.fire(l.MessageType.addDairy,r.DairyRtType.newbFarmer);else if(1==n&&c.default.instance.recordData.historyRecord.rank.every(function(e){return 1!=e})){for(t=0;t<100;t++){var h=c.default.instance.getRandomQuality(u.default.instance.getLuck(),!0);c.default.instance.onReward({id:855,num:1,quality:h}),c.default.instance.onReward({id:857,num:1,quality:h})}e[1]=1371,d=1501,f.default.instance.addBuff(114,7),o.Emitter.fire(l.MessageType.addDairy,r.DairyRtType.bestFarmer)}else if(1==n){for(t=0;t<30;t++)h=c.default.instance.getRandomQuality(u.default.instance.getLuck(),!0),c.default.instance.onReward({id:855,num:1,quality:h}),c.default.instance.onReward({id:857,num:1,quality:h});e[1]=1371,d=1391,o.Emitter.fire(l.MessageType.addDairy,r.DairyRtType.bestFarmer)}c.default.instance.money+=100*(101-n),c.default.instance.point+=10*(101-n);var p=[1311,1321,e[0],1331,e[1],d,1341];return m.default.instance.openUI(i.default,{name:a.Config.uiName.talkUI,param:p}),!0}return!1},e.prototype.getYearRank=function(e){var t=Math.floor(100-Math.sqrt(e));return t<0&&(t=0),0==t&&c.default.instance.recordData.historyRecord.rank.every(function(e){return e>30||1==e})&&(t=1),t+1},e.prototype.checkAddFarmScore=function(){var e=this;if(c.default.instance.day%30==29){var t=c.default.instance.festivalData.farmMatch.items.filter(function(e){return e}),n=0;t.forEach(function(t){n+=e.getItemScore(t)}),cc.log("\u5f53\u5b63\u519c\u573a\u7269\u54c1\u5f97\u5206",n),c.default.instance.recordData.yearScore+=n}},e.prototype.getItemScore=function(e){var t=0,n=h.default.instance.getDataByName("item")[e.id],i=1;return n.type.forEach(function(a){switch(a){case r.Itemtype.crop:var o=h.default.instance.getDataByName("item")[e.id+200];u.default.instance.checkIsInGoodSeason(o.seed.season)&&(i+=2),t+=5*n.rare;break;case r.Itemtype.animal:i+=.8;case r.Itemtype.meta:case r.Itemtype.monster:case r.Itemtype.fish:case r.Itemtype.seasoning:t+=10*n.rare;break;case r.Itemtype.dsert:case r.Itemtype.meal:u.default.instance.checkIsInGoodSeason(n.food.season)&&(i+=1),t+=8*n.rare}}),t+=i*e.quality*5,t+=i*Math.sqrt(n.price)},e.prototype.getMonthScore=function(){var e=c.default.instance.recordData;return Math.sqrt(e.monthSaleEarned/4)+e.monthKillMonster+2*e.monthHarvestNum+Math.sqrt(4*e.monthMeadowProduct)},e._instance=null,e}();n.default=g,cc._RF.pop()},{"../ui/talk_ui":"talk_ui","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./dynamic_data_manager":"dynamic_data_manager","./friend_manager":"friend_manager","./game_manager":"game_manager","./json_manager":"json_manager","./plan_manager":"plan_manager","./sale_manager":"sale_manager","./ui_manager":"ui_manager"}],reddot_manager:[function(e,t,n){"use strict";cc._RF.push(t,"30708T3tF9J+Y/PTecO7BQh","reddot_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ReddotMgr=void 0;var i=e("../interface/holiday_data"),a=e("../utils/enum"),o=e("./build_manager"),r=e("./dynamic_data_manager"),l=e("./festival_manager"),s=e("./field_manager"),c=e("./guide_manager"),d=e("./quest_manager"),u=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.getPauseReddot=function(){return r.default.instance.recordData.donePlot,!1},e.prototype.getPlanBtnRed=function(){return this.getSkillRed()},e.prototype.getSkillRed=function(){var e=0;return r.default.instance.planData.specialSkill.forEach(function(t){e+=t.length}),r.default.instance.planData.skillPoint>0&&e<25},e.prototype.getFriendReddot=function(){return r.default.instance.recordData.donePlot,!1},e.prototype.getSaleRedDot=function(){return r.default.instance.recordData.donePlot,!1},e.prototype.getFieldReddot=function(){return r.default.instance.recordData.donePlot,!!r.default.instance.allFieldData.list.some(function(e,t){return e.bug||s.FieldMgr.instance.canHavest(t)&&!e.autoHarvest})},e.prototype.getGroundReddot=function(){for(var e=!1,t=6;t<=11;t++)this.getGroundReddotByPage(t)&&(e=!0);return this.getFestivalReddot()&&(e=!0),e},e.prototype.getFestivalReddot=function(){switch(l.FestivalMgr.instance.getTodayHolidayType()){case i.HolidayType.bestChef:return!r.default.instance.festivalData.foodMatch.reward;case 5:case 6:case 7:case 8:return!r.default.instance.festivalData.game.reward}return!1},e.prototype.getGroundReddotByPage=function(e){var t=r.default.instance.recordData.donePlot,n=r.default.instance.recordData.guide;switch(e){case a.PageType.shop:return!t.includes(101)&&t.includes(1);case a.PageType.meadow:return!!c.GuideMgr.instance.getFunctionIsOpen(a.FunctionType.meadow)&&16==n&&!t.includes(201);case a.PageType.building:return!!c.GuideMgr.instance.getFunctionIsOpen(a.FunctionType.build)&&9==n&&!t.includes(301);case a.PageType.adventure:return!!c.GuideMgr.instance.getFunctionIsOpen(a.FunctionType.adventure)&&13==n&&!t.includes(501);case a.PageType.quest:return!!c.GuideMgr.instance.getFunctionIsOpen(a.FunctionType.quest)&&(7==n&&!t.includes(401)||this.getAchievementReddot())}return!1},e.prototype.getQuestReddot=function(){var e=!1;return r.default.instance.achievementData.randomQuest.forEach(function(t){var n=!0;t.need.forEach(function(e){1==e[0]&&o.BuildMgr.instance.getItemTotalNum(e[1])<e[2]&&(n=!1)}),n&&(e=!0)}),e},e.prototype.getAchievementReddot=function(){for(var e=1;e<=55;e++)if(1==d.default.instance.getAchievementStatus(e))return!0;return!1},e._instance=null,e}();n.ReddotMgr=u,cc._RF.pop()},{"../interface/holiday_data":"holiday_data","../utils/enum":"enum","./build_manager":"build_manager","./dynamic_data_manager":"dynamic_data_manager","./festival_manager":"festival_manager","./field_manager":"field_manager","./guide_manager":"guide_manager","./quest_manager":"quest_manager"}],resources_manager:[function(e,t,n){"use strict";cc._RF.push(t,"53a16F6e1lGwZ3jAi0pyCEi","resources_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../utils/emmiter"),l=e("../utils/message"),s=e("../utils/enum"),c=e("./json_manager"),d=e("./pool_manager"),u=e("./main_manager"),h=e("../utils/config"),p=e("../utils/utils"),f=cc._decorator,m=f.ccclass,g=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._Atlas=[],t._Json=[],t._Prefab=[],t._Animation={},t._Partical={},t._Background={},t._level={},t.loading=0,t}var n;return a(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){console.log("ResourceManager loading ..."),this.bindEvent();var e=h.Config.resConfig.altasArr.map(function(e){return"atlas/"+e}),t=this;cc.loader.loadResArray(e,cc.SpriteAtlas,function(e,n){e?console.error(e):(t._Atlas=n,r.Emitter.fire(l.MessageType.atlasLoaded))});var n=h.Config.resConfig.jsonArr.map(function(e){return"json/"+e});cc.loader.loadResArray(n,cc.JsonAsset,function(e,n){e?console.error(e):(t._Json=n,c.default.instance.init())});var i=h.Config.resConfig.prefabArr.map(function(e){return"prefab/"+e});cc.loader.loadResArray(i,cc.Prefab,function(e,n){e?console.error(e):(t._Prefab=n,d.default.instance.init())})},t.prototype.bindEvent=function(){r.Emitter.register(l.MessageType.atlasLoaded,function(){n.instance.loadedRes(),r.Emitter.remove(l.MessageType.atlasLoaded,"")},""),r.Emitter.register(l.MessageType.poolLoaded,function(){n.instance.loadedRes(),r.Emitter.remove(l.MessageType.poolLoaded,"")},""),r.Emitter.register(l.MessageType.jsonLoaded,function(){n.instance.loadedRes(),r.Emitter.remove(l.MessageType.jsonLoaded,"")},"")},t.prototype.loadedRes=function(){this.loading++,3==this.loading&&u.default.instance.resLoaded()},t.prototype.getSprite=function(e,t){return this._Atlas[e]?this._Atlas[e].getSpriteFrame(t):null},t.prototype.getPartical=function(e){var t=this;return new Promise(function(n){if(t._Partical[e])n(t._Partical[e]);else{var i="partical/"+e;cc.resources.load(i,cc.ParticleAsset,function(i,a){i?console.error(i):(t._Partical[e]=a,n(a))})}})},t.prototype.getBackGround=function(e){var t=this;return new Promise(function(n){if(t._Background[e])n(t._Background[e]);else{var i="background/"+e;cc.resources.load(i,cc.SpriteFrame,function(i,a){i?console.error(i):(t._Background[e]=a,n(a))})}})},t.prototype.transTxtConfigToData=function(){},t.prototype.getBigEffect=function(e){var t=this,n=c.default.instance.getDataByName("animation")[e];return new Promise(function(i){var a;t._Animation[e]?i(t._Animation[e]):(a="bigEffect/"+e,cc.resources.loadDir(a,cc.SpriteFrame,function(a,o){if(a)console.error(a);else{var r=o,l=t.createClip(e,r,n);t._Animation[e]=l,i(l)}}))})},t.prototype.loadLevelPrefab=function(e){var t=this,n="map/"+e;return new Promise(function(i,a){t._level[e]?i(cc.instantiate(t._level[e])):cc.loader.loadRes(n,cc.Prefab,function(o,r){if(null==o){t._level[e]=r;var l=cc.instantiate(r);i(l)}else console.error("\u52a0\u8f7d\u5931\u8d25",o,n),a()})})},t.prototype.getAnimation=function(e,t){var n=this;void 0===t&&(t=!0);var i=c.default.instance.getDataByName("animation")[e]||null;return i&&void 0===i.warp&&(i.warp=1),new Promise(function(a){if(n._Animation[e])a(n._Animation[e]);else{var o="animation/"+e;t&&(o="effect/"+e),cc.loader.loadRes(o,cc.SpriteAtlas,function(t,o){if(t)console.error(t);else{var r,l=o.getSpriteFrames();r=n.createClip(e,l,i),n._Animation[e]=r,a(r)}})}})},t.prototype.getEffect=function(e){var t=this,n=c.default.instance.getDataByName("animation")[e]||{};return n&&void 0===n.warp&&(n.warp=1),new Promise(function(i){if(t._Animation[e])i(t._Animation[e]);else{var a="effect/"+e;cc.loader.loadRes(a,cc.SpriteAtlas,function(a,o){if(a)console.error(a);else{var r,l=o.getSpriteFrames();n.funcs=[[l.length/6,"ad"]],n.speed=3,r=t.createClip(e,l,n),t._Animation[e]=r,i(r)}})}})},t.prototype.createClip=function(e,t,n){n={sample:(null==n?void 0:n.smaple)||6,speed:(null==n?void 0:n.speed)||1,wrapMode:n?n.wrap:1,funcs:n?n.funcs:[[(t.length+1)/6,"ad"]]};var i=cc.AnimationClip.createWithSpriteFrames(t,n.sample);i.name=e,i.sample=n.sample,i.speed=n.speed;var a=[cc.WrapMode.Normal,cc.WrapMode.Loop,cc.WrapMode.PingPong];return i.wrapMode=a[n.wrapMode],n.funcs&&(i.events=n.funcs.map(function(e){return{frame:t.length/6*e[0],func:"callback",params:[e[1],e[2]]}})),i},t.prototype.getNpcAnima=function(e,t){var n=this;if(e>100&&e<200)return this.getAnimalAnima(e,t);var i=["walk","attack","defeat","hit"],a="char_"+p.Utils.getNumberOn3Str(e)+"_"+i[t];return[s.CharAnimaType.hit,s.CharAnimaType.atk].includes(t)&&e>90&&e<100&&(a="char_"+e+"_"+i[t]),new Promise(function(i){if(n._Animation[a])i(n._Animation[a]);else{var o=[];if(e<200)for(var r=[5,5,5,4],l=0;l<r[t];l++){var c=a+(0==(d=l)?"":d);o.push(n._Atlas[s.ResType.char].getSpriteFrame(c))}else for(r=[4,4,4,3],l=0;l<4;l++){var d,u="char ("+(d=l+4*(e-201)+1)+")";o.push(n._Atlas[s.ResType.char].getSpriteFrame(u))}var h=n.createClip(a,o,null);n._Animation[a]=h,i(h)}})},t.prototype.getAnimalAnima=function(e,t){var n=this,i="char_"+p.Utils.getNumberOn3Str(e)+"_"+["walk","attack","defeat","hit","idle"][t];return new Promise(function(a){if(n._Animation[i])a(n._Animation[i]);else{var o=[];[[3,4],[5,6,7],[8,9],[8,9],[1,2]][t].forEach(function(t){var i="char_"+e+"_"+t;o.push(n._Atlas[s.ResType.char].getSpriteFrame(i))});var r=n.createClip(i,o,null);n._Animation[i]=r,a(r)}})},t._instance=null,n=o([m],t)}(cc.Component));n.default=g,cc._RF.pop()},{"../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./json_manager":"json_manager","./main_manager":"main_manager","./pool_manager":"pool_manager"}],reward_tip_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"0ddc4cO8eBEy7Iv5xl8ph1N","reward_tip_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.labLanList=[],this.rtLabel=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.labLanList[0]=null===(t=cc.find("content/labLanList0",e))||void 0===t?void 0:t.getComponent(cc.Label),this.labLanList[1]=null===(n=cc.find("content/labLanList1",e))||void 0===n?void 0:n.getComponent(cc.Label),this.rtLabel=null===(i=cc.find("content/rtLabel",e))||void 0===i?void 0:i.getComponent(cc.RichText),this.svMain=null===(a=cc.find("content/svMain",e))||void 0===a?void 0:a.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.labLanList=[],this.rtLabel=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],reward_tip_ui:[function(e,t,n){"use strict";cc._RF.push(t,"ba3f1+7tAdCUbTV1v7wsUfI","reward_tip_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_choose"),l=e("../manager/action_manager"),s=e("../manager/audio_manager"),c=e("../manager/language_manager"),d=e("../manager/pool_manager"),u=e("../ui_view/panel/reward_tip_ui_view"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new u.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u83b7\u5f97\u5956\u52b1","\u70b9\u51fb\u7ee7\u7eed"];e.forEach(function(e,n){e.string=c.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this)},t.prototype.showUI=function(e,t){var n=this;s.default.instance.playAudio("usePosion"),l.default.instance.fadeShowDialog(this._view.content),d.default.instance.removeObjByContainer(this._view.nodeContainer),this._view.svMain.scrollToTop(),e.forEach(function(e){d.default.instance.createObjectByName("itemChoose",n._view.nodeContainer).getComponent(r.default).initByNormalAmont(e,function(){})}),this._view.rtLabel.string=t,this.setRewardNum(e.length)},t.prototype.hideUI=function(){s.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.setRewardNum=function(e){var t=this._view.nodeContainer.getComponent(cc.Layout);t.resizeMode=cc.Layout.ResizeMode.CONTAINER,e<=4?(this._view.svMain.enabled=!1,this._view.nodeContainer.y=0,t.type=cc.Layout.Type.HORIZONTAL,t.spacingX=4):(this._view.svMain.enabled=!0,this._view.nodeContainer.y=0,t.type=cc.Layout.Type.GRID,t.spacingX=4,t.spacingY=4)},t.instance=null,n=o([p],t)}(cc.Component));n.default=f,cc._RF.pop()},{"../item/item_choose":"item_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../ui_view/panel/reward_tip_ui_view":"reward_tip_ui_view"}],sale_choose_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"01ae6SqLR9HJ4242nmU1Umr","sale_choose_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.btnOrder=null,this.btnSelectTag=null,this.labOrder=null,this.labLanList=[],this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeSubMenu=cc.find("content/nodeSubMenu",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.itemTag=cc.find("content/nodeSubMenu/itemTag",e),this.itemTag=cc.find("content/nodeSubMenu/itemTag",e),this.itemTag=cc.find("content/nodeSubMenu/itemTag",e),this.itemTag=cc.find("content/nodeSubMenu/itemTag",e),this.btnOrder=null===(t=cc.find("content/btnOrder",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnSelectTag=null===(n=cc.find("content/btnSelectTag",e))||void 0===n?void 0:n.getComponent(cc.Button),this.labOrder=null===(i=cc.find("content/btnOrder/labOrder",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labLanList[0]=null===(a=cc.find("content/btnSelectTag/labLanList0",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labLanList[1]=null===(o=cc.find("content/labLanList1",e))||void 0===o?void 0:o.getComponent(cc.Label),this.svMain=null===(r=cc.find("content/svMain",e))||void 0===r?void 0:r.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.btnOrder=null,this.btnSelectTag=null,this.labOrder=null,this.labLanList=[],this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],sale_choose_ui:[function(e,t,n){"use strict";cc._RF.push(t,"e9a9cU6U7xMZKHmJPBYjX0e","sale_choose_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l=e("../item/item_sale_choose"),s=e("../manager/action_manager"),c=e("../manager/audio_manager"),d=e("../manager/dynamic_data_manager"),u=e("../manager/json_manager"),h=e("../manager/language_manager"),p=e("../manager/pool_manager"),f=e("../manager/resources_manager"),m=e("../manager/sale_manager"),g=e("../manager/shop_manager"),_=e("../manager/ui_manager"),v=e("../ui_view/panel/sale_choose_ui_view"),y=e("../utils/config"),b=e("../utils/enum"),w=e("./select_tag_ui");(function(e){e[e.default=0]="default",e[e.need=1]="need",e[e.price=2]="price",e[e.reward=3]="reward",e[e.num=4]="num"})(r||(r={}));var C=cc._decorator,S=C.ccclass,L=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new v.default,t.index=0,t.curType=0,t._orderType=r.default,t.showTimer=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u7b5b\u9009","\u6446\u644a\u9009\u62e9"];e.forEach(function(e,n){e.string=h.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeSubMenu.children.forEach(function(t,n){t.on("click",function(){c.default.instance.playAudio("switch"),e.onChooseType(n)},e)}),this._view.btnOrder.node.on("click",this.onClickOrder,this),this._view.btnSelectTag.node.on("click",this.onClickSelectTag,this)},t.prototype.showUI=function(e){this.index=e,s.default.instance.popOut(this._view.content,this._view.nodeMask),this._orderType=r.default,this.refreshSelectContainer()},t.prototype.refreshList=function(){var e=this;p.default.instance.removeObjByContainer(this._view.nodeContainer),this._view.nodeSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(b.ResType.main,n==e.curType?"ui-UI_Flat_Slot_01_Selected":"ui-UI_Flat_Slot_02_Available")});var t=[],i=d.default.instance.userTagData[b.SelectTagType.sale];this._view.labOrder.string=h.default.GetText(["\u6392\u5e8f","\u4eba\u6c14\u2193","\u4ef7\u503c\u2193","\u51fa\u8d27\u5956\u52b1","\u6570\u91cf"][this._orderType]);for(var a=0;a<d.default.instance.itemDepot.length;a++){var o=d.default.instance.itemDepot[a].id;if(g.ShopMgr.instance.getItemCanSell(o)){var s=u.default.instance.getDataByName("item")[d.default.instance.itemDepot[a].id];(0==i[this.curType]||s.type&&s.type.includes(i[this.curType]))&&t.push(a)}}var c={};t.forEach(function(e){var t=d.default.instance.itemDepot[e];c[t.id]?c[t.id].push(t):c[t.id]=[t]});var v=Object.keys(c).map(function(e){return+e});switch(this._orderType){case r.price:v=v.sort(function(e,t){var n=u.default.instance.getDataByName("item")[e];return u.default.instance.getDataByName("item")[t].price-n.price});break;case r.need:v=v.sort(function(e,t){var n=1,i=1;c[e].forEach(function(e){e.quality>n&&(n=e.quality)}),c[t].forEach(function(e){e.quality>i&&(i=e.quality)});var a=m.default.instance.getItemNeed({id:e,num:1,quality:n});return m.default.instance.getItemNeed({id:t,num:1,quality:i})-a});break;case r.reward:v=v.sort(function(e,t){var n=0,i=0,a=d.default.instance.allSaleData.itemSaleData[e],o=d.default.instance.allSaleData.itemSaleData[t],r=u.default.instance.getDataByName("item")[e],l=u.default.instance.getDataByName("item")[t];return(!r.levelNeedNum||a>=r.levelNeedNum)&&(n=1),(!l.levelNeedNum||o>=l.levelNeedNum)&&(i=1),n-i});break;case r.num:v=v.sort(function(e,t){var n=0,i=0;return c[e].forEach(function(e){n+=e.num}),c[t].forEach(function(e){i+=e.num}),i-n})}var y=0;0!=v.length&&(this.showTimer&&clearInterval(this.showTimer),this.showTimer=setInterval(function(){_.default.instance.checkUIIsOpen(n)&&e._view.content.activeInHierarchy&&p.default.instance.createObjectByName("itemSaleChoose",e._view.nodeContainer).getComponent(l.default).init(c[v[y]],e.onChoose.bind(e)),++y>=v.length&&clearInterval(e.showTimer)},20))},t.prototype.onChoose=function(e){m.default.instance.onUpItemAmount(e,this.index),this.hideUI()},t.prototype.hideUI=function(){c.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onChooseType=function(e){this.curType=e,this.refreshList()},t.prototype.onClickOrder=function(){c.default.instance.playAudio("switch"),this._orderType++,this._orderType>4&&(this._orderType=0),this.refreshList()},t.prototype.onClickSelectTag=function(){_.default.instance.openUI(w.default,{name:y.Config.uiName.selectTagUI,param:[this._view.btnSelectTag.node.y,b.SelectTagType.sale]},501)},t.prototype.refreshSelectContainer=function(){this._view.nodeSubMenu.children.forEach(function(e,t){var n=d.default.instance.userTagData[b.SelectTagType.sale][t];void 0!==n?(e.active=!0,e.getChildByName("label").getComponent(cc.Label).string=h.default.GetText("ItemTypeName"+n)):e.active=!1}),this.onChooseType(0)},t.instance=null,n=o([S],t)}(cc.Component));n.default=L,cc._RF.pop()},{"../item/item_sale_choose":"item_sale_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../manager/shop_manager":"shop_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/sale_choose_ui_view":"sale_choose_ui_view","../utils/config":"config","../utils/enum":"enum","./select_tag_ui":"select_tag_ui"}],sale_data:[function(e,t,n){"use strict";cc._RF.push(t,"c4d43HWMDFLE7rCtFV0mPi3","sale_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],sale_manager:[function(e,t,n){"use strict";cc._RF.push(t,"33c62GA1vxDCYQLVkoO+PIT","sale_manager"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../interface/item_amount"),a=e("../item/item_sale"),o=e("../ui/menu_ui"),r=e("../ui/sale_ui"),l=e("../utils/emmiter"),s=e("../utils/enum"),c=e("../utils/game_config"),d=e("../utils/message"),u=e("../utils/utils"),h=e("./audio_manager"),p=e("./dynamic_data_manager"),f=e("./friend_manager"),m=e("./game_manager"),g=e("./json_manager"),_=e("./language_manager"),v=e("./plan_manager"),y=e("./ui_manager"),b=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(e){void 0===e&&(e=0),p.default.instance.allSaleData={maxSale:e,list:[],itemSaleData:{},saleRate:{},saleBuff:{},recipeList:[2002,2001,2007,2151,2159,2253,2301]};for(var t=0;t<p.default.instance.allSaleData.maxSale;t++)p.default.instance.allSaleData.list.push({index:t,item:null,autoUp:!1,autoNum:0})},e.prototype.onUpdate=function(){},e.prototype.onDayBy=function(){for(var e,t=function(t){var i=p.default.instance.allSaleData.list[t].item;if(i){var a=g.default.instance.getDataByName("item")[i.id];if((null===(e=a.food)||void 0===e?void 0:e.expire)&&!m.default.instance.checkHaveBuff(2559)){var o=Math.ceil(i.num*a.food.expire/100);o>0&&(p.default.instance.allSaleData.list[t].item.num-=o,l.Emitter.fire(d.MessageType.onFoodExprie,i.id,o),l.Emitter.fire(d.MessageType.addDairy,s.DairyRtType.onFoodExprie,{id:i.id,num:o})),0!=p.default.instance.allSaleData.list[t].item.num||p.default.instance.allSaleData.list[t].autoUp||(p.default.instance.allSaleData.list[t].item=null)}}if(i&&p.default.instance.allSaleData.list[t].autoUp){var r=0,c=p.default.instance.itemDepot.find(function(e){return e.id==i.id&&e.quality==i.quality});c&&(r=Math.min(c.num,p.default.instance.allSaleData.list[t].autoNum-p.default.instance.allSaleData.list[t].item.num))>0&&n.onUpItemAmount({id:i.id,quality:i.quality,num:r},t)}},n=this,i=0;i<p.default.instance.allSaleData.list.length;i++)t(i);for(var a in p.default.instance.allSaleData.saleRate)p.default.instance.allSaleData.saleRate[a][0]*=.75,p.default.instance.allSaleData.saleRate[a][1]*=.75;r.default.instance.refreshList(),r.default.instance.refreshLabel()},e.prototype.onUpItemAmount=function(e,t){if(p.default.instance.onCost(e),p.default.instance.allSaleData.list[t]||cc.log(p.default.instance.allSaleData.list),p.default.instance.allSaleData.list[t].item){var n=p.default.instance.allSaleData.list[t].item;n.id==e.id&&n.quality==e.quality?n.num+=e.num:cc.log(p.default.instance.allSaleData.list)}else p.default.instance.allSaleData.list[t].item=e;r.default.instance.refreshList()},e.prototype.onDownItemAmount=function(e){var t=p.default.instance.allSaleData.list[e].item,n=g.default.instance.getDataByName("item")[t.id];if(t.num>0){if(n.food&&n.food.expire&&!m.default.instance.checkHaveBuff(2559)){var i=Math.ceil(t.num*n.food.expire/100);return void y.default.instance.LoadMessageBox(_.default.GetText("\u786e\u8ba4\u4e0b\u67b6"),_.default.GetText("\u786e\u8ba4\u4e0b\u67b6\u63d0\u793a",i),function(n){n&&(p.default.instance.onReward({id:t.id,num:t.num-i,quality:t.quality}),p.default.instance.allSaleData.list[e].item=null,p.default.instance.allSaleData.list[e].autoNum=0,p.default.instance.allSaleData.list[e].autoUp=!1,r.default.instance.refreshList())})}p.default.instance.onReward(t)}p.default.instance.allSaleData.list[e].item=null,p.default.instance.allSaleData.list[e].autoNum=0,p.default.instance.allSaleData.list[e].autoUp=!1,r.default.instance.refreshList()},e.prototype.onSaleItem=function(e,t){void 0===t&&(t=1);var n=p.default.instance.allSaleData,i=n.list[e].item.id,a=g.default.instance.getDataByName("item")[i],o=this.getItemPrice(n.list[e].item);p.default.instance.money+=o*t,n.list[e].item.num-=t;var c=n.list[e].item.quality;n.list[e].item.num<=0&&!n.list[e].autoUp&&(n.list[e].item=null),r.default.instance.refreshList();var h=p.default.instance.allSaleData.itemSaleData[i];if(a.levelNeedNum&&h<a.levelNeedNum&&h+t>=a.levelNeedNum&&this.onSaleItemLevelMax(i,e),(a.type.includes(s.Itemtype.animal)||a.type.includes(s.Itemtype.crop))&&(p.default.instance.shopData.unlockItem.includes(i)||p.default.instance.shopData.unlockItem.push(i)),(a.type.includes(s.Itemtype.monster)||a.type.includes(s.Itemtype.egg))&&(p.default.instance.shopData.advUnlockItem.includes(i)||p.default.instance.shopData.advUnlockItem.push(i)),n.saleRate[i]?p.default.instance.shopData.townLv+1<=5&&(n.saleRate[i][0]>-50&&(n.saleRate[i][0]-=.3),n.saleRate[i][1]>-100&&(n.saleRate[i][1]-=1/(m.default.instance.getYear()+1))):n.saleRate[i]=[0,0],u.Utils.luckChance(m.default.instance.getValueByStr("saleAddExploreChance"))){var f=v.PlanMgr.instance.getMaxMap();p.default.instance.planData.explore++,f<v.PlanMgr.instance.getMaxMap()&&l.Emitter.fire(d.MessageType.addDairy,s.DairyRtType.newMap)}u.Utils.luckChance(m.default.instance.getValueByStr("saleAddMeadowChance"))&&p.default.instance.meadowData.food++,l.Emitter.fire(d.MessageType.onSaleItem,i,t,o,c)},e.prototype.onSaleItemLevelMax=function(e,t){var n=g.default.instance.getDataByName("item")[e];switch(n.levelReward[0]){case s.LevelupRewardType.item:var i={id:n.levelReward[1],num:1,quality:n.rare||1};p.default.instance.onReward(i),o.default.instance.showReward(s.PageType.sale,[i],r.default.instance._view.nodeContainer.children[t]);break;case s.LevelupRewardType.newOne:p.default.instance.allFriendData.friendMap[n.levelReward[1]]?f.FriendMgr.instance.onAddFriendLove(n.levelReward[1],100):f.FriendMgr.instance.addFriend(n.levelReward[1],1)}l.Emitter.fire(d.MessageType.addDairy,s.DairyRtType.saleLevelup,{id:e})},e.prototype.checkCanSale=function(e){return!!p.default.instance.allSaleData.list[e].item&&p.default.instance.allSaleData.list[e].item.num>0},e.prototype.onChanceAuto=function(e){var t=p.default.instance.allSaleData.list[e];t.item&&(0==t.item.num&&t.autoUp?this.onDownItemAmount(e):t.autoUp=!t.autoUp)},e.prototype.onChangeAutoNum=function(e,t){var n=p.default.instance.allSaleData.list[e];(t=Math.floor(t))<0&&(t=0),n.autoNum=t},e.prototype.getAllSaleNeed=function(){for(var e=0,t=0;t<p.default.instance.allSaleData.list.length;t++){var n=p.default.instance.allSaleData.list[t];e+=20,this.checkCanSale(t)&&(e+=Math.min(n.item.num,100),e+=this.getItemNeed(n.item,!0))}return e/100},e.prototype.getItemNeed=function(e,t){void 0===t&&(t=!1);for(var n=p.default.instance.allSaleData.saleRate[e.id],i=n?n[1]:0,a=g.default.instance.getDataByName("item")[e.id],o=0;o<a.type.length;o++){var r=a.type[o];i+=m.default.instance.getValueByStr("type"+r+"Need")}if(a.food)i+=25+5*e.quality,1==a.food.season[m.default.instance.getSeason()]?i+=50:-1==a.food.season[m.default.instance.getSeason()]&&m.default.instance.checkHaveBuff(2558)&&(i/=3);else if(a.type&&a.type.includes(s.Itemtype.crop)){var l=g.default.instance.getDataByName("item")[e.id+200];i+=15+6*e.quality,-1==l.seed.season[m.default.instance.getSeason()]&&(i+=35)}else i+=5+10*e.quality;if(t)for(o=0;o<p.default.instance.allSaleData.list.length;o++){var c=p.default.instance.allSaleData.list[o];if(this.checkCanSale(o)&&c.item.id!=e.id)for(var d=g.default.instance.getDataByName("item")[c.item.id],u=0;u<a.type.length;u++)d.type.includes(a.type[u])&&(i+=5)}return Math.round(i)},e.prototype.getCostomerCold=function(){var e=10/this.getAllSaleNeed();return(e=Math.pow(e,.85))<.1&&(e=.1),e*((75+u.Utils.getRandomNumber(50))/100)},e.prototype.getItemPrice=function(e){for(var t=g.default.instance.getDataByName("item")[e.id],n=0,i=0,a=0;a<t.type.length;a++){var o=t.type[a];n+=m.default.instance.getValueByStr("type"+o+"Price")}e.quality>3&&(i=m.default.instance.getValueByStr("qualityHighPrice"));var r=m.default.instance.getValueByStr("salePrice"),l=p.default.instance.allSaleData.saleRate[e.id],s=(100+n+i+r)/100*((100+(l?l[0]:0))/100)*t.price*c.GameConfig.QualityDouble.sale[e.quality];return Math.floor(s)},e.prototype.onCostomerBuyItem=function(t){var n=this,l=!1,c=0;if(p.default.instance.allSaleData.list.forEach(function(t,i){if(n.checkCanSale(i)){var o=n.getItemNeed(t.item),s=Math.floor(o/100);o%=100,u.Utils.luckChance(o)&&s++,m.default.instance.checkHaveSkill(6)&&u.Utils.luckChance(10)&&s++,12==p.default.instance.recordData.guide&&u.Utils.luckChance(50)&&0==s&&(s=1),(s=Math.min(s,t.item.num))>0&&(l=!0,c+=s,e.instance.onSaleItem(i,s),y.default.instance.checkUIIsOpen(r.default)&&(p.default.instance.allSaleData.list[i].item?r.default.instance._view.nodeContainer.children[i].getComponent(a.default).onSell():r.default.instance._view.nodeContainer.children[i].getComponent(a.default).onSoldOut()))}}),l){for(var d=[],f=0;f<c;f++)d.push({type:i.RewardType.money,id:1});o.default.instance.showReward(s.PageType.sale,d,t.node),r.default.instance._view.content.active&&h.default.instance.playAudio("key_pickup")}},e.prototype.addBuff=function(e,t){p.default.instance.allSaleData.saleBuff[e]?p.default.instance.allSaleData.saleBuff[e]+=t:p.default.instance.allSaleData.saleBuff[e]=t,l.Emitter.fire(d.MessageType.buffAlert)},e.prototype.checkHaveFree=function(){return p.default.instance.allSaleData.list.findIndex(function(e){return null==e.item})},e.prototype.checkHaveSaleReward=function(e){var t=g.default.instance.getDataByName("item")[e],n=p.default.instance.allSaleData.itemSaleData[e]||0;return!!(t.levelNeedNum&&n<t.levelNeedNum)},e._instance=null,e}();n.default=b,cc._RF.pop()},{"../interface/item_amount":"item_amount","../item/item_sale":"item_sale","../ui/menu_ui":"menu_ui","../ui/sale_ui":"sale_ui","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","../utils/utils":"utils","./audio_manager":"audio_manager","./dynamic_data_manager":"dynamic_data_manager","./friend_manager":"friend_manager","./game_manager":"game_manager","./json_manager":"json_manager","./language_manager":"language_manager","./plan_manager":"plan_manager","./ui_manager":"ui_manager"}],sale_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"4a380s0lHBH5Y91G1MxPsyT","sale_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeSaleBG=null,this.nodeShadow=null,this.nodeChar=null,this.nodeBuff=null,this.nodeEffect=null,this.nodeContainer=null,this.itemBuff=null,this.itemBuff=null,this.itemBuff=null,this.itemBuff=null,this.btnMore=null,this.btnHelp=null,this.labCostomer=null,this.labBusiness=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o;this.content=cc.find("content",e),this.nodeSaleBG=cc.find("content/nodeSaleBG",e),this.nodeShadow=cc.find("content/nodeShadow",e),this.nodeChar=cc.find("content/nodeChar",e),this.nodeBuff=cc.find("content/nodeBuff",e),this.nodeEffect=cc.find("content/nodeEffect",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.itemBuff=cc.find("content/nodeBuff/itemBuff",e),this.itemBuff=cc.find("content/nodeBuff/itemBuff",e),this.itemBuff=cc.find("content/nodeBuff/itemBuff",e),this.itemBuff=cc.find("content/nodeBuff/itemBuff",e),this.btnMore=null===(t=cc.find("content/nodeBuff/btnMore",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnHelp=null===(n=cc.find("content/btnHelp",e))||void 0===n?void 0:n.getComponent(cc.Button),this.labCostomer=null===(i=cc.find("content/labCostomer",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labBusiness=null===(a=cc.find("content/labBusiness",e))||void 0===a?void 0:a.getComponent(cc.Label),this.svMain=null===(o=cc.find("content/svMain",e))||void 0===o?void 0:o.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeSaleBG=null,this.nodeShadow=null,this.nodeChar=null,this.nodeBuff=null,this.nodeEffect=null,this.nodeContainer=null,this.itemBuff=null,this.itemBuff=null,this.itemBuff=null,this.itemBuff=null,this.btnMore=null,this.btnHelp=null,this.labCostomer=null,this.labBusiness=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],sale_ui:[function(e,t,n){"use strict";cc._RF.push(t,"221d5BjRhJBqratz6Tf5D6E","sale_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../item/item_buff"),l=e("../item/item_costomer"),s=e("../item/item_sale"),c=e("../manager/action_manager"),d=e("../manager/audio_manager"),u=e("../manager/dynamic_data_manager"),h=e("../manager/effect_manager"),p=e("../manager/help_manager"),f=e("../manager/json_manager"),m=e("../manager/language_manager"),g=e("../manager/pool_manager"),_=e("../manager/record_manager"),v=e("../manager/resources_manager"),y=e("../manager/sale_manager"),b=e("../manager/ui_manager"),w=e("../ui_view/panel/sale_ui_view"),C=e("../utils/config"),S=e("../utils/emmiter"),L=e("../utils/enum"),A=e("../utils/message"),k=e("../utils/utils"),T=e("./all_buff_ui"),M=e("./help_ui"),R=e("./menu_ui"),P=cc._decorator,D=P.ccclass,B=(P.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new w.default,t._costomerTimer=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._bindEvent()},t.prototype._bindEvent=function(){S.Emitter.register(A.MessageType.dairyOpen,this.changeSvToShort,this),S.Emitter.register(A.MessageType.dairyClose,this.changeSvToLong,this),S.Emitter.register(A.MessageType.onSaleItem,this.refreshLabel,this),S.Emitter.register(A.MessageType.onComeCostomer,this.refreshLabel,this),S.Emitter.register(A.MessageType.buffAlert,this.refreshLabel,this),this._view.btnHelp.node.on("click",this.onClickHelp,this),this._view.btnMore.node.on("click",this.onClickMoreBuff,this)},t.prototype.changeSvToShort=function(){this._view.svMain.node.height=120,this._view.svMain.node.getChildByName("view").height=120},t.prototype.changeSvToLong=function(){this._view.svMain.node.height=200,this._view.svMain.node.getChildByName("view").height=200},t.prototype.showUI=function(){var e=this;c.default.instance.fadeShowDialog(this._view.content),_.default.instance.onOpenPage(L.PageType.sale),this.refreshList(),this.refreshLabel(),this._view.nodeChar.getComponent(cc.Animation).play("char_"+u.default.instance.char+"_idle");var t=1;u.default.instance.allSaleData.maxSale>3&&(t=2),u.default.instance.allSaleData.maxSale>7&&(t=3),v.default.instance.getBackGround("shop_"+t).then(function(t){e._view.nodeSaleBG.getComponent(cc.Sprite).spriteFrame=t}),1==R.default.instance._view.nodeBG.active?this.changeSvToShort():this.changeSvToLong()},t.prototype.refreshLabel=function(){this._view.labBusiness.string=m.default.GetText("\u8425\u4e1a\u989d")+u.default.instance.recordData.daySaleEarned,this._view.labCostomer.string=u.default.instance.recordData.daycostomerNum+m.default.GetText("\u4eba\u6b21"),this._view.nodeBuff.children.forEach(function(e){e.active=!1});var e=Object.keys(u.default.instance.allSaleData.saleBuff).filter(function(e){return u.default.instance.allSaleData.saleBuff[e]});e.length>4&&(this._view.nodeBuff.children[4].active=!0);for(var t=0;t<Math.min(4,e.length);t++)this._view.nodeBuff.children[t].active=!0,this._view.nodeBuff.children[t].getComponent(r.default).init(e[t])},t.prototype.realRefreshUI=function(){g.default.instance.removeObjByContainer(this._view.nodeContainer);for(var e=0;e<u.default.instance.allSaleData.maxSale;e++)g.default.instance.createObjectByName("itemSale",this._view.nodeContainer).getComponent(s.default).init(e)},t.prototype.hideUI=function(){c.default.instance.fadeHideDialog(this._view.content)},t.prototype.onUpdate=function(e){this._view.nodeSaleBG.children.forEach(function(t){t.getComponent(l.default).onUpdate(e)}),this._costomerTimer-=e,this._costomerTimer<=0&&u.default.instance.time<40&&(this._costomerTimer=y.default.instance.getCostomerCold(),this.onCreateCostomer());var t=0;u.default.instance.time<40?(t=100*(2-u.default.instance.time)/2)<0&&(t=0):(t=100*(u.default.instance.time-40)/5)>100&&(t=100),this._view.nodeShadow.opacity=t},t.prototype.onCreateCostomer=function(){var e=g.default.instance.createObjectByName("itemCostomer",this._view.nodeSaleBG),t=[];for(var n in f.default.instance.getDataByName("char")){var i=f.default.instance.getDataByName("char")[n];i.friend?u.default.instance.allFriendData.friendMap[+n]&&t.push(+n):i.monster||"null"==n||t.push(+n)}var a=k.Utils.getArrRandomItem(t);e.getComponent(l.default).init(a,Math.random()>.5),S.Emitter.fire(A.MessageType.onComeCostomer)},t.prototype.refreshList=function(){this._view.content.active&&p.default.instance.debounce(p.limitKeyType.saleRefresh,this.realRefreshUI.bind(this))},t.prototype.onClickMoreBuff=function(){d.default.instance.playAudio("switch"),b.default.instance.openUI(T.default,{name:C.Config.uiName.allBuffUI})},t.prototype.showNewEffect=function(){var e=this;setTimeout(function(){var t=e._view.nodeContainer.children[e._view.nodeContainer.children.length-1];h.default.instance.createPartical("build",k.Utils.getNodeUsePos(t),e._view.nodeEffect)},200)},t.prototype.onClickHelp=function(){b.default.instance.openUI(M.default,{name:C.Config.uiName.helpUI,param:[4]},301)},t.instance=null,n=o([D],t)}(cc.Component));n.default=B,cc._RF.pop()},{"../item/item_buff":"item_buff","../item/item_costomer":"item_costomer","../item/item_sale":"item_sale","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/effect_manager":"effect_manager","../manager/help_manager":"help_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/sale_ui_view":"sale_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils","./all_buff_ui":"all_buff_ui","./help_ui":"help_ui","./menu_ui":"menu_ui"}],sdk_mananger:[function(e,t,n){"use strict";cc._RF.push(t,"19ba9HZwKRF2ZflorFyKTMa","sdk_mananger"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../ui/login_ui"),a=e("./ad_manager"),o=e("./language_manager"),r=e("./ui_manager"),l=function(){function e(){this.oid=null,this.android=cc.sys.platform==cc.sys.ANDROID,this.ios=cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD,this.login=-1,this.across=!1,this.initSDK=!1}return e.getInatance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.init=function(){!this.across&&this.android?(this.login=0,this.checkLogin()):(this.login=1,i.default.instance.view.nodeTaptap.active=!1,i.default.instance.view.labLoading.string=o.default.GetText("\u70b9\u51fb\u5f00\u59cb"))},e.prototype.canLogin=function(){!this.across&&this.android&&(i.default.instance.view.nodeTaptap.active=!0,this.login=0)},e.prototype.loginFall=function(){i.default.instance.view.nodeTaptap.active=!0,this.login=0},e.prototype.initSdk=function(){var e=this;!this.initSDK&&this.android&&(setTimeout(function(){e.initSDK=!0,jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","InitSDK","()V")}),a.default.getInatance().initAd())},e.prototype.checkLogin=function(){0==this.login&&(cc.log("\u5f00\u59cb\u68c0\u67e5\u662f\u5426\u9700\u8981\u518d\u6b21\u767b\u5f55"),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","CheckNeedLogin","()V"))},e.prototype.userLogin=function(){0==this.login&&(this.login=2,i.default.instance.view.labLoading.string=o.default.GetText("\u767b\u9646\u4e2d"),cc.log("\u5f00\u59cb\u8c03\u7528\u767b\u5f55"),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","TaptapLogin","()V"))},e.prototype.loginData=function(e){var t=this;setTimeout(function(){t.login=1,cc.log("\u8fd4\u56de\u7684\u767b\u5f55\u4fe1\u606f",e),i.default.instance.view.nodeTaptap.active=!1,i.default.instance.view.labLoading.string=o.default.GetText("\u70b9\u51fb\u5f00\u59cb")})},e.prototype.loginFail=function(){this.login=0},e.prototype.trackEvent=function(){this.android||this.ios},e.prototype.getOnlyUserID=function(){var e=(new Date).getTime();return((1+Math.random())*e|0).toString(16)},e.prototype.setPasteBoard=function(e){this.android&&(r.default.instance.LoadTipsByStr("\u590d\u5236\u6570\u636e\u5230\u9762\u677f"),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setPasteBoardContent","(Ljava/lang/String;)V",e))},e.prototype.onBack=function(){},e._instance=null,e}();n.default=l,cc.sdkManager=l.getInatance(),cc._RF.pop()},{"../ui/login_ui":"login_ui","./ad_manager":"ad_manager","./language_manager":"language_manager","./ui_manager":"ui_manager"}],season_result_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"f1814oYZn5GQp1nmuqar/u8","season_result_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeAnima=null,this.nodeContent=null,this.nodeLoad=null,this.nodeNewList=[],this.nodeZhangSuccess=null,this.nodeZhang=null,this.btnRepayLoad=null,this.labList=[],this.labNumList=[],this.labRepayLoad=null,this.labRepayLoadPrice=null,this.sprList=[]}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v,y,b,w,C,S,L,A,k,T,M,R;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeAnima=cc.find("content/nodeAnima",e),this.nodeContent=cc.find("content/nodeContent",e),this.nodeLoad=cc.find("content/nodeContent/nodeLoad",e),this.nodeNewList[5]=cc.find("content/nodeContent/nodeNewList5",e),this.nodeNewList[4]=cc.find("content/nodeContent/nodeNewList4",e),this.nodeNewList[3]=cc.find("content/nodeContent/nodeNewList3",e),this.nodeNewList[2]=cc.find("content/nodeContent/nodeNewList2",e),this.nodeNewList[1]=cc.find("content/nodeContent/nodeNewList1",e),this.nodeNewList[0]=cc.find("content/nodeContent/nodeNewList0",e),this.nodeZhangSuccess=cc.find("content/nodeContent/nodeLoad/nodeZhangSuccess",e),this.nodeZhang=cc.find("content/nodeContent/nodeLoad/nodeZhang",e),this.btnRepayLoad=null===(t=cc.find("content/nodeContent/btnRepayLoad",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labList[9]=null===(n=cc.find("content/nodeContent/labList9",e))||void 0===n?void 0:n.getComponent(cc.Label),this.labList[0]=null===(i=cc.find("content/nodeContent/labList0",e))||void 0===i?void 0:i.getComponent(cc.Label),this.labNumList[0]=null===(a=cc.find("content/nodeContent/labNumList0",e))||void 0===a?void 0:a.getComponent(cc.Label),this.labList[1]=null===(o=cc.find("content/nodeContent/labList1",e))||void 0===o?void 0:o.getComponent(cc.Label),this.labNumList[1]=null===(r=cc.find("content/nodeContent/labNumList1",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labList[2]=null===(l=cc.find("content/nodeContent/labList2",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labNumList[2]=null===(s=cc.find("content/nodeContent/labNumList2",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labList[3]=null===(c=cc.find("content/nodeContent/labList3",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labNumList[3]=null===(d=cc.find("content/nodeContent/labNumList3",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labList[4]=null===(u=cc.find("content/nodeContent/labList4",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labNumList[4]=null===(h=cc.find("content/nodeContent/labNumList4",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labList[5]=null===(p=cc.find("content/nodeContent/labList5",e))||void 0===p?void 0:p.getComponent(cc.Label),this.labNumList[5]=null===(f=cc.find("content/nodeContent/labNumList5",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labRepayLoad=null===(m=cc.find("content/nodeContent/btnRepayLoad/labRepayLoad",e))||void 0===m?void 0:m.getComponent(cc.Label),this.labRepayLoadPrice=null===(g=cc.find("content/nodeContent/btnRepayLoad/labRepayLoadPrice",e))||void 0===g?void 0:g.getComponent(cc.Label),this.labList[6]=null===(_=cc.find("content/nodeContent/nodeLoad/labList6",e))||void 0===_?void 0:_.getComponent(cc.Label),this.labNumList[6]=null===(v=cc.find("content/nodeContent/nodeLoad/labNumList6",e))||void 0===v?void 0:v.getComponent(cc.Label),this.labList[7]=null===(y=cc.find("content/nodeContent/labList7",e))||void 0===y?void 0:y.getComponent(cc.Label),this.labNumList[7]=null===(b=cc.find("content/nodeContent/labNumList7",e))||void 0===b?void 0:b.getComponent(cc.Label),this.labList[8]=null===(w=cc.find("content/nodeContent/labList8",e))||void 0===w?void 0:w.getComponent(cc.Label),this.sprList[0]=null===(C=cc.find("content/nodeContent/sprList0",e))||void 0===C?void 0:C.getComponent(cc.Sprite),this.sprList[1]=null===(S=cc.find("content/nodeContent/sprList1",e))||void 0===S?void 0:S.getComponent(cc.Sprite),this.sprList[2]=null===(L=cc.find("content/nodeContent/sprList2",e))||void 0===L?void 0:L.getComponent(cc.Sprite),this.sprList[3]=null===(A=cc.find("content/nodeContent/sprList3",e))||void 0===A?void 0:A.getComponent(cc.Sprite),this.sprList[4]=null===(k=cc.find("content/nodeContent/sprList4",e))||void 0===k?void 0:k.getComponent(cc.Sprite),this.sprList[5]=null===(T=cc.find("content/nodeContent/sprList5",e))||void 0===T?void 0:T.getComponent(cc.Sprite),this.sprList[6]=null===(M=cc.find("content/nodeContent/nodeLoad/sprList6",e))||void 0===M?void 0:M.getComponent(cc.Sprite),this.sprList[7]=null===(R=cc.find("content/nodeContent/sprList7",e))||void 0===R?void 0:R.getComponent(cc.Sprite)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeAnima=null,this.nodeContent=null,this.nodeLoad=null,this.nodeNewList=[],this.nodeZhangSuccess=null,this.nodeZhang=null,this.btnRepayLoad=null,this.labList=[],this.labNumList=[],this.labRepayLoad=null,this.labRepayLoadPrice=null,this.sprList=[]},e}();n.default=i,cc._RF.pop()},{}],season_result_ui:[function(e,t,n){"use strict";cc._RF.push(t,"f92ddzFqPpNNbhoGgil0mPl","season_result_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/game_manager"),d=e("../manager/language_manager"),u=e("../manager/record_manager"),h=e("../manager/ui_manager"),p=e("../ui_view/panel/season_result_ui_view"),f=e("../utils/config"),m=e("../utils/emmiter"),g=e("../utils/message"),_=e("../utils/utils"),v=e("./talk_ui"),y=cc._decorator,b=y.ccclass,w=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new p.default,t.isClose=!1,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labList.concat(this._view.labRepayLoad),t=["\u5f53\u5b63\u6536\u652f","\u5f53\u5b63\u9500\u552e\u989d","\u5f53\u5b63\u4f5c\u7269\u6536\u83b7","\u670b\u53cb\u5de5\u8d44","\u9b54\u7269\u51fb\u8d25\u6570\u91cf","\u526f\u4ea7\u54c1\u6570\u91cf","\u672c\u6708\u5e94\u8fd8\u8d37\u6b3e","\u5f53\u524d\u6392\u540d","\u8fd8\u6b3e\u7ee7\u7eed","\u5b63\u5ea6\u603b\u7ed3","\u8fd8\u8d37\u6b3e"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this),this._view.btnRepayLoad.node.on("click",this.onClickPayLoad,this)},t.prototype.showUI=function(){var e=this;this._view.content.active=!0,this._view.nodeAnima.getComponent(cc.Animation).resume(),r.default.instance.playAnimation("record_open",this._view.nodeAnima),this._view.nodeContent.active=!1,this.isClose=!1,setTimeout(function(){e._view.content.active&&(e._view.nodeContent.active=!0)},400),this.refreshUI()},t.prototype.refreshUI=function(){var e,t=s.default.instance.recordData,n=0;for(var i in s.default.instance.allFriendData.friendMap)n+=s.default.instance.allFriendData.friendMap[i].salary;var a=s.default.instance.recordData.load.findIndex(function(e){return e>0});this._view.nodeLoad.active=-1!=a,this._view.nodeZhangSuccess.active=!1,this._view.nodeZhang.active=!1,this._view.btnRepayLoad.node.active=!1;var o=s.default.instance.recordData.yearScore+u.default.instance.getMonthScore(),r=u.default.instance.getYearRank(o);-1!=s.default.instance.recordData.load.findIndex(function(e){return 0==e})?(this._view.nodeLoad.active=-1!=a,this._view.nodeZhangSuccess.active=!0,e=d.default.GetText("\u5df2\u8fd8\u6e05")):-1!=a&&(e=[1e4,35e3,1e5][a]*Math.pow(1.05,s.default.instance.recordData.load[a]-1),e=Math.floor(e),this._view.labRepayLoadPrice.string="\uffe5"+e,this._view.labRepayLoadPrice.node.color=s.default.instance.money>=e?cc.Color.BLACK:cc.Color.RED,this._view.btnRepayLoad.node.active=!0);var l=["\uffe5"+(s.default.instance.money-_.Utils.getLastArrItem(t.historyRecord.money)).toFixed(0),"\uffe5"+t.monthSaleEarned.toFixed(0),t.monthHarvestNum+"\u4e2a","\uffe5"+n.toFixed(0),t.monthKillMonster+"\u4e2a",t.monthMeadowProduct+"\u4e2a",e+"",r+"\u540d"];this._view.labNumList.forEach(function(e,t){e.string=l[t]})},t.prototype.hideUI=function(){l.default.instance.playAudio("switch"),u.default.instance.checkOnEndOfYear(),this._view.content.active=!1},t.prototype.onClickPayLoad=function(){var e=this;l.default.instance.playAudio("click");var t=0,n=s.default.instance.recordData.load.findIndex(function(e){return e>0});if(-1!=n&&(t=[1e4,35e3,1e5][n]*Math.pow(1.05,s.default.instance.recordData.load[n]-1),t=Math.floor(t)),t>s.default.instance.money)h.default.instance.LoadTipsByStr(d.default.GetText("\u91d1\u94b1\u4e0d\u8db3"));else{this._view.btnRepayLoad.node.active=!1,c.default.instance.onPayLoad(),this._view.nodeZhang.active=!0,this._view.nodeZhang.getComponent(cc.Animation).play();var i=s.default.instance.recordData.load.findIndex(function(e){return 0==e}),a=[1001,1101,1201][i];h.default.instance.openUI(v.default,{name:f.Config.uiName.talkUI,param:[a]},301),1==i?s.default.instance.onReward({id:851,num:3,quality:1}):s.default.instance.onReward({id:852,num:1,quality:1}),m.Emitter.fire(g.MessageType.onPayLoad),setTimeout(function(){e._view.content.active&&(e.refreshUI(),e._view.nodeZhangSuccess.active=!0)},600)}},t.instance=null,n=o([b],t)}(cc.Component));n.default=w,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/language_manager":"language_manager","../manager/record_manager":"record_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/season_result_ui_view":"season_result_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/message":"message","../utils/utils":"utils","./talk_ui":"talk_ui"}],seed_choose_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"4b408tkcClAj4x+5wMsGNa1","seed_choose_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.btnMain=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnOrder=null,this.labOrder=null,this.labTitle=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeSubMenu=cc.find("content/nodeSubMenu",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.btnMain=null===(t=cc.find("content/nodeSubMenu/btnMain",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnHome=null===(n=cc.find("content/nodeSubMenu/btnHome",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnHome=null===(i=cc.find("content/nodeSubMenu/btnHome",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnMain=null===(a=cc.find("content/nodeSubMenu/btnMain",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnOrder=null===(o=cc.find("content/btnOrder",e))||void 0===o?void 0:o.getComponent(cc.Button),this.labOrder=null===(r=cc.find("content/btnOrder/labOrder",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labTitle=null===(l=cc.find("content/labTitle",e))||void 0===l?void 0:l.getComponent(cc.Label),this.svMain=null===(s=cc.find("content/svMain",e))||void 0===s?void 0:s.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeSubMenu=null,this.nodeContainer=null,this.btnMain=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnOrder=null,this.labOrder=null,this.labTitle=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],seed_choose_ui:[function(e,t,n){"use strict";cc._RF.push(t,"99898h7/opBJpHhGxtxcyfs","seed_choose_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l=e("../item/item_seed_choose"),s=e("../manager/action_manager"),c=e("../manager/audio_manager"),d=e("../manager/dynamic_data_manager"),u=e("../manager/field_manager"),h=e("../manager/game_manager"),p=e("../manager/json_manager"),f=e("../manager/language_manager"),m=e("../manager/pool_manager"),g=e("../manager/resources_manager"),_=e("../manager/ui_manager"),v=e("../ui_view/panel/seed_choose_ui_view"),y=e("../utils/enum"),b=e("./field_detail_ui"),w=e("./field_ui");(function(e){e[e.default=0]="default",e[e.timeUp=1]="timeUp",e[e.price=2]="price",e[e.water=3]="water"})(r||(r={}));var C=cc._decorator,S=C.ccclass,L=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new v.default,t.curType=0,t._orderType=r.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){this._view.labTitle.string=f.default.GetText("\u79cd\u5b50\u9009\u62e9");var e=["\u5e94\u5b63","\u56db\u5b63","\u4e0b\u5b63","\u5176\u4ed6"];this._view.nodeSubMenu.children.forEach(function(t,n){t.getChildByName("label").getComponent(cc.Label).string=f.default.GetText(e[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeSubMenu.children.forEach(function(t,n){t.on("click",function(){c.default.instance.playAudio("switch"),e.onChooseType(n)},e)}),this._view.btnOrder.node.on("click",this.onClickOrder,this)},t.prototype.showUI=function(e){this.param=e,s.default.instance.popOut(this._view.content,this._view.nodeMask),this._orderType=r.default,this.onChooseType(0)},t.prototype.refreshList=function(){var e=this;m.default.instance.removeObjByContainer(this._view.nodeContainer),this._view.nodeSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(y.ResType.main,n==e.curType?"ui-UI_Flat_Slot_01_Selected":"ui-UI_Flat_Slot_02_Available")});var t=[];this._view.labOrder.string=f.default.GetText(["\u6392\u5e8f","\u65f6\u957f\u2193","\u4ef7\u503c\u2193","\u6d47\u6c34\u2193"][this._orderType]);for(var n=0;n<d.default.instance.itemDepot.length;n++)if(d.default.instance.checkItemIsType(d.default.instance.itemDepot[n].id,y.Itemtype.seed)){var i=p.default.instance.getDataByName("item")[d.default.instance.itemDepot[n].id],a=h.default.instance.getSeason();if(0==this.curType){if(1!=i.seed.season[a])continue}else if(1==this.curType){if(i.seed.season.some(function(e){return e<0}))continue}else if(2==this.curType){if(1!=i.seed.season[(a+1)%4])continue}else if(1==i.seed.season[a])continue;t.push(n)}var o={};t.forEach(function(e){var t=d.default.instance.itemDepot[e];o[t.id]?o[t.id].push(t):o[t.id]=[t]});var s=Object.keys(o).map(function(e){return+e});switch(this._orderType){case r.price:s=s.sort(function(e,t){var n=p.default.instance.getDataByName("item")[e];return p.default.instance.getDataByName("item")[t].price-n.price});break;case r.timeUp:s=s.sort(function(e,t){var n=p.default.instance.getDataByName("item")[e],i=p.default.instance.getDataByName("item")[t];return n.seed.time-i.seed.time});break;case r.water:s=s.sort(function(e,t){var n=p.default.instance.getDataByName("item")[e];return p.default.instance.getDataByName("item")[t].seed.water-n.seed.water})}s.forEach(function(t){m.default.instance.createObjectByName("itemSeedChoose",e._view.nodeContainer).getComponent(l.default).init(o[t],e.onChoose.bind(e))})},t.prototype.onChoose=function(e){u.FieldMgr.instance.onSeeding(this.param.index,e),_.default.instance.checkUIIsOpen(b.default)&&b.default.instance.showUI(this.param.index),w.default.instance.refreshList(),this.hideUI()},t.prototype.hideUI=function(){c.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onChooseType=function(e){this.curType=e,this.refreshList()},t.prototype.onClickOrder=function(){c.default.instance.playAudio("switch"),this._orderType++,this._orderType>3&&(this._orderType=0),this.refreshList()},t.instance=null,n=o([S],t)}(cc.Component));n.default=L,cc._RF.pop()},{"../item/item_seed_choose":"item_seed_choose","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/field_manager":"field_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/seed_choose_ui_view":"seed_choose_ui_view","../utils/enum":"enum","./field_detail_ui":"field_detail_ui","./field_ui":"field_ui"}],select_tag_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"a1d53i8tYBLeLYh7dVhl3Aa","select_tag_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.itemSelectTag=null}return e.prototype.initView=function(e){this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeContainer=cc.find("content/nodeContainer",e),this.itemSelectTag=cc.find("content/nodeContainer/itemSelectTag",e)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.itemSelectTag=null},e}();n.default=i,cc._RF.pop()},{}],select_tag_ui:[function(e,t,n){"use strict";cc._RF.push(t,"540bcQQVltCV4ZwpgLvLTa5","select_tag_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/language_manager"),d=e("../ui_view/panel/select_tag_ui_view"),u=e("../utils/enum"),h=e("../utils/game_config"),p=e("./bag_ui"),f=e("./sale_choose_ui"),m=e("./shop_ui"),g=cc._decorator,_=g.ccclass,v=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new d.default,t._curScene=u.SelectTagType.bag,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent()},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeContainer.children.forEach(function(t,n){t.on("click",function(){e.onClickTag(n)}),t.active=h.GameConfig.CanUseTypeList.includes(n),t.getChildByName("label").getComponent(cc.Label).string=c.default.GetText("ItemTypeName"+n)})},t.prototype.showUI=function(e,t){l.default.instance.playAudio("sclick_4"),this._curScene=t,this._view.content.y=e,r.default.instance.popOut(this._view.content)},t.prototype.onClickTag=function(e){switch(s.default.instance.userTagData[this._curScene].unshift(e),s.default.instance.userTagData[this._curScene].length>=5&&s.default.instance.userTagData[this._curScene].pop(),this._curScene){case u.SelectTagType.bag:p.default.instance.refreshSelectContainer();break;case u.SelectTagType.sell:m.default.instance.refreshSelectContainer();break;case u.SelectTagType.sale:f.default.instance.refreshSelectContainer()}},t.prototype.hideUI=function(){l.default.instance.playAudio("sclick_2"),this._view.content.active=!1},t.instance=null,n=o([_],t)}(cc.Component));n.default=v,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/language_manager":"language_manager","../ui_view/panel/select_tag_ui_view":"select_tag_ui_view","../utils/enum":"enum","../utils/game_config":"game_config","./bag_ui":"bag_ui","./sale_choose_ui":"sale_choose_ui","./shop_ui":"shop_ui"}],setting_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"0672fMuZXlEu5PVx8EUAQ39","setting_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeMusicSlider=null,this.nodeVoiceSlider=null,this.nodeTalkSlider=null,this.btnAutoSeason=null,this.btnFestivalAutoPause=null,this.btnDayAutoPause=null,this.btnAvatar=null,this.btnSkipChestAnima=null,this.btnSkipEffect=null,this.btnMinField=null,this.btnTap=null,this.btnMore=null,this.labLanList=[],this.labVersion=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g,_,v;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeMusicSlider=cc.find("content/nodeMusicSlider",e),this.nodeVoiceSlider=cc.find("content/nodeVoiceSlider",e),this.nodeTalkSlider=cc.find("content/nodeTalkSlider",e),this.btnAutoSeason=null===(t=cc.find("content/btnAutoSeason",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnFestivalAutoPause=null===(n=cc.find("content/btnFestivalAutoPause",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnDayAutoPause=null===(i=cc.find("content/btnDayAutoPause",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnAvatar=null===(a=cc.find("content/btnAvatar",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnSkipChestAnima=null===(o=cc.find("content/btnSkipChestAnima",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnSkipEffect=null===(r=cc.find("content/btnSkipEffect",e))||void 0===r?void 0:r.getComponent(cc.Button),this.btnMinField=null===(l=cc.find("content/btnMinField",e))||void 0===l?void 0:l.getComponent(cc.Button),this.btnTap=null===(s=cc.find("content/btnTap",e))||void 0===s?void 0:s.getComponent(cc.Button),this.btnMore=null===(c=cc.find("content/btnMore",e))||void 0===c?void 0:c.getComponent(cc.Button),this.labLanList[0]=null===(d=cc.find("content/btnMore/labLanList0",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labVersion=null===(u=cc.find("content/labVersion",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[1]=null===(h=cc.find("content/labLanList1",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labLanList[2]=null===(p=cc.find("content/labLanList2",e))||void 0===p?void 0:p.getComponent(cc.Label),this.labLanList[3]=null===(f=cc.find("content/labLanList3",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labLanList[4]=null===(m=cc.find("content/labLanList4",e))||void 0===m?void 0:m.getComponent(cc.Label),this.labLanList[5]=null===(g=cc.find("content/labLanList5",e))||void 0===g?void 0:g.getComponent(cc.Label),this.labLanList[6]=null===(_=cc.find("content/labLanList6",e))||void 0===_?void 0:_.getComponent(cc.Label),this.labLanList[7]=null===(v=cc.find("content/labLanList7",e))||void 0===v?void 0:v.getComponent(cc.Label)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeMusicSlider=null,this.nodeVoiceSlider=null,this.nodeTalkSlider=null,this.btnAutoSeason=null,this.btnFestivalAutoPause=null,this.btnDayAutoPause=null,this.btnAvatar=null,this.btnSkipChestAnima=null,this.btnSkipEffect=null,this.btnMinField=null,this.btnTap=null,this.btnMore=null,this.labLanList=[],this.labVersion=null},e}();n.default=i,cc._RF.pop()},{}],setting_ui:[function(e,t,n){"use strict";cc._RF.push(t,"99988avVDFH5axjD8jfXyxp","setting_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/audio_manager"),s=e("../manager/dynamic_data_manager"),c=e("../manager/game_manager"),d=e("../manager/language_manager"),u=e("../manager/sdk_mananger"),h=e("../manager/storage_manager"),p=e("../manager/ui_manager"),f=e("../ui_view/panel/setting_ui_view"),m=e("../utils/config"),g=e("./field_ui"),_=e("./infomation_ui"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new f.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["bug\u53cd\u9988","\u8282\u65e5\u6d3b\u52a8\u6682\u505c","\u5b63\u5ea6\u7ed3\u7b97\u6682\u505c","\u6bcf\u65e5\u6682\u505c","\u8bbe\u7f6e","\u8df3\u8fc7\u5f00\u7bb1\u52a8\u753b","\u9690\u85cf\u7279\u6548","\u519c\u7530\u7565\u7f29\u6a21\u5f0f"];e.forEach(function(e,n){e.string=d.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.hideUI,this),this._view.btnAvatar.node.on("click",this.onClickAvatar,this),this._view.btnAutoSeason.node.on("click",this.onClickSeasonCheck,this),this._view.btnDayAutoPause.node.on("click",this.onClickBtnDaliyCheck,this),this._view.btnTap.node.on("click",this.onClickTaptap,this),this._view.btnMore.node.on("click",this.onClickMoreInfo,this),this._view.btnSkipEffect.node.on("click",this.onClickSkillEffect,this),this._view.btnMinField.node.on("click",this.onClickMinField,this),this._view.btnSkipChestAnima.node.on("click",this.onClickSkipChestAnima,this),this._view.btnFestivalAutoPause.node.on("click",this.onClickBtnFestivalCheck,this),this._view.labVersion.node.on("click",this.onClickVersion,this)},t.prototype.showUI=function(){r.default.instance.popOut(this._view.content,this._view.nodeMask),this.refreshUI()},t.prototype.refreshUI=function(){this._view.labVersion.string=m.Config.version,this._view.nodeTalkSlider.getComponent(cc.Slider).progress=s.default.instance.config.talk,this._view.nodeMusicSlider.getComponent(cc.Slider).progress=s.default.instance.config.music,this._view.nodeVoiceSlider.getComponent(cc.Slider).progress=s.default.instance.config.audio,this._view.btnAutoSeason.node.getChildByName("check").active=s.default.instance.config.seasonAutoPause,this._view.btnDayAutoPause.node.getChildByName("check").active=s.default.instance.config.dailyAutoPause,this._view.btnFestivalAutoPause.node.getChildByName("check").active=s.default.instance.config.festivalAutoPause,this._view.btnSkipChestAnima.node.getChildByName("check").active=s.default.instance.config.skipChestAnima,this._view.btnSkipEffect.node.getChildByName("check").active=s.default.instance.config.skipEffect,this._view.btnMinField.node.getChildByName("check").active=s.default.instance.config.minField},t.prototype.onChangeSlider=function(e,t){switch(+t){case 0:s.default.instance.config.audio=this._view.nodeVoiceSlider.getComponent(cc.Slider).progress;break;case 1:s.default.instance.config.music=this._view.nodeMusicSlider.getComponent(cc.Slider).progress,l.default.instance.changeBgmVolume(s.default.instance.config.music);break;case 2:s.default.instance.config.talk=this._view.nodeTalkSlider.getComponent(cc.Slider).progress}},t.prototype.onClickBtnDaliyCheck=function(){l.default.instance.playAudio("switch"),s.default.instance.config.dailyAutoPause=!s.default.instance.config.dailyAutoPause,this._view.btnDayAutoPause.node.getChildByName("check").active=s.default.instance.config.dailyAutoPause},t.prototype.onClickBtnFestivalCheck=function(){l.default.instance.playAudio("switch"),s.default.instance.config.festivalAutoPause=!s.default.instance.config.festivalAutoPause,this._view.btnFestivalAutoPause.node.getChildByName("check").active=s.default.instance.config.festivalAutoPause},t.prototype.onClickSeasonCheck=function(){l.default.instance.playAudio("switch"),s.default.instance.config.seasonAutoPause=!s.default.instance.config.seasonAutoPause,this._view.btnAutoSeason.node.getChildByName("check").active=s.default.instance.config.seasonAutoPause},t.prototype.onClickTaptap=function(){l.default.instance.playAudio("click"),cc.sys.openURL("taptap://taptap.com/app?app_id=500213&source=outer")},t.prototype.onClickMoreInfo=function(){l.default.instance.playAudio("click"),cc.sys.openURL("http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=dY72Y9OqtgfLRUA71oG316v40iM-r32O&authKey=oG2AQpIsszwZMuRo7ZbDvL%2FwU3PcAyOR9tzXAGnsDrZBZ85yQTzrYQ6qPZtRIowH&noverify=0&group_code=199958328")},t.prototype.onClickVersion=function(){var e=h.default.instance.loadDataByKey("userdata");u.default.getInatance().setPasteBoard(JSON.stringify(e))},t.prototype.hideUI=function(){l.default.instance.playAudio("paper2"),this._view.content.active=!1,c.default.instance.refreshGameSpd()},t.prototype.onClickAvatar=function(){l.default.instance.playAudio("click"),p.default.instance.openUI(_.default,{name:m.Config.uiName.infomationUI})},t.prototype.onClickSkillEffect=function(){l.default.instance.playAudio("switch"),s.default.instance.config.skipEffect=!s.default.instance.config.skipEffect,this._view.btnSkipEffect.node.getChildByName("check").active=s.default.instance.config.skipEffect},t.prototype.onClickSkipChestAnima=function(){l.default.instance.playAudio("switch"),s.default.instance.config.skipChestAnima=!s.default.instance.config.skipChestAnima,this._view.btnSkipChestAnima.node.getChildByName("check").active=s.default.instance.config.skipChestAnima},t.prototype.onClickMinField=function(){l.default.instance.playAudio("switch"),s.default.instance.config.minField=!s.default.instance.config.minField,this._view.btnMinField.node.getChildByName("check").active=s.default.instance.config.minField,g.default.instance.refreshList()},t.instance=null,n=o([y],t)}(cc.Component));n.default=b,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/game_manager":"game_manager","../manager/language_manager":"language_manager","../manager/sdk_mananger":"sdk_mananger","../manager/storage_manager":"storage_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/setting_ui_view":"setting_ui_view","../utils/config":"config","./field_ui":"field_ui","./infomation_ui":"infomation_ui"}],shop_manager:[function(e,t,n){"use strict";cc._RF.push(t,"7bb0eC0QOhOVq83g43RFezJ","shop_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ShopMgr=void 0;var i=e("../interface/all_shop_data"),a=e("../utils/emmiter"),o=e("../utils/enum"),r=e("../utils/game_config"),l=e("../utils/message"),s=e("../utils/utils"),c=e("./dynamic_data_manager"),d=e("./game_manager"),u=e("./json_manager"),h=e("./language_manager"),p=e("./plan_manager"),f=e("./sale_manager"),m=e("./ui_manager"),g=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(){c.default.instance.shopData={unlockItem:[],advUnlockItem:[],maxQuality:{},marketDataList:[],shopLv:0,advLv:0,homeLv:0,townLv:0}},e.prototype.getShopList=function(e,t){void 0===t&&(t=0);var n=[[o.Itemtype.seed],[o.Itemtype.fruit,o.Itemtype.vegetable],[o.Itemtype.seasoning,o.Itemtype.dsert,o.Itemtype.meal,o.Itemtype.food],[o.Itemtype.meta,o.Itemtype.animal],[o.Itemtype.fertilizer]],i=[],a=d.default.instance.getSeason()+1,r=this.getShopAddNum(),l=function(e){var t=u.default.instance.getDataByName("item")[e],n=Math.min(c.default.instance.shopData.maxQuality[+e]||1,c.default.instance.shopData.shopLv+2);if(t.shop)if(t.shop.includes(o.ShopOnType.all))i.push({id:+e,maxQuality:n});else if(t.shop.includes(a))i.push({id:+e,maxQuality:n});else for(var l=0;l<d.default.instance.getYear()+1;l++)t.shop.includes(10*l+a)&&i.push({id:+e,maxQuality:n});else c.default.instance.shopData.unlockItem.includes(+e)&&i.every(function(t){return t.id!=+e})&&r>0&&(r--,i.push({id:+e,maxQuality:n}))};for(var s in u.default.instance.getDataByName("item"))l(s);return-1!=e&&(i=i.filter(function(t){var i=u.default.instance.getDataByName("item")[t.id];if(i.type&&i.type.some(function(t){return n[e].includes(t)}))return!0})),0!=e&&i.forEach(function(e){e.id>500&&e.id<505?e.priceRate=300+300*d.default.instance.getYear():e.priceRate=180}),i},e.prototype.getShopAddNum=function(){switch(c.default.instance.shopData.shopLv){case 0:return 0;case 1:return 20;case 2:return 50;case 3:return 999}},e.prototype.getAdvShopAddNum=function(){switch(c.default.instance.shopData.advLv){case 0:return 0;case 1:return 20;case 2:return 50;case 3:return 999}},e.prototype.getRandom8ItemList=function(){var e=[o.Itemtype.seed,o.Itemtype.fruit,o.Itemtype.vegetable,o.Itemtype.seasoning,o.Itemtype.meta,o.Itemtype.fertilizer,o.Itemtype.food,o.Itemtype.animal],t=[],n=d.default.instance.getSeason()+1,i=this.getShopAddNum(),a=function(e){var a=Math.min(c.default.instance.shopData.maxQuality[+e]||1,c.default.instance.shopData.shopLv+2),r=u.default.instance.getDataByName("item")[e];if(r.shop)if(r.shop.includes(o.ShopOnType.all))t.push({id:+e,maxQuality:a});else if(r.shop.includes(n))t.push({id:+e,maxQuality:a});else for(var l=0;l<d.default.instance.getYear()+1;l++)r.shop.includes(10*l+n)&&t.push({id:+e,maxQuality:a});else c.default.instance.shopData.unlockItem.includes(+e)&&t.every(function(t){return t.id!=+e})&&i>0&&(i--,t.push({id:+e,maxQuality:a}))};for(var r in u.default.instance.getDataByName("item"))a(r);return t=t.filter(function(t){var n=u.default.instance.getDataByName("item")[t.id];if(n.type&&n.type.some(function(t){return e.includes(t)}))return!0}),s.Utils.getArrRandomItemsByNum(t.map(function(e){return e.id}),8)},e.prototype.getItemCanSell=function(e){var t=u.default.instance.getDataByName("item")[e];return t.price&&t.type&&!t.type.includes(o.Itemtype.kit)&&!t.type.includes(o.Itemtype.special)},e.prototype.onShopBuy=function(e,t,n){void 0===t&&(t=!1);var i=u.default.instance.getDataByName("item")[e.id];if(t){var o=this.getAdvShopPoint(e.id,e.quality);if(c.default.instance.point<o)return void m.default.instance.LoadTipsByStr(h.default.GetText("\u70b9\u6570\u4e0d\u8db3"));c.default.instance.point-=o*e.num}else{var r=this.getShopPrice(e.id,e.quality,n);if(c.default.instance.money<r)return void m.default.instance.LoadTipsByStr(h.default.GetText("\u91d1\u94b1\u4e0d\u8db3"));c.default.instance.money-=r*e.num}c.default.instance.onReward(e),i.seed&&a.Emitter.fire(l.MessageType.onBuySeed,e.id,e.num)},e.prototype.getAdvShopList=function(e){var t=[[o.Itemtype.seed],[o.Itemtype.meta],[o.Itemtype.monster],[o.Itemtype.egg],[o.Itemtype.weapon]],n=[],a=this.getAdvShopAddNum(),r=function(e){var t=u.default.instance.getDataByName("item")[e],r=Math.min(c.default.instance.shopData.maxQuality[+e]||1,c.default.instance.shopData.advLv+2);if(t.shop){t.shop.includes(o.ShopOnType.pointShop)&&n.push({id:+e,maxQuality:r,shopCurrency:i.CurrencyType.point});for(var l=0;l<p.PlanMgr.instance.getMaxMap();l++)t.shop.includes(l+101)&&n.push({id:+e,maxQuality:r,shopCurrency:i.CurrencyType.point});c.default.instance.allSaleData.saleBuff[107]&&t.shop.includes(o.ShopOnType.anniversary)&&n.push({id:+e,maxQuality:r,shopCurrency:i.CurrencyType.point})}else c.default.instance.shopData.advUnlockItem.includes(+e)&&n.every(function(t){return t.id!=+e})&&a>0&&(a--,n.push({id:+e,maxQuality:r,shopCurrency:i.CurrencyType.point}))};for(var l in u.default.instance.getDataByName("item"))r(l);return-1!=e&&(n=n.filter(function(n){var i=u.default.instance.getDataByName("item")[n.id];if(i.type&&i.type.some(function(n){return t[e].includes(n)}))return!0})),n},e.prototype.getAdvRandom6ItemList=function(){var e=[o.Itemtype.seed,o.Itemtype.meta,o.Itemtype.monster,o.Itemtype.egg,o.Itemtype.weapon],t=[],n=this.getAdvShopAddNum(),a=function(e){var a=u.default.instance.getDataByName("item")[e],r=Math.min(c.default.instance.shopData.maxQuality[+e]||1,c.default.instance.shopData.advLv+2);if(a.shop){a.shop.includes(o.ShopOnType.pointShop)&&t.push({id:+e,maxQuality:r,shopCurrency:i.CurrencyType.point});for(var l=0;l<p.PlanMgr.instance.getMaxMap();l++)a.shop.includes(l+101)&&t.push({id:+e,maxQuality:r,shopCurrency:i.CurrencyType.point});c.default.instance.allSaleData.saleBuff[107]&&a.shop.includes(o.ShopOnType.anniversary)&&t.push({id:+e,maxQuality:r,shopCurrency:i.CurrencyType.point})}else c.default.instance.shopData.advUnlockItem.includes(+e)&&t.every(function(t){return t.id!=+e})&&n>0&&(n--,t.push({id:+e,maxQuality:r,shopCurrency:i.CurrencyType.point}))};for(var r in u.default.instance.getDataByName("item"))a(r);return t=t.filter(function(t){var n=u.default.instance.getDataByName("item")[t.id];if(n.type&&n.type.some(function(t){return e.includes(t)}))return!0}),s.Utils.getArrRandomItemsByNum(t.map(function(e){return e.id}),6)},e.prototype.getFestivalShopItem=function(e){var t=[];for(var n in u.default.instance.getDataByName("item")){var i=u.default.instance.getDataByName("item")[n];i.shop&&i.shop.includes(500+e)&&t.push({id:+n,maxQuality:c.default.instance.shopData.maxQuality[+n]||1})}return t},e.prototype.onSellItem=function(e,t){var n=c.default.instance.itemDepot[e];c.default.instance.onCost({id:n.id,num:t,quality:n.quality});var i=Math.floor(f.default.instance.getItemPrice(n)*t/4);c.default.instance.money+=i},e.prototype.onSellItemByData=function(e){var t=Math.floor(f.default.instance.getItemPrice(e)*e.num/4);return c.default.instance.onCost({id:e.id,num:e.num,quality:e.quality}),c.default.instance.money+=t,t},e.prototype.getShopPrice=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=0);var i=u.default.instance.getDataByName("item")[e],a=i.price*r.GameConfig.QualityDouble.buy[t];return i.type&&i.type.includes(1)&&(a*=d.default.instance.getPrecentValueByStr("seedPrice")),Math.floor(a*(100+n)/100)},e.prototype.getAdvShopPoint=function(e,t){return void 0===t&&(t=1),u.default.instance.getDataByName("item")[e].point*r.GameConfig.QualityDouble.buy[t]*d.default.instance.getPrecentValueByStr("advShopPrice")},e.prototype.refreshMarketList=function(){var e=[],t=[[],[],[],[]];for(var n in u.default.instance.getDataByName("item")){var i=u.default.instance.getDataByName("item")[n];if(i.shop){if(i.shop.includes(o.ShopOnType.marketDay)){var a=s.Utils.getRandomNumber(c.default.instance.shopData.maxQuality[+n]-1||0);e.push({id:+n,maxQuality:c.default.instance.getRandomQuality(d.default.instance.getLuck(),a>2),maxNum:20*(d.default.instance.getYear()+1),priceRate:150})}for(var r=401;r<405;r++)if(i.shop.includes(r))for(var l=0;l<6-i.rare;l++)t[r-401].push(+n)}}var h=[4,10,3,2],p=[0,35,50,100],f=[10*(d.default.instance.getYear()+1),5*(d.default.instance.getYear()+1),d.default.instance.getYear()+1,1],m=function(n){s.Utils.getArrRandomItemsByNum(t[n],h[n]).forEach(function(t){var i=s.Utils.getRandomNumber(c.default.instance.shopData.maxQuality[+t]-1||0),a=c.default.instance.getRandomQuality(d.default.instance.getLuck(),i>2);n>2&&(a=1),e.push({id:+t,maxQuality:a,maxNum:f[n],priceRate:p[n]})})};for(l=0;l<4;l++)m(l);c.default.instance.shopData.marketDataList=e},e.prototype.onBuyMarket=function(e,t){var n=c.default.instance.shopData.marketDataList[e];if(n.maxNum<=0)m.default.instance.LoadTipsByStr(h.default.GetText("\u8be5\u5546\u54c1\u5df2\u552e\u7f44"));else{var i=this.getShopPrice(n.id,n.maxQuality,n.priceRate)*t;c.default.instance.money<=i?m.default.instance.LoadTipsByStr(h.default.GetText("\u91d1\u5e01\u4e0d\u8db3")):(n.maxNum-=t,c.default.instance.money-=i,c.default.instance.onReward({id:n.id,quality:n.maxQuality,num:t}))}},e._instance=null,e}();n.ShopMgr=g,cc._RF.pop()},{"../interface/all_shop_data":"all_shop_data","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","../utils/utils":"utils","./dynamic_data_manager":"dynamic_data_manager","./game_manager":"game_manager","./json_manager":"json_manager","./language_manager":"language_manager","./plan_manager":"plan_manager","./sale_manager":"sale_manager","./ui_manager":"ui_manager"}],shop_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"65855v/2uJLFbHIJwlj37pw","shop_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodeShopBackground=null,this.nodeShopOwner=null,this.nodeShopSubMenu=null,this.nodeSubMenu=null,this.nodeContainer=null,this.nodeSellContainer=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.btnSellOrder=null,this.btnSelectTag=null,this.btnAct=null,this.btnMain=null,this.btnHome=null,this.labLanList=[],this.labSellOrder=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p,f,m,g;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodeShopBackground=cc.find("content/nodePageList0/nodeShopBackground",e),this.nodeShopOwner=cc.find("content/nodePageList0/nodeShopOwner",e),this.nodeShopSubMenu=cc.find("content/nodePageList0/nodeShopSubMenu",e),this.nodeSubMenu=cc.find("content/nodePageList1/nodeSubMenu",e),this.nodeContainer=cc.find("content/nodePageList0/scrollview/view/nodeContainer",e),this.nodeSellContainer=cc.find("content/nodePageList1/svMain/view/nodeSellContainer",e),this.itemTag=cc.find("content/nodePageList1/nodeSubMenu/itemTag",e),this.itemTag=cc.find("content/nodePageList1/nodeSubMenu/itemTag",e),this.itemTag=cc.find("content/nodePageList1/nodeSubMenu/itemTag",e),this.itemTag=cc.find("content/nodePageList1/nodeSubMenu/itemTag",e),this.btnSellOrder=null===(t=cc.find("content/nodePageList1/btnSellOrder",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnSelectTag=null===(n=cc.find("content/nodePageList1/btnSelectTag",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnAct=null===(i=cc.find("content/nodeMenu/btnAct",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnMain=null===(a=cc.find("content/nodeMenu/btnMain",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnHome=null===(o=cc.find("content/nodeMenu/btnHome",e))||void 0===o?void 0:o.getComponent(cc.Button),this.labLanList[0]=null===(r=cc.find("content/nodePageList0/labLanList0",e))||void 0===r?void 0:r.getComponent(cc.Label),this.labLanList[1]=null===(l=cc.find("content/nodePageList0/labLanList1",e))||void 0===l?void 0:l.getComponent(cc.Label),this.labLanList[2]=null===(s=cc.find("content/nodePageList0/labLanList2",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labLanList[3]=null===(c=cc.find("content/nodePageList0/labLanList3",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[4]=null===(d=cc.find("content/nodePageList0/labLanList4",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labSellOrder=null===(u=cc.find("content/nodePageList1/btnSellOrder/labSellOrder",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[5]=null===(h=cc.find("content/nodePageList1/btnSelectTag/labLanList5",e))||void 0===h?void 0:h.getComponent(cc.Label),this.labLanList[6]=null===(p=cc.find("content/labLanList6",e))||void 0===p?void 0:p.getComponent(cc.Label),this.labLanList[7]=null===(f=cc.find("content/labLanList7",e))||void 0===f?void 0:f.getComponent(cc.Label),this.labLanList[8]=null===(m=cc.find("content/labLanList8",e))||void 0===m?void 0:m.getComponent(cc.Label),this.svMain=null===(g=cc.find("content/nodePageList1/svMain",e))||void 0===g?void 0:g.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodeShopBackground=null,this.nodeShopOwner=null,this.nodeShopSubMenu=null,this.nodeSubMenu=null,this.nodeContainer=null,this.nodeSellContainer=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.itemTag=null,this.btnSellOrder=null,this.btnSelectTag=null,this.btnAct=null,this.btnMain=null,this.btnHome=null,this.labLanList=[],this.labSellOrder=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],shop_ui:[function(e,t,n){"use strict";cc._RF.push(t,"28e49dwXdZExahkSP8JtOWs","shop_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l=e("../item/item_sell"),s=e("../item/item_shop"),c=e("../manager/action_manager"),d=e("../manager/audio_manager"),u=e("../manager/dynamic_data_manager"),h=e("../manager/json_manager"),p=e("../manager/language_manager"),f=e("../manager/pool_manager"),m=e("../manager/record_manager"),g=e("../manager/resources_manager"),_=e("../manager/sale_manager"),v=e("../manager/shop_manager"),y=e("../manager/ui_manager"),b=e("../ui_view/panel/shop_ui_view"),w=e("../utils/config"),C=e("../utils/enum"),S=e("../utils/game_config"),L=e("../utils/utils"),A=e("./select_tag_ui"),k=cc._decorator,T=k.ccclass;k.property,function(e){e[e.activityShop=0]="activityShop",e[e.shop=1]="shop",e[e.sell=2]="sell"}(r||(r={}));var M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new b.default,t._shopType=0,t._sellType=0,t._sellOrder=0,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u79cd\u5b50","\u852c\u83dc","\u8c03\u6599","\u6742\u7269","\u519c\u836f","\u7b5b\u9009","\u8d2d\u4e70","\u4f4e\u4ef7\u51fa\u552e","\u5546\u5e97"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.nodeMenu.children.forEach(function(t,n){t.on("click",function(){d.default.instance.playAudio("switch"),e.onClickPageBtn(n)},e)}),this._view.nodeShopSubMenu.children.forEach(function(t,n){t.on("click",function(){d.default.instance.playAudio("switch"),e.onChooseShopType(n)},e)}),this._view.nodeSubMenu.children.forEach(function(t,n){t.on("click",function(){d.default.instance.playAudio("switch"),e.onChooseSellType(n)},e)}),this._view.btnSellOrder.node.on("click",this.onClickSellOrder,this),this._view.btnSelectTag.node.on("click",this.onClickSelectTag,this)},t.prototype.showUI=function(){c.default.instance.popOut(this._view.content,this._view.nodeMask),this._shopType=0,this._sellType=0,this.onClickPageBtn(1),this.refreshShopItem(),m.default.instance.onOpenPage(C.PageType.shop)},t.prototype.hideUI=function(){d.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onClickPageBtn=function(e){switch(this._view.nodePageList.forEach(function(e){e.active=!1}),this._view.nodeMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(C.ResType.main,n==e?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")}),e){case r.activityShop:this._view.nodePageList[0].active=!0,this.refreshActivityShop();break;case r.shop:this._view.nodePageList[0].active=!0,this.refreshShop();break;case r.sell:this._view.nodePageList[1].active=!0,this.refreshSelectContainer()}},t.prototype.refreshShopItem=function(){var e=v.ShopMgr.instance.getRandom8ItemList();this._view.nodeShopBackground.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(C.ResType.main,L.Utils.getItemSpName(e[n]))})},t.prototype.refreshActivityShop=function(){},t.prototype.refreshShop=function(){var e=this;f.default.instance.removeObjByContainer(this._view.nodeContainer);var t=v.ShopMgr.instance.getShopList(this._shopType,0);this._view.nodeShopSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(C.ResType.main,n==e._shopType?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")});for(var n=0;n<t.length;n++)f.default.instance.createObjectByName("itemShop",this._view.nodeContainer).getComponent(s.default).init(n,t[n])},t.prototype.refreshSellPage=function(){var e=this;f.default.instance.removeObjByContainer(this._view.nodeSellContainer),this._view.nodeSubMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(C.ResType.main,n==e._sellType?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")});var t=[];this._view.labSellOrder.string=S.GameConfig.OrderStr[this._sellOrder];for(var n=u.default.instance.userTagData[C.SelectTagType.sell].map(function(e){return[e]}),i=0;i<u.default.instance.itemDepot.length;i++)if(v.ShopMgr.instance.getItemCanSell(u.default.instance.itemDepot[i].id)){var a=u.default.instance.itemDepot[i].id,o=h.default.instance.getDataByName("item")[a];(0==n[this._sellType][0]||o.type&&n[this._sellType]&&o.type.some(function(t){return n[e._sellType].includes(t)}))&&t.push(i)}switch(this._sellOrder){case C.OrderType.priceUp:t=t.sort(function(e,t){var n=u.default.instance.itemDepot[e],i=u.default.instance.itemDepot[t];return _.default.instance.getItemPrice(i)-_.default.instance.getItemPrice(n)});break;case C.OrderType.numUp:t=t.sort(function(e,t){var n=u.default.instance.itemDepot[e];return u.default.instance.itemDepot[t].num-n.num});break;case C.OrderType.qualityUp:t=t.sort(function(e,t){var n=u.default.instance.itemDepot[e];return u.default.instance.itemDepot[t].quality-n.quality});break;default:t=t.sort(function(e,t){var n=u.default.instance.itemDepot[e],i=u.default.instance.itemDepot[t];return n.id==i.id?n.quality-i.quality:t-e})}t.forEach(function(t){f.default.instance.createObjectByName("itemSell",e._view.nodeSellContainer).getComponent(l.default).init(t)})},t.prototype.onChooseShopType=function(e){this._shopType=e,this.refreshShop()},t.prototype.onChooseSellType=function(e){this._sellType=e,this.refreshSellPage()},t.prototype.onClickSellOrder=function(){d.default.instance.playAudio("switch"),this._sellOrder++,this._sellOrder>3&&(this._sellOrder=0),this.refreshSellPage()},t.prototype.onClickSelectTag=function(){y.default.instance.openUI(A.default,{name:w.Config.uiName.selectTagUI,param:[this._view.btnSelectTag.node.y,C.SelectTagType.sell]},501)},t.prototype.refreshSelectContainer=function(){this._view.nodeSubMenu.children.forEach(function(e,t){var n=u.default.instance.userTagData[C.SelectTagType.sell][t];void 0!==n?(e.active=!0,e.getChildByName("label").getComponent(cc.Label).string=p.default.GetText("ItemTypeName"+n)):e.active=!1}),this.onChooseSellType(0)},t.instance=null,n=o([T],t)}(cc.Component);n.default=M,cc._RF.pop()},{"../item/item_sell":"item_sell","../item/item_shop":"item_shop","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/record_manager":"record_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../manager/shop_manager":"shop_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/shop_ui_view":"shop_ui_view","../utils/config":"config","../utils/enum":"enum","../utils/game_config":"game_config","../utils/utils":"utils","./select_tag_ui":"select_tag_ui"}],skill_data:[function(e,t,n){"use strict";cc._RF.push(t,"d52f6WMc6lJo50YCJw2aXBx","skill_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],start_ui:[function(e,t,n){"use strict";cc._RF.push(t,"02da8FThxpNvLkufiukcbtd","start_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._bindEvent()},t.prototype._bindEvent=function(){},t.prototype.showUI=function(){this._view.content.active=!0},t.prototype.onClickStart=function(){this.hideUI()},t.prototype.hideUI=function(){},t.instance=null,n=o([l],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],storage_manager:[function(e,t,n){"use strict";cc._RF.push(t,"d53f9TVfFNEZIticNVTj+YP","storage_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../utils/config"),l=e("./dynamic_data_manager"),s=cc._decorator,c=s.ccclass,d=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return a(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!1,configurable:!0}),t.prototype.bindEvent=function(){},t.prototype.loadDataByKey=function(e){var t=cc.sys.localStorage.getItem(e);return t?JSON.parse(t):null},t.prototype.saveDataByKey=function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))},t.prototype.removeDataByKey=function(e){cc.sys.localStorage.removeItem(e)},t.prototype.loadPlayerData=function(){var e=this;return new Promise(function(t){var n=e.loadDataByKey("userdata");["char","money","point","day","time","rain","planData","itemDepot","allFriendData","allSaleData","allFieldData","meadowData","shopData","achievementData","recordData","_maxHealth","health","festivalData","userTagData","collectionData","workShopData"].forEach(function(e){l.default.instance[e]=n[e]}),t(n)})},t.prototype.savePlayerData=function(e,t){return void 0===e&&(e="userdata"),cc.sys.localStorage.setItem(e,JSON.stringify(t)),cc.log("\u6570\u636e\u4fdd\u5b58\u6210\u529f"),t},t.prototype.isFristPlay=function(){return!cc.sys.localStorage.getItem("isFirst")},t.prototype.saveGameData=function(){var e={};["char","money","point","day","time","rain","planData","itemDepot","allFriendData","allSaleData","allFieldData","meadowData","shopData","achievementData","recordData","_maxHealth","health","festivalData","userTagData","collectionData","workShopData"].forEach(function(t){e[t]=l.default.instance[t]}),e.time=0,this.savePlayerData("userdata",e),this.saveConfig()},t.prototype.saveConfig=function(){var e=l.default.instance.config;e.version=r.Config.version,this.saveDataByKey("config",e)},t._instance=null,n=o([c],t)}(cc.Component));n.default=d,cc._RF.pop()},{"../utils/config":"config","./dynamic_data_manager":"dynamic_data_manager"}],sv_dc_help:[function(e,t,n){"use strict";cc._RF.push(t,"6fe592NZI1HnrGNlClJ68Ty","sv_dc_help");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_view=null,t.checkTimer=null,t}return a(t,e),t.prototype.onLoad=function(){this.scroll_view=this.node.getComponent(cc.ScrollView),this.scroll_view.node.on("scrolling",this._event_update_opacity,this),this.scroll_view.content.on(cc.Node.EventType.CHILD_ADDED,this._event_update_opacity,this),this.scroll_view.content.on(cc.Node.EventType.CHILD_REMOVED,this._event_update_opacity,this),this.scroll_view.content.on(cc.Node.EventType.CHILD_REORDER,this._event_update_opacity,this)},t.prototype._get_bounding_box_to_world=function(e){var t=e._contentSize.width,n=e._contentSize.height,i=cc.rect(-e._anchorPoint.x*t,-e._anchorPoint.y*n,t,n);return e._calculWorldMatrix(),i.transformMat4(i,e._worldMatrix),i},t.prototype._check_collision=function(e){var t=this._get_bounding_box_to_world(this.scroll_view.content.parent),n=this._get_bounding_box_to_world(e);return t.width+=.5*t.width,t.height+=.5*t.height,t.x-=.25*t.width,t.y-=.25*t.height,t.intersects(n)},t.prototype._event_update_opacity=function(){var e=this;this.checkTimer||(this.checkTimer=setTimeout(function(){e.scroll_view.content.children.forEach(function(t){t.opacity=e._check_collision(t)?255:0}),e.checkTimer=null},50))},o([l],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],switch_mask_ui:[function(e,t,n){"use strict";cc._RF.push(t,"a8ae7qRdlZAar4rXAv2Sdl5","switch_mask_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.materaial=null,t.cb=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){n.instance=this;var e=this.node;this.materaial=e.getComponent(cc.Sprite).getMaterial(0),this.materaial.setProperty("amount",0),this.materaial.setProperty("size",[this.node.width,this.node.height]),this.materaial.setProperty("cellSize",75),this.materaial.setProperty("rotation",45),this.node.zIndex=999,this.node.active=!1},t.prototype.onSwitch=function(e){this.cb=e,this.startSwitch()},t.prototype.startSwitch=function(){var e=this;this.node.active=!0;var t=new Proxy({amount:0},{set:function(e,t,i){return e[t]=i,"amount"==t&&n.instance.materaial.setProperty("amount",i),!0}});cc.tween(t).to(.5,{amount:15}).call(function(){e.cb&&e.cb(),e.cb=null}).start()},t.prototype.endSwitch=function(){var e=this,t=new Proxy({amount:15},{set:function(e,t,i){return e[t]=i,"amount"==t&&n.instance.materaial.setProperty("amount",i),!0}});cc.tween(t).to(.6,{amount:0}).call(function(){e.node.active=!1}).start()},t.instance=null,n=o([l],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],talk_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"805e4FIMXhFMZti+mILx0XR","talk_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.btnSkip=null,this.labLanList=[],this.svMain=null}return e.prototype.initView=function(e){var t,n,i;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeContainer=cc.find("content/svMain/view/nodeContainer",e),this.btnSkip=null===(t=cc.find("content/btnSkip",e))||void 0===t?void 0:t.getComponent(cc.Button),this.labLanList[0]=null===(n=cc.find("content/btnSkip/labLanList0",e))||void 0===n?void 0:n.getComponent(cc.Label),this.svMain=null===(i=cc.find("content/svMain",e))||void 0===i?void 0:i.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeContainer=null,this.btnSkip=null,this.labLanList=[],this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],talk_ui:[function(e,t,n){"use strict";cc._RF.push(t,"8c3cbJiMQNB0J1+8yqzOJEk","talk_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,l=o.length;r<l;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../item/item_talk"),s=e("../item/item_talk_sys"),c=e("../manager/action_manager"),d=e("../manager/audio_manager"),u=e("../manager/dynamic_data_manager"),h=e("../manager/friend_manager"),p=e("../manager/json_manager"),f=e("../manager/language_manager"),m=e("../manager/pool_manager"),g=e("../manager/resources_manager"),_=e("../ui_view/panel/talk_ui_view"),v=e("../utils/emmiter"),y=e("../utils/enum"),b=e("../utils/message"),w=e("../utils/utils"),C=cc._decorator,S=C.ccclass,L=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new _.default,t.startId=0,t.curId=0,t.isTalk=!1,t.leftTalk=[],t.scrollTimer=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u8df3\u8fc7"];e.forEach(function(e,n){e.string=f.default.GetText(t[n])})},t.prototype._bindEvent=function(){this._view.nodeMask.on("click",this.onClickNext,this),this._view.btnSkip.node.on("click",this.onClickSkip,this)},t.prototype.onClickNext=function(){d.default.instance.playAudio("switch"),this.isTalk?(this._view.nodeContainer.children[this._view.nodeContainer.children.length-1].getComponent(l.default).onSkipCur(),this.onTalkDone()):p.default.instance.getDataByName("plot")[this.curId].end?0==this.leftTalk.length?this.hideUI():(this.curId=this.leftTalk.shift(),this.createTalkItem(this.curId)):(this.curId++,this.createTalkItem(this.curId))},t.prototype.showUI=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];m.default.instance.removeObjByContainer(this._view.nodeContainer),this.startId=e[0],this.curId=e[0],c.default.instance.popOut(this._view.content,this._view.nodeMask),this.createTalkItem(e[0]),this.leftTalk=e,this.leftTalk.shift(),this.scrollTimer=null,this._view.btnSkip.node.active=!0},t.prototype.createTalkItem=function(e,t){var n=this;void 0===t&&(t=!1);var i=p.default.instance.getDataByName("plot")[e];if(2201==e)m.default.instance.createObjectByName("itemTalkImg",this._view.nodeContainer).getChildByName("spr").getComponent(cc.Sprite).spriteFrame=g.default.instance.getSprite(y.ResType.main,w.Utils.getItemSpByAmount(u.default.instance.festivalData.foodMatch.food));else if(i.sp){var a=m.default.instance.createObjectByName("itemTalkImg",this._view.nodeContainer);g.default.instance.getBackGround(i.sp).then(function(e){a.getChildByName("spr").getComponent(cc.Sprite).spriteFrame=e})}-1==i.char?m.default.instance.createObjectByName("itemTalkSys",this._view.nodeContainer).getComponent(s.default).init(e):(this.isTalk=!0,m.default.instance.createObjectByName("itemTalk",this._view.nodeContainer).getComponent(l.default).init(e,t)),this.scrollTimer||(this.scrollTimer=setTimeout(function(){n._view.content.active&&n._view.svMain.scrollToBottom(.1),n.scrollTimer=null},100))},t.prototype.onTalkDone=function(){this.isTalk=!1},t.prototype.hideUI=function(){u.default.instance.recordData.donePlot.push(this.startId);var e=p.default.instance.getDataByName("plot")[this.startId];e.unlockChar&&h.FriendMgr.instance.addFriend(e.unlockChar),v.Emitter.fire(b.MessageType.onDonePlot),this._view.content.active=!1},t.prototype.onClickSkip=function(){this._view.btnSkip.node.active=!1;for(var e=r([this.curId],this.leftTalk),t=0;t<e.length;t++){this.curId=e[t];for(var n=this.findEndID(e[t]),i=this.curId+(0==t?1:0);i<=n;i++)this.curId=i,this.createTalkItem(i,!0);this.curId=n}this.leftTalk=[],this.isTalk=!1},t.prototype.findEndID=function(e){return p.default.instance.getDataByName("plot")[e].end?e:this.findEndID(e+1)},t.instance=null,n=o([S],t)}(cc.Component));n.default=L,cc._RF.pop()},{"../item/item_talk":"item_talk","../item/item_talk_sys":"item_talk_sys","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../ui_view/panel/talk_ui_view":"talk_ui_view","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","../utils/utils":"utils"}],tip_ui_manager:[function(e,t,n){"use strict";cc._RF.push(t,"613actgiyVCIKfn0apI3gvO","tip_ui_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelDesc=null,t.contentNode=null,t.labelDesc2=null,t.contentNode2=null,t.labelDesc3=null,t.contentNode3=null,t.curShowIndex=1,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){n.instance=this,this.contentNode.opacity=0,this.contentNode2.opacity=0,this.contentNode3.opacity=0},t.prototype.showTipsByStr=function(e){this.showTipByIndex(e)},t.prototype.showTipByIndex=function(e){var t=cc.sequence(cc.delayTime(1.2),cc.fadeOut(.3));1==this.curShowIndex?(this.labelDesc.string=e,this.contentNode.stopAllActions(),this.contentNode.opacity=255,this.contentNode.runAction(t)):2==this.curShowIndex?(this.labelDesc2.string=e,this.contentNode2.stopAllActions(),this.contentNode2.opacity=255,this.contentNode2.runAction(t)):3==this.curShowIndex&&(this.labelDesc3.string=e,this.contentNode3.stopAllActions(),this.contentNode3.opacity=255,this.contentNode3.runAction(t)),this.curShowIndex++,this.curShowIndex>3&&(this.curShowIndex=1)},t.instance=null,o([s(cc.Label)],t.prototype,"labelDesc",void 0),o([s(cc.Node)],t.prototype,"contentNode",void 0),o([s(cc.Label)],t.prototype,"labelDesc2",void 0),o([s(cc.Node)],t.prototype,"contentNode2",void 0),o([s(cc.Label)],t.prototype,"labelDesc3",void 0),o([s(cc.Node)],t.prototype,"contentNode3",void 0),n=o([l],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],ui_manager:[function(e,t,n){"use strict";cc._RF.push(t,"27cfdHFBv9CxbvS/U6Z6N/5","ui_manager");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../ui/adventure_ui"),l=e("../ui/alchemy_ui"),s=e("../ui/all_buff_ui"),c=e("../ui/amount_choose_ui"),d=e("../ui/animal_choose_ui"),u=e("../ui/building_ui"),h=e("../ui/choose_map_ui"),p=e("../ui/collection_ui"),f=e("../ui/farm_match_ui"),m=e("../ui/field_detail_ui"),g=e("../ui/food_choose_ui"),_=e("../ui/food_match_ui"),v=e("../ui/friend_choose_ui"),y=e("../ui/friend_detail_ui"),b=e("../ui/help_ui"),w=e("../ui/holiday_ui"),C=e("../ui/item_choose_ui"),S=e("../ui/item_detail_ui"),L=e("../ui/market_ui"),A=e("../ui/meadow_ui"),k=e("../ui/message_box_ui_manager"),T=e("../ui/num_choose_ui"),M=e("../ui/open_chest_ui"),R=e("../ui/open_recipe_ui"),P=e("../ui/plan_ui"),D=e("../ui/quest_ui"),B=e("../ui/sale_choose_ui"),F=e("../ui/season_result_ui"),I=e("../ui/seed_choose_ui"),O=e("../ui/setting_ui"),N=e("../ui/shop_ui"),x=e("../ui/talk_ui"),j=e("../ui/tip_ui_manager"),U=e("../ui/vip_ui"),E=e("../ui/workshop_ui"),G=cc._decorator,V=G.ccclass,H=(G.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.keyLock={},t.keyLoadTime={},t}var n;return a(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!1,configurable:!0}),t.prototype.loadUIRes=function(e,t,i){null==n.instance.keyLock[e]&&(n.instance.keyLock[e]=!1),0==n.instance.keyLock[e]&&(n.instance.keyLock[e]=!0,cc.loader.loadRes(e,cc.Prefab,function(a,o){if(null==a){var r=cc.instantiate(o),l=cc.director.getScene().getChildByName("Canvas");r.setPosition(0,0),l.addChild(r,t),i(),n.instance.keyLoadTime[e]&&delete n.instance.keyLoadTime[e],delete n.instance.keyLock[e]}else console.error("\u52a0\u8f7d\u5931\u8d25",a,e),n.instance.keyLock[e]=!1}))},t.prototype.preLoadUI=function(){this.loadUIRes("ui/help_ui",n.Z_ORDER_3,function(){}),this.loadUIRes("ui/seed_choose_ui",n.Z_ORDER_2,function(){}),this.loadUIRes("ui/messagebox_ui",n.Z_ORDER_5,function(){}),this.loadUIRes("ui/open_chest_ui",n.Z_ORDER_5,function(){})},t.prototype.updateLoadTime=function(e){for(var t in this.keyLock)1==this.keyLock[t]&&(null==this.keyLoadTime[t]&&(this.keyLoadTime[t]=0),-1!=this.keyLoadTime[t]&&(this.keyLoadTime[t]+=e,this.keyLoadTime[t]>1&&this.keyLoadTime[t]<5||this.keyLoadTime[t]>5&&(this.keyLoadTime[t]=-1)))},t.prototype.checkUIIsOpen=function(e){return e.instance&&e.instance.node.getChildByName("content").active},t.prototype.openUI=function(e,t,i){var a;void 0===i&&(i=n.Z_ORDER_2),e.instance?((a=e.instance).showUI.apply(a,t.param),e.instance.node.zIndex=i):this.loadUIRes("ui/"+t.name,i,function(){var n;(n=e.instance).showUI.apply(n,t.param)})},t.prototype.LoadTipsByStr=function(e){j.default.instance?j.default.instance.showTipsByStr(e):this.loadUIRes("ui/tips_ui",n.Z_ORDER_6,function(){j.default.instance.showTipsByStr(e)})},t.prototype.LoadMessageBox=function(e,t,i,a,o,r){void 0===i&&(i=null),void 0===a&&(a=null),void 0===o&&(o=!0),void 0===r&&(r=null),k.default.instance?k.default.instance.showUI(e,t,i,a,o,r):this.loadUIRes("ui/messagebox_ui",n.Z_ORDER_4+1,function(){k.default.instance.showUI(e,t,i,a,o,r)})},t.prototype.checkIsAutoPause=function(){return!!(this.checkUIIsOpen(k.default)||this.checkUIIsOpen(P.default)||this.checkUIIsOpen(O.default)||this.checkUIIsOpen(r.default)||this.checkUIIsOpen(u.default)||this.checkUIIsOpen(D.default)||this.checkUIIsOpen(N.default)||this.checkUIIsOpen(E.default)||this.checkUIIsOpen(A.default)||this.checkUIIsOpen(y.default)||this.checkUIIsOpen(S.default)||this.checkUIIsOpen(c.default)||this.checkUIIsOpen(v.default)||this.checkUIIsOpen(m.default)||this.checkUIIsOpen(I.default)||this.checkUIIsOpen(T.default)||this.checkUIIsOpen(h.default)||this.checkUIIsOpen(d.default)||this.checkUIIsOpen(C.default)||this.checkUIIsOpen(M.default)||this.checkUIIsOpen(R.default)||this.checkUIIsOpen(s.default)||this.checkUIIsOpen(x.default)||this.checkUIIsOpen(L.default)||this.checkUIIsOpen(F.default)||this.checkUIIsOpen(w.default)||this.checkUIIsOpen(f.default)||this.checkUIIsOpen(_.default)||this.checkUIIsOpen(g.default)||this.checkUIIsOpen(B.default)||this.checkUIIsOpen(b.default)||this.checkUIIsOpen(p.default)||this.checkUIIsOpen(U.default)||this.checkUIIsOpen(l.default))},t._instance=null,t.Z_ORDER_1=100,t.Z_ORDER_2=200,t.Z_ORDER_3=300,t.Z_ORDER_4=400,t.Z_ORDER_5=500,t.Z_ORDER_6=600,n=o([V],t)}(cc.Component));n.default=H,cc._RF.pop()},{"../ui/adventure_ui":"adventure_ui","../ui/alchemy_ui":"alchemy_ui","../ui/all_buff_ui":"all_buff_ui","../ui/amount_choose_ui":"amount_choose_ui","../ui/animal_choose_ui":"animal_choose_ui","../ui/building_ui":"building_ui","../ui/choose_map_ui":"choose_map_ui","../ui/collection_ui":"collection_ui","../ui/farm_match_ui":"farm_match_ui","../ui/field_detail_ui":"field_detail_ui","../ui/food_choose_ui":"food_choose_ui","../ui/food_match_ui":"food_match_ui","../ui/friend_choose_ui":"friend_choose_ui","../ui/friend_detail_ui":"friend_detail_ui","../ui/help_ui":"help_ui","../ui/holiday_ui":"holiday_ui","../ui/item_choose_ui":"item_choose_ui","../ui/item_detail_ui":"item_detail_ui","../ui/market_ui":"market_ui","../ui/meadow_ui":"meadow_ui","../ui/message_box_ui_manager":"message_box_ui_manager","../ui/num_choose_ui":"num_choose_ui","../ui/open_chest_ui":"open_chest_ui","../ui/open_recipe_ui":"open_recipe_ui","../ui/plan_ui":"plan_ui","../ui/quest_ui":"quest_ui","../ui/sale_choose_ui":"sale_choose_ui","../ui/season_result_ui":"season_result_ui","../ui/seed_choose_ui":"seed_choose_ui","../ui/setting_ui":"setting_ui","../ui/shop_ui":"shop_ui","../ui/talk_ui":"talk_ui","../ui/tip_ui_manager":"tip_ui_manager","../ui/vip_ui":"vip_ui","../ui/workshop_ui":"workshop_ui"}],utils:[function(e,t,n){"use strict";cc._RF.push(t,"1d45dLPjfNA/LyXc6piXURJ","utils"),Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=void 0;var i=e("../interface/item_amount"),a=e("../manager/json_manager"),o=e("../manager/language_manager"),r=e("../ui/friend_ui"),l=e("./game_config"),s=function(){function e(){}return e.deepCopy=function(e){var t=Array.isArray(e)?[]:{};for(var n in e)e.hasOwnProperty(n)&&("object"==typeof e[n]&&null!==e[n]?t[n]=this.deepCopy(e[n]):t[n]=e[n]);return t},e.arrFind=function(e,t,n){for(var i=0,a=e.length;i<a;i++)if(e[i][t]==n)return[e[i],i]},e.getPercentStr=function(e){return Number(100*e).toFixed(2)+"%"},e.orderBy=function(t,n){if(t.length<=1)return t;for(var i=Math.floor(t.length/2),a=t.splice(i,1)[0],o=[],r=[],l=0,s=t;l<s.length;l++){var c=s[l];n(c)<n(a)?o.push(c):r.push(c)}return e.orderBy(o,n).concat([a],e.orderBy(r,n))},e.getRandomNumber=function(e){return Math.floor(Math.random()*(e+1))},e.getLocalTime=function(e){var t={},n=new Date(1e3*e);return t.y=n.getFullYear(),t.m=n.getMonth()+1,t.d=n.getDate(),t},e.getGameTime=function(e){var t={};return t.y=Math.floor((e-1)/28/4)+1,t.m=Math.floor((e-1)/28)%4,t.d=e%28,t.w=e%7-1,0==t.d&&(t.d=28),-1==t.w&&(t.w=6),t},e.getJsonLength=function(e){var t=0;for(var n in e)t++;return t},e.printObj=function(e){var t="";for(var n in e)t+=n+" = "+e[n]+"\n";console.log(t)},e.isContain=function(e,t){return null!=e&&e.indexOf(t)>-1},e.isIn=function(e,t){if(null!=e)for(var n in e)if(e[n]==t)return n;return!1},e.getLargeNumStr=function(e){return e>=99999999?(e/1e8).toFixed(2)+"\u4ebf":e>=1e4?(e/1e4).toFixed(2)+"\u4e07":Math.floor(e).toString()},e.getTimeFormat=function(e){if(e<0)return"00:00";var t=Math.floor(e/60),n=Math.floor(e-60*t);return t<10&&n<10?"0"+t.toString()+":0"+n.toString():t<10&&n>=10?"0"+t.toString()+":"+n.toString():t>=10&&n<10?t.toString()+":0"+n.toString():t>=10&&n>=10?t.toString()+":"+n.toString():"00:00"},e.getTimeFromNowStr=function(e){if(e<=60)return"\u521a\u521a";var t=Math.floor(e/60),n=Math.floor(e/3600),i=Math.floor(e/84600);return i>=1?i+"\u5929\u4ee5\u524d":n>=1?n+"\u5c0f\u65f6\u4ee5\u524d":t>=1?t+"\u5206\u4ee5\u524d":void 0},e.setSpScale=function(e,t){e.scale=1,e.width>e.height?e.scale=t/e.width:e.scale=t/e.height},e.getAngle=function(e){return 180*Math.atan2(e.y,e.x)/Math.PI},e.getNormalDivByAngel=function(e){return cc.v2(Math.cos(e/180*Math.PI),Math.sin(e/180*Math.PI))},e.luckChance=function(e,t){void 0===t&&(t=0);var n=(this.getRandomNumber(9999)+1)/100;if(t){var i=(this.getRandomNumber(9999)+1)/100;return e>n||e>i}return e>n},e.getArrRandomIndex=function(e){var t=0;e.forEach(function(e){t+=e});for(var n=this.getRandomNumber(t-1)+1,i=0,a=0;a<e.length;a++){if(n<=e[a]){i=a;break}n-=e[a]}return i},e.getArrRandomItem=function(e){return e?e[this.getRandomNumber(e.length-1)]:null},e.getArrRandomItemsByNum=function(t,n){var i=t.length-n;if(i>0){for(var a=0;a<i;a++){var o=e.getRandomNumber(t.length-1);t.splice(o,1)}return t}return t},e.getEllipsePoints=function(t,n,i,a){void 0===a&&(a=[0,0]),n||(n=t),i||(i=e.getRandomNumber(360)),i=i/180*Math.PI;var o=t*Math.sin(i),r=n*Math.cos(i);return[o+=a[0],r+=a[1]]},e.getRealDistance=function(e,t){return e.getPosition().sub(t.getPosition()).mag()-e.getComponent(cc.PhysicsCircleCollider).radius-t.getComponent(cc.PhysicsCircleCollider).radius},e.shuffle=function(e){for(var t,n,i=e.length;i;)n=e[t=Math.floor(Math.random()*i--)],e[t]=e[i],e[i]=n;return e},e.parseJson2Array=function(e){return e.split("|").map(function(e){return+e})},e.getPointRangeVec2=function(t,n){return cc.v2(t.x+e.getRandomNumber(2*n)-n,t.y+e.getRandomNumber(2*n)-n)},e.getNodeUsePos=function(e){var t=e.convertToWorldSpaceAR(cc.Vec2.ZERO);return r.default.instance.view.content.convertToNodeSpaceAR(t)},e.getNumberOn3Str=function(e){return e>=100?e.toString():e>=10?"0"+e.toString():"00"+e.toString()},e.getItemSpByAmount=function(e){switch(e.type){case i.RewardType.money:return"ui-money";case i.RewardType.point:return"ui-point";case i.RewardType.friend:return"char-char_"+e.id;default:var t=a.default.instance.getDataByName("item")[e.id];return t?t.prefix?t.prefix+t.qualitySp[e.quality]:t.sp:""}},e.getItemSpName=function(e){var t=a.default.instance.getDataByName("item")[e];return t?t.prefix?t.prefix+t.qualitySp[1]:t.sp:""},e.amountMerge=function(t){var n=[];return t.forEach(function(t){var a=n.findIndex(function(e){switch(e.type){case i.RewardType.item:default:return t.id==e.id&&t.quality==e.quality;case i.RewardType.money:return t.type==i.RewardType.money;case i.RewardType.point:return t.type==i.RewardType.point}});-1!=a?n[a].num+=t.num:n.push(e.deepCopy(t))}),n},e.amountMergeByShow=function(t){var n=[];return t.forEach(function(t){var a=n.findIndex(function(e){switch(e.type){case i.RewardType.item:default:return t.id==e.id;case i.RewardType.money:return t.type==i.RewardType.money;case i.RewardType.point:return t.type==i.RewardType.point}});-1!=a?n[a].num+=t.num:n.push(e.deepCopy(t))}),n},e.needMerge=function(t){var n=[];return t.forEach(function(t){var i=n.findIndex(function(e){return t[0]==e[0]});-1!=i?n[i][1]+=1:n.push(e.deepCopy(t))}),n},e.getText=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/\{(\d+)\}/,function(e,n){return t[n]})},e.getSeaonColorStr=function(e){return"<color="+l.GameConfig.ColorDefault[e[0]+""]+">"+o.default.GetText("\u6625")+"</color><color="+l.GameConfig.ColorDefault[e[1]+""]+">"+o.default.GetText("\u590f")+"</color><color="+l.GameConfig.ColorDefault[e[2]+""]+">"+o.default.GetText("\u79cb")+"</color><color="+l.GameConfig.ColorDefault[e[3]+""]+">"+o.default.GetText("\u51ac")+"< /color>"},e.getLastArrItem=function(e){var t=e.length;return t>0?e[t-1]:0},e.myIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(JSON.stringify(e[n])==JSON.stringify(t))return n;return-1},e}();n.Utils=s,cc._RF.pop()},{"../interface/item_amount":"item_amount","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../ui/friend_ui":"friend_ui","./game_config":"game_config"}],vip_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"72e03KtbJFMFJIDZqYuzdSU","vip_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodeVipContainer=null,this.nodeVipMask=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.btnAutoSeason=null,this.btnMain=null,this.btnVipList=[],this.labLanList=[]}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodeVipContainer=cc.find("content/nodeVipContainer",e),this.nodeVipMask=cc.find("content/nodeVipContainer/node/nodeVipMask",e),this.itemDec=cc.find("content/nodeVipContainer/itemDec",e),this.itemDec=cc.find("content/nodeVipContainer/itemDec",e),this.itemDec=cc.find("content/nodeVipContainer/itemDec",e),this.btnAutoSeason=null===(t=cc.find("content/btnAutoSeason",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnMain=null===(n=cc.find("content/nodeVipContainer/node/btnMain",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnVipList[0]=null===(i=cc.find("content/nodeVipContainer/node/btnVipList0",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnVipList[1]=null===(a=cc.find("content/nodeVipContainer/node/btnVipList1",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnVipList[2]=null===(o=cc.find("content/nodeVipContainer/node/btnVipList2",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnVipList[3]=null===(r=cc.find("content/nodeVipContainer/node/btnVipList3",e))||void 0===r?void 0:r.getComponent(cc.Button),this.btnVipList[4]=null===(l=cc.find("content/nodeVipContainer/node/btnVipList4",e))||void 0===l?void 0:l.getComponent(cc.Button),this.btnVipList[5]=null===(s=cc.find("content/nodeVipContainer/node/btnVipList5",e))||void 0===s?void 0:s.getComponent(cc.Button),this.labLanList[0]=null===(c=cc.find("content/nodeVipContainer/node/nodeVipMask/labLanList0",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labLanList[1]=null===(d=cc.find("content/labLanList1",e))||void 0===d?void 0:d.getComponent(cc.Label)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodeVipContainer=null,this.nodeVipMask=null,this.itemDec=null,this.itemDec=null,this.itemDec=null,this.btnAutoSeason=null,this.btnMain=null,this.btnVipList=[],this.labLanList=[]},e}();n.default=i,cc._RF.pop()},{}],vip_ui:[function(e,t,n){"use strict";cc._RF.push(t,"27ad7lQY2FGoZ1U50yNgVBW","vip_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../manager/action_manager"),l=e("../manager/ad_manager"),s=e("../manager/audio_manager"),c=e("../manager/dynamic_data_manager"),d=e("../manager/friend_manager"),u=e("../manager/game_manager"),h=e("../manager/json_manager"),p=e("../manager/language_manager"),f=e("../manager/resources_manager"),m=e("../manager/sale_manager"),g=e("../manager/storage_manager"),_=e("../manager/ui_manager"),v=e("../ui_view/panel/vip_ui_view"),y=e("../utils/config"),b=e("../utils/emmiter"),w=e("../utils/enum"),C=e("../utils/message"),S=e("./reward_tip_ui"),L=cc._decorator,A=L.ccclass,k=(L.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new v.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u4fee\u6539\u63d0\u793a","\u5e7f\u544a\u4e2d\u5fc3"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.btnAutoSeason.node.on("click",this.onClickSeasonCheck,this),this._view.nodeVipContainer.children.forEach(function(t,n){t.on("click",function(){s.default.instance.playAudio("switch"),e.onClickVip(n)},e),t.getChildByName("btnMain").on("click",function(){s.default.instance.playAudio("usePosion"),e.onWatchVipAd(n)},e)}),this._view.btnVipList.forEach(function(t,n){t.node.on("click",function(){e.onClickCheatingBtn(n)},e)}),this._view.nodeVipMask.on("click",this.onOpenCheating,this)},t.prototype.showUI=function(){r.default.instance.popOut(this._view.content,this._view.nodeMask),this.refreshUI()},t.prototype.refreshUI=function(){this._view.nodeVipMask.active=0==c.default.instance.config.cheating;for(var e=0;e<4;e++)this["refreshVip"+e+"Btn"]()},t.prototype.onClickSeasonCheck=function(){s.default.instance.playAudio("switch"),c.default.instance.config.seasonAutoPause=!c.default.instance.config.seasonAutoPause,this._view.btnAutoSeason.node.getChildByName("check").active=c.default.instance.config.seasonAutoPause},t.prototype.refreshVip0Btn=function(){var e=this._view.nodeVipContainer.children[0],t=c.default.instance.config.firstAD?"ui-gui-Gui_0":"ui-gui-Gui_2";e.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(w.ResType.main,t),e.getChildByName("label").getComponent(cc.Label).string=p.default.GetText("\u8d5e\u52a9\u8005\u5305")+" "+(c.default.instance.config.firstAD?p.default.GetText("\u5df2\u83b7\u5f97\u8d5e\u52a9"):p.default.GetText("\u672a\u83b7\u5f97\u8d5e\u52a9")),e.getChildByName("label").width=c.default.instance.config.firstAD?450:340,e.getChildByName("btnMain").active=!c.default.instance.config.firstAD,e.getChildByName("btnMain").getChildByName("label").getComponent(cc.Label).string=p.default.GetText("\u83b7\u5f97")},t.prototype.refreshVip1Btn=function(){var e=this._view.nodeVipContainer.children[1],t=c.default.instance.config.timeSpdUp?"ui-gui-Gui_4":"ui-gui-Gui_6";e.getChildByName("icon1").getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(w.ResType.main,t),e.getChildByName("icon2").getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(w.ResType.main,t),e.getChildByName("label").getComponent(cc.Label).string=p.default.GetText("\u65f6\u95f4\u52a0\u901f")+"\n"+c.default.instance.config.timeSpdUpTimes+p.default.GetText("\u5929"),e.getChildByName("btnUse").getChildByName("label").getComponent(cc.Label).string=c.default.instance.config.timeSpdUp?p.default.GetText("\u505c\u6b62\u52a0\u901f"):p.default.GetText("\u5f00\u59cb\u52a0\u901f"),e.getChildByName("btnMain").getChildByName("label").getComponent(cc.Label).string="+60 "+p.default.GetText("\u5929")},t.prototype.refreshVip2Btn=function(){var e=this._view.nodeVipContainer.children[2],t=c.default.instance.config.refreshTimes>0?"ui-gui-Gui_8":"ui-gui-Gui_10";e.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=f.default.instance.getSprite(w.ResType.main,t),e.getChildByName("label").getComponent(cc.Label).string=p.default.GetText("\u5237\u65b0\u529f\u80fd")+" x"+c.default.instance.config.refreshTimes+p.default.GetText("\u6b21")+"\n"+p.default.GetText("\u5237\u65b0\u529f\u80fd\u63cf\u8ff0"),e.getChildByName("btnMain").getChildByName("label").getComponent(cc.Label).string="+10 "+p.default.GetText("\u6b21")},t.prototype.refreshVip3Btn=function(){var e=this._view.nodeVipContainer.children[3];e.getChildByName("label").getComponent(cc.Label).string=p.default.GetText("\u4fee\u6539\u6b21\u6570")+":"+c.default.instance.config.cheatingTimes+p.default.GetText("\u6b21"),e.getChildByName("btnMain").getChildByName("label").getComponent(cc.Label).string="+3 "+p.default.GetText("\u6b21")},t.prototype.onClickCheatingBtn=function(e){if(c.default.instance.config.cheatingTimes<=0)_.default.instance.LoadTipsByStr(p.default.GetText("\u4fee\u6539\u6b21\u6570\u4e0d\u8db3\u4e86"));else{switch(e){case 0:(t=c.default.instance.money)<1e4&&(t=1e4),c.default.instance.money+=t;break;case 1:var t;(t=c.default.instance.point)<1e3&&(t=1e3),c.default.instance.point+=t;break;case 2:for(var n=1;n<=20;n++){var i=2550+n;m.default.instance.addBuff(i,7)}break;case 3:var a=c.default.instance.allFriendData.friendMap;for(var i in a)a[i].love<100?d.FriendMgr.instance.onAddFriendLove(+i,100):a[i].quality<5&&d.FriendMgr.instance.onAddFriendLove(+i,a[i].love);break;case 4:c.default.instance.meadowData.animalList.forEach(function(e){if(e.id){var t=h.default.instance.getDataByName("char")[e.id];e.progress=t.animal.time}});break;case 5:c.default.instance.allFieldData.list.forEach(function(e){e.seed&&(e.grow=999)}),b.Emitter.fire(C.MessageType.fieldAlert)}_.default.instance.LoadTipsByStr(p.default.GetText("\u4fee\u6539\u6210\u529f")),c.default.instance.config.cheatingTimes--,g.default.instance.saveConfig(),this.refreshVip3Btn()}},t.prototype.onOpenCheating=function(){this._view.nodeVipMask.active=!1,c.default.instance.config.cheating=1},t.prototype.onClickVip=function(e){s.default.instance.playAudio("sclick_4");var t=c.default.instance.config;switch(e){case 0:t.firstAD;break;case 1:t.timeSpdUpTimes>0?(t.timeSpdUp=!t.timeSpdUp,t.timeSpdUp&&_.default.instance.LoadTipsByStr(p.default.GetText("\u52a0\u901f\u5f00\u542f"))):_.default.instance.LoadTipsByStr(p.default.GetText("\u52a0\u901f\u4e0d\u8db3"))}this["refreshVip"+e+"Btn"]()},t.prototype.onWatchVipAd=function(e){var t=this,n=c.default.instance.config;l.default.getInatance().showAndroidAd(function(){switch(e){case 0:var i=[[853,5],[851,2],[860,2],[855,10],[2258,30],[856,10],[858,3],[857,3],[231,3],[501,50],[502,25],[503,45],[504,20],[505,10],[506,6],[701,5],[702,5],[703,5],[704,5],[510,10],[18,30],[1504,1],[1508,1],[1528,1],[859,5],[2501,1],[2502,1],[2503,1],[2504,1]].map(function(e){return{id:e[0],quality:1,num:e[1]}});i.forEach(function(e){c.default.instance.onReward(e)}),c.default.instance.money+=1e4,c.default.instance.point+=1e3,n.firstAD=!0,_.default.instance.openUI(S.default,{name:y.Config.uiName.rewardTipUI,param:[i,p.default.GetText("\u611f\u8c22\u652f\u6301")]},300),g.default.instance.saveGameData();break;case 1:n.timeSpdUpTimes+=60,_.default.instance.LoadTipsByStr(p.default.GetText("\u770b\u5e7f\u544a\u52a0\u901f"));break;case 2:n.refreshTimes+=10,_.default.instance.LoadTipsByStr(p.default.GetText("\u5e7f\u544a\u589e\u52a0\u5237\u65b0"));break;case 3:n.cheatingTimes+=3,_.default.instance.LoadTipsByStr(p.default.GetText("\u770b\u5e7f\u544a\u4fee\u6539"))}t["refreshVip"+e+"Btn"](),g.default.instance.saveConfig()})},t.prototype.hideUI=function(){s.default.instance.playAudio("paper2"),this._view.content.active=!1,u.default.instance.refreshGameSpd()},t.instance=null,n=o([A],t)}(cc.Component));n.default=k,cc._RF.pop()},{"../manager/action_manager":"action_manager","../manager/ad_manager":"ad_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/friend_manager":"friend_manager","../manager/game_manager":"game_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/resources_manager":"resources_manager","../manager/sale_manager":"sale_manager","../manager/storage_manager":"storage_manager","../manager/ui_manager":"ui_manager","../ui_view/panel/vip_ui_view":"vip_ui_view","../utils/config":"config","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/message":"message","./reward_tip_ui":"reward_tip_ui"}],workshop_data:[function(e,t,n){"use strict";cc._RF.push(t,"9b2a1ENnhFEkIPF1rvmTSYB","workshop_data"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],workshop_manager:[function(e,t,n){"use strict";cc._RF.push(t,"fd13bHWVz5IaKkhmYE8BFR+","workshop_manager"),Object.defineProperty(n,"__esModule",{value:!0}),n.WorkshopMgr=void 0;var i=e("../utils/emmiter"),a=e("../utils/enum"),o=e("../utils/game_config"),r=e("../utils/message"),l=e("./dynamic_data_manager"),s=e("./field_manager"),c=e("./friend_manager"),d=e("./game_manager"),u=e("./json_manager"),h=e("./language_manager"),p=e("./sale_manager"),f=e("./ui_manager"),m=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(){l.default.instance.workShopData={maxArea:1,curPlan:0,planList:[[]],recipeList:[[[[]]]],canList:[[],[],[]]}},e.prototype.getMaxRecipeNum=function(e){for(var t=!0,n=l.default.instance.workShopData,i=n.planList[n.curPlan][e],a=-1==i.max?99999:i.max,o=i.id,r=u.default.instance.getDataByName("item")[o],s=0;s<r.recipe.need.length;s++){var c=n.recipeList[n.curPlan][e][s];if(!c){t=!1;break}var d=l.default.instance.findItem(c[0],c[1]);if(!d[0]){t=!1;break}a=Math.min(a,a,Math.floor(d[0].num/(r.recipe.need[s][2]||1)))}return t||(a=0),a},e.prototype.getProductPreview=function(){var e=this,t=c.FriendMgr.instance.getAllHelpFriendHealth()*d.default.instance.getPrecentValueByStr("factorySpd"),n=l.default.instance.workShopData,i={},a=0,o=[];if(n.planList[n.curPlan].forEach(function(t,n){i[n]=e.getMaxRecipeNum(n);var o=u.default.instance.getDataByName("item")[t.id];a+=i[n]*o.recipe.health}),a<=t);else for(var r in i)i[r]=Math.floor(t/a*i[r]);var s=function(e){if(i[e]>0){var t=n.planList[n.curPlan][+e].id,a=u.default.instance.getDataByName("item")[t],r=n.recipeList[n.curPlan][+e].map(function(e,t){return{id:e[0],quality:e[1],num:a.recipe.need[t][2]||1}}),s=l.default.instance.countProduct(t,r);o.push({id:t,num:s[0]*i[e],quality:s[1]})}};for(var r in i)s(r);return o},e.prototype.onDayBy=function(){var e=this,t=c.FriendMgr.instance.getAllHelpFriendHealth()*d.default.instance.getPrecentValueByStr("factorySpd"),n=l.default.instance.workShopData,o={},s=0,h=[];if(n.planList[n.curPlan].forEach(function(t,n){o[n]=e.getMaxRecipeNum(n);var i=u.default.instance.getDataByName("item")[t.id];s+=o[n]*i.recipe.health}),s<=t);else for(var p in o)o[p]=Math.floor(t/s*o[p]);var f=function(e){if(o[e]>0){var t=n.planList[n.curPlan][+e].id,i=u.default.instance.getDataByName("item")[t],a=n.recipeList[n.curPlan][+e].map(function(e,t){return{id:e[0],quality:e[1],num:i.recipe.need[t][2]||1}});l.default.instance.onMakeupRecipe(t,a,o[e],function(i,a){-1!=n.planList[n.curPlan][+e].max&&(n.planList[n.curPlan][+e].max-=o[e]),h.push({id:t,num:i,quality:a})},!0)}};for(var p in o)f(p);h.length>0&&i.Emitter.fire(r.MessageType.addDairy,a.DairyRtType.workshop,{rewardList:h})},e.prototype.onChooseCurPlan=function(e){l.default.instance.workShopData.planList[e]||(l.default.instance.workShopData.planList[e]=[],l.default.instance.workShopData.recipeList[e]=[[[]]]),l.default.instance.workShopData.curPlan=e},e.prototype.getCanUseBuild=function(e){var t=l.default.instance.findItem(e)[0];if(!t)return 0;var n=t.num,i=l.default.instance.workShopData;return i.planList[i.curPlan].forEach(function(t){u.default.instance.getDataByName("item")[t.id].recipe.building==e&&n--}),n},e.prototype.onAddRecipe=function(e){var t=l.default.instance.workShopData,n=u.default.instance.getDataByName("item")[e];if(n.recipe.building&&this.getCanUseBuild(n.recipe.building)<=0)f.default.instance.LoadTipsByStr("\u53a8\u5177\u4e0d\u8db3\u4e86");else{var i=t.planList[t.curPlan].push({id:e,max:-1});t.recipeList[t.curPlan][i-1]=[]}},e.prototype.onChooseRecipeDetail=function(e,t,n){var i=l.default.instance.workShopData;i.recipeList[i.curPlan][e][t]=[n.id,n.quality]},e.prototype.onRemoveRecipe=function(e){var t=l.default.instance.workShopData;t.planList[t.curPlan].splice(e,1),t.recipeList[t.curPlan].splice(e,1)},e.prototype.getFerAdd=function(e,t){var n=0,i=100;switch(e){case 0:i=300;break;case 1:i=50;break;case 2:i=200;break;case 3:i=150}return t.forEach(function(e){n+=Math.pow(p.default.instance.getItemPrice(e)/i,.75)*i*e.num}),n},e.prototype.onFertAll=function(e,t){var n=this.getFerAdd(e,t),i=n,a=l.default.instance.allFieldData,o=0,r=0,c=0,d="";switch(e){case 0:i/=2,d=h.default.GetText("\u6279\u91cf\u65bd\u80a51");break;case 1:n=i,d=h.default.GetText("\u6279\u91cf\u65bd\u80a52");break;case 2:i/=3,d=h.default.GetText("\u6279\u91cf\u65bd\u80a53");break;case 3:i/=5,d=h.default.GetText("\u6279\u91cf\u65bd\u80a54")}if(l.default.instance.money<n)f.default.instance.LoadTipsByStr(h.default.GetText("\u91d1\u5e01\u4e0d\u8db3"));else{a.list.forEach(function(t,n){switch(o+=t.maxNum,e){case 0:r+=t.quality;break;case 1:r+=t.saveWater;break;case 2:r+=s.FieldMgr.instance.getBugChance(n);break;case 3:r+=100*s.FieldMgr.instance.getGrowSpd(n)}}),a.list.forEach(function(t,n){switch(e){case 0:t.quality+=i/o,c+=t.quality;break;case 1:t.saveWater+=i/o,c+=t.saveWater;break;case 2:t.defenceBug+=i/o,c+=s.FieldMgr.instance.getBugChance(n);break;case 3:t.growSpeed+=i/o,c+=100*s.FieldMgr.instance.getGrowSpd(n)}});for(var u=0;u<t.length;u++)l.default.instance.onCost(t[u]);l.default.instance.money-=n,f.default.instance.LoadTipsByStr(d+(c/a.list.length-r/a.list.length).toFixed(2)+"%")}},e.prototype.getChangePrice=function(e,t){var n=u.default.instance.getDataByName("item")[e];return n.price?n.price*o.GameConfig.QualityDouble.sale[t+1]:(856==e?1e3:3e3)*o.GameConfig.QualityDouble.sale[t+1]},e.prototype.onChangeItem=function(e,t){var n=this.getChangePrice(e,t);l.default.instance.money<n?f.default.instance.LoadTipsByStr(h.default.GetText("\u91d1\u5e01\u4e0d\u8db3")):(l.default.instance.money-=n,l.default.instance.onCost({id:e,num:3,quality:t}),[501,503,505,506,507,508].includes(e)?l.default.instance.onReward({id:e+1,num:1,quality:1}):l.default.instance.onReward({id:e,num:1,quality:t+1}))},e._instance=null,e}();n.WorkshopMgr=m,cc._RF.pop()},{"../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/game_config":"game_config","../utils/message":"message","./dynamic_data_manager":"dynamic_data_manager","./field_manager":"field_manager","./friend_manager":"friend_manager","./game_manager":"game_manager","./json_manager":"json_manager","./language_manager":"language_manager","./sale_manager":"sale_manager","./ui_manager":"ui_manager"}],workshop_ui_view:[function(e,t,n){"use strict";cc._RF.push(t,"5a1a0ykgfhBwpmOk85Pvrh1","workshop_ui_view"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodePlanMenu=null,this.nodeContainer=null,this.nodeDaliyProductContainer=null,this.nodeWorklistContainer=null,this.btnAdd=null,this.btnHome=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnHome=null,this.btnCan=null,this.labLanList=[],this.labBuild=null,this.labProductNum=null,this.svMain=null}return e.prototype.initView=function(e){var t,n,i,a,o,r,l,s,c,d,u,h,p;this.content=cc.find("content",e),this.nodeMask=cc.find("content/nodeMask",e),this.nodePageList[0]=cc.find("content/nodePageList0",e),this.nodePageList[1]=cc.find("content/nodePageList1",e),this.nodeMenu=cc.find("content/nodeMenu",e),this.nodePlanMenu=cc.find("content/nodePageList1/nodePlanMenu",e),this.nodeContainer=cc.find("content/nodePageList0/meadowBg/nodeContainer",e),this.nodeDaliyProductContainer=cc.find("content/nodePageList0/scrollview/view/nodeDaliyProductContainer",e),this.nodeWorklistContainer=cc.find("content/nodePageList1/svMain/view/nodeWorklistContainer",e),this.btnAdd=null===(t=cc.find("content/nodePageList1/svMain/view/nodeWorklistContainer/btnAdd",e))||void 0===t?void 0:t.getComponent(cc.Button),this.btnHome=null===(n=cc.find("content/nodePageList1/nodePlanMenu/btnHome",e))||void 0===n?void 0:n.getComponent(cc.Button),this.btnHome=null===(i=cc.find("content/nodePageList1/nodePlanMenu/btnHome",e))||void 0===i?void 0:i.getComponent(cc.Button),this.btnHome=null===(a=cc.find("content/nodePageList1/nodePlanMenu/btnHome",e))||void 0===a?void 0:a.getComponent(cc.Button),this.btnMain=null===(o=cc.find("content/nodeMenu/btnMain",e))||void 0===o?void 0:o.getComponent(cc.Button),this.btnHome=null===(r=cc.find("content/nodeMenu/btnHome",e))||void 0===r?void 0:r.getComponent(cc.Button),this.btnCan=null===(l=cc.find("content/nodeMenu/btnCan",e))||void 0===l?void 0:l.getComponent(cc.Button),this.labLanList[0]=null===(s=cc.find("content/labLanList0",e))||void 0===s?void 0:s.getComponent(cc.Label),this.labBuild=null===(c=cc.find("content/nodePageList0/labBuild",e))||void 0===c?void 0:c.getComponent(cc.Label),this.labProductNum=null===(d=cc.find("content/nodePageList0/labProductNum",e))||void 0===d?void 0:d.getComponent(cc.Label),this.labLanList[1]=null===(u=cc.find("content/nodeMenu/btnMain/labLanList1",e))||void 0===u?void 0:u.getComponent(cc.Label),this.labLanList[2]=null===(h=cc.find("content/nodeMenu/btnHome/labLanList2",e))||void 0===h?void 0:h.getComponent(cc.Label),this.svMain=null===(p=cc.find("content/nodePageList1/svMain",e))||void 0===p?void 0:p.getComponent(cc.ScrollView)},e.prototype.onDestroy=function(){this.content=null,this.nodeMask=null,this.nodePageList=[],this.nodeMenu=null,this.nodePlanMenu=null,this.nodeContainer=null,this.nodeDaliyProductContainer=null,this.nodeWorklistContainer=null,this.btnAdd=null,this.btnHome=null,this.btnHome=null,this.btnHome=null,this.btnMain=null,this.btnHome=null,this.btnCan=null,this.labLanList=[],this.labBuild=null,this.labProductNum=null,this.svMain=null},e}();n.default=i,cc._RF.pop()},{}],workshop_ui:[function(e,t,n){"use strict";cc._RF.push(t,"c6e25IAEThOL4UGoflgBcJQ","workshop_ui");var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../interface/friend_data"),l=e("../item/item_choose"),s=e("../item/item_workshop"),c=e("../manager/action_manager"),d=e("../manager/audio_manager"),u=e("../manager/dynamic_data_manager"),h=e("../manager/json_manager"),p=e("../manager/language_manager"),f=e("../manager/pool_manager"),m=e("../manager/resources_manager"),g=e("../manager/ui_manager"),_=e("../manager/workshop_manager"),v=e("../ui_view/panel/workshop_ui_view"),y=e("../utils/config"),b=e("../utils/enum"),w=e("../utils/utils"),C=e("./recipe_choose_ui"),S=cc._decorator,L=S.ccclass,A=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._view=new v.default,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this._view.initView(this.node),n.instance=this,this._view.content.active=!1,this._bindEvent(),this.setLanguage()},t.prototype.setLanguage=function(){var e=this._view.labLanList,t=["\u624b\u5de5\u4f5c\u574a","\u603b\u89c8","\u751f\u4ea7\u914d\u7f6e"];e.forEach(function(e,n){e.string=p.default.GetText(t[n])})},t.prototype._bindEvent=function(){var e=this;this._view.nodeMask.on("click",this.hideUI,this),this._view.btnMain.node.on("click",this.onClickAllBtn,this),this._view.btnHome.node.on("click",this.onClickListBtn,this),this._view.nodePlanMenu.children.forEach(function(t,n){t.on("click",function(){e.onClickMenu(n)},e)}),this._view.btnAdd.node.on("click",this.onClickRecipe,this)},t.prototype.showUI=function(){c.default.instance.popOut(this._view.content,this._view.nodeMask),this.onClickAllBtn()},t.prototype.onClickAllBtn=function(){var e=this;d.default.instance.playAudio("click"),this._view.nodePageList[0].active=!0,this._view.nodePageList[1].active=!1,this._view.btnMain.node.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,"ui-UI_Flat_Slot_02_Available"),this._view.btnHome.node.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,"ui-UI_Flat_Slot_01_Selected");for(var t=0,n=u.default.instance.allFriendData,i=[],a=0;a<n.workArr.length;a++){var o=n.friendMap[n.workArr[a]];o.relax||o.op!=r.FriendOPType.work||(t++,i.push(n.workArr[a]))}this._view.labProductNum.string=p.default.GetText("\u751f\u4ea7\u4eba\u6570")+"\uff1a"+t;var s=0,c=u.default.instance.workShopData;f.default.instance.removeObjByContainer(this._view.nodeContainer),c.planList[c.curPlan].forEach(function(t,n){var a=h.default.instance.getDataByName("item")[t.id];if(a.recipe.building&&s++,e._view.nodeContainer.children.length<16){var o=f.default.instance.createObjectByName("itemWork",e._view.nodeContainer);a.recipe.building?o.getChildByName("sprFurt").getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,w.Utils.getItemSpName(a.recipe.building)):o.getChildByName("sprFurt").getComponent(cc.Sprite).spriteFrame=null,i[n]?o.getChildByName("sprChar").getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,"char-char_"+i[n]):o.getChildByName("sprChar").getComponent(cc.Sprite).spriteFrame=null}}),this._view.labBuild.string=p.default.GetText("\u53a8\u5177\u4f7f\u7528")+"\uff1a"+s,f.default.instance.removeObjByContainer(this._view.nodeDaliyProductContainer);var g=_.WorkshopMgr.instance.getProductPreview();for(a=0;a<g.length;a++)f.default.instance.createObjectByName("itemChoose",this._view.nodeDaliyProductContainer).getComponent(l.default).initByItemAmont(a,g[a],null)},t.prototype.onClickListBtn=function(){d.default.instance.playAudio("click_2"),this._view.nodePageList[0].active=!1,this._view.nodePageList[1].active=!0,this._view.btnMain.node.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,"ui-UI_Flat_Slot_01_Selected"),this._view.btnHome.node.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,"ui-UI_Flat_Slot_02_Available"),this.onClickMenu(u.default.instance.workShopData.curPlan)},t.prototype.refreshWorkshopList=function(){for(var e=this,t=this._view.nodeWorklistContainer.children.length-1;t>=0;t--){var n=this._view.nodeWorklistContainer.children[t];"btnAdd"!=n.name&&f.default.instance.removeObject(n)}var i=u.default.instance.workShopData;i.planList[i.curPlan].forEach(function(t,n){f.default.instance.createObjectByName("itemWorkshop",e._view.nodeWorklistContainer).getComponent(s.default).init(t,n)}),this._view.btnAdd.node.zIndex=2},t.prototype.onClickMenu=function(e){_.WorkshopMgr.instance.onChooseCurPlan(e),this._view.nodePlanMenu.children.forEach(function(t,n){t.getComponent(cc.Sprite).spriteFrame=m.default.instance.getSprite(b.ResType.main,n==e?"ui-UI_Flat_Slot_02_Available":"ui-UI_Flat_Slot_01_Selected")}),this.refreshWorkshopList()},t.prototype.hideUI=function(){d.default.instance.playAudio("paper2"),this._view.content.active=!1},t.prototype.onClickRecipe=function(){g.default.instance.openUI(C.default,{name:y.Config.uiName.recipeChooseUI})},t.instance=null,n=o([L],t)}(cc.Component));n.default=A,cc._RF.pop()},{"../interface/friend_data":"friend_data","../item/item_choose":"item_choose","../item/item_workshop":"item_workshop","../manager/action_manager":"action_manager","../manager/audio_manager":"audio_manager","../manager/dynamic_data_manager":"dynamic_data_manager","../manager/json_manager":"json_manager","../manager/language_manager":"language_manager","../manager/pool_manager":"pool_manager","../manager/resources_manager":"resources_manager","../manager/ui_manager":"ui_manager","../manager/workshop_manager":"workshop_manager","../ui_view/panel/workshop_ui_view":"workshop_ui_view","../utils/config":"config","../utils/enum":"enum","../utils/utils":"utils","./recipe_choose_ui":"recipe_choose_ui"}]},{},["ATBannerJSSDK","ATInterstitialAutoAdJSSDK","ATInterstitialJSSDK","ATJSSDK","ATNativeJSSDK","ATRewardedVideoAutoAdJSSDK","ATRewardedVideoJSSDK","ATAndroidBannerJS","ATAndroidInterstitialAutoAdJS","ATAndroidInterstitialJS","ATAndroidJS","ATAndroidNativeJS","ATAndroidRewardedVideoAutoAdJS","ATAndroidRewardedVideoJS","ATiOSBannerJS","ATiOSInterstitialAutoAdJS","ATiOSInterstitialJS","ATiOSJS","ATiOSNativeJS","ATiOSRewardedVideoAutoAdJS","ATiOSRewardedVideoJS","buff","i_entity","i_monster","achievement_data","all_shop_data","char_data","collection_data","config_data","festival_data","field_data","friend_data","holiday_data","item_amount","item_data","map_data","meadow_data","plan_data","plot_data","record_data","sale_data","skill_data","workshop_data","animal_state","char_state","fish_state","i_state","anima_help","damage_label","effect_item","item_achievement","item_adventure","item_amount_choose","item_animal","item_animal_choose","item_bag","item_buff","item_building","item_char","item_choose","item_choose_friend","item_collect_animal","item_collect_crop","item_collect_food","item_collect_friend","item_collection","item_costomer","item_dairy_rt","item_drop","item_field","item_food_choose","item_friend","item_furniture_craft","item_kit_craft","item_map_choose","item_market","item_meadow","item_monster","item_need","item_plan","item_plan_field_choose","item_plan_target_choose","item_product_choose","item_quest","item_recipe","item_recipe_choose","item_sale","item_sale_choose","item_seed_choose","item_seed_preview","item_sell","item_shop","item_skill_choose","item_tag","item_talk","item_talk_sys","item_translate","item_workshop","sv_dc_help","item_animal_game","item_fish_pole","item_food_animal","item_game_fish","item_yang_card","item_yang_door","action_manager","ad_manager","audio_manager","background_manager","build_manager","collection_manager","dynamic_data_manager","effect_manager","festival_manager","field_manager","friend_manager","game_manager","guide_manager","help_manager","json_manager","language_manager","main_manager","meadow_manager","plan_manager","pool_manager","quest_manager","record_manager","reddot_manager","resources_manager","sale_manager","sdk_mananger","shop_manager","storage_manager","ui_manager","workshop_manager","adventure_ui","alchemy_ui","all_buff_ui","amount_choose_ui","animal_choose_ui","bag_ui","building_ui","canvas_ui","choose_map_ui","collection_ui","create_role_ui","farm_match_ui","field_detail_ui","field_ui","food_choose_ui","food_match_ui","friend_choose_ui","friend_detail_ui","friend_ui","game_animal_ui","game_fish_ui","game_flower_ui","game_yang_ui","ground_ui","header_ui","help_ui","holiday_ui","infomation_ui","item_choose_ui","item_detail_ui","login_ui","market_ui","meadow_ui","menu_ui","message_box_ui_manager","num_choose_ui","open_chest_ui","open_recipe_ui","plan_ui","pop_text_ui","quest_ui","recipe_choose_ui","reward_tip_ui","sale_choose_ui","sale_ui","season_result_ui","seed_choose_ui","select_tag_ui","setting_ui","shop_ui","start_ui","switch_mask_ui","talk_ui","tip_ui_manager","vip_ui","workshop_ui","item_achievement_view","item_adventure_view","item_amount_choose_view","item_animal_choose_view","item_bag_view","item_building_view","item_choose_friend_view","item_collect_animal_view","item_collect_crop_view","item_collect_food_view","item_collect_friend_view","item_collection_view","item_costomer_view","item_field_view","item_food_choose_view","item_friend_view","item_furniture_craft_view","item_kit_craft_view","item_map_choose_view","item_market_view","item_meadow_view","item_plan_field_choose_view","item_plan_target_choose_view","item_plan_view","item_pole_view","item_quest_view","item_recipe_choose_view","item_recipe_view","item_sale_choose_view","item_sale_view","item_seed_choose_view","item_sell_view","item_shop_view","item_skill_choose_view","item_skill_view","item_talk_view","item_translate_view","item_workshop_view","adventure_ui_view","alchemy_ui_view","all_buff_ui_view","amount_choose_ui_view","animal_choose_ui_view","bag_ui_view","building_ui_view","choose_map_ui_view","collection_ui_view","create_role_ui_view","farm_match_ui_view","field_detail_ui_view","field_ui_view","food_choose_ui_view","food_match_ui_view","friend_choose_ui_view","friend_detail_ui_view","friend_ui_view","game_animal_ui_view","game_fish_ui_view","game_flower_ui_view","game_yang_ui_view","ground_ui_view","header_ui_view","help_ui_view","holiday_ui_view","infomation_ui_view","item_choose_ui_view","item_detail_ui_view","login_ui_view","market_ui_view","meadow_ui_view","menu_ui_view","num_choose_ui_view","open_chest_ui_view","open_recipe_ui_view","plan_ui_view","pop_text_ui_view","quest_ui_view","recipe_choose_ui_view","reward_tip_ui_view","sale_choose_ui_view","sale_ui_view","season_result_ui_view","seed_choose_ui_view","select_tag_ui_view","setting_ui_view","shop_ui_view","talk_ui_view","vip_ui_view","workshop_ui_view","config","emmiter","enum","game_config","message","utils"]);